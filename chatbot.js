(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function Yv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nh={exports:{}},il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function GS(){if(l_)return il;l_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var p in r)p!=="key"&&(l[p]=r[p])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return il.Fragment=e,il.jsx=t,il.jsxs=t,il}var u_;function zS(){return u_||(u_=1,nh.exports=GS()),nh.exports}var se=zS(),ih={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function HS(){if(c_)return Ce;c_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),C=Symbol.iterator;function D(L){return L===null||typeof L!="object"?null:(L=C&&L[C]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,J={};function ne(L,j,le){this.props=L,this.context=j,this.refs=J,this.updater=le||O}ne.prototype.isReactComponent={},ne.prototype.setState=function(L,j){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,j,"setState")},ne.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ie(){}ie.prototype=ne.prototype;function Z(L,j,le){this.props=L,this.context=j,this.refs=J,this.updater=le||O}var ae=Z.prototype=new ie;ae.constructor=Z,H(ae,ne.prototype),ae.isPureReactComponent=!0;var he=Array.isArray;function ue(){}var N={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function M(L,j,le){var de=le.ref;return{$$typeof:n,type:L,key:j,ref:de!==void 0?de:null,props:le}}function x(L,j){return M(L.type,j,L.props)}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function k(L){var j={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(le){return j[le]})}var b=/\/+/g;function tt(L,j){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):j.toString(36)}function ht(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ue,ue):(L.status="pending",L.then(function(j){L.status==="pending"&&(L.status="fulfilled",L.value=j)},function(j){L.status==="pending"&&(L.status="rejected",L.reason=j)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Q(L,j,le,de,Ae){var Me=typeof L;(Me==="undefined"||Me==="boolean")&&(L=null);var ke=!1;if(L===null)ke=!0;else switch(Me){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(L.$$typeof){case n:case e:ke=!0;break;case T:return ke=L._init,Q(ke(L._payload),j,le,de,Ae)}}if(ke)return Ae=Ae(L),ke=de===""?"."+tt(L,0):de,he(Ae)?(le="",ke!=null&&(le=ke.replace(b,"$&/")+"/"),Q(Ae,j,le,"",function(Ys){return Ys})):Ae!=null&&(P(Ae)&&(Ae=x(Ae,le+(Ae.key==null||L&&L.key===Ae.key?"":(""+Ae.key).replace(b,"$&/")+"/")+ke)),j.push(Ae)),1;ke=0;var xt=de===""?".":de+":";if(he(L))for(var lt=0;lt<L.length;lt++)de=L[lt],Me=xt+tt(de,lt),ke+=Q(de,j,le,Me,Ae);else if(lt=D(L),typeof lt=="function")for(L=lt.call(L),lt=0;!(de=L.next()).done;)de=de.value,Me=xt+tt(de,lt++),ke+=Q(de,j,le,Me,Ae);else if(Me==="object"){if(typeof L.then=="function")return Q(ht(L),j,le,de,Ae);throw j=String(L),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return ke}function re(L,j,le){if(L==null)return L;var de=[],Ae=0;return Q(L,de,"","",function(Me){return j.call(le,Me,Ae++)}),de}function Te(L){if(L._status===-1){var j=L._result;j=j(),j.then(function(le){(L._status===0||L._status===-1)&&(L._status=1,L._result=le)},function(le){(L._status===0||L._status===-1)&&(L._status=2,L._result=le)}),L._status===-1&&(L._status=0,L._result=j)}if(L._status===1)return L._result.default;throw L._result}var Be=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Ke={map:re,forEach:function(L,j,le){re(L,function(){j.apply(this,arguments)},le)},count:function(L){var j=0;return re(L,function(){j++}),j},toArray:function(L){return re(L,function(j){return j})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ce.Activity=E,Ce.Children=Ke,Ce.Component=ne,Ce.Fragment=t,Ce.Profiler=r,Ce.PureComponent=Z,Ce.StrictMode=s,Ce.Suspense=y,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(L){return N.H.useMemoCache(L)}},Ce.cache=function(L){return function(){return L.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(L,j,le){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=H({},L.props),Ae=L.key;if(j!=null)for(Me in j.key!==void 0&&(Ae=""+j.key),j)!w.call(j,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&j.ref===void 0||(de[Me]=j[Me]);var Me=arguments.length-2;if(Me===1)de.children=le;else if(1<Me){for(var ke=Array(Me),xt=0;xt<Me;xt++)ke[xt]=arguments[xt+2];de.children=ke}return M(L.type,Ae,de)},Ce.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},Ce.createElement=function(L,j,le){var de,Ae={},Me=null;if(j!=null)for(de in j.key!==void 0&&(Me=""+j.key),j)w.call(j,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ae[de]=j[de]);var ke=arguments.length-2;if(ke===1)Ae.children=le;else if(1<ke){for(var xt=Array(ke),lt=0;lt<ke;lt++)xt[lt]=arguments[lt+2];Ae.children=xt}if(L&&L.defaultProps)for(de in ke=L.defaultProps,ke)Ae[de]===void 0&&(Ae[de]=ke[de]);return M(L,Me,Ae)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(L){return{$$typeof:p,render:L}},Ce.isValidElement=P,Ce.lazy=function(L){return{$$typeof:T,_payload:{_status:-1,_result:L},_init:Te}},Ce.memo=function(L,j){return{$$typeof:g,type:L,compare:j===void 0?null:j}},Ce.startTransition=function(L){var j=N.T,le={};N.T=le;try{var de=L(),Ae=N.S;Ae!==null&&Ae(le,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ue,Be)}catch(Me){Be(Me)}finally{j!==null&&le.types!==null&&(j.types=le.types),N.T=j}},Ce.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ce.use=function(L){return N.H.use(L)},Ce.useActionState=function(L,j,le){return N.H.useActionState(L,j,le)},Ce.useCallback=function(L,j){return N.H.useCallback(L,j)},Ce.useContext=function(L){return N.H.useContext(L)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(L,j){return N.H.useDeferredValue(L,j)},Ce.useEffect=function(L,j){return N.H.useEffect(L,j)},Ce.useEffectEvent=function(L){return N.H.useEffectEvent(L)},Ce.useId=function(){return N.H.useId()},Ce.useImperativeHandle=function(L,j,le){return N.H.useImperativeHandle(L,j,le)},Ce.useInsertionEffect=function(L,j){return N.H.useInsertionEffect(L,j)},Ce.useLayoutEffect=function(L,j){return N.H.useLayoutEffect(L,j)},Ce.useMemo=function(L,j){return N.H.useMemo(L,j)},Ce.useOptimistic=function(L,j){return N.H.useOptimistic(L,j)},Ce.useReducer=function(L,j,le){return N.H.useReducer(L,j,le)},Ce.useRef=function(L){return N.H.useRef(L)},Ce.useState=function(L){return N.H.useState(L)},Ce.useSyncExternalStore=function(L,j,le){return N.H.useSyncExternalStore(L,j,le)},Ce.useTransition=function(){return N.H.useTransition()},Ce.version="19.2.0",Ce}var f_;function Wh(){return f_||(f_=1,ih.exports=HS()),ih.exports}var ft=Wh();const FS=Yv(ft);var sh={exports:{}},sl={},oh={exports:{}},rh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function YS(){return d_||(d_=1,(function(n){function e(Q,re){var Te=Q.length;Q.push(re);e:for(;0<Te;){var Be=Te-1>>>1,Ke=Q[Be];if(0<r(Ke,re))Q[Be]=re,Q[Te]=Ke,Te=Be;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var re=Q[0],Te=Q.pop();if(Te!==re){Q[0]=Te;e:for(var Be=0,Ke=Q.length,L=Ke>>>1;Be<L;){var j=2*(Be+1)-1,le=Q[j],de=j+1,Ae=Q[de];if(0>r(le,Te))de<Ke&&0>r(Ae,le)?(Q[Be]=Ae,Q[de]=Te,Be=de):(Q[Be]=le,Q[j]=Te,Be=j);else if(de<Ke&&0>r(Ae,Te))Q[Be]=Ae,Q[de]=Te,Be=de;else break e}}return re}function r(Q,re){var Te=Q.sortIndex-re.sortIndex;return Te!==0?Te:Q.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,p=c.now();n.unstable_now=function(){return c.now()-p}}var y=[],g=[],T=1,E=null,C=3,D=!1,O=!1,H=!1,J=!1,ne=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ae(Q){for(var re=t(g);re!==null;){if(re.callback===null)s(g);else if(re.startTime<=Q)s(g),re.sortIndex=re.expirationTime,e(y,re);else break;re=t(g)}}function he(Q){if(H=!1,ae(Q),!O)if(t(y)!==null)O=!0,ue||(ue=!0,k());else{var re=t(g);re!==null&&ht(he,re.startTime-Q)}}var ue=!1,N=-1,w=5,M=-1;function x(){return J?!0:!(n.unstable_now()-M<w)}function P(){if(J=!1,ue){var Q=n.unstable_now();M=Q;var re=!0;try{e:{O=!1,H&&(H=!1,ie(N),N=-1),D=!0;var Te=C;try{t:{for(ae(Q),E=t(y);E!==null&&!(E.expirationTime>Q&&x());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,C=E.priorityLevel;var Ke=Be(E.expirationTime<=Q);if(Q=n.unstable_now(),typeof Ke=="function"){E.callback=Ke,ae(Q),re=!0;break t}E===t(y)&&s(y),ae(Q)}else s(y);E=t(y)}if(E!==null)re=!0;else{var L=t(g);L!==null&&ht(he,L.startTime-Q),re=!1}}break e}finally{E=null,C=Te,D=!1}re=void 0}}finally{re?k():ue=!1}}}var k;if(typeof Z=="function")k=function(){Z(P)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,tt=b.port2;b.port1.onmessage=P,k=function(){tt.postMessage(null)}}else k=function(){ne(P,0)};function ht(Q,re){N=ne(function(){Q(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_next=function(Q){switch(C){case 1:case 2:case 3:var re=3;break;default:re=C}var Te=C;C=re;try{return Q()}finally{C=Te}},n.unstable_requestPaint=function(){J=!0},n.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Te=C;C=Q;try{return re()}finally{C=Te}},n.unstable_scheduleCallback=function(Q,re,Te){var Be=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Be+Te:Be):Te=Be,Q){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=Te+Ke,Q={id:T++,callback:re,priorityLevel:Q,startTime:Te,expirationTime:Ke,sortIndex:-1},Te>Be?(Q.sortIndex=Te,e(g,Q),t(y)===null&&Q===t(g)&&(H?(ie(N),N=-1):H=!0,ht(he,Te-Be))):(Q.sortIndex=Ke,e(y,Q),O||D||(O=!0,ue||(ue=!0,k()))),Q},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(Q){var re=C;return function(){var Te=C;C=re;try{return Q.apply(this,arguments)}finally{C=Te}}}})(rh)),rh}var h_;function JS(){return h_||(h_=1,oh.exports=YS()),oh.exports}var ah={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function KS(){if(m_)return Zt;m_=1;var n=Wh();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,g,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:g,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(y,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(y,g,null,T)},Zt.flushSync=function(y){var g=c.T,T=s.p;try{if(c.T=null,s.p=2,y)return y()}finally{c.T=g,s.p=T,s.d.f()}},Zt.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(y,g))},Zt.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Zt.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var T=g.as,E=p(T,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?s.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:D}):T==="script"&&s.d.X(y,{crossOrigin:E,integrity:C,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Zt.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(y)},Zt.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,E=p(T,g.crossOrigin);s.d.L(y,T,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Zt.preloadModule=function(y,g){if(typeof y=="string")if(g){var T=p(g.as,g.crossOrigin);s.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(y)},Zt.requestFormReset=function(y){s.d.r(y)},Zt.unstable_batchedUpdates=function(y,g){return y(g)},Zt.useFormState=function(y,g,T){return c.H.useFormState(y,g,T)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.2.0",Zt}var p_;function QS(){if(p_)return ah.exports;p_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ah.exports=KS(),ah.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function XS(){if(g_)return sl;g_=1;var n=JS(),e=Wh(),t=QS();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function p(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(s(188))}function g(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,u=o;;){var m=a.return;if(m===null)break;var _=m.alternate;if(_===null){if(u=m.return,u!==null){a=u;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===a)return y(m),i;if(_===u)return y(m),o;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=m,u=_;else{for(var A=!1,R=m.child;R;){if(R===a){A=!0,a=m,u=_;break}if(R===u){A=!0,u=m,a=_;break}R=R.sibling}if(!A){for(R=_.child;R;){if(R===a){A=!0,a=_,u=m;break}if(R===u){A=!0,u=_,a=m;break}R=R.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function T(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=T(i),o!==null)return o;i=i.sibling}return null}var E=Object.assign,C=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var b=Symbol.for("react.client.reference");function tt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case H:return"Fragment";case ne:return"Profiler";case J:return"StrictMode";case he:return"Suspense";case ue:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case O:return"Portal";case Z:return i.displayName||"Context";case ie:return(i._context.displayName||"Context")+".Consumer";case ae:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return o=i.displayName||null,o!==null?o:tt(i.type)||"Memo";case w:o=i._payload,i=i._init;try{return tt(i(o))}catch{}}return null}var ht=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Be=[],Ke=-1;function L(i){return{current:i}}function j(i){0>Ke||(i.current=Be[Ke],Be[Ke]=null,Ke--)}function le(i,o){Ke++,Be[Ke]=i.current,i.current=o}var de=L(null),Ae=L(null),Me=L(null),ke=L(null);function xt(i,o){switch(le(Me,o),le(Ae,i),le(de,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?by(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=by(o),i=Vy(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}j(de),le(de,i)}function lt(){j(de),j(Ae),j(Me)}function Ys(i){i.memoizedState!==null&&le(ke,i);var o=de.current,a=Vy(o,i.type);o!==a&&(le(Ae,i),le(de,a))}function Po(i){Ae.current===i&&(j(de),j(Ae)),ke.current===i&&(j(ke),ja._currentValue=Te)}var Uo,Lo;function ei(i){if(Uo===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Uo=o&&o[1]||"",Lo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Uo+i+Lo}var jr=!1;function Js(i,o){if(!i||jr)return"";jr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var F=K}Reflect.construct(i,[],W)}else{try{W.call()}catch(K){F=K}i.call(W.prototype)}}else{try{throw Error()}catch(K){F=K}(W=i())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&F&&typeof K.stack=="string")return[K.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],R=_[1];if(A&&R){var V=A.split(`
`),z=R.split(`
`);for(m=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;if(u===V.length||m===z.length)for(u=V.length-1,m=z.length-1;1<=u&&0<=m&&V[u]!==z[m];)m--;for(;1<=u&&0<=m;u--,m--)if(V[u]!==z[m]){if(u!==1||m!==1)do if(u--,m--,0>m||V[u]!==z[m]){var X=`
`+V[u].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=u&&0<=m);break}}}finally{jr=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ei(a):""}function ea(i,o){switch(i.tag){case 26:case 27:case 5:return ei(i.type);case 16:return ei("Lazy");case 13:return i.child!==o&&o!==null?ei("Suspense Fallback"):ei("Suspense");case 19:return ei("SuspenseList");case 0:case 15:return Js(i.type,!1);case 11:return Js(i.type.render,!1);case 1:return Js(i.type,!0);case 31:return ei("Activity");default:return""}}function ta(i){try{var o="",a=null;do o+=ea(i,a),a=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Et=Object.prototype.hasOwnProperty,Pt=n.unstable_scheduleCallback,Wi=n.unstable_cancelCallback,sf=n.unstable_shouldYield,Vl=n.unstable_requestPaint,nn=n.unstable_now,Ks=n.unstable_getCurrentPriorityLevel,na=n.unstable_ImmediatePriority,ia=n.unstable_UserBlockingPriority,ji=n.unstable_NormalPriority,of=n.unstable_LowPriority,xl=n.unstable_IdlePriority,Pl=n.log,Ul=n.unstable_setDisableYieldValue,On=null,zt=null;function Sn(i){if(typeof Pl=="function"&&Ul(i),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(On,i)}catch{}}var gt=Math.clz32?Math.clz32:kl,Ll=Math.log,ko=Math.LN2;function kl(i){return i>>>=0,i===0?32:31-(Ll(i)/ko|0)|0}var ti=256,Qs=262144,At=4194304;function ni(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ii(i,o,a){var u=i.pendingLanes;if(u===0)return 0;var m=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var R=u&134217727;return R!==0?(u=R&~_,u!==0?m=ni(u):(A&=R,A!==0?m=ni(A):a||(a=R&~i,a!==0&&(m=ni(a))))):(R=u&~_,R!==0?m=ni(R):A!==0?m=ni(A):a||(a=u&~i,a!==0&&(m=ni(a)))),m===0?0:o!==0&&o!==m&&(o&_)===0&&(_=m&-m,a=o&-o,_>=a||_===32&&(a&4194048)!==0)?o:m}function Bn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function rf(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ql(){var i=At;return At<<=1,(At&62914560)===0&&(At=4194304),i}function si(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function Xs(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function af(i,o,a,u,m,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,V=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var X=31-gt(a),W=1<<X;R[X]=0,V[X]=-1;var F=z[X];if(F!==null)for(z[X]=null,X=0;X<F.length;X++){var K=F[X];K!==null&&(K.lane&=-536870913)}a&=~W}u!==0&&$s(i,u,0),_!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~o))}function $s(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-gt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function sa(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var u=31-gt(a),m=1<<u;m&o|i[u]&o&&(i[u]|=o),a&=~m}}function oa(i,o){var a=o&-o;return a=(a&42)!==0?1:Zs(a),(a&(i.suspendedLanes|o))!==0?0:a}function Zs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ni(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ol(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:t_(i.type))}function Gn(i,o){var a=re.p;try{return re.p=i,o()}finally{re.p=a}}var zn=Math.random().toString(36).slice(2),St="__reactFiber$"+zn,kt="__reactProps$"+zn,oi="__reactContainer$"+zn,qo="__reactEvents$"+zn,lf="__reactListeners$"+zn,Bl="__reactHandles$"+zn,Gl="__reactResources$"+zn,ri="__reactMarker$"+zn;function Oo(i){delete i[St],delete i[kt],delete i[qo],delete i[lf],delete i[Bl]}function ai(i){var o=i[St];if(o)return o;for(var a=i.parentNode;a;){if(o=a[oi]||a[St]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=Oy(i);i!==null;){if(a=i[St])return a;i=Oy(i)}return o}i=a,a=i.parentNode}return null}function Cn(i){if(i=i[St]||i[oi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function mn(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function li(i){var o=i[Gl];return o||(o=i[Gl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ct(i){i[ri]=!0}var ra=new Set,aa={};function ui(i,o){ci(i,o),ci(i+"Capture",o)}function ci(i,o){for(aa[i]=o,i=0;i<o.length;i++)ra.add(o[i])}var la=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ua={},ca={};function zl(i){return Et.call(ca,i)?!0:Et.call(ua,i)?!1:la.test(i)?ca[i]=!0:(ua[i]=!0,!1)}function Bo(i,o,a){if(zl(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function pn(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function Rt(i,o,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+u)}}function qt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function es(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function fa(i,o,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Qe(i){if(!i._valueTracker){var o=es(i)?"checked":"value";i._valueTracker=fa(i,o,""+i[o])}}function Ws(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return i&&(u=es(i)?i.checked?"true":"false":i.value),i=u,i!==a?(o.setValue(i),!0):!1}function fi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var js=/[\n"\\]/g;function rn(i){return i.replace(js,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Go(i,o,a,u,m,_,A,R){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+qt(o)):i.value!==""+qt(o)&&(i.value=""+qt(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?da(i,A,qt(o)):a!=null?da(i,A,qt(a)):u!=null&&i.removeAttribute("value"),m==null&&_!=null&&(i.defaultChecked=!!_),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+qt(R):i.removeAttribute("name")}function Hl(i,o,a,u,m,_,A,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),o!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){Qe(i);return}a=a!=null?""+qt(a):"",o=o!=null?""+qt(o):a,R||o===i.value||(i.value=o),i.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=R?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),Qe(i)}function da(i,o,a){o==="number"&&fi(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ts(i,o,a,u){if(i=i.options,o){o={};for(var m=0;m<a.length;m++)o["$"+a[m]]=!0;for(a=0;a<i.length;a++)m=o.hasOwnProperty("$"+i[a].value),i[a].selected!==m&&(i[a].selected=m),m&&u&&(i[a].defaultSelected=!0)}else{for(a=""+qt(a),o=null,m=0;m<i.length;m++){if(i[m].value===a){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function Fl(i,o,a){if(o!=null&&(o=""+qt(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+qt(a):""}function ns(i,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(ht(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=qt(o),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Qe(i)}function an(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var Yl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ha(i,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,a):typeof a!="number"||a===0||Yl.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function ma(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&a[m]!==u&&ha(i,m,u)}else for(var _ in o)o.hasOwnProperty(_)&&ha(i,_,o[_])}function zo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),is=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(i){return is.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Hn(){}var pa=null;function Rn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ss=null,di=null;function eo(i){var o=Cn(i);if(o&&(i=o.stateNode)){var a=i[kt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Go(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+rn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==i&&u.form===i.form){var m=u[kt]||null;if(!m)throw Error(s(90));Go(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===i.form&&Ws(u)}break e;case"textarea":Fl(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&ts(i,!!a.multiple,o,!1)}}}var Fo=!1;function os(i,o,a){if(Fo)return i(o,a);Fo=!0;try{var u=i(o);return u}finally{if(Fo=!1,(ss!==null||di!==null)&&(Ou(),ss&&(o=ss,i=di,di=ss=null,eo(o),i)))for(o=0;o<i.length;o++)eo(i[o])}}function Fn(i,o){var a=i.stateNode;if(a===null)return null;var u=a[kt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(In)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){to=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{to=!1}var hi=null,ga=null,no=null;function ya(){if(no)return no;var i,o=ga,a=o.length,u,m="value"in hi?hi.value:hi.textContent,_=m.length;for(i=0;i<a&&o[i]===m[i];i++);var A=a-i;for(u=1;u<=A&&o[a-u]===m[_-u];u++);return no=m.slice(i,1<u?1-u:void 0)}function io(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Di(){return!0}function Yn(){return!1}function Ht(i){function o(a,u,m,_,A){this._reactName=a,this._targetInst=m,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Di:Yn,this.isPropagationStopped=Yn,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),o}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=Ht(bi),rs=E({},bi,{view:0,detail:0}),_a=Ht(rs),as,Yo,pi,Jo=E({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ls,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pi&&(pi&&i.type==="mousemove"?(as=i.screenX-pi.screenX,Yo=i.screenY-pi.screenY):Yo=as=0,pi=i),as)},movementY:function(i){return"movementY"in i?i.movementY:Yo}}),Ta=Ht(Jo),so=E({},Jo,{dataTransfer:0}),Kl=Ht(so),Ql=E({},rs,{relatedTarget:0}),oo=Ht(Ql),va=E({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=Ht(va),Ko=E({},bi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),$l=Ht(Ko),Zl=E({},bi,{data:0}),gi=Ht(Zl),Wl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=eu[i])?!!o[i]:!1}function ls(){return tu}var sn=E({},rs,{key:function(i){if(i.key){var o=Wl[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?jl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ls,charCode:function(i){return i.type==="keypress"?io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),nu=Ht(sn),iu=E({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=Ht(iu),d=E({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ls}),v=Ht(d),S=E({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Ht(S),B=E({},Jo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Ht(B),oe=E({},bi,{newState:0,oldState:0}),Ie=Ht(oe),yt=[9,13,27,32],Fe=In&&"CompositionEvent"in window,ut=null;In&&"documentMode"in document&&(ut=document.documentMode);var wn=In&&"TextEvent"in window&&!ut,yi=In&&(!Fe||ut&&8<ut&&11>=ut),Jn=" ",Kn=!1;function ro(i,o){switch(i){case"keyup":return yt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qo(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Xo=!1;function f0(i,o){switch(i){case"compositionend":return Qo(o);case"keypress":return o.which!==32?null:(Kn=!0,Jn);case"textInput":return i=o.data,i===Jn&&Kn?null:i;default:return null}}function d0(i,o){if(Xo)return i==="compositionend"||!Fe&&ro(i,o)?(i=ya(),no=ga=hi=null,Xo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return yi&&o.locale!=="ko"?null:o.data;default:return null}}var h0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!h0[i.type]:o==="textarea"}function Hm(i,o,a,u){ss?di?di.push(u):di=[u]:ss=u,o=Ju(o,"onChange"),0<o.length&&(a=new mi("onChange","change",null,a,u),i.push({event:a,listeners:o}))}var Ea=null,Aa=null;function m0(i){Ry(i,0)}function su(i){var o=mn(i);if(Ws(o))return i}function Fm(i,o){if(i==="change")return o}var Ym=!1;if(In){var uf;if(In){var cf="oninput"in document;if(!cf){var Jm=document.createElement("div");Jm.setAttribute("oninput","return;"),cf=typeof Jm.oninput=="function"}uf=cf}else uf=!1;Ym=uf&&(!document.documentMode||9<document.documentMode)}function Km(){Ea&&(Ea.detachEvent("onpropertychange",Qm),Aa=Ea=null)}function Qm(i){if(i.propertyName==="value"&&su(Aa)){var o=[];Hm(o,Aa,i,Rn(i)),os(m0,o)}}function p0(i,o,a){i==="focusin"?(Km(),Ea=o,Aa=a,Ea.attachEvent("onpropertychange",Qm)):i==="focusout"&&Km()}function g0(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return su(Aa)}function y0(i,o){if(i==="click")return su(o)}function _0(i,o){if(i==="input"||i==="change")return su(o)}function T0(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var gn=typeof Object.is=="function"?Object.is:T0;function Sa(i,o){if(gn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var m=a[u];if(!Et.call(o,m)||!gn(i[m],o[m]))return!1}return!0}function Xm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $m(i,o){var a=Xm(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=o&&u>=o)return{node:a,offset:o-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xm(a)}}function Zm(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Zm(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Wm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=fi(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=fi(i.document)}return o}function ff(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var v0=In&&"documentMode"in document&&11>=document.documentMode,$o=null,df=null,Ca=null,hf=!1;function jm(i,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hf||$o==null||$o!==fi(u)||(u=$o,"selectionStart"in u&&ff(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ca&&Sa(Ca,u)||(Ca=u,u=Ju(df,"onSelect"),0<u.length&&(o=new mi("onSelect","select",null,o,a),i.push({event:o,listeners:u}),o.target=$o)))}function ao(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Zo={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},mf={},ep={};In&&(ep=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function lo(i){if(mf[i])return mf[i];if(!Zo[i])return i;var o=Zo[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in ep)return mf[i]=o[a];return i}var tp=lo("animationend"),np=lo("animationiteration"),ip=lo("animationstart"),E0=lo("transitionrun"),A0=lo("transitionstart"),S0=lo("transitioncancel"),sp=lo("transitionend"),op=new Map,pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pf.push("scrollEnd");function Qn(i,o){op.set(i,o),ui(o,[i])}var ou=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Mn=[],Wo=0,gf=0;function ru(){for(var i=Wo,o=gf=Wo=0;o<i;){var a=Mn[o];Mn[o++]=null;var u=Mn[o];Mn[o++]=null;var m=Mn[o];Mn[o++]=null;var _=Mn[o];if(Mn[o++]=null,u!==null&&m!==null){var A=u.pending;A===null?m.next=m:(m.next=A.next,A.next=m),u.pending=m}_!==0&&rp(a,m,_)}}function au(i,o,a,u){Mn[Wo++]=i,Mn[Wo++]=o,Mn[Wo++]=a,Mn[Wo++]=u,gf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function yf(i,o,a,u){return au(i,o,a,u),lu(i)}function uo(i,o){return au(i,null,null,o),lu(i)}function rp(i,o,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var m=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(m=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,m&&o!==null&&(m=31-gt(a),i=_.hiddenUpdates,u=i[m],u===null?i[m]=[o]:u.push(o),o.lane=a|536870912),_):null}function lu(i){if(50<Ja)throw Ja=0,Id=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var jo={};function C0(i,o,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(i,o,a,u){return new C0(i,o,a,u)}function _f(i){return i=i.prototype,!(!i||!i.isReactComponent)}function xi(i,o){var a=i.alternate;return a===null?(a=yn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function ap(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function uu(i,o,a,u,m,_){var A=0;if(u=i,typeof i=="function")_f(i)&&(A=1);else if(typeof i=="string")A=NS(i,a,de.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=yn(31,a,o,m),i.elementType=M,i.lanes=_,i;case H:return co(a.children,m,_,o);case J:A=8,m|=24;break;case ne:return i=yn(12,a,o,m|2),i.elementType=ne,i.lanes=_,i;case he:return i=yn(13,a,o,m),i.elementType=he,i.lanes=_,i;case ue:return i=yn(19,a,o,m),i.elementType=ue,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Z:A=10;break e;case ie:A=9;break e;case ae:A=11;break e;case N:A=14;break e;case w:A=16,u=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=yn(A,a,o,m),o.elementType=i,o.type=u,o.lanes=_,o}function co(i,o,a,u){return i=yn(7,i,u,o),i.lanes=a,i}function Tf(i,o,a){return i=yn(6,i,null,o),i.lanes=a,i}function lp(i){var o=yn(18,null,null,0);return o.stateNode=i,o}function vf(i,o,a){return o=yn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var up=new WeakMap;function Nn(i,o){if(typeof i=="object"&&i!==null){var a=up.get(i);return a!==void 0?a:(o={value:i,source:o,stack:ta(o)},up.set(i,o),o)}return{value:i,source:o,stack:ta(o)}}var er=[],tr=0,cu=null,Ra=0,Dn=[],bn=0,us=null,_i=1,Ti="";function Pi(i,o){er[tr++]=Ra,er[tr++]=cu,cu=i,Ra=o}function cp(i,o,a){Dn[bn++]=_i,Dn[bn++]=Ti,Dn[bn++]=us,us=i;var u=_i;i=Ti;var m=32-gt(u)-1;u&=~(1<<m),a+=1;var _=32-gt(o)+m;if(30<_){var A=m-m%5;_=(u&(1<<A)-1).toString(32),u>>=A,m-=A,_i=1<<32-gt(o)+m|a<<m|u,Ti=_+i}else _i=1<<_|a<<m|u,Ti=i}function Ef(i){i.return!==null&&(Pi(i,1),cp(i,1,0))}function Af(i){for(;i===cu;)cu=er[--tr],er[tr]=null,Ra=er[--tr],er[tr]=null;for(;i===us;)us=Dn[--bn],Dn[bn]=null,Ti=Dn[--bn],Dn[bn]=null,_i=Dn[--bn],Dn[bn]=null}function fp(i,o){Dn[bn++]=_i,Dn[bn++]=Ti,Dn[bn++]=us,_i=o.id,Ti=o.overflow,us=i}var Ft=null,st=null,Le=!1,cs=null,Vn=!1,Sf=Error(s(519));function fs(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ia(Nn(o,i)),Sf}function dp(i){var o=i.stateNode,a=i.type,u=i.memoizedProps;switch(o[St]=i,o[kt]=u,a){case"dialog":be("cancel",o),be("close",o);break;case"iframe":case"object":case"embed":be("load",o);break;case"video":case"audio":for(a=0;a<Qa.length;a++)be(Qa[a],o);break;case"source":be("error",o);break;case"img":case"image":case"link":be("error",o),be("load",o);break;case"details":be("toggle",o);break;case"input":be("invalid",o),Hl(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":be("invalid",o);break;case"textarea":be("invalid",o),ns(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||Ny(o.textContent,a)?(u.popover!=null&&(be("beforetoggle",o),be("toggle",o)),u.onScroll!=null&&be("scroll",o),u.onScrollEnd!=null&&be("scrollend",o),u.onClick!=null&&(o.onclick=Hn),o=!0):o=!1,o||fs(i,!0)}function hp(i){for(Ft=i.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:Ft=Ft.return}}function nr(i){if(i!==Ft)return!1;if(!Le)return hp(i),Le=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Gd(i.type,i.memoizedProps)),a=!a),a&&st&&fs(i),hp(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));st=qy(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));st=qy(i)}else o===27?(o=st,Rs(i.type)?(i=Jd,Jd=null,st=i):st=o):st=Ft?Pn(i.stateNode.nextSibling):null;return!0}function fo(){st=Ft=null,Le=!1}function Cf(){var i=cs;return i!==null&&(fn===null?fn=i:fn.push.apply(fn,i),cs=null),i}function Ia(i){cs===null?cs=[i]:cs.push(i)}var Rf=L(null),ho=null,Ui=null;function ds(i,o,a){le(Rf,o._currentValue),o._currentValue=a}function Li(i){i._currentValue=Rf.current,j(Rf)}function If(i,o,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===a)break;i=i.return}}function wf(i,o,a,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var _=m.dependencies;if(_!==null){var A=m.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=m;for(var V=0;V<o.length;V++)if(R.context===o[V]){_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),If(_.return,a,i),u||(A=null);break e}_=R.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(s(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),If(A,a,i),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===i){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function ir(i,o,a,u){i=null;for(var m=o,_=!1;m!==null;){if(!_){if((m.flags&524288)!==0)_=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var R=m.type;gn(m.pendingProps.value,A.value)||(i!==null?i.push(R):i=[R])}}else if(m===ke.current){if(A=m.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(ja):i=[ja])}m=m.return}i!==null&&wf(o,i,a,u),o.flags|=262144}function fu(i){for(i=i.firstContext;i!==null;){if(!gn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function mo(i){ho=i,Ui=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yt(i){return mp(ho,i)}function du(i,o){return ho===null&&mo(i),mp(i,o)}function mp(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Ui===null){if(i===null)throw Error(s(308));Ui=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Ui=Ui.next=o;return a}var R0=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},I0=n.unstable_scheduleCallback,w0=n.unstable_NormalPriority,It={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new R0,data:new Map,refCount:0}}function wa(i){i.refCount--,i.refCount===0&&I0(w0,function(){i.controller.abort()})}var Ma=null,Nf=0,sr=0,or=null;function M0(i,o){if(Ma===null){var a=Ma=[];Nf=0,sr=Vd(),or={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Nf++,o.then(pp,pp),o}function pp(){if(--Nf===0&&Ma!==null){or!==null&&(or.status="fulfilled");var i=Ma;Ma=null,sr=0,or=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function N0(i,o){var a=[],u={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<a.length;m++)(0,a[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),u}var gp=Q.S;Q.S=function(i,o){jg=nn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&M0(i,o),gp!==null&&gp(i,o)};var po=L(null);function Df(){var i=po.current;return i!==null?i:nt.pooledCache}function hu(i,o){o===null?le(po,po.current):le(po,o.pool)}function yp(){var i=Df();return i===null?null:{parent:It._currentValue,pool:i}}var rr=Error(s(460)),bf=Error(s(474)),mu=Error(s(542)),pu={then:function(){}};function _p(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Tp(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Hn,Hn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Ep(i),i;default:if(typeof o.status=="string")o.then(Hn,Hn);else{if(i=nt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Ep(i),i}throw yo=o,rr}}function go(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(yo=a,rr):a}}var yo=null;function vp(){if(yo===null)throw Error(s(459));var i=yo;return yo=null,i}function Ep(i){if(i===rr||i===mu)throw Error(s(483))}var ar=null,Na=0;function gu(i){var o=Na;return Na+=1,ar===null&&(ar=[]),Tp(ar,i,o)}function Da(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function yu(i,o){throw o.$$typeof===C?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Ap(i){function o(q,U){if(i){var G=q.deletions;G===null?(q.deletions=[U],q.flags|=16):G.push(U)}}function a(q,U){if(!i)return null;for(;U!==null;)o(q,U),U=U.sibling;return null}function u(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function m(q,U){return q=xi(q,U),q.index=0,q.sibling=null,q}function _(q,U,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<U?(q.flags|=67108866,U):G):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function A(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function R(q,U,G,$){return U===null||U.tag!==6?(U=Tf(G,q.mode,$),U.return=q,U):(U=m(U,G),U.return=q,U)}function V(q,U,G,$){var ye=G.type;return ye===H?X(q,U,G.props.children,$,G.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===w&&go(ye)===U.type)?(U=m(U,G.props),Da(U,G),U.return=q,U):(U=uu(G.type,G.key,G.props,null,q.mode,$),Da(U,G),U.return=q,U)}function z(q,U,G,$){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=vf(G,q.mode,$),U.return=q,U):(U=m(U,G.children||[]),U.return=q,U)}function X(q,U,G,$,ye){return U===null||U.tag!==7?(U=co(G,q.mode,$,ye),U.return=q,U):(U=m(U,G),U.return=q,U)}function W(q,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Tf(""+U,q.mode,G),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return G=uu(U.type,U.key,U.props,null,q.mode,G),Da(G,U),G.return=q,G;case O:return U=vf(U,q.mode,G),U.return=q,U;case w:return U=go(U),W(q,U,G)}if(ht(U)||k(U))return U=co(U,q.mode,G,null),U.return=q,U;if(typeof U.then=="function")return W(q,gu(U),G);if(U.$$typeof===Z)return W(q,du(q,U),G);yu(q,U)}return null}function F(q,U,G,$){var ye=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return ye!==null?null:R(q,U,""+G,$);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case D:return G.key===ye?V(q,U,G,$):null;case O:return G.key===ye?z(q,U,G,$):null;case w:return G=go(G),F(q,U,G,$)}if(ht(G)||k(G))return ye!==null?null:X(q,U,G,$,null);if(typeof G.then=="function")return F(q,U,gu(G),$);if(G.$$typeof===Z)return F(q,U,du(q,G),$);yu(q,G)}return null}function K(q,U,G,$,ye){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return q=q.get(G)||null,R(U,q,""+$,ye);if(typeof $=="object"&&$!==null){switch($.$$typeof){case D:return q=q.get($.key===null?G:$.key)||null,V(U,q,$,ye);case O:return q=q.get($.key===null?G:$.key)||null,z(U,q,$,ye);case w:return $=go($),K(q,U,G,$,ye)}if(ht($)||k($))return q=q.get(G)||null,X(U,q,$,ye,null);if(typeof $.then=="function")return K(q,U,G,gu($),ye);if($.$$typeof===Z)return K(q,U,G,du(U,$),ye);yu(U,$)}return null}function me(q,U,G,$){for(var ye=null,Ge=null,ge=U,Ne=U=0,xe=null;ge!==null&&Ne<G.length;Ne++){ge.index>Ne?(xe=ge,ge=null):xe=ge.sibling;var ze=F(q,ge,G[Ne],$);if(ze===null){ge===null&&(ge=xe);break}i&&ge&&ze.alternate===null&&o(q,ge),U=_(ze,U,Ne),Ge===null?ye=ze:Ge.sibling=ze,Ge=ze,ge=xe}if(Ne===G.length)return a(q,ge),Le&&Pi(q,Ne),ye;if(ge===null){for(;Ne<G.length;Ne++)ge=W(q,G[Ne],$),ge!==null&&(U=_(ge,U,Ne),Ge===null?ye=ge:Ge.sibling=ge,Ge=ge);return Le&&Pi(q,Ne),ye}for(ge=u(ge);Ne<G.length;Ne++)xe=K(ge,q,Ne,G[Ne],$),xe!==null&&(i&&xe.alternate!==null&&ge.delete(xe.key===null?Ne:xe.key),U=_(xe,U,Ne),Ge===null?ye=xe:Ge.sibling=xe,Ge=xe);return i&&ge.forEach(function(Ds){return o(q,Ds)}),Le&&Pi(q,Ne),ye}function ve(q,U,G,$){if(G==null)throw Error(s(151));for(var ye=null,Ge=null,ge=U,Ne=U=0,xe=null,ze=G.next();ge!==null&&!ze.done;Ne++,ze=G.next()){ge.index>Ne?(xe=ge,ge=null):xe=ge.sibling;var Ds=F(q,ge,ze.value,$);if(Ds===null){ge===null&&(ge=xe);break}i&&ge&&Ds.alternate===null&&o(q,ge),U=_(Ds,U,Ne),Ge===null?ye=Ds:Ge.sibling=Ds,Ge=Ds,ge=xe}if(ze.done)return a(q,ge),Le&&Pi(q,Ne),ye;if(ge===null){for(;!ze.done;Ne++,ze=G.next())ze=W(q,ze.value,$),ze!==null&&(U=_(ze,U,Ne),Ge===null?ye=ze:Ge.sibling=ze,Ge=ze);return Le&&Pi(q,Ne),ye}for(ge=u(ge);!ze.done;Ne++,ze=G.next())ze=K(ge,q,Ne,ze.value,$),ze!==null&&(i&&ze.alternate!==null&&ge.delete(ze.key===null?Ne:ze.key),U=_(ze,U,Ne),Ge===null?ye=ze:Ge.sibling=ze,Ge=ze);return i&&ge.forEach(function(BS){return o(q,BS)}),Le&&Pi(q,Ne),ye}function et(q,U,G,$){if(typeof G=="object"&&G!==null&&G.type===H&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case D:e:{for(var ye=G.key;U!==null;){if(U.key===ye){if(ye=G.type,ye===H){if(U.tag===7){a(q,U.sibling),$=m(U,G.props.children),$.return=q,q=$;break e}}else if(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===w&&go(ye)===U.type){a(q,U.sibling),$=m(U,G.props),Da($,G),$.return=q,q=$;break e}a(q,U);break}else o(q,U);U=U.sibling}G.type===H?($=co(G.props.children,q.mode,$,G.key),$.return=q,q=$):($=uu(G.type,G.key,G.props,null,q.mode,$),Da($,G),$.return=q,q=$)}return A(q);case O:e:{for(ye=G.key;U!==null;){if(U.key===ye)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(q,U.sibling),$=m(U,G.children||[]),$.return=q,q=$;break e}else{a(q,U);break}else o(q,U);U=U.sibling}$=vf(G,q.mode,$),$.return=q,q=$}return A(q);case w:return G=go(G),et(q,U,G,$)}if(ht(G))return me(q,U,G,$);if(k(G)){if(ye=k(G),typeof ye!="function")throw Error(s(150));return G=ye.call(G),ve(q,U,G,$)}if(typeof G.then=="function")return et(q,U,gu(G),$);if(G.$$typeof===Z)return et(q,U,du(q,G),$);yu(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(q,U.sibling),$=m(U,G),$.return=q,q=$):(a(q,U),$=Tf(G,q.mode,$),$.return=q,q=$),A(q)):a(q,U)}return function(q,U,G,$){try{Na=0;var ye=et(q,U,G,$);return ar=null,ye}catch(ge){if(ge===rr||ge===mu)throw ge;var Ge=yn(29,ge,null,q.mode);return Ge.lanes=$,Ge.return=q,Ge}finally{}}}var _o=Ap(!0),Sp=Ap(!1),hs=!1;function Vf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ms(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ps(i,o,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=lu(i),rp(i,null,a),o}return au(i,u,o,a),lu(i)}function ba(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,sa(i,a)}}function Pf(i,o){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var m=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?m=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?m=_=o:_=_.next=o}else m=_=o;a={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var Uf=!1;function Va(){if(Uf){var i=or;if(i!==null)throw i}}function xa(i,o,a,u){Uf=!1;var m=i.updateQueue;hs=!1;var _=m.firstBaseUpdate,A=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var V=R,z=V.next;V.next=null,A===null?_=z:A.next=z,A=V;var X=i.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==A&&(R===null?X.firstBaseUpdate=z:R.next=z,X.lastBaseUpdate=V))}if(_!==null){var W=m.baseState;A=0,X=z=V=null,R=_;do{var F=R.lane&-536870913,K=F!==R.lane;if(K?(Ve&F)===F:(u&F)===F){F!==0&&F===sr&&(Uf=!0),X!==null&&(X=X.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var me=i,ve=R;F=o;var et=a;switch(ve.tag){case 1:if(me=ve.payload,typeof me=="function"){W=me.call(et,W,F);break e}W=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ve.payload,F=typeof me=="function"?me.call(et,W,F):me,F==null)break e;W=E({},W,F);break e;case 2:hs=!0}}F=R.callback,F!==null&&(i.flags|=64,K&&(i.flags|=8192),K=m.callbacks,K===null?m.callbacks=[F]:K.push(F))}else K={lane:F,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(z=X=K,V=W):X=X.next=K,A|=F;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;K=R,R=K.next,K.next=null,m.lastBaseUpdate=K,m.shared.pending=null}}while(!0);X===null&&(V=W),m.baseState=V,m.firstBaseUpdate=z,m.lastBaseUpdate=X,_===null&&(m.shared.lanes=0),vs|=A,i.lanes=A,i.memoizedState=W}}function Cp(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Rp(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Cp(a[i],o)}var lr=L(null),_u=L(0);function Ip(i,o){i=Yi,le(_u,i),le(lr,o),Yi=i|o.baseLanes}function Lf(){le(_u,Yi),le(lr,lr.current)}function kf(){Yi=_u.current,j(lr),j(_u)}var _n=L(null),xn=null;function gs(i){var o=i.alternate;le(_t,_t.current&1),le(_n,i),xn===null&&(o===null||lr.current!==null||o.memoizedState!==null)&&(xn=i)}function qf(i){le(_t,_t.current),le(_n,i),xn===null&&(xn=i)}function wp(i){i.tag===22?(le(_t,_t.current),le(_n,i),xn===null&&(xn=i)):ys()}function ys(){le(_t,_t.current),le(_n,_n.current)}function Tn(i){j(_n),xn===i&&(xn=null),j(_t)}var _t=L(0);function Tu(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Fd(a)||Yd(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ki=0,we=null,We=null,wt=null,vu=!1,ur=!1,To=!1,Eu=0,Pa=0,cr=null,D0=0;function mt(){throw Error(s(321))}function Of(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!gn(i[a],o[a]))return!1;return!0}function Bf(i,o,a,u,m,_){return ki=_,we=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Q.H=i===null||i.memoizedState===null?cg:td,To=!1,_=a(u,m),To=!1,ur&&(_=Np(o,a,u,m)),Mp(i),_}function Mp(i){Q.H=ka;var o=We!==null&&We.next!==null;if(ki=0,wt=We=we=null,vu=!1,Pa=0,cr=null,o)throw Error(s(300));i===null||Mt||(i=i.dependencies,i!==null&&fu(i)&&(Mt=!0))}function Np(i,o,a,u){we=i;var m=0;do{if(ur&&(cr=null),Pa=0,ur=!1,25<=m)throw Error(s(301));if(m+=1,wt=We=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Q.H=fg,_=o(a,u)}while(ur);return _}function b0(){var i=Q.H,o=i.useState()[0];return o=typeof o.then=="function"?Ua(o):o,i=i.useState()[0],(We!==null?We.memoizedState:null)!==i&&(we.flags|=1024),o}function Gf(){var i=Eu!==0;return Eu=0,i}function zf(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function Hf(i){if(vu){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}vu=!1}ki=0,wt=We=we=null,ur=!1,Pa=Eu=0,cr=null}function on(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?we.memoizedState=wt=i:wt=wt.next=i,wt}function Tt(){if(We===null){var i=we.alternate;i=i!==null?i.memoizedState:null}else i=We.next;var o=wt===null?we.memoizedState:wt.next;if(o!==null)wt=o,We=i;else{if(i===null)throw we.alternate===null?Error(s(467)):Error(s(310));We=i,i={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},wt===null?we.memoizedState=wt=i:wt=wt.next=i}return wt}function Au(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ua(i){var o=Pa;return Pa+=1,cr===null&&(cr=[]),i=Tp(cr,i,o),o=we,(wt===null?o.memoizedState:wt.next)===null&&(o=o.alternate,Q.H=o===null||o.memoizedState===null?cg:td),i}function Su(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ua(i);if(i.$$typeof===Z)return Yt(i)}throw Error(s(438,String(i)))}function Ff(i){var o=null,a=we.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Au(),we.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),u=0;u<i;u++)a[u]=x;return o.index++,a}function qi(i,o){return typeof o=="function"?o(i):o}function Cu(i){var o=Tt();return Yf(o,We,i)}function Yf(i,o,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var m=i.baseQueue,_=u.pending;if(_!==null){if(m!==null){var A=m.next;m.next=_.next,_.next=A}o.baseQueue=m=_,u.pending=null}if(_=i.baseState,m===null)i.memoizedState=_;else{o=m.next;var R=A=null,V=null,z=o,X=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(Ve&W)===W:(ki&W)===W){var F=z.revertLane;if(F===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===sr&&(X=!0);else if((ki&F)===F){z=z.next,F===sr&&(X=!0);continue}else W={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},V===null?(R=V=W,A=_):V=V.next=W,we.lanes|=F,vs|=F;W=z.action,To&&a(_,W),_=z.hasEagerState?z.eagerState:a(_,W)}else F={lane:W,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},V===null?(R=V=F,A=_):V=V.next=F,we.lanes|=W,vs|=W;z=z.next}while(z!==null&&z!==o);if(V===null?A=_:V.next=R,!gn(_,i.memoizedState)&&(Mt=!0,X&&(a=or,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=V,u.lastRenderedState=_}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Jf(i){var o=Tt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,m=a.pending,_=o.memoizedState;if(m!==null){a.pending=null;var A=m=m.next;do _=i(_,A.action),A=A.next;while(A!==m);gn(_,o.memoizedState)||(Mt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),a.lastRenderedState=_}return[_,u]}function Dp(i,o,a){var u=we,m=Tt(),_=Le;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=o();var A=!gn((We||m).memoizedState,a);if(A&&(m.memoizedState=a,Mt=!0),m=m.queue,Xf(xp.bind(null,u,m,i),[i]),m.getSnapshot!==o||A||wt!==null&&wt.memoizedState.tag&1){if(u.flags|=2048,fr(9,{destroy:void 0},Vp.bind(null,u,m,a,o),null),nt===null)throw Error(s(349));_||(ki&127)!==0||bp(u,o,a)}return a}function bp(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=we.updateQueue,o===null?(o=Au(),we.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Vp(i,o,a,u){o.value=a,o.getSnapshot=u,Pp(o)&&Up(i)}function xp(i,o,a){return a(function(){Pp(o)&&Up(i)})}function Pp(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!gn(i,a)}catch{return!0}}function Up(i){var o=uo(i,2);o!==null&&dn(o,i,2)}function Kf(i){var o=on();if(typeof i=="function"){var a=i;if(i=a(),To){Sn(!0);try{a()}finally{Sn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:i},o}function Lp(i,o,a,u){return i.baseState=a,Yf(i,We,typeof u=="function"?u:qi)}function V0(i,o,a,u,m){if(wu(i))throw Error(s(485));if(i=o.action,i!==null){var _={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};Q.T!==null?a(!0):_.isTransition=!1,u(_),a=o.pending,a===null?(_.next=o.pending=_,kp(o,_)):(_.next=a.next,o.pending=a.next=_)}}function kp(i,o){var a=o.action,u=o.payload,m=i.state;if(o.isTransition){var _=Q.T,A={};Q.T=A;try{var R=a(m,u),V=Q.S;V!==null&&V(A,R),qp(i,o,R)}catch(z){Qf(i,o,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),Q.T=_}}else try{_=a(m,u),qp(i,o,_)}catch(z){Qf(i,o,z)}}function qp(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Op(i,o,u)},function(u){return Qf(i,o,u)}):Op(i,o,a)}function Op(i,o,a){o.status="fulfilled",o.value=a,Bp(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,kp(i,a)))}function Qf(i,o,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,Bp(o),o=o.next;while(o!==u)}i.action=null}function Bp(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Gp(i,o){return o}function zp(i,o){if(Le){var a=nt.formState;if(a!==null){e:{var u=we;if(Le){if(st){t:{for(var m=st,_=Vn;m.nodeType!==8;){if(!_){m=null;break t}if(m=Pn(m.nextSibling),m===null){m=null;break t}}_=m.data,m=_==="F!"||_==="F"?m:null}if(m){st=Pn(m.nextSibling),u=m.data==="F!";break e}}fs(u)}u=!1}u&&(o=a[0])}}return a=on(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gp,lastRenderedState:o},a.queue=u,a=ag.bind(null,we,u),u.dispatch=a,u=Kf(!1),_=ed.bind(null,we,!1,u.queue),u=on(),m={state:o,dispatch:null,action:i,pending:null},u.queue=m,a=V0.bind(null,we,m,_,a),m.dispatch=a,u.memoizedState=i,[o,a,!1]}function Hp(i){var o=Tt();return Fp(o,We,i)}function Fp(i,o,a){if(o=Yf(i,o,Gp)[0],i=Cu(qi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Ua(o)}catch(A){throw A===rr?mu:A}else u=o;o=Tt();var m=o.queue,_=m.dispatch;return a!==o.memoizedState&&(we.flags|=2048,fr(9,{destroy:void 0},x0.bind(null,m,a),null)),[u,_,i]}function x0(i,o){i.action=o}function Yp(i){var o=Tt(),a=We;if(a!==null)return Fp(o,a,i);Tt(),o=o.memoizedState,a=Tt();var u=a.queue.dispatch;return a.memoizedState=i,[o,u,!1]}function fr(i,o,a,u){return i={tag:i,create:a,deps:u,inst:o,next:null},o=we.updateQueue,o===null&&(o=Au(),we.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,o.lastEffect=i),i}function Jp(){return Tt().memoizedState}function Ru(i,o,a,u){var m=on();we.flags|=i,m.memoizedState=fr(1|o,{destroy:void 0},a,u===void 0?null:u)}function Iu(i,o,a,u){var m=Tt();u=u===void 0?null:u;var _=m.memoizedState.inst;We!==null&&u!==null&&Of(u,We.memoizedState.deps)?m.memoizedState=fr(o,_,a,u):(we.flags|=i,m.memoizedState=fr(1|o,_,a,u))}function Kp(i,o){Ru(8390656,8,i,o)}function Xf(i,o){Iu(2048,8,i,o)}function P0(i){we.flags|=4;var o=we.updateQueue;if(o===null)o=Au(),we.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function Qp(i){var o=Tt().memoizedState;return P0({ref:o,nextImpl:i}),function(){if((Ye&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Xp(i,o){return Iu(4,2,i,o)}function $p(i,o){return Iu(4,4,i,o)}function Zp(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Wp(i,o,a){a=a!=null?a.concat([i]):null,Iu(4,4,Zp.bind(null,o,i),a)}function $f(){}function jp(i,o){var a=Tt();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&Of(o,u[1])?u[0]:(a.memoizedState=[i,o],i)}function eg(i,o){var a=Tt();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&Of(o,u[1]))return u[0];if(u=i(),To){Sn(!0);try{i()}finally{Sn(!1)}}return a.memoizedState=[u,o],u}function Zf(i,o,a){return a===void 0||(ki&1073741824)!==0&&(Ve&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=ty(),we.lanes|=i,vs|=i,a)}function tg(i,o,a,u){return gn(a,o)?a:lr.current!==null?(i=Zf(i,a,u),gn(i,o)||(Mt=!0),i):(ki&42)===0||(ki&1073741824)!==0&&(Ve&261930)===0?(Mt=!0,i.memoizedState=a):(i=ty(),we.lanes|=i,vs|=i,o)}function ng(i,o,a,u,m){var _=re.p;re.p=_!==0&&8>_?_:8;var A=Q.T,R={};Q.T=R,ed(i,!1,o,a);try{var V=m(),z=Q.S;if(z!==null&&z(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var X=N0(V,u);La(i,o,X,An(i))}else La(i,o,u,An(i))}catch(W){La(i,o,{then:function(){},status:"rejected",reason:W},An())}finally{re.p=_,A!==null&&R.types!==null&&(A.types=R.types),Q.T=A}}function U0(){}function Wf(i,o,a,u){if(i.tag!==5)throw Error(s(476));var m=ig(i).queue;ng(i,m,o,Te,a===null?U0:function(){return sg(i),a(u)})}function ig(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:Te},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function sg(i){var o=ig(i);o.next===null&&(o=i.alternate.memoizedState),La(i,o.next.queue,{},An())}function jf(){return Yt(ja)}function og(){return Tt().memoizedState}function rg(){return Tt().memoizedState}function L0(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=An();i=ms(a);var u=ps(o,i,a);u!==null&&(dn(u,o,a),ba(u,o,a)),o={cache:Mf()},i.payload=o;return}o=o.return}}function k0(i,o,a){var u=An();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wu(i)?lg(o,a):(a=yf(i,o,a,u),a!==null&&(dn(a,i,u),ug(a,o,u)))}function ag(i,o,a){var u=An();La(i,o,a,u)}function La(i,o,a,u){var m={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wu(i))lg(o,m);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,R=_(A,a);if(m.hasEagerState=!0,m.eagerState=R,gn(R,A))return au(i,o,m,0),nt===null&&ru(),!1}catch{}finally{}if(a=yf(i,o,m,u),a!==null)return dn(a,i,u),ug(a,o,u),!0}return!1}function ed(i,o,a,u){if(u={lane:2,revertLane:Vd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},wu(i)){if(o)throw Error(s(479))}else o=yf(i,a,u,2),o!==null&&dn(o,i,2)}function wu(i){var o=i.alternate;return i===we||o!==null&&o===we}function lg(i,o){ur=vu=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function ug(i,o,a){if((a&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,sa(i,a)}}var ka={readContext:Yt,use:Su,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};ka.useEffectEvent=mt;var cg={readContext:Yt,use:Su,useCallback:function(i,o){return on().memoizedState=[i,o===void 0?null:o],i},useContext:Yt,useEffect:Kp,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Ru(4194308,4,Zp.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Ru(4194308,4,i,o)},useInsertionEffect:function(i,o){Ru(4,2,i,o)},useMemo:function(i,o){var a=on();o=o===void 0?null:o;var u=i();if(To){Sn(!0);try{i()}finally{Sn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(i,o,a){var u=on();if(a!==void 0){var m=a(o);if(To){Sn(!0);try{a(o)}finally{Sn(!1)}}}else m=o;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=k0.bind(null,we,i),[u.memoizedState,i]},useRef:function(i){var o=on();return i={current:i},o.memoizedState=i},useState:function(i){i=Kf(i);var o=i.queue,a=ag.bind(null,we,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:$f,useDeferredValue:function(i,o){var a=on();return Zf(a,i,o)},useTransition:function(){var i=Kf(!1);return i=ng.bind(null,we,i.queue,!0,!1),on().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var u=we,m=on();if(Le){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),nt===null)throw Error(s(349));(Ve&127)!==0||bp(u,o,a)}m.memoizedState=a;var _={value:a,getSnapshot:o};return m.queue=_,Kp(xp.bind(null,u,_,i),[i]),u.flags|=2048,fr(9,{destroy:void 0},Vp.bind(null,u,_,a,o),null),a},useId:function(){var i=on(),o=nt.identifierPrefix;if(Le){var a=Ti,u=_i;a=(u&~(1<<32-gt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Eu++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=D0++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:jf,useFormState:zp,useActionState:zp,useOptimistic:function(i){var o=on();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=ed.bind(null,we,!0,a),a.dispatch=o,[i,o]},useMemoCache:Ff,useCacheRefresh:function(){return on().memoizedState=L0.bind(null,we)},useEffectEvent:function(i){var o=on(),a={impl:i};return o.memoizedState=a,function(){if((Ye&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},td={readContext:Yt,use:Su,useCallback:jp,useContext:Yt,useEffect:Xf,useImperativeHandle:Wp,useInsertionEffect:Xp,useLayoutEffect:$p,useMemo:eg,useReducer:Cu,useRef:Jp,useState:function(){return Cu(qi)},useDebugValue:$f,useDeferredValue:function(i,o){var a=Tt();return tg(a,We.memoizedState,i,o)},useTransition:function(){var i=Cu(qi)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:Ua(i),o]},useSyncExternalStore:Dp,useId:og,useHostTransitionStatus:jf,useFormState:Hp,useActionState:Hp,useOptimistic:function(i,o){var a=Tt();return Lp(a,We,i,o)},useMemoCache:Ff,useCacheRefresh:rg};td.useEffectEvent=Qp;var fg={readContext:Yt,use:Su,useCallback:jp,useContext:Yt,useEffect:Xf,useImperativeHandle:Wp,useInsertionEffect:Xp,useLayoutEffect:$p,useMemo:eg,useReducer:Jf,useRef:Jp,useState:function(){return Jf(qi)},useDebugValue:$f,useDeferredValue:function(i,o){var a=Tt();return We===null?Zf(a,i,o):tg(a,We.memoizedState,i,o)},useTransition:function(){var i=Jf(qi)[0],o=Tt().memoizedState;return[typeof i=="boolean"?i:Ua(i),o]},useSyncExternalStore:Dp,useId:og,useHostTransitionStatus:jf,useFormState:Yp,useActionState:Yp,useOptimistic:function(i,o){var a=Tt();return We!==null?Lp(a,We,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Ff,useCacheRefresh:rg};fg.useEffectEvent=Qp;function nd(i,o,a,u){o=i.memoizedState,a=a(u,o),a=a==null?o:E({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var id={enqueueSetState:function(i,o,a){i=i._reactInternals;var u=An(),m=ms(u);m.payload=o,a!=null&&(m.callback=a),o=ps(i,m,u),o!==null&&(dn(o,i,u),ba(o,i,u))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var u=An(),m=ms(u);m.tag=1,m.payload=o,a!=null&&(m.callback=a),o=ps(i,m,u),o!==null&&(dn(o,i,u),ba(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=An(),u=ms(a);u.tag=2,o!=null&&(u.callback=o),o=ps(i,u,a),o!==null&&(dn(o,i,a),ba(o,i,a))}};function dg(i,o,a,u,m,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):o.prototype&&o.prototype.isPureReactComponent?!Sa(a,u)||!Sa(m,_):!0}function hg(i,o,a,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==i&&id.enqueueReplaceState(o,o.state,null)}function vo(i,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(i=i.defaultProps){a===o&&(a=E({},a));for(var m in i)a[m]===void 0&&(a[m]=i[m])}return a}function mg(i){ou(i)}function pg(i){console.error(i)}function gg(i){ou(i)}function Mu(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function yg(i,o,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function sd(i,o,a){return a=ms(a),a.tag=3,a.payload={element:null},a.callback=function(){Mu(i,o)},a}function _g(i){return i=ms(i),i.tag=3,i}function Tg(i,o,a,u){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var _=u.value;i.payload=function(){return m(_)},i.callback=function(){yg(o,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){yg(o,a,u),typeof m!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function q0(i,o,a,u,m){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&ir(o,a,m,!0),a=_n.current,a!==null){switch(a.tag){case 31:case 13:return xn===null?Bu():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=m,u===pu?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),Nd(i,u,m)),!1;case 22:return a.flags|=65536,u===pu?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),Nd(i,u,m)),!1}throw Error(s(435,a.tag))}return Nd(i,u,m),Bu(),!1}if(Le)return o=_n.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==Sf&&(i=Error(s(422),{cause:u}),Ia(Nn(i,a)))):(u!==Sf&&(o=Error(s(423),{cause:u}),Ia(Nn(o,a))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=Nn(u,a),m=sd(i.stateNode,u,m),Pf(i,m),pt!==4&&(pt=2)),!1;var _=Error(s(520),{cause:u});if(_=Nn(_,a),Ya===null?Ya=[_]:Ya.push(_),pt!==4&&(pt=2),o===null)return!0;u=Nn(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=m&-m,a.lanes|=i,i=sd(a.stateNode,u,i),Pf(a,i),!1;case 1:if(o=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Es===null||!Es.has(_))))return a.flags|=65536,m&=-m,a.lanes|=m,m=_g(m),Tg(m,i,a,u),Pf(a,m),!1}a=a.return}while(a!==null);return!1}var od=Error(s(461)),Mt=!1;function Jt(i,o,a,u){o.child=i===null?Sp(o,null,a,u):_o(o,i.child,a,u)}function vg(i,o,a,u,m){a=a.render;var _=o.ref;if("ref"in u){var A={};for(var R in u)R!=="ref"&&(A[R]=u[R])}else A=u;return mo(o),u=Bf(i,o,a,A,_,m),R=Gf(),i!==null&&!Mt?(zf(i,o,m),Oi(i,o,m)):(Le&&R&&Ef(o),o.flags|=1,Jt(i,o,u,m),o.child)}function Eg(i,o,a,u,m){if(i===null){var _=a.type;return typeof _=="function"&&!_f(_)&&_.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=_,Ag(i,o,_,u,m)):(i=uu(a.type,null,u,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,!hd(i,m)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(A,u)&&i.ref===o.ref)return Oi(i,o,m)}return o.flags|=1,i=xi(_,u),i.ref=o.ref,i.return=o,o.child=i}function Ag(i,o,a,u,m){if(i!==null){var _=i.memoizedProps;if(Sa(_,u)&&i.ref===o.ref)if(Mt=!1,o.pendingProps=u=_,hd(i,m))(i.flags&131072)!==0&&(Mt=!0);else return o.lanes=i.lanes,Oi(i,o,m)}return rd(i,o,a,u,m)}function Sg(i,o,a,u){var m=u.children,_=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=o.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~_}else u=0,o.child=null;return Cg(i,o,_,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&hu(o,_!==null?_.cachePool:null),_!==null?Ip(o,_):Lf(),wp(o);else return u=o.lanes=536870912,Cg(i,o,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(hu(o,_.cachePool),Ip(o,_),ys(),o.memoizedState=null):(i!==null&&hu(o,null),Lf(),ys());return Jt(i,o,m,a),o.child}function qa(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Cg(i,o,a,u,m){var _=Df();return _=_===null?null:{parent:It._currentValue,pool:_},o.memoizedState={baseLanes:a,cachePool:_},i!==null&&hu(o,null),Lf(),wp(o),i!==null&&ir(i,o,u,!0),o.childLanes=m,null}function Nu(i,o){return o=bu({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Rg(i,o,a){return _o(o,i.child,null,a),i=Nu(o,o.pendingProps),i.flags|=2,Tn(o),o.memoizedState=null,i}function O0(i,o,a){var u=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Le){if(u.mode==="hidden")return i=Nu(o,u),o.lanes=536870912,qa(null,i);if(qf(o),(i=st)?(i=ky(i,Vn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:us!==null?{id:_i,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},a=lp(i),a.return=o,o.child=a,Ft=o,st=null)):i=null,i===null)throw fs(o);return o.lanes=536870912,null}return Nu(o,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(qf(o),m)if(o.flags&256)o.flags&=-257,o=Rg(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Mt||ir(i,o,a,!1),m=(a&i.childLanes)!==0,Mt||m){if(u=nt,u!==null&&(A=oa(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,uo(i,A),dn(u,i,A),od;Bu(),o=Rg(i,o,a)}else i=_.treeContext,st=Pn(A.nextSibling),Ft=o,Le=!0,cs=null,Vn=!1,i!==null&&fp(o,i),o=Nu(o,u),o.flags|=4096;return o}return i=xi(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Du(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function rd(i,o,a,u,m){return mo(o),a=Bf(i,o,a,u,void 0,m),u=Gf(),i!==null&&!Mt?(zf(i,o,m),Oi(i,o,m)):(Le&&u&&Ef(o),o.flags|=1,Jt(i,o,a,m),o.child)}function Ig(i,o,a,u,m,_){return mo(o),o.updateQueue=null,a=Np(o,u,a,m),Mp(i),u=Gf(),i!==null&&!Mt?(zf(i,o,_),Oi(i,o,_)):(Le&&u&&Ef(o),o.flags|=1,Jt(i,o,a,_),o.child)}function wg(i,o,a,u,m){if(mo(o),o.stateNode===null){var _=jo,A=a.contextType;typeof A=="object"&&A!==null&&(_=Yt(A)),_=new a(u,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=id,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=u,_.state=o.memoizedState,_.refs={},Vf(o),A=a.contextType,_.context=typeof A=="object"&&A!==null?Yt(A):jo,_.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(nd(o,a,A,u),_.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&id.enqueueReplaceState(_,_.state,null),xa(o,u,_,m),Va(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){_=o.stateNode;var R=o.memoizedProps,V=vo(a,R);_.props=V;var z=_.context,X=a.contextType;A=jo,typeof X=="object"&&X!==null&&(A=Yt(X));var W=a.getDerivedStateFromProps;X=typeof W=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,X||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||z!==A)&&hg(o,_,u,A),hs=!1;var F=o.memoizedState;_.state=F,xa(o,u,_,m),Va(),z=o.memoizedState,R||F!==z||hs?(typeof W=="function"&&(nd(o,a,W,u),z=o.memoizedState),(V=hs||dg(o,a,V,u,F,z,A))?(X||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=z),_.props=u,_.state=z,_.context=A,u=V):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{_=o.stateNode,xf(i,o),A=o.memoizedProps,X=vo(a,A),_.props=X,W=o.pendingProps,F=_.context,z=a.contextType,V=jo,typeof z=="object"&&z!==null&&(V=Yt(z)),R=a.getDerivedStateFromProps,(z=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==W||F!==V)&&hg(o,_,u,V),hs=!1,F=o.memoizedState,_.state=F,xa(o,u,_,m),Va();var K=o.memoizedState;A!==W||F!==K||hs||i!==null&&i.dependencies!==null&&fu(i.dependencies)?(typeof R=="function"&&(nd(o,a,R,u),K=o.memoizedState),(X=hs||dg(o,a,X,u,F,K,V)||i!==null&&i.dependencies!==null&&fu(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,K,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,K,V)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&F===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&F===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=K),_.props=u,_.state=K,_.context=V,u=X):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&F===i.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&F===i.memoizedState||(o.flags|=1024),u=!1)}return _=u,Du(i,o),u=(o.flags&128)!==0,_||u?(_=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,i!==null&&u?(o.child=_o(o,i.child,null,m),o.child=_o(o,null,a,m)):Jt(i,o,a,m),o.memoizedState=_.state,i=o.child):i=Oi(i,o,m),i}function Mg(i,o,a,u){return fo(),o.flags|=256,Jt(i,o,a,u),o.child}var ad={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ld(i){return{baseLanes:i,cachePool:yp()}}function ud(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=En),i}function Ng(i,o,a){var u=o.pendingProps,m=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(_t.current&2)!==0),A&&(m=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(Le){if(m?gs(o):ys(),(i=st)?(i=ky(i,Vn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:us!==null?{id:_i,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},a=lp(i),a.return=o,o.child=a,Ft=o,st=null)):i=null,i===null)throw fs(o);return Yd(i)?o.lanes=32:o.lanes=536870912,null}var R=u.children;return u=u.fallback,m?(ys(),m=o.mode,R=bu({mode:"hidden",children:R},m),u=co(u,m,a,null),R.return=o,u.return=o,R.sibling=u,o.child=R,u=o.child,u.memoizedState=ld(a),u.childLanes=ud(i,A,a),o.memoizedState=ad,qa(null,u)):(gs(o),cd(o,R))}var V=i.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(_)o.flags&256?(gs(o),o.flags&=-257,o=fd(i,o,a)):o.memoizedState!==null?(ys(),o.child=i.child,o.flags|=128,o=null):(ys(),R=u.fallback,m=o.mode,u=bu({mode:"visible",children:u.children},m),R=co(R,m,a,null),R.flags|=2,u.return=o,R.return=o,u.sibling=R,o.child=u,_o(o,i.child,null,a),u=o.child,u.memoizedState=ld(a),u.childLanes=ud(i,A,a),o.memoizedState=ad,o=qa(null,u));else if(gs(o),Yd(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var z=A.dgst;A=z,u=Error(s(419)),u.stack="",u.digest=A,Ia({value:u,source:null,stack:null}),o=fd(i,o,a)}else if(Mt||ir(i,o,a,!1),A=(a&i.childLanes)!==0,Mt||A){if(A=nt,A!==null&&(u=oa(A,a),u!==0&&u!==V.retryLane))throw V.retryLane=u,uo(i,u),dn(A,i,u),od;Fd(R)||Bu(),o=fd(i,o,a)}else Fd(R)?(o.flags|=192,o.child=i.child,o=null):(i=V.treeContext,st=Pn(R.nextSibling),Ft=o,Le=!0,cs=null,Vn=!1,i!==null&&fp(o,i),o=cd(o,u.children),o.flags|=4096);return o}return m?(ys(),R=u.fallback,m=o.mode,V=i.child,z=V.sibling,u=xi(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,z!==null?R=xi(z,R):(R=co(R,m,a,null),R.flags|=2),R.return=o,u.return=o,u.sibling=R,o.child=u,qa(null,u),u=o.child,R=i.child.memoizedState,R===null?R=ld(a):(m=R.cachePool,m!==null?(V=It._currentValue,m=m.parent!==V?{parent:V,pool:V}:m):m=yp(),R={baseLanes:R.baseLanes|a,cachePool:m}),u.memoizedState=R,u.childLanes=ud(i,A,a),o.memoizedState=ad,qa(i.child,u)):(gs(o),a=i.child,i=a.sibling,a=xi(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=a,o.memoizedState=null,a)}function cd(i,o){return o=bu({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function bu(i,o){return i=yn(22,i,null,o),i.lanes=0,i}function fd(i,o,a){return _o(o,i.child,null,a),i=cd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Dg(i,o,a){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),If(i.return,o,a)}function dd(i,o,a,u,m,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:m,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=m,A.treeForkCount=_)}function bg(i,o,a){var u=o.pendingProps,m=u.revealOrder,_=u.tail;u=u.children;var A=_t.current,R=(A&2)!==0;if(R?(A=A&1|2,o.flags|=128):A&=1,le(_t,A),Jt(i,o,u,a),u=Le?Ra:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Dg(i,a,o);else if(i.tag===19)Dg(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(a=o.child,m=null;a!==null;)i=a.alternate,i!==null&&Tu(i)===null&&(m=a),a=a.sibling;a=m,a===null?(m=o.child,o.child=null):(m=a.sibling,a.sibling=null),dd(o,!1,m,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Tu(i)===null){o.child=m;break}i=m.sibling,m.sibling=a,a=m,m=i}dd(o,!0,a,null,_,u);break;case"together":dd(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Oi(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),vs|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(ir(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=xi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=xi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function hd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&fu(i)))}function B0(i,o,a){switch(o.tag){case 3:xt(o,o.stateNode.containerInfo),ds(o,It,i.memoizedState.cache),fo();break;case 27:case 5:Ys(o);break;case 4:xt(o,o.stateNode.containerInfo);break;case 10:ds(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,qf(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(gs(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Ng(i,o,a):(gs(o),i=Oi(i,o,a),i!==null?i.sibling:null);gs(o);break;case 19:var m=(i.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(ir(i,o,a,!1),u=(a&o.childLanes)!==0),m){if(u)return bg(i,o,a);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),le(_t,_t.current),u)break;return null;case 22:return o.lanes=0,Sg(i,o,a,o.pendingProps);case 24:ds(o,It,i.memoizedState.cache)}return Oi(i,o,a)}function Vg(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Mt=!0;else{if(!hd(i,a)&&(o.flags&128)===0)return Mt=!1,B0(i,o,a);Mt=(i.flags&131072)!==0}else Mt=!1,Le&&(o.flags&1048576)!==0&&cp(o,Ra,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=go(o.elementType),o.type=i,typeof i=="function")_f(i)?(u=vo(i,u),o.tag=1,o=wg(null,o,i,u,a)):(o.tag=0,o=rd(null,o,i,u,a));else{if(i!=null){var m=i.$$typeof;if(m===ae){o.tag=11,o=vg(null,o,i,u,a);break e}else if(m===N){o.tag=14,o=Eg(null,o,i,u,a);break e}}throw o=tt(i)||i,Error(s(306,o,""))}}return o;case 0:return rd(i,o,o.type,o.pendingProps,a);case 1:return u=o.type,m=vo(u,o.pendingProps),wg(i,o,u,m,a);case 3:e:{if(xt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var _=o.memoizedState;m=_.element,xf(i,o),xa(o,u,null,a);var A=o.memoizedState;if(u=A.cache,ds(o,It,u),u!==_.cache&&wf(o,[It],a,!0),Va(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=Mg(i,o,u,a);break e}else if(u!==m){m=Nn(Error(s(424)),o),Ia(m),o=Mg(i,o,u,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(st=Pn(i.firstChild),Ft=o,Le=!0,cs=null,Vn=!0,a=Sp(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fo(),u===m){o=Oi(i,o,a);break e}Jt(i,o,u,a)}o=o.child}return o;case 26:return Du(i,o),i===null?(a=Hy(o.type,null,o.pendingProps,null))?o.memoizedState=a:Le||(a=o.type,i=o.pendingProps,u=Ku(Me.current).createElement(a),u[St]=o,u[kt]=i,Kt(u,a,i),Ct(u),o.stateNode=u):o.memoizedState=Hy(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ys(o),i===null&&Le&&(u=o.stateNode=By(o.type,o.pendingProps,Me.current),Ft=o,Vn=!0,m=st,Rs(o.type)?(Jd=m,st=Pn(u.firstChild)):st=m),Jt(i,o,o.pendingProps.children,a),Du(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Le&&((m=u=st)&&(u=gS(u,o.type,o.pendingProps,Vn),u!==null?(o.stateNode=u,Ft=o,st=Pn(u.firstChild),Vn=!1,m=!0):m=!1),m||fs(o)),Ys(o),m=o.type,_=o.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,Gd(m,_)?u=null:A!==null&&Gd(m,A)&&(o.flags|=32),o.memoizedState!==null&&(m=Bf(i,o,b0,null,null,a),ja._currentValue=m),Du(i,o),Jt(i,o,u,a),o.child;case 6:return i===null&&Le&&((i=a=st)&&(a=yS(a,o.pendingProps,Vn),a!==null?(o.stateNode=a,Ft=o,st=null,i=!0):i=!1),i||fs(o)),null;case 13:return Ng(i,o,a);case 4:return xt(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=_o(o,null,u,a):Jt(i,o,u,a),o.child;case 11:return vg(i,o,o.type,o.pendingProps,a);case 7:return Jt(i,o,o.pendingProps,a),o.child;case 8:return Jt(i,o,o.pendingProps.children,a),o.child;case 12:return Jt(i,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,ds(o,o.type,u.value),Jt(i,o,u.children,a),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,mo(o),m=Yt(m),u=u(m),o.flags|=1,Jt(i,o,u,a),o.child;case 14:return Eg(i,o,o.type,o.pendingProps,a);case 15:return Ag(i,o,o.type,o.pendingProps,a);case 19:return bg(i,o,a);case 31:return O0(i,o,a);case 22:return Sg(i,o,a,o.pendingProps);case 24:return mo(o),u=Yt(It),i===null?(m=Df(),m===null&&(m=nt,_=Mf(),m.pooledCache=_,_.refCount++,_!==null&&(m.pooledCacheLanes|=a),m=_),o.memoizedState={parent:u,cache:m},Vf(o),ds(o,It,m)):((i.lanes&a)!==0&&(xf(i,o),xa(o,null,null,a),Va()),m=i.memoizedState,_=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),ds(o,It,u)):(u=_.cache,ds(o,It,u),u!==m.cache&&wf(o,[It],a,!0))),Jt(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Bi(i){i.flags|=4}function md(i,o,a,u,m){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(oy())i.flags|=8192;else throw yo=pu,bf}else i.flags&=-16777217}function xg(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Qy(o))if(oy())i.flags|=8192;else throw yo=pu,bf}function Vu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?ql():536870912,i.lanes|=o,pr|=o)}function Oa(i,o){if(!Le)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ot(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(o)for(var m=i.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)a|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=a,o}function G0(i,o,a){var u=o.pendingProps;switch(Af(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(o),null;case 1:return ot(o),null;case 3:return a=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Li(It),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(nr(o)?Bi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Cf())),ot(o),null;case 26:var m=o.type,_=o.memoizedState;return i===null?(Bi(o),_!==null?(ot(o),xg(o,_)):(ot(o),md(o,m,null,u,a))):_?_!==i.memoizedState?(Bi(o),ot(o),xg(o,_)):(ot(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&Bi(o),ot(o),md(o,m,i,u,a)),null;case 27:if(Po(o),a=Me.current,m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Bi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ot(o),null}i=de.current,nr(o)?dp(o):(i=By(m,u,a),o.stateNode=i,Bi(o))}return ot(o),null;case 5:if(Po(o),m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Bi(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ot(o),null}if(_=de.current,nr(o))dp(o);else{var A=Ku(Me.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(m,{is:u.is}):A.createElement(m)}}_[St]=o,_[kt]=u;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(Kt(_,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Bi(o)}}return ot(o),md(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&Bi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=Me.current,nr(o)){if(i=o.stateNode,a=o.memoizedProps,u=null,m=Ft,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[St]=o,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Ny(i.nodeValue,a)),i||fs(o,!0)}else i=Ku(i).createTextNode(u),i[St]=o,o.stateNode=i}return ot(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(u=nr(o),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[St]=o}else fo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),i=!1}else a=Cf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(Tn(o),o):(Tn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return ot(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=nr(o),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[St]=o}else fo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),m=!1}else m=Cf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Tn(o),o):(Tn(o),null)}return Tn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==m&&(u.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),Vu(o,o.updateQueue),ot(o),null);case 4:return lt(),i===null&&Ld(o.stateNode.containerInfo),ot(o),null;case 10:return Li(o.type),ot(o),null;case 19:if(j(_t),u=o.memoizedState,u===null)return ot(o),null;if(m=(o.flags&128)!==0,_=u.rendering,_===null)if(m)Oa(u,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(_=Tu(i),_!==null){for(o.flags|=128,Oa(u,!1),i=_.updateQueue,o.updateQueue=i,Vu(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)ap(a,i),a=a.sibling;return le(_t,_t.current&1|2),Le&&Pi(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&nn()>ku&&(o.flags|=128,m=!0,Oa(u,!1),o.lanes=4194304)}else{if(!m)if(i=Tu(_),i!==null){if(o.flags|=128,m=!0,i=i.updateQueue,o.updateQueue=i,Vu(o,i),Oa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Le)return ot(o),null}else 2*nn()-u.renderingStartTime>ku&&a!==536870912&&(o.flags|=128,m=!0,Oa(u,!1),o.lanes=4194304);u.isBackwards?(_.sibling=o.child,o.child=_):(i=u.last,i!==null?i.sibling=_:o.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=nn(),i.sibling=null,a=_t.current,le(_t,m?a&1|2:a&1),Le&&Pi(o,u.treeForkCount),i):(ot(o),null);case 22:case 23:return Tn(o),kf(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(ot(o),o.subtreeFlags&6&&(o.flags|=8192)):ot(o),a=o.updateQueue,a!==null&&Vu(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),i!==null&&j(po),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Li(It),ot(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function z0(i,o){switch(Af(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Li(It),lt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Po(o),null;case 31:if(o.memoizedState!==null){if(Tn(o),o.alternate===null)throw Error(s(340));fo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Tn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));fo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return j(_t),null;case 4:return lt(),null;case 10:return Li(o.type),null;case 22:case 23:return Tn(o),kf(),i!==null&&j(po),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Li(It),null;case 25:return null;default:return null}}function Pg(i,o){switch(Af(o),o.tag){case 3:Li(It),lt();break;case 26:case 27:case 5:Po(o);break;case 4:lt();break;case 31:o.memoizedState!==null&&Tn(o);break;case 13:Tn(o);break;case 19:j(_t);break;case 10:Li(o.type);break;case 22:case 23:Tn(o),kf(),i!==null&&j(po);break;case 24:Li(It)}}function Ba(i,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var m=u.next;a=m;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==m)}}catch(R){$e(o,o.return,R)}}function _s(i,o,a){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var _=m.next;u=_;do{if((u.tag&i)===i){var A=u.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,m=o;var V=a,z=R;try{z()}catch(X){$e(m,V,X)}}}u=u.next}while(u!==_)}}catch(X){$e(o,o.return,X)}}function Ug(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Rp(o,a)}catch(u){$e(i,i.return,u)}}}function Lg(i,o,a){a.props=vo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){$e(i,o,u)}}function Ga(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(m){$e(i,o,m)}}function vi(i,o){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(m){$e(i,o,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){$e(i,o,m)}else a.current=null}function kg(i){var o=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(m){$e(i,i.return,m)}}function pd(i,o,a){try{var u=i.stateNode;cS(u,i.type,a,o),u[kt]=o}catch(m){$e(i,i.return,m)}}function qg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Rs(i.type)||i.tag===4}function gd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||qg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Rs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yd(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Hn));else if(u!==4&&(u===27&&Rs(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(yd(i,o,a),i=i.sibling;i!==null;)yd(i,o,a),i=i.sibling}function xu(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(u!==4&&(u===27&&Rs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(xu(i,o,a),i=i.sibling;i!==null;)xu(i,o,a),i=i.sibling}function Og(i){var o=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);Kt(o,u,a),o[St]=i,o[kt]=a}catch(_){$e(i,i.return,_)}}var Gi=!1,Nt=!1,_d=!1,Bg=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function H0(i,o){if(i=i.containerInfo,Od=ec,i=Wm(i),ff(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var m=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,R=-1,V=-1,z=0,X=0,W=i,F=null;t:for(;;){for(var K;W!==a||m!==0&&W.nodeType!==3||(R=A+m),W!==_||u!==0&&W.nodeType!==3||(V=A+u),W.nodeType===3&&(A+=W.nodeValue.length),(K=W.firstChild)!==null;)F=W,W=K;for(;;){if(W===i)break t;if(F===a&&++z===m&&(R=A),F===_&&++X===u&&(V=A),(K=W.nextSibling)!==null)break;W=F,F=W.parentNode}W=K}a=R===-1||V===-1?null:{start:R,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bd={focusedElem:i,selectionRange:a},ec=!1,Ot=o;Ot!==null;)if(o=Ot,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ot=i;else for(;Ot!==null;){switch(o=Ot,_=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)m=i[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=o,m=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var me=vo(a.type,m);i=u.getSnapshotBeforeUpdate(me,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(ve){$e(a,a.return,ve)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)Hd(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Hd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Ot=i;break}Ot=o.return}}function Gg(i,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Hi(i,a),u&4&&Ba(5,a);break;case 1:if(Hi(i,a),u&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(A){$e(a,a.return,A)}else{var m=vo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(m,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){$e(a,a.return,A)}}u&64&&Ug(a),u&512&&Ga(a,a.return);break;case 3:if(Hi(i,a),u&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Rp(i,o)}catch(A){$e(a,a.return,A)}}break;case 27:o===null&&u&4&&Og(a);case 26:case 5:Hi(i,a),o===null&&u&4&&kg(a),u&512&&Ga(a,a.return);break;case 12:Hi(i,a);break;case 31:Hi(i,a),u&4&&Fg(i,a);break;case 13:Hi(i,a),u&4&&Yg(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=W0.bind(null,a),_S(i,a))));break;case 22:if(u=a.memoizedState!==null||Gi,!u){o=o!==null&&o.memoizedState!==null||Nt,m=Gi;var _=Nt;Gi=u,(Nt=o)&&!_?Fi(i,a,(a.subtreeFlags&8772)!==0):Hi(i,a),Gi=m,Nt=_}break;case 30:break;default:Hi(i,a)}}function zg(i){var o=i.alternate;o!==null&&(i.alternate=null,zg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Oo(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ct=null,ln=!1;function zi(i,o,a){for(a=a.child;a!==null;)Hg(i,o,a),a=a.sibling}function Hg(i,o,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(On,a)}catch{}switch(a.tag){case 26:Nt||vi(a,o),zi(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||vi(a,o);var u=ct,m=ln;Rs(a.type)&&(ct=a.stateNode,ln=!1),zi(i,o,a),$a(a.stateNode),ct=u,ln=m;break;case 5:Nt||vi(a,o);case 6:if(u=ct,m=ln,ct=null,zi(i,o,a),ct=u,ln=m,ct!==null)if(ln)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(_){$e(a,o,_)}else try{ct.removeChild(a.stateNode)}catch(_){$e(a,o,_)}break;case 18:ct!==null&&(ln?(i=ct,Uy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Sr(i)):Uy(ct,a.stateNode));break;case 4:u=ct,m=ln,ct=a.stateNode.containerInfo,ln=!0,zi(i,o,a),ct=u,ln=m;break;case 0:case 11:case 14:case 15:_s(2,a,o),Nt||_s(4,a,o),zi(i,o,a);break;case 1:Nt||(vi(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Lg(a,o,u)),zi(i,o,a);break;case 21:zi(i,o,a);break;case 22:Nt=(u=Nt)||a.memoizedState!==null,zi(i,o,a),Nt=u;break;default:zi(i,o,a)}}function Fg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Sr(i)}catch(a){$e(o,o.return,a)}}}function Yg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Sr(i)}catch(a){$e(o,o.return,a)}}function F0(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Bg),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Bg),o;default:throw Error(s(435,i.tag))}}function Pu(i,o){var a=F0(i);o.forEach(function(u){if(!a.has(u)){a.add(u);var m=j0.bind(null,i,u);u.then(m,m)}})}function un(i,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var m=a[u],_=i,A=o,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(Rs(R.type)){ct=R.stateNode,ln=!1;break e}break;case 5:ct=R.stateNode,ln=!1;break e;case 3:case 4:ct=R.stateNode.containerInfo,ln=!0;break e}R=R.return}if(ct===null)throw Error(s(160));Hg(_,A,m),ct=null,ln=!1,_=m.alternate,_!==null&&(_.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Jg(o,i),o=o.sibling}var Xn=null;function Jg(i,o){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:un(o,i),cn(i),u&4&&(_s(3,i,i.return),Ba(3,i),_s(5,i,i.return));break;case 1:un(o,i),cn(i),u&512&&(Nt||a===null||vi(a,a.return)),u&64&&Gi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var m=Xn;if(un(o,i),cn(i),u&512&&(Nt||a===null||vi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":_=m.getElementsByTagName("title")[0],(!_||_[ri]||_[St]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=m.createElement(u),m.head.insertBefore(_,m.querySelector("head > title"))),Kt(_,u,a),_[St]=i,Ct(_),u=_;break e;case"link":var A=Jy("link","href",m).get(u+(a.href||""));if(A){for(var R=0;R<A.length;R++)if(_=A[R],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(R,1);break t}}_=m.createElement(u),Kt(_,u,a),m.head.appendChild(_);break;case"meta":if(A=Jy("meta","content",m).get(u+(a.content||""))){for(R=0;R<A.length;R++)if(_=A[R],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(R,1);break t}}_=m.createElement(u),Kt(_,u,a),m.head.appendChild(_);break;default:throw Error(s(468,u))}_[St]=i,Ct(_),u=_}i.stateNode=u}else Ky(m,i.type,i.stateNode);else i.stateNode=Yy(m,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?Ky(m,i.type,i.stateNode):Yy(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&pd(i,i.memoizedProps,a.memoizedProps)}break;case 27:un(o,i),cn(i),u&512&&(Nt||a===null||vi(a,a.return)),a!==null&&u&4&&pd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(un(o,i),cn(i),u&512&&(Nt||a===null||vi(a,a.return)),i.flags&32){m=i.stateNode;try{an(m,"")}catch(me){$e(i,i.return,me)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,pd(i,m,a!==null?a.memoizedProps:m)),u&1024&&(_d=!0);break;case 6:if(un(o,i),cn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(me){$e(i,i.return,me)}}break;case 3:if($u=null,m=Xn,Xn=Qu(o.containerInfo),un(o,i),Xn=m,cn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Sr(o.containerInfo)}catch(me){$e(i,i.return,me)}_d&&(_d=!1,Kg(i));break;case 4:u=Xn,Xn=Qu(i.stateNode.containerInfo),un(o,i),cn(i),Xn=u;break;case 12:un(o,i),cn(i);break;case 31:un(o,i),cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Pu(i,u)));break;case 13:un(o,i),cn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lu=nn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Pu(i,u)));break;case 22:m=i.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,z=Gi,X=Nt;if(Gi=z||m,Nt=X||V,un(o,i),Nt=X,Gi=z,cn(i),u&8192)e:for(o=i.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(a===null||V||Gi||Nt||Eo(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){V=a=o;try{if(_=V.stateNode,m)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=V.stateNode;var W=V.memoizedProps.style,F=W!=null&&W.hasOwnProperty("display")?W.display:null;R.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(me){$e(V,V.return,me)}}}else if(o.tag===6){if(a===null){V=o;try{V.stateNode.nodeValue=m?"":V.memoizedProps}catch(me){$e(V,V.return,me)}}}else if(o.tag===18){if(a===null){V=o;try{var K=V.stateNode;m?Ly(K,!0):Ly(V.stateNode,!1)}catch(me){$e(V,V.return,me)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Pu(i,a))));break;case 19:un(o,i),cn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Pu(i,u)));break;case 30:break;case 21:break;default:un(o,i),cn(i)}}function cn(i){var o=i.flags;if(o&2){try{for(var a,u=i.return;u!==null;){if(qg(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var m=a.stateNode,_=gd(i);xu(i,_,m);break;case 5:var A=a.stateNode;a.flags&32&&(an(A,""),a.flags&=-33);var R=gd(i);xu(i,R,A);break;case 3:case 4:var V=a.stateNode.containerInfo,z=gd(i);yd(i,z,V);break;default:throw Error(s(161))}}catch(X){$e(i,i.return,X)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Kg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Kg(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Hi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Gg(i,o.alternate,o),o=o.sibling}function Eo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:_s(4,o,o.return),Eo(o);break;case 1:vi(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Lg(o,o.return,a),Eo(o);break;case 27:$a(o.stateNode);case 26:case 5:vi(o,o.return),Eo(o);break;case 22:o.memoizedState===null&&Eo(o);break;case 30:Eo(o);break;default:Eo(o)}i=i.sibling}}function Fi(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=i,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:Fi(m,_,a),Ba(4,_);break;case 1:if(Fi(m,_,a),u=_,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(z){$e(u,u.return,z)}if(u=_,m=u.updateQueue,m!==null){var R=u.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)Cp(V[m],R)}catch(z){$e(u,u.return,z)}}a&&A&64&&Ug(_),Ga(_,_.return);break;case 27:Og(_);case 26:case 5:Fi(m,_,a),a&&u===null&&A&4&&kg(_),Ga(_,_.return);break;case 12:Fi(m,_,a);break;case 31:Fi(m,_,a),a&&A&4&&Fg(m,_);break;case 13:Fi(m,_,a),a&&A&4&&Yg(m,_);break;case 22:_.memoizedState===null&&Fi(m,_,a),Ga(_,_.return);break;case 30:break;default:Fi(m,_,a)}o=o.sibling}}function Td(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&wa(a))}function vd(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&wa(i))}function $n(i,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Qg(i,o,a,u),o=o.sibling}function Qg(i,o,a,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:$n(i,o,a,u),m&2048&&Ba(9,o);break;case 1:$n(i,o,a,u);break;case 3:$n(i,o,a,u),m&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&wa(i)));break;case 12:if(m&2048){$n(i,o,a,u),i=o.stateNode;try{var _=o.memoizedProps,A=_.id,R=_.onPostCommit;typeof R=="function"&&R(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){$e(o,o.return,V)}}else $n(i,o,a,u);break;case 31:$n(i,o,a,u);break;case 13:$n(i,o,a,u);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?$n(i,o,a,u):za(i,o):_._visibility&2?$n(i,o,a,u):(_._visibility|=2,dr(i,o,a,u,(o.subtreeFlags&10256)!==0||!1)),m&2048&&Td(A,o);break;case 24:$n(i,o,a,u),m&2048&&vd(o.alternate,o);break;default:$n(i,o,a,u)}}function dr(i,o,a,u,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=i,A=o,R=a,V=u,z=A.flags;switch(A.tag){case 0:case 11:case 15:dr(_,A,R,V,m),Ba(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?dr(_,A,R,V,m):za(_,A):(X._visibility|=2,dr(_,A,R,V,m)),m&&z&2048&&Td(A.alternate,A);break;case 24:dr(_,A,R,V,m),m&&z&2048&&vd(A.alternate,A);break;default:dr(_,A,R,V,m)}o=o.sibling}}function za(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,u=o,m=u.flags;switch(u.tag){case 22:za(a,u),m&2048&&Td(u.alternate,u);break;case 24:za(a,u),m&2048&&vd(u.alternate,u);break;default:za(a,u)}o=o.sibling}}var Ha=8192;function hr(i,o,a){if(i.subtreeFlags&Ha)for(i=i.child;i!==null;)Xg(i,o,a),i=i.sibling}function Xg(i,o,a){switch(i.tag){case 26:hr(i,o,a),i.flags&Ha&&i.memoizedState!==null&&DS(a,Xn,i.memoizedState,i.memoizedProps);break;case 5:hr(i,o,a);break;case 3:case 4:var u=Xn;Xn=Qu(i.stateNode.containerInfo),hr(i,o,a),Xn=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ha,Ha=16777216,hr(i,o,a),Ha=u):hr(i,o,a));break;default:hr(i,o,a)}}function $g(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Fa(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ot=u,Wg(u,i)}$g(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zg(i),i=i.sibling}function Zg(i){switch(i.tag){case 0:case 11:case 15:Fa(i),i.flags&2048&&_s(9,i,i.return);break;case 3:Fa(i);break;case 12:Fa(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Uu(i)):Fa(i);break;default:Fa(i)}}function Uu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Ot=u,Wg(u,i)}$g(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:_s(8,o,o.return),Uu(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Uu(o));break;default:Uu(o)}i=i.sibling}}function Wg(i,o){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:_s(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:wa(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ot=u;else e:for(a=i;Ot!==null;){u=Ot;var m=u.sibling,_=u.return;if(zg(u),u===a){Ot=null;break e}if(m!==null){m.return=_,Ot=m;break e}Ot=_}}}var Y0={getCacheForType:function(i){var o=Yt(It),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Yt(It).controller.signal}},J0=typeof WeakMap=="function"?WeakMap:Map,Ye=0,nt=null,De=null,Ve=0,Xe=0,vn=null,Ts=!1,mr=!1,Ed=!1,Yi=0,pt=0,vs=0,Ao=0,Ad=0,En=0,pr=0,Ya=null,fn=null,Sd=!1,Lu=0,jg=0,ku=1/0,qu=null,Es=null,Ut=0,As=null,gr=null,Ji=0,Cd=0,Rd=null,ey=null,Ja=0,Id=null;function An(){return(Ye&2)!==0&&Ve!==0?Ve&-Ve:Q.T!==null?Vd():Ol()}function ty(){if(En===0)if((Ve&536870912)===0||Le){var i=Qs;Qs<<=1,(Qs&3932160)===0&&(Qs=262144),En=i}else En=536870912;return i=_n.current,i!==null&&(i.flags|=32),En}function dn(i,o,a){(i===nt&&(Xe===2||Xe===9)||i.cancelPendingCommit!==null)&&(yr(i,0),Ss(i,Ve,En,!1)),Xs(i,a),((Ye&2)===0||i!==nt)&&(i===nt&&((Ye&2)===0&&(Ao|=a),pt===4&&Ss(i,Ve,En,!1)),Ei(i))}function ny(i,o,a){if((Ye&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Bn(i,o),m=u?X0(i,o):Md(i,o,!0),_=u;do{if(m===0){mr&&!u&&Ss(i,o,0,!1);break}else{if(a=i.current.alternate,_&&!K0(a)){m=Md(i,o,!1),_=!1;continue}if(m===2){if(_=o,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var R=i;m=Ya;var V=R.current.memoizedState.isDehydrated;if(V&&(yr(R,A).flags|=256),A=Md(R,A,!1),A!==2){if(Ed&&!V){R.errorRecoveryDisabledLanes|=_,Ao|=_,m=4;break e}_=fn,fn=m,_!==null&&(fn===null?fn=_:fn.push.apply(fn,_))}m=A}if(_=!1,m!==2)continue}}if(m===1){yr(i,0),Ss(i,o,0,!0);break}e:{switch(u=i,_=m,_){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Ss(u,o,En,!Ts);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=Lu+300-nn(),10<m)){if(Ss(u,o,En,!Ts),ii(u,0,!0)!==0)break e;Ji=o,u.timeoutHandle=xy(iy.bind(null,u,a,fn,qu,Sd,o,En,Ao,pr,Ts,_,"Throttled",-0,0),m);break e}iy(u,a,fn,qu,Sd,o,En,Ao,pr,Ts,_,null,-0,0)}}break}while(!0);Ei(i)}function iy(i,o,a,u,m,_,A,R,V,z,X,W,F,K){if(i.timeoutHandle=-1,W=o.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hn},Xg(o,_,W);var me=(_&62914560)===_?Lu-nn():(_&4194048)===_?jg-nn():0;if(me=bS(W,me),me!==null){Ji=_,i.cancelPendingCommit=me(fy.bind(null,i,o,_,a,u,m,A,R,V,X,W,null,F,K)),Ss(i,_,A,!z);return}}fy(i,o,_,a,u,m,A,R,V)}function K0(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var m=a[u],_=m.getSnapshot;m=m.value;try{if(!gn(_(),m))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ss(i,o,a,u){o&=~Ad,o&=~Ao,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var m=o;0<m;){var _=31-gt(m),A=1<<_;u[_]=-1,m&=~A}a!==0&&$s(i,a,o)}function Ou(){return(Ye&6)===0?(Ka(0),!1):!0}function wd(){if(De!==null){if(Xe===0)var i=De.return;else i=De,Ui=ho=null,Hf(i),ar=null,Na=0,i=De;for(;i!==null;)Pg(i.alternate,i),i=i.return;De=null}}function yr(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,hS(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Ji=0,wd(),nt=i,De=a=xi(i.current,null),Ve=o,Xe=0,vn=null,Ts=!1,mr=Bn(i,o),Ed=!1,pr=En=Ad=Ao=vs=pt=0,fn=Ya=null,Sd=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var m=31-gt(u),_=1<<m;o|=i[m],u&=~_}return Yi=o,ru(),a}function sy(i,o){we=null,Q.H=ka,o===rr||o===mu?(o=vp(),Xe=3):o===bf?(o=vp(),Xe=4):Xe=o===od?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,vn=o,De===null&&(pt=1,Mu(i,Nn(o,i.current)))}function oy(){var i=_n.current;return i===null?!0:(Ve&4194048)===Ve?xn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?i===xn:!1}function ry(){var i=Q.H;return Q.H=ka,i===null?ka:i}function ay(){var i=Q.A;return Q.A=Y0,i}function Bu(){pt=4,Ts||(Ve&4194048)!==Ve&&_n.current!==null||(mr=!0),(vs&134217727)===0&&(Ao&134217727)===0||nt===null||Ss(nt,Ve,En,!1)}function Md(i,o,a){var u=Ye;Ye|=2;var m=ry(),_=ay();(nt!==i||Ve!==o)&&(qu=null,yr(i,o)),o=!1;var A=pt;e:do try{if(Xe!==0&&De!==null){var R=De,V=vn;switch(Xe){case 8:wd(),A=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(o=!0);var z=Xe;if(Xe=0,vn=null,_r(i,R,V,z),a&&mr){A=0;break e}break;default:z=Xe,Xe=0,vn=null,_r(i,R,V,z)}}Q0(),A=pt;break}catch(X){sy(i,X)}while(!0);return o&&i.shellSuspendCounter++,Ui=ho=null,Ye=u,Q.H=m,Q.A=_,De===null&&(nt=null,Ve=0,ru()),A}function Q0(){for(;De!==null;)ly(De)}function X0(i,o){var a=Ye;Ye|=2;var u=ry(),m=ay();nt!==i||Ve!==o?(qu=null,ku=nn()+500,yr(i,o)):mr=Bn(i,o);e:do try{if(Xe!==0&&De!==null){o=De;var _=vn;t:switch(Xe){case 1:Xe=0,vn=null,_r(i,o,_,1);break;case 2:case 9:if(_p(_)){Xe=0,vn=null,uy(o);break}o=function(){Xe!==2&&Xe!==9||nt!==i||(Xe=7),Ei(i)},_.then(o,o);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:_p(_)?(Xe=0,vn=null,uy(o)):(Xe=0,vn=null,_r(i,o,_,7));break;case 5:var A=null;switch(De.tag){case 26:A=De.memoizedState;case 5:case 27:var R=De;if(A?Qy(A):R.stateNode.complete){Xe=0,vn=null;var V=R.sibling;if(V!==null)De=V;else{var z=R.return;z!==null?(De=z,Gu(z)):De=null}break t}}Xe=0,vn=null,_r(i,o,_,5);break;case 6:Xe=0,vn=null,_r(i,o,_,6);break;case 8:wd(),pt=6;break e;default:throw Error(s(462))}}$0();break}catch(X){sy(i,X)}while(!0);return Ui=ho=null,Q.H=u,Q.A=m,Ye=a,De!==null?0:(nt=null,Ve=0,ru(),pt)}function $0(){for(;De!==null&&!sf();)ly(De)}function ly(i){var o=Vg(i.alternate,i,Yi);i.memoizedProps=i.pendingProps,o===null?Gu(i):De=o}function uy(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Ig(a,o,o.pendingProps,o.type,void 0,Ve);break;case 11:o=Ig(a,o,o.pendingProps,o.type.render,o.ref,Ve);break;case 5:Hf(o);default:Pg(a,o),o=De=ap(o,Yi),o=Vg(a,o,Yi)}i.memoizedProps=i.pendingProps,o===null?Gu(i):De=o}function _r(i,o,a,u){Ui=ho=null,Hf(o),ar=null,Na=0;var m=o.return;try{if(q0(i,m,o,a,Ve)){pt=1,Mu(i,Nn(a,i.current)),De=null;return}}catch(_){if(m!==null)throw De=m,_;pt=1,Mu(i,Nn(a,i.current)),De=null;return}o.flags&32768?(Le||u===1?i=!0:mr||(Ve&536870912)!==0?i=!1:(Ts=i=!0,(u===2||u===9||u===3||u===6)&&(u=_n.current,u!==null&&u.tag===13&&(u.flags|=16384))),cy(o,i)):Gu(o)}function Gu(i){var o=i;do{if((o.flags&32768)!==0){cy(o,Ts);return}i=o.return;var a=G0(o.alternate,o,Yi);if(a!==null){De=a;return}if(o=o.sibling,o!==null){De=o;return}De=o=i}while(o!==null);pt===0&&(pt=5)}function cy(i,o){do{var a=z0(i.alternate,i);if(a!==null){a.flags&=32767,De=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){De=i;return}De=i=a}while(i!==null);pt=6,De=null}function fy(i,o,a,u,m,_,A,R,V){i.cancelPendingCommit=null;do zu();while(Ut!==0);if((Ye&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(_=o.lanes|o.childLanes,_|=gf,af(i,a,_,A,R,V),i===nt&&(De=nt=null,Ve=0),gr=o,As=i,Ji=a,Cd=_,Rd=m,ey=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,eS(ji,function(){return gy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,m=re.p,re.p=2,A=Ye,Ye|=4;try{H0(i,o,a)}finally{Ye=A,re.p=m,Q.T=u}}Ut=1,dy(),hy(),my()}}function dy(){if(Ut===1){Ut=0;var i=As,o=gr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var u=re.p;re.p=2;var m=Ye;Ye|=4;try{Jg(o,i);var _=Bd,A=Wm(i.containerInfo),R=_.focusedElem,V=_.selectionRange;if(A!==R&&R&&R.ownerDocument&&Zm(R.ownerDocument.documentElement,R)){if(V!==null&&ff(R)){var z=V.start,X=V.end;if(X===void 0&&(X=z),"selectionStart"in R)R.selectionStart=z,R.selectionEnd=Math.min(X,R.value.length);else{var W=R.ownerDocument||document,F=W&&W.defaultView||window;if(F.getSelection){var K=F.getSelection(),me=R.textContent.length,ve=Math.min(V.start,me),et=V.end===void 0?ve:Math.min(V.end,me);!K.extend&&ve>et&&(A=et,et=ve,ve=A);var q=$m(R,ve),U=$m(R,et);if(q&&U&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var G=W.createRange();G.setStart(q.node,q.offset),K.removeAllRanges(),ve>et?(K.addRange(G),K.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),K.addRange(G))}}}}for(W=[],K=R;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<W.length;R++){var $=W[R];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}ec=!!Od,Bd=Od=null}finally{Ye=m,re.p=u,Q.T=a}}i.current=o,Ut=2}}function hy(){if(Ut===2){Ut=0;var i=As,o=gr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var u=re.p;re.p=2;var m=Ye;Ye|=4;try{Gg(i,o.alternate,o)}finally{Ye=m,re.p=u,Q.T=a}}Ut=3}}function my(){if(Ut===4||Ut===3){Ut=0,Vl();var i=As,o=gr,a=Ji,u=ey;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,gr=As=null,py(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Es=null),Ni(a),o=o.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(On,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=Q.T,m=re.p,re.p=2,Q.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var R=u[A];_(R.value,{componentStack:R.stack})}}finally{Q.T=o,re.p=m}}(Ji&3)!==0&&zu(),Ei(i),m=i.pendingLanes,(a&261930)!==0&&(m&42)!==0?i===Id?Ja++:(Ja=0,Id=i):Ja=0,Ka(0)}}function py(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,wa(o)))}function zu(){return dy(),hy(),my(),gy()}function gy(){if(Ut!==5)return!1;var i=As,o=Cd;Cd=0;var a=Ni(Ji),u=Q.T,m=re.p;try{re.p=32>a?32:a,Q.T=null,a=Rd,Rd=null;var _=As,A=Ji;if(Ut=0,gr=As=null,Ji=0,(Ye&6)!==0)throw Error(s(331));var R=Ye;if(Ye|=4,Zg(_.current),Qg(_,_.current,A,a),Ye=R,Ka(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(On,_)}catch{}return!0}finally{re.p=m,Q.T=u,py(i,o)}}function yy(i,o,a){o=Nn(a,o),o=sd(i.stateNode,o,2),i=ps(i,o,2),i!==null&&(Xs(i,2),Ei(i))}function $e(i,o,a){if(i.tag===3)yy(i,i,a);else for(;o!==null;){if(o.tag===3){yy(o,i,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Es===null||!Es.has(u))){i=Nn(a,i),a=_g(2),u=ps(o,a,2),u!==null&&(Tg(a,u,o,i),Xs(u,2),Ei(u));break}}o=o.return}}function Nd(i,o,a){var u=i.pingCache;if(u===null){u=i.pingCache=new J0;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(a)||(Ed=!0,m.add(a),i=Z0.bind(null,i,o,a),o.then(i,i))}function Z0(i,o,a){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,nt===i&&(Ve&a)===a&&(pt===4||pt===3&&(Ve&62914560)===Ve&&300>nn()-Lu?(Ye&2)===0&&yr(i,0):Ad|=a,pr===Ve&&(pr=0)),Ei(i)}function _y(i,o){o===0&&(o=ql()),i=uo(i,o),i!==null&&(Xs(i,o),Ei(i))}function W0(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),_y(i,a)}function j0(i,o){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(a=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),_y(i,a)}function eS(i,o){return Pt(i,o)}var Hu=null,Tr=null,Dd=!1,Fu=!1,bd=!1,Cs=0;function Ei(i){i!==Tr&&i.next===null&&(Tr===null?Hu=Tr=i:Tr=Tr.next=i),Fu=!0,Dd||(Dd=!0,nS())}function Ka(i,o){if(!bd&&Fu){bd=!0;do for(var a=!1,u=Hu;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var _=0;else{var A=u.suspendedLanes,R=u.pingedLanes;_=(1<<31-gt(42|i)+1)-1,_&=m&~(A&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Ay(u,_))}else _=Ve,_=ii(u,u===nt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Bn(u,_)||(a=!0,Ay(u,_));u=u.next}while(a);bd=!1}}function tS(){Ty()}function Ty(){Fu=Dd=!1;var i=0;Cs!==0&&dS()&&(i=Cs);for(var o=nn(),a=null,u=Hu;u!==null;){var m=u.next,_=vy(u,o);_===0?(u.next=null,a===null?Hu=m:a.next=m,m===null&&(Tr=a)):(a=u,(i!==0||(_&3)!==0)&&(Fu=!0)),u=m}Ut!==0&&Ut!==5||Ka(i),Cs!==0&&(Cs=0)}function vy(i,o){for(var a=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-gt(_),R=1<<A,V=m[A];V===-1?((R&a)===0||(R&u)!==0)&&(m[A]=rf(R,o)):V<=o&&(i.expiredLanes|=R),_&=~R}if(o=nt,a=Ve,a=ii(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===o&&(Xe===2||Xe===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Wi(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Bn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(u!==null&&Wi(u),Ni(a)){case 2:case 8:a=ia;break;case 32:a=ji;break;case 268435456:a=xl;break;default:a=ji}return u=Ey.bind(null,i),a=Pt(a,u),i.callbackPriority=o,i.callbackNode=a,o}return u!==null&&u!==null&&Wi(u),i.callbackPriority=2,i.callbackNode=null,2}function Ey(i,o){if(Ut!==0&&Ut!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(zu()&&i.callbackNode!==a)return null;var u=Ve;return u=ii(i,i===nt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ny(i,u,o),vy(i,nn()),i.callbackNode!=null&&i.callbackNode===a?Ey.bind(null,i):null)}function Ay(i,o){if(zu())return null;ny(i,o,!0)}function nS(){mS(function(){(Ye&6)!==0?Pt(na,tS):Ty()})}function Vd(){if(Cs===0){var i=sr;i===0&&(i=ti,ti<<=1,(ti&261888)===0&&(ti=256)),Cs=i}return Cs}function Sy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ho(""+i)}function Cy(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function iS(i,o,a,u,m){if(o==="submit"&&a&&a.stateNode===m){var _=Sy((m[kt]||null).action),A=u.submitter;A&&(o=(o=A[kt]||null)?Sy(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var R=new mi("action","action",null,u,m);i.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Cs!==0){var V=A?Cy(m,A):new FormData(m);Wf(a,{pending:!0,data:V,method:m.method,action:_},null,V)}}else typeof _=="function"&&(R.preventDefault(),V=A?Cy(m,A):new FormData(m),Wf(a,{pending:!0,data:V,method:m.method,action:_},_,V))},currentTarget:m}]})}}for(var xd=0;xd<pf.length;xd++){var Pd=pf[xd],sS=Pd.toLowerCase(),oS=Pd[0].toUpperCase()+Pd.slice(1);Qn(sS,"on"+oS)}Qn(tp,"onAnimationEnd"),Qn(np,"onAnimationIteration"),Qn(ip,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(E0,"onTransitionRun"),Qn(A0,"onTransitionStart"),Qn(S0,"onTransitionCancel"),Qn(sp,"onTransitionEnd"),ci("onMouseEnter",["mouseout","mouseover"]),ci("onMouseLeave",["mouseout","mouseover"]),ci("onPointerEnter",["pointerout","pointerover"]),ci("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qa));function Ry(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],m=u.event;u=u.listeners;e:{var _=void 0;if(o)for(var A=u.length-1;0<=A;A--){var R=u[A],V=R.instance,z=R.currentTarget;if(R=R.listener,V!==_&&m.isPropagationStopped())break e;_=R,m.currentTarget=z;try{_(m)}catch(X){ou(X)}m.currentTarget=null,_=V}else for(A=0;A<u.length;A++){if(R=u[A],V=R.instance,z=R.currentTarget,R=R.listener,V!==_&&m.isPropagationStopped())break e;_=R,m.currentTarget=z;try{_(m)}catch(X){ou(X)}m.currentTarget=null,_=V}}}}function be(i,o){var a=o[qo];a===void 0&&(a=o[qo]=new Set);var u=i+"__bubble";a.has(u)||(Iy(o,i,2,!1),a.add(u))}function Ud(i,o,a){var u=0;o&&(u|=4),Iy(a,i,u,o)}var Yu="_reactListening"+Math.random().toString(36).slice(2);function Ld(i){if(!i[Yu]){i[Yu]=!0,ra.forEach(function(a){a!=="selectionchange"&&(rS.has(a)||Ud(a,!1,i),Ud(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Yu]||(o[Yu]=!0,Ud("selectionchange",!1,o))}}function Iy(i,o,a,u){switch(t_(o)){case 2:var m=PS;break;case 8:m=US;break;default:m=Zd}a=m.bind(null,o,a,i),m=void 0,!to||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(o,a,{capture:!0,passive:m}):i.addEventListener(o,a,!0):m!==void 0?i.addEventListener(o,a,{passive:m}):i.addEventListener(o,a,!1)}function kd(i,o,a,u,m){var _=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var R=u.stateNode.containerInfo;if(R===m)break;if(A===4)for(A=u.return;A!==null;){var V=A.tag;if((V===3||V===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;R!==null;){if(A=ai(R),A===null)return;if(V=A.tag,V===5||V===6||V===26||V===27){u=_=A;continue e}R=R.parentNode}}u=u.return}os(function(){var z=_,X=Rn(a),W=[];e:{var F=op.get(i);if(F!==void 0){var K=mi,me=i;switch(i){case"keypress":if(io(a)===0)break e;case"keydown":case"keyup":K=nu;break;case"focusin":me="focus",K=oo;break;case"focusout":me="blur",K=oo;break;case"beforeblur":case"afterblur":K=oo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=v;break;case tp:case np:case ip:K=Xl;break;case sp:K=I;break;case"scroll":case"scrollend":K=_a;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=$l;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Vi;break;case"toggle":case"beforetoggle":K=Ie}var ve=(o&4)!==0,et=!ve&&(i==="scroll"||i==="scrollend"),q=ve?F!==null?F+"Capture":null:F;ve=[];for(var U=z,G;U!==null;){var $=U;if(G=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||G===null||q===null||($=Fn(U,q),$!=null&&ve.push(Xa(U,$,G))),et)break;U=U.return}0<ve.length&&(F=new K(F,me,null,a,X),W.push({event:F,listeners:ve}))}}if((o&7)===0){e:{if(F=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",F&&a!==pa&&(me=a.relatedTarget||a.fromElement)&&(ai(me)||me[oi]))break e;if((K||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,K?(me=a.relatedTarget||a.toElement,K=z,me=me?ai(me):null,me!==null&&(et=l(me),ve=me.tag,me!==et||ve!==5&&ve!==27&&ve!==6)&&(me=null)):(K=null,me=z),K!==me)){if(ve=Ta,$="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(ve=Vi,$="onPointerLeave",q="onPointerEnter",U="pointer"),et=K==null?F:mn(K),G=me==null?F:mn(me),F=new ve($,U+"leave",K,a,X),F.target=et,F.relatedTarget=G,$=null,ai(X)===z&&(ve=new ve(q,U+"enter",me,a,X),ve.target=G,ve.relatedTarget=et,$=ve),et=$,K&&me)t:{for(ve=aS,q=K,U=me,G=0,$=q;$;$=ve($))G++;$=0;for(var ye=U;ye;ye=ve(ye))$++;for(;0<G-$;)q=ve(q),G--;for(;0<$-G;)U=ve(U),$--;for(;G--;){if(q===U||U!==null&&q===U.alternate){ve=q;break t}q=ve(q),U=ve(U)}ve=null}else ve=null;K!==null&&wy(W,F,K,ve,!1),me!==null&&et!==null&&wy(W,et,me,ve,!0)}}e:{if(F=z?mn(z):window,K=F.nodeName&&F.nodeName.toLowerCase(),K==="select"||K==="input"&&F.type==="file")var Ge=Fm;else if(zm(F))if(Ym)Ge=_0;else{Ge=g0;var ge=p0}else K=F.nodeName,!K||K.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?z&&zo(z.elementType)&&(Ge=Fm):Ge=y0;if(Ge&&(Ge=Ge(i,z))){Hm(W,Ge,a,X);break e}ge&&ge(i,F,z),i==="focusout"&&z&&F.type==="number"&&z.memoizedProps.value!=null&&da(F,"number",F.value)}switch(ge=z?mn(z):window,i){case"focusin":(zm(ge)||ge.contentEditable==="true")&&($o=ge,df=z,Ca=null);break;case"focusout":Ca=df=$o=null;break;case"mousedown":hf=!0;break;case"contextmenu":case"mouseup":case"dragend":hf=!1,jm(W,a,X);break;case"selectionchange":if(v0)break;case"keydown":case"keyup":jm(W,a,X)}var Ne;if(Fe)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Xo?ro(i,a)&&(xe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(yi&&a.locale!=="ko"&&(Xo||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Xo&&(Ne=ya()):(hi=X,ga="value"in hi?hi.value:hi.textContent,Xo=!0)),ge=Ju(z,xe),0<ge.length&&(xe=new gi(xe,i,null,a,X),W.push({event:xe,listeners:ge}),Ne?xe.data=Ne:(Ne=Qo(a),Ne!==null&&(xe.data=Ne)))),(Ne=wn?f0(i,a):d0(i,a))&&(xe=Ju(z,"onBeforeInput"),0<xe.length&&(ge=new gi("onBeforeInput","beforeinput",null,a,X),W.push({event:ge,listeners:xe}),ge.data=Ne)),iS(W,i,z,a,X)}Ry(W,o)})}function Xa(i,o,a){return{instance:i,listener:o,currentTarget:a}}function Ju(i,o){for(var a=o+"Capture",u=[];i!==null;){var m=i,_=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||_===null||(m=Fn(i,a),m!=null&&u.unshift(Xa(i,m,_)),m=Fn(i,o),m!=null&&u.push(Xa(i,m,_))),i.tag===3)return u;i=i.return}return[]}function aS(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function wy(i,o,a,u,m){for(var _=o._reactName,A=[];a!==null&&a!==u;){var R=a,V=R.alternate,z=R.stateNode;if(R=R.tag,V!==null&&V===u)break;R!==5&&R!==26&&R!==27||z===null||(V=z,m?(z=Fn(a,_),z!=null&&A.unshift(Xa(a,z,V))):m||(z=Fn(a,_),z!=null&&A.push(Xa(a,z,V)))),a=a.return}A.length!==0&&i.push({event:o,listeners:A})}var lS=/\r\n?/g,uS=/\u0000|\uFFFD/g;function My(i){return(typeof i=="string"?i:""+i).replace(lS,`
`).replace(uS,"")}function Ny(i,o){return o=My(o),My(i)===o}function je(i,o,a,u,m,_){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||an(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&an(i,""+u);break;case"className":pn(i,"class",u);break;case"tabIndex":pn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":pn(i,a,u);break;case"style":ma(i,u,_);break;case"data":if(o!=="object"){pn(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Ho(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(o!=="input"&&je(i,o,"name",m.name,m,null),je(i,o,"formEncType",m.formEncType,m,null),je(i,o,"formMethod",m.formMethod,m,null),je(i,o,"formTarget",m.formTarget,m,null)):(je(i,o,"encType",m.encType,m,null),je(i,o,"method",m.method,m,null),je(i,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Ho(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Hn);break;case"onScroll":u!=null&&be("scroll",i);break;case"onScrollEnd":u!=null&&be("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Ho(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":be("beforetoggle",i),be("toggle",i),Bo(i,"popover",u);break;case"xlinkActuate":Rt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Rt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Rt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Rt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Rt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Rt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Rt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Rt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Rt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Bo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jl.get(a)||a,Bo(i,a,u))}}function qd(i,o,a,u,m,_){switch(a){case"style":ma(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?an(i,u):(typeof u=="number"||typeof u=="bigint")&&an(i,""+u);break;case"onScroll":u!=null&&be("scroll",i);break;case"onScrollEnd":u!=null&&be("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!aa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),o=a.slice(2,m?a.length-7:void 0),_=i[kt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(o,_,m),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,u,m);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Bo(i,a,u)}}}function Kt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",i),be("load",i);var u=!1,m=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:je(i,o,_,A,a,null)}}m&&je(i,o,"srcSet",a.srcSet,a,null),u&&je(i,o,"src",a.src,a,null);return;case"input":be("invalid",i);var R=_=A=m=null,V=null,z=null;for(u in a)if(a.hasOwnProperty(u)){var X=a[u];if(X!=null)switch(u){case"name":m=X;break;case"type":A=X;break;case"checked":V=X;break;case"defaultChecked":z=X;break;case"value":_=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,o));break;default:je(i,o,u,X,a,null)}}Hl(i,_,R,V,z,A,m,!1);return;case"select":be("invalid",i),u=A=_=null;for(m in a)if(a.hasOwnProperty(m)&&(R=a[m],R!=null))switch(m){case"value":_=R;break;case"defaultValue":A=R;break;case"multiple":u=R;default:je(i,o,m,R,a,null)}o=_,a=A,i.multiple=!!u,o!=null?ts(i,!!u,o,!1):a!=null&&ts(i,!!u,a,!0);return;case"textarea":be("invalid",i),_=m=u=null;for(A in a)if(a.hasOwnProperty(A)&&(R=a[A],R!=null))switch(A){case"value":u=R;break;case"defaultValue":m=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:je(i,o,A,R,a,null)}ns(i,u,m,_);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(u=a[V],u!=null))switch(V){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:je(i,o,V,u,a,null)}return;case"dialog":be("beforetoggle",i),be("toggle",i),be("cancel",i),be("close",i);break;case"iframe":case"object":be("load",i);break;case"video":case"audio":for(u=0;u<Qa.length;u++)be(Qa[u],i);break;case"image":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"embed":case"source":case"link":be("error",i),be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(u=a[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:je(i,o,z,u,a,null)}return;default:if(zo(o)){for(X in a)a.hasOwnProperty(X)&&(u=a[X],u!==void 0&&qd(i,o,X,u,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(u=a[R],u!=null&&je(i,o,R,u,a,null))}function cS(i,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,_=null,A=null,R=null,V=null,z=null,X=null;for(K in a){var W=a[K];if(a.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":V=W;default:u.hasOwnProperty(K)||je(i,o,K,null,u,W)}}for(var F in u){var K=u[F];if(W=a[F],u.hasOwnProperty(F)&&(K!=null||W!=null))switch(F){case"type":_=K;break;case"name":m=K;break;case"checked":z=K;break;case"defaultChecked":X=K;break;case"value":A=K;break;case"defaultValue":R=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,o));break;default:K!==W&&je(i,o,F,K,u,W)}}Go(i,A,R,V,z,X,_,m);return;case"select":K=A=R=F=null;for(_ in a)if(V=a[_],a.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":K=V;default:u.hasOwnProperty(_)||je(i,o,_,null,u,V)}for(m in u)if(_=u[m],V=a[m],u.hasOwnProperty(m)&&(_!=null||V!=null))switch(m){case"value":F=_;break;case"defaultValue":R=_;break;case"multiple":A=_;default:_!==V&&je(i,o,m,_,u,V)}o=R,a=A,u=K,F!=null?ts(i,!!a,F,!1):!!u!=!!a&&(o!=null?ts(i,!!a,o,!0):ts(i,!!a,a?[]:"",!1));return;case"textarea":K=F=null;for(R in a)if(m=a[R],a.hasOwnProperty(R)&&m!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:je(i,o,R,null,u,m)}for(A in u)if(m=u[A],_=a[A],u.hasOwnProperty(A)&&(m!=null||_!=null))switch(A){case"value":F=m;break;case"defaultValue":K=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==_&&je(i,o,A,m,u,_)}Fl(i,F,K);return;case"option":for(var me in a)if(F=a[me],a.hasOwnProperty(me)&&F!=null&&!u.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:je(i,o,me,null,u,F)}for(V in u)if(F=u[V],K=a[V],u.hasOwnProperty(V)&&F!==K&&(F!=null||K!=null))switch(V){case"selected":i.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:je(i,o,V,F,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)F=a[ve],a.hasOwnProperty(ve)&&F!=null&&!u.hasOwnProperty(ve)&&je(i,o,ve,null,u,F);for(z in u)if(F=u[z],K=a[z],u.hasOwnProperty(z)&&F!==K&&(F!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,o));break;default:je(i,o,z,F,u,K)}return;default:if(zo(o)){for(var et in a)F=a[et],a.hasOwnProperty(et)&&F!==void 0&&!u.hasOwnProperty(et)&&qd(i,o,et,void 0,u,F);for(X in u)F=u[X],K=a[X],!u.hasOwnProperty(X)||F===K||F===void 0&&K===void 0||qd(i,o,X,F,u,K);return}}for(var q in a)F=a[q],a.hasOwnProperty(q)&&F!=null&&!u.hasOwnProperty(q)&&je(i,o,q,null,u,F);for(W in u)F=u[W],K=a[W],!u.hasOwnProperty(W)||F===K||F==null&&K==null||je(i,o,W,F,u,K)}function Dy(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fS(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var m=a[u],_=m.transferSize,A=m.initiatorType,R=m.duration;if(_&&R&&Dy(A)){for(A=0,R=m.responseEnd,u+=1;u<a.length;u++){var V=a[u],z=V.startTime;if(z>R)break;var X=V.transferSize,W=V.initiatorType;X&&Dy(W)&&(V=V.responseEnd,A+=X*(V<R?1:(R-z)/(V-z)))}if(--u,o+=8*(_+A)/(m.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Od=null,Bd=null;function Ku(i){return i.nodeType===9?i:i.ownerDocument}function by(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vy(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Gd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var zd=null;function dS(){var i=window.event;return i&&i.type==="popstate"?i===zd?!1:(zd=i,!0):(zd=null,!1)}var xy=typeof setTimeout=="function"?setTimeout:void 0,hS=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,mS=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(i){return Py.resolve(null).then(i).catch(pS)}:xy;function pS(i){setTimeout(function(){throw i})}function Rs(i){return i==="head"}function Uy(i,o){var a=o,u=0;do{var m=a.nextSibling;if(i.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(m),Sr(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")$a(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,$a(a);for(var _=a.firstChild;_;){var A=_.nextSibling,R=_.nodeName;_[ri]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&$a(i.ownerDocument.body);a=m}while(a);Sr(o)}function Ly(i,o){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function Hd(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hd(a),Oo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function gS(i,o,a,u){for(;i.nodeType===1;){var m=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ri])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var _=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=Pn(i.nextSibling),i===null)break}return null}function yS(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Pn(i.nextSibling),i===null))return null;return i}function ky(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Pn(i.nextSibling),i===null))return null;return i}function Fd(i){return i.data==="$?"||i.data==="$~"}function Yd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function _S(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Pn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Jd=null;function qy(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Pn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function Oy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function By(i,o,a){switch(o=Ku(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function $a(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Oo(i)}var Un=new Map,Gy=new Set;function Qu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ki=re.d;re.d={f:TS,r:vS,D:ES,C:AS,L:SS,m:CS,X:IS,S:RS,M:wS};function TS(){var i=Ki.f(),o=Ou();return i||o}function vS(i){var o=Cn(i);o!==null&&o.tag===5&&o.type==="form"?sg(o):Ki.r(i)}var vr=typeof document>"u"?null:document;function zy(i,o,a){var u=vr;if(u&&typeof o=="string"&&o){var m=rn(o);m='link[rel="'+i+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),Gy.has(m)||(Gy.add(m),i={rel:i,crossOrigin:a,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),Kt(o,"link",i),Ct(o),u.head.appendChild(o)))}}function ES(i){Ki.D(i),zy("dns-prefetch",i,null)}function AS(i,o){Ki.C(i,o),zy("preconnect",i,o)}function SS(i,o,a){Ki.L(i,o,a);var u=vr;if(u&&i&&o){var m='link[rel="preload"][as="'+rn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+rn(a.imageSizes)+'"]')):m+='[href="'+rn(i)+'"]';var _=m;switch(o){case"style":_=Er(i);break;case"script":_=Ar(i)}Un.has(_)||(i=E({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Un.set(_,i),u.querySelector(m)!==null||o==="style"&&u.querySelector(Za(_))||o==="script"&&u.querySelector(Wa(_))||(o=u.createElement("link"),Kt(o,"link",i),Ct(o),u.head.appendChild(o)))}}function CS(i,o){Ki.m(i,o);var a=vr;if(a&&i){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+rn(u)+'"][href="'+rn(i)+'"]',_=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ar(i)}if(!Un.has(_)&&(i=E({rel:"modulepreload",href:i},o),Un.set(_,i),a.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wa(_)))return}u=a.createElement("link"),Kt(u,"link",i),Ct(u),a.head.appendChild(u)}}}function RS(i,o,a){Ki.S(i,o,a);var u=vr;if(u&&i){var m=li(u).hoistableStyles,_=Er(i);o=o||"default";var A=m.get(_);if(!A){var R={loading:0,preload:null};if(A=u.querySelector(Za(_)))R.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Un.get(_))&&Kd(i,a);var V=A=u.createElement("link");Ct(V),Kt(V,"link",i),V._p=new Promise(function(z,X){V.onload=z,V.onerror=X}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Xu(A,o,u)}A={type:"stylesheet",instance:A,count:1,state:R},m.set(_,A)}}}function IS(i,o){Ki.X(i,o);var a=vr;if(a&&i){var u=li(a).hoistableScripts,m=Ar(i),_=u.get(m);_||(_=a.querySelector(Wa(m)),_||(i=E({src:i,async:!0},o),(o=Un.get(m))&&Qd(i,o),_=a.createElement("script"),Ct(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(m,_))}}function wS(i,o){Ki.M(i,o);var a=vr;if(a&&i){var u=li(a).hoistableScripts,m=Ar(i),_=u.get(m);_||(_=a.querySelector(Wa(m)),_||(i=E({src:i,async:!0,type:"module"},o),(o=Un.get(m))&&Qd(i,o),_=a.createElement("script"),Ct(_),Kt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(m,_))}}function Hy(i,o,a,u){var m=(m=Me.current)?Qu(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Er(a.href),a=li(m).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Er(a.href);var _=li(m).hoistableStyles,A=_.get(i);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=m.querySelector(Za(i)))&&!_._p&&(A.instance=_,A.state.loading=5),Un.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(i,a),_||MS(m,i,a,A.state))),o&&u===null)throw Error(s(528,""));return A}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ar(a),a=li(m).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Er(i){return'href="'+rn(i)+'"'}function Za(i){return'link[rel="stylesheet"]['+i+"]"}function Fy(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function MS(i,o,a,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Kt(o,"link",a),Ct(o),i.head.appendChild(o))}function Ar(i){return'[src="'+rn(i)+'"]'}function Wa(i){return"script[async]"+i}function Yy(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+rn(a.href)+'"]');if(u)return o.instance=u,Ct(u),u;var m=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ct(u),Kt(u,"style",m),Xu(u,a.precedence,i),o.instance=u;case"stylesheet":m=Er(a.href);var _=i.querySelector(Za(m));if(_)return o.state.loading|=4,o.instance=_,Ct(_),_;u=Fy(a),(m=Un.get(m))&&Kd(u,m),_=(i.ownerDocument||i).createElement("link"),Ct(_);var A=_;return A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),Kt(_,"link",u),o.state.loading|=4,Xu(_,a.precedence,i),o.instance=_;case"script":return _=Ar(a.src),(m=i.querySelector(Wa(_)))?(o.instance=m,Ct(m),m):(u=a,(m=Un.get(_))&&(u=E({},a),Qd(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),Ct(m),Kt(m,"link",u),i.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Xu(u,a.precedence,i));return o.instance}function Xu(i,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,_=m,A=0;A<u.length;A++){var R=u[A];if(R.dataset.precedence===o)_=R;else if(_!==m)break}_?_.parentNode.insertBefore(i,_.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function Kd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Qd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var $u=null;function Jy(i,o,a){if($u===null){var u=new Map,m=$u=new Map;m.set(a,u)}else m=$u,u=m.get(a),u||(u=new Map,m.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),m=0;m<a.length;m++){var _=a[m];if(!(_[ri]||_[St]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=i+A;var R=u.get(A);R?R.push(_):u.set(A,[_])}}return u}function Ky(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function NS(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Qy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function DS(i,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Er(u.href),_=o.querySelector(Za(m));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Zu.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=_,Ct(_);return}_=o.ownerDocument||o,u=Fy(u),(m=Un.get(m))&&Kd(u,m),_=_.createElement("link"),Ct(_);var A=_;A._p=new Promise(function(R,V){A.onload=R,A.onerror=V}),Kt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Zu.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var Xd=0;function bS(i,o){return i.stylesheets&&i.count===0&&ju(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&ju(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+o);0<i.imgBytes&&Xd===0&&(Xd=62500*fS());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ju(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Xd?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Zu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ju(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wu=null;function ju(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wu=new Map,o.forEach(VS,i),Wu=null,Zu.call(i))}function VS(i,o){if(!(o.state.loading&4)){var a=Wu.get(i);if(a)var u=a.get(null);else{a=new Map,Wu.set(i,a);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<m.length;_++){var A=m[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}m=o.instance,A=m.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,m),a.set(A,m),this.count++,u=Zu.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),_?_.parentNode.insertBefore(m,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),o.state.loading|=4}}var ja={$$typeof:Z,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function xS(i,o,a,u,m,_,A,R,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.hiddenUpdates=si(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Xy(i,o,a,u,m,_,A,R,V,z,X,W){return i=new xS(i,o,a,A,V,z,X,W,R),o=1,_===!0&&(o|=24),_=yn(3,null,null,o),i.current=_,_.stateNode=i,o=Mf(),o.refCount++,i.pooledCache=o,o.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:o},Vf(_),i}function $y(i){return i?(i=jo,i):jo}function Zy(i,o,a,u,m,_){m=$y(m),u.context===null?u.context=m:u.pendingContext=m,u=ms(o),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=ps(i,u,o),a!==null&&(dn(a,i,o),ba(a,i,o))}function Wy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function $d(i,o){Wy(i,o),(i=i.alternate)&&Wy(i,o)}function jy(i){if(i.tag===13||i.tag===31){var o=uo(i,67108864);o!==null&&dn(o,i,67108864),$d(i,67108864)}}function e_(i){if(i.tag===13||i.tag===31){var o=An();o=Zs(o);var a=uo(i,o);a!==null&&dn(a,i,o),$d(i,o)}}var ec=!0;function PS(i,o,a,u){var m=Q.T;Q.T=null;var _=re.p;try{re.p=2,Zd(i,o,a,u)}finally{re.p=_,Q.T=m}}function US(i,o,a,u){var m=Q.T;Q.T=null;var _=re.p;try{re.p=8,Zd(i,o,a,u)}finally{re.p=_,Q.T=m}}function Zd(i,o,a,u){if(ec){var m=Wd(u);if(m===null)kd(i,o,u,tc,a),n_(i,u);else if(kS(m,i,o,a,u))u.stopPropagation();else if(n_(i,u),o&4&&-1<LS.indexOf(i)){for(;m!==null;){var _=Cn(m);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ni(_.pendingLanes);if(A!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var V=1<<31-gt(A);R.entanglements[1]|=V,A&=~V}Ei(_),(Ye&6)===0&&(ku=nn()+500,Ka(0))}}break;case 31:case 13:R=uo(_,2),R!==null&&dn(R,_,2),Ou(),$d(_,2)}if(_=Wd(u),_===null&&kd(i,o,u,tc,a),_===m)break;m=_}m!==null&&u.stopPropagation()}else kd(i,o,u,null,a)}}function Wd(i){return i=Rn(i),jd(i)}var tc=null;function jd(i){if(tc=null,i=ai(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=c(o),i!==null)return i;i=null}else if(a===31){if(i=p(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return tc=i,null}function t_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ks()){case na:return 2;case ia:return 8;case ji:case of:return 32;case xl:return 268435456;default:return 32}default:return 32}}var eh=!1,Is=null,ws=null,Ms=null,el=new Map,tl=new Map,Ns=[],LS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n_(i,o){switch(i){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":el.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(o.pointerId)}}function nl(i,o,a,u,m,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[m]},o!==null&&(o=Cn(o),o!==null&&jy(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function kS(i,o,a,u,m){switch(o){case"focusin":return Is=nl(Is,i,o,a,u,m),!0;case"dragenter":return ws=nl(ws,i,o,a,u,m),!0;case"mouseover":return Ms=nl(Ms,i,o,a,u,m),!0;case"pointerover":var _=m.pointerId;return el.set(_,nl(el.get(_)||null,i,o,a,u,m)),!0;case"gotpointercapture":return _=m.pointerId,tl.set(_,nl(tl.get(_)||null,i,o,a,u,m)),!0}return!1}function i_(i){var o=ai(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){i.blockedOn=o,Gn(i.priority,function(){e_(a)});return}}else if(o===31){if(o=p(a),o!==null){i.blockedOn=o,Gn(i.priority,function(){e_(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Wd(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);pa=u,a.target.dispatchEvent(u),pa=null}else return o=Cn(a),o!==null&&jy(o),i.blockedOn=a,!1;o.shift()}return!0}function s_(i,o,a){nc(i)&&a.delete(o)}function qS(){eh=!1,Is!==null&&nc(Is)&&(Is=null),ws!==null&&nc(ws)&&(ws=null),Ms!==null&&nc(Ms)&&(Ms=null),el.forEach(s_),tl.forEach(s_)}function ic(i,o){i.blockedOn===o&&(i.blockedOn=null,eh||(eh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qS)))}var sc=null;function o_(i){sc!==i&&(sc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sc===i&&(sc=null);for(var o=0;o<i.length;o+=3){var a=i[o],u=i[o+1],m=i[o+2];if(typeof u!="function"){if(jd(u||a)===null)continue;break}var _=Cn(a);_!==null&&(i.splice(o,3),o-=3,Wf(_,{pending:!0,data:m,method:a.method,action:u},u,m))}}))}function Sr(i){function o(V){return ic(V,i)}Is!==null&&ic(Is,i),ws!==null&&ic(ws,i),Ms!==null&&ic(Ms,i),el.forEach(o),tl.forEach(o);for(var a=0;a<Ns.length;a++){var u=Ns[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ns.length&&(a=Ns[0],a.blockedOn===null);)i_(a),a.blockedOn===null&&Ns.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var m=a[u],_=a[u+1],A=m[kt]||null;if(typeof _=="function")A||o_(a);else if(A){var R=null;if(_&&_.hasAttribute("formAction")){if(m=_,A=_[kt]||null)R=A.formAction;else if(jd(m)!==null)continue}else R=A.action;typeof R=="function"?a[u+1]=R:(a.splice(u,3),u-=3),o_(a)}}}function r_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return m=A})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function th(i){this._internalRoot=i}oc.prototype.render=th.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=An();Zy(a,u,i,o,null,null)},oc.prototype.unmount=th.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Zy(i.current,2,null,i,null,null),Ou(),o[oi]=null}};function oc(i){this._internalRoot=i}oc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ol();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Ns.length&&o!==0&&o<Ns[a].priority;a++);Ns.splice(a,0,i),a===0&&i_(i)}};var a_=e.version;if(a_!=="19.2.0")throw Error(s(527,a_,"19.2.0"));re.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(o),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var OS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{On=rc.inject(OS),zt=rc}catch{}}return sl.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,u="",m=mg,_=pg,A=gg;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=Xy(i,1,!1,null,null,a,u,null,m,_,A,r_),i[oi]=o.current,Ld(i),new th(o)},sl.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var u=!1,m="",_=mg,A=pg,R=gg,V=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),o=Xy(i,1,!0,o,a??null,u,m,V,_,A,R,r_),o.context=$y(null),a=o.current,u=An(),u=Zs(u),m=ms(u),m.callback=null,ps(a,m,u),a=u,o.current.lanes=a,Xs(o,a),Ei(o),i[oi]=o.current,Ld(i),new oc(o)},sl.version="19.2.0",sl}var y_;function $S(){if(y_)return sh.exports;y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sh.exports=XS(),sh.exports}var ZS=$S();const WS=Yv(ZS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jS,eC;function tC(){return{geminiUrl:jS,vertexUrl:eC}}function nC(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const c=tC();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mo{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const p=c.slice(0,-2);if(!(p in n))if(Array.isArray(t))n[p]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[p])){const y=n[p];if(Array.isArray(t))for(let g=0;g<y.length;g++){const T=y[g];h(T,e.slice(l+1),t[g])}else for(const g of y)h(g,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const p=c.slice(0,-3);p in n||(n[p]=[{}]);const y=n[p];h(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(p=>f(p,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jh(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iC(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function sC(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],rC(c)),e}function oC(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],aC(c)),e}function rC(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>lC(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function aC(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>uC(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function lC(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],dC(t)),e}function uC(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],hC(t)),e}function cC(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function fC(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function dC(n){const e={},t=f(n,["video","uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&h(e,["videoBytes"],jh(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function hC(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],jh(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var __;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(__||(__={}));var T_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(T_||(T_={}));var bs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(bs||(bs={}));var v_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(v_||(v_={}));var E_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(E_||(E_={}));var A_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(A_||(A_={}));var S_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(S_||(S_={}));var C_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(C_||(C_={}));var R_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(R_||(R_={}));var I_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(I_||(I_={}));var w_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(w_||(w_={}));var M_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(M_||(M_={}));var N_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(N_||(N_={}));var D_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(D_||(D_={}));var b_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(b_||(b_={}));var Ec;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ec||(Ec={}));var V_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(V_||(V_={}));var Eh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Eh||(Eh={}));var x_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(x_||(x_={}));var P_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(P_||(P_={}));var U_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(U_||(U_={}));var L_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(L_||(L_={}));var k_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(k_||(k_={}));var q_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(q_||(q_={}));var O_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(O_||(O_={}));var B_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(B_||(B_={}));var G_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(G_||(G_={}));var z_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(z_||(z_={}));var H_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(H_||(H_={}));var F_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(F_||(F_={}));var Y_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Y_||(Y_={}));var J_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(J_||(J_={}));var K_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(K_||(K_={}));var Q_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Q_||(Q_={}));var X_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(X_||(X_={}));var $_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})($_||($_={}));var Z_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Z_||(Z_={}));var W_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(W_||(W_={}));var j_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(j_||(j_={}));var eT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(eT||(eT={}));var tT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(tT||(tT={}));var nT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(nT||(nT={}));var iT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(iT||(iT={}));var sT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(sT||(sT={}));var oT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oT||(oT={}));var rT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(rT||(rT={}));var aT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(aT||(aT={}));var lT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(lT||(lT={}));var Nr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Nr||(Nr={}));class Ah{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ol{get text(){var e,t,s,r,l,c,p,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",T=!1;const E=[];for(const C of(y=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[D,O]of Object.entries(C))D!=="text"&&D!=="thought"&&(O!==null||O!==void 0)&&E.push(D);if(typeof C.text=="string"){if(typeof C.thought=="boolean"&&C.thought)continue;T=!0,g+=C.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?g:void 0}get data(){var e,t,s,r,l,c,p,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const T=[];for(const E of(y=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[C,D]of Object.entries(E))C!=="inlineData"&&(D!==null||D!==void 0)&&T.push(C);E.inlineData&&typeof E.inlineData.data=="string"&&(g+=atob(E.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,t,s,r,l,c,p,y;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(y=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,t,s,r,l,c,p,y,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(y=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(g=T==null?void 0:T[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,s,r,l,c,p,y,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(y=(p=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((T==null?void 0:T.length)!==0)return(g=T==null?void 0:T[0])===null||g===void 0?void 0:g.output}}class uT{}class cT{}class mC{}class pC{}class gC{}class yC{}class fT{}class dT{}class hT{}class _C{}class Ac{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Ac;let r;const l=e;return t?r=oC(l):r=sC(l),Object.assign(s,r),s}}class mT{}class pT{}class gT{}class TC{}class vC{}class EC{}class yT{}class AC{get text(){var e,t,s;let r="",l=!1;const c=[];for(const p of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[y,g]of Object.entries(p))y!=="text"&&y!=="thought"&&g!==null&&c.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;l=!0,r+=p.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[p,y]of Object.entries(c))p!=="inlineData"&&y!==null&&l.push(p);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class SC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function He(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Jv(n,e){const t=He(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Kv(n){return Array.isArray(n)?n.map(e=>Sc(e)):[Sc(n)]}function Sc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Qv(n){const e=Sc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xv(n){const e=Sc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _T(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function $v(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>_T(e)):[_T(n)]}function Sh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function TT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function vT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function tn(n){if(n==null)throw new Error("ContentUnion is required");return Sh(n)?n:{role:"user",parts:$v(n)}}function em(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=tn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=tn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>tn(t)):[tn(e)]}function qn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(TT(n)||vT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(n)]}const e=[],t=[],s=Sh(n[0]);for(const r of n){const l=Sh(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(TT(r)||vT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:$v(t)}),e}function CC(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(bs).includes(t[0].toUpperCase())?t[0].toUpperCase():bs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(bs).includes(s.toUpperCase())?s.toUpperCase():bs.TYPE_UNSPECIFIED})}}function Dr(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&CC(n.type,e);for(const[c,p]of Object.entries(n))if(p!=null)if(c=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(bs).includes(p.toUpperCase())?p.toUpperCase():bs.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Dr(p);else if(s.includes(c)){const y=[];for(const g of p){if(g.type=="null"){e.nullable=!0;continue}y.push(Dr(g))}e[c]=y}else if(r.includes(c)){const y={};for(const[g,T]of Object.entries(p))y[g]=Dr(T);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=p}return e}function tm(n){return Dr(n)}function nm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function im(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Fr(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Dr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Dr(e.response));return n}function Yr(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function RC(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Zi(n,e){if(typeof e!="string")throw new Error("name must be a string");return RC(n,e,"cachedContents")}function Zv(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Fs(n){return jh(n)}function IC(n){return n!=null&&typeof n=="object"&&"name"in n}function wC(n){return n!=null&&typeof n=="object"&&"video"in n}function MC(n){return n!=null&&typeof n=="object"&&"uri"in n}function Wv(n){var e;let t;if(IC(n)&&(t=n.name),!(MC(n)&&(t=n.uri,t===void 0))&&!(wC(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function jv(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function eE(n){for(const e of["models","tunedModels","publisherModels"])if(NC(n,e))return n[e];return[]}function NC(n,e){return n!==null&&typeof n=="object"&&e in n}function DC(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function bC(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=DC(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function tE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function VC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function nE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Jr(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function iE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xC(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>uR(c))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function PC(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function UC(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function rl(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],iE(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const p=f(n,["metadata","updateTime"]);p!=null&&h(e,["updateTime"],p);const y=f(n,["metadata","model"]);y!=null&&h(e,["model"],y);const g=f(n,["metadata","output"]);return g!=null&&h(e,["dest"],xC(nE(g))),e}function Ch(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["state"]);r!=null&&h(e,["state"],iE(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["createTime"]);c!=null&&h(e,["createTime"],c);const p=f(n,["startTime"]);p!=null&&h(e,["startTime"],p);const y=f(n,["endTime"]);y!=null&&h(e,["endTime"],y);const g=f(n,["updateTime"]);g!=null&&h(e,["updateTime"],g);const T=f(n,["model"]);T!=null&&h(e,["model"],T);const E=f(n,["inputConfig"]);E!=null&&h(e,["src"],LC(E));const C=f(n,["outputConfig"]);return C!=null&&h(e,["dest"],PC(nE(C))),e}function LC(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function kC(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>lR(n,c))),h(t,["requests","requests"],l)}return t}function qC(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function OC(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function BC(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Jr(n,s)),t}function GC(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Jr(n,s)),t}function zC(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],HC(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&h(e,["urlContextMetadata"],c);const p=f(n,["avgLogprobs"]);p!=null&&h(e,["avgLogprobs"],p);const y=f(n,["groundingMetadata"]);y!=null&&h(e,["groundingMetadata"],y);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const T=f(n,["logprobsResult"]);T!=null&&h(e,["logprobsResult"],T);const E=f(n,["safetyRatings"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(D=>D)),h(e,["safetyRatings"],C)}return e}function HC(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function sE(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>gR(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function FC(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function YC(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],UC(VC(r))),t}function ET(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],kC(n,tE(n,r)));const l=f(e,["config"]);return l!=null&&FC(l,t),t}function JC(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],He(n,s));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],qC(tE(n,r)));const l=f(e,["config"]);return l!=null&&YC(l,t),t}function KC(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function lh(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],eR(n,r));const l=f(e,["config"]);return l!=null&&KC(l,t),t}function QC(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Jr(n,s)),t}function XC(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Jr(n,s)),t}function $C(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function ZC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function WC(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=em(n,s);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&h(t,["_self"],jC(r,t)),t}function jC(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function eR(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],WC(n,r)),t}function tR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function nR(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],sE(tn(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const p=f(e,["topK"]);p!=null&&h(s,["topK"],p);const y=f(e,["candidateCount"]);y!=null&&h(s,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&h(s,["maxOutputTokens"],g);const T=f(e,["stopSequences"]);T!=null&&h(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const C=f(e,["logprobs"]);C!=null&&h(s,["logprobs"],C);const D=f(e,["presencePenalty"]);D!=null&&h(s,["presencePenalty"],D);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const H=f(e,["seed"]);H!=null&&h(s,["seed"],H);const J=f(e,["responseMimeType"]);J!=null&&h(s,["responseMimeType"],J);const ne=f(e,["responseSchema"]);ne!=null&&h(s,["responseSchema"],tm(ne));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&h(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let k=Z;Array.isArray(k)&&(k=k.map(b=>yR(b))),h(t,["safetySettings"],k)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let k=Yr(ae);Array.isArray(k)&&(k=k.map(b=>_R(Fr(b)))),h(t,["tools"],k)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&h(t,["toolConfig"],he),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&h(t,["cachedContent"],Zi(n,ue));const N=f(e,["responseModalities"]);N!=null&&h(s,["responseModalities"],N);const w=f(e,["mediaResolution"]);w!=null&&h(s,["mediaResolution"],w);const M=f(e,["speechConfig"]);if(M!=null&&h(s,["speechConfig"],nm(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=f(e,["thinkingConfig"]);x!=null&&h(s,["thinkingConfig"],x);const P=f(e,["imageConfig"]);return P!=null&&h(s,["imageConfig"],P),s}function iR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(g=>zC(g))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const p=f(n,["usageMetadata"]);return p!=null&&h(e,["usageMetadata"],p),e}function sR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Jr(n,s)),t}function oR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Jr(n,s)),t}function rR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function aR(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function lR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let p=qn(r);Array.isArray(p)&&(p=p.map(y=>sE(y))),h(t,["request","contents"],p)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&h(t,["request","generationConfig"],nR(n,c,f(t,["request"],{}))),t}function uR(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],iR(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function cR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function fR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function dR(n){const e={},t=f(n,["config"]);return t!=null&&cR(t,e),e}function hR(n){const e={},t=f(n,["config"]);return t!=null&&fR(t,e),e}function mR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>rl(c))),h(e,["batchJobs"],l)}return e}function pR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Ch(c))),h(e,["batchJobs"],l)}return e}function gR(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&h(e,["thought"],s);const r=f(n,["inlineData"]);r!=null&&h(e,["inlineData"],OC(r));const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],tR(l));const c=f(n,["thoughtSignature"]);c!=null&&h(e,["thoughtSignature"],c);const p=f(n,["functionCall"]);p!=null&&h(e,["functionCall"],p);const y=f(n,["codeExecutionResult"]);y!=null&&h(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&h(e,["executableCode"],g);const T=f(n,["functionResponse"]);T!=null&&h(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&h(e,["text"],E),e}function yR(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&h(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function _R(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(T=>T)),h(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],aR(s));const r=f(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&h(e,["googleMaps"],rR(l));const c=f(n,["urlContext"]);c!=null&&h(e,["urlContext"],c);const p=f(n,["computerUse"]);p!=null&&h(e,["computerUse"],p);const y=f(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ro;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ro||(Ro={}));class Il{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TR extends Mo{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{var s,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const p=this.createInlinedEmbedContentRequest(t),y=p.path,g=p.body,T=lh(this.apiClient,t)._query||{};return this.apiClient.request({path:y,queryParams:T,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(C=>C.json()).then(C=>rl(C))},this.list=async(t={})=>new Il(Ro.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=ET(this.apiClient,e),s=t._url,r=pe("{model}:batchGenerateContent",s),p=t.batch.inputConfig.requests,y=p.requests,g=[];for(const T of y){const E=Object.assign({},T);if(E.systemInstruction){const C=E.systemInstruction;delete E.systemInstruction;const D=E.request;D.systemInstruction=C,E.request=D}g.push(E)}return p.requests=g,delete t.config,delete t._url,delete t._query,{path:r,body:t}}createInlinedEmbedContentRequest(e){const t=lh(this.apiClient,e),s=t._url,r=pe("{model}:asyncBatchEmbedContent",s),p=t.batch.inputConfig.requests,y=p.requests,g=[];delete p.config;for(const T of y){const E=Object.assign({},T),C=E.request;for(const D in E)D!=="request"&&(C[D]=E[D],delete E[D]);g.push(E)}return p.requests=g,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=JC(this.apiClient,e);return p=pe("batchPredictionJobs",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Ch(T))}else{const g=ET(this.apiClient,e);return p=pe("{model}:batchGenerateContent",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>rl(T))}}async createEmbeddingsInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=lh(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>rl(y))}}async get(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=oR(this.apiClient,e);return p=pe("batchPredictionJobs/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Ch(T))}else{const g=sR(this.apiClient,e);return p=pe("batches/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>rl(T))}}async cancel(e){var t,s,r,l;let c="",p={};if(this.apiClient.isVertexAI()){const y=GC(this.apiClient,e);c=pe("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=BC(this.apiClient,e);c=pe("batches/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=hR(e);return p=pe("batchPredictionJobs",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=pR(T),C=new yT;return Object.assign(C,E),C})}else{const g=dR(e);return p=pe("batches",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=mR(T),C=new yT;return Object.assign(C,E),C})}}async delete(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=XC(this.apiClient,e);return p=pe("batchPredictionJobs/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>ZC(T))}else{const g=QC(this.apiClient,e);return p=pe("batches/{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>$C(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function AT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>GR(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function ER(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=qn(c);Array.isArray(T)&&(T=T.map(E=>AT(E))),h(e,["contents"],T)}const p=f(n,["systemInstruction"]);e!==void 0&&p!=null&&h(e,["systemInstruction"],AT(tn(p)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>zR(E))),h(e,["tools"],T)}const g=f(n,["toolConfig"]);if(e!==void 0&&g!=null&&h(e,["toolConfig"],g),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function AR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let E=qn(c);Array.isArray(E)&&(E=E.map(C=>C)),h(e,["contents"],E)}const p=f(n,["systemInstruction"]);e!==void 0&&p!=null&&h(e,["systemInstruction"],tn(p));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(C=>HR(C))),h(e,["tools"],E)}const g=f(n,["toolConfig"]);e!==void 0&&g!=null&&h(e,["toolConfig"],g);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&h(e,["encryption_spec","kmsKeyName"],T),t}function SR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],Jv(n,s));const r=f(e,["config"]);return r!=null&&ER(r,t),t}function CR(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],Jv(n,s));const r=f(e,["config"]);return r!=null&&AR(r,t),t}function RR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Zi(n,s)),t}function IR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Zi(n,s)),t}function wR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function MR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function NR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function DR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const p=f(n,["responseJsonSchema"]);return p!=null&&h(e,["responseJsonSchema"],p),e}function bR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Zi(n,s)),t}function VR(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Zi(n,s)),t}function xR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function PR(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function UR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function LR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function kR(n){const e={},t=f(n,["config"]);return t!=null&&UR(t,e),e}function qR(n){const e={},t=f(n,["config"]);return t!=null&&LR(t,e),e}function OR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function BR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function GR(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&h(e,["thought"],s);const r=f(n,["inlineData"]);r!=null&&h(e,["inlineData"],vR(r));const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],NR(l));const c=f(n,["thoughtSignature"]);c!=null&&h(e,["thoughtSignature"],c);const p=f(n,["functionCall"]);p!=null&&h(e,["functionCall"],p);const y=f(n,["codeExecutionResult"]);y!=null&&h(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&h(e,["executableCode"],g);const T=f(n,["functionResponse"]);T!=null&&h(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&h(e,["text"],E),e}function zR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(T=>T)),h(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],PR(s));const r=f(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&h(e,["googleMaps"],xR(l));const c=f(n,["urlContext"]);c!=null&&h(e,["urlContext"],c);const p=f(n,["computerUse"]);p!=null&&h(e,["computerUse"],p);const y=f(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}function HR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(C=>DR(C))),h(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearch"]);r!=null&&h(e,["googleSearch"],r);const l=f(n,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&h(e,["enterpriseWebSearch"],c);const p=f(n,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const y=f(n,["urlContext"]);y!=null&&h(e,["urlContext"],y);const g=f(n,["computerUse"]);g!=null&&h(e,["computerUse"],g);const T=f(n,["codeExecution"]);return T!=null&&h(e,["codeExecution"],T),e}function FR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function YR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function JR(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],Zi(n,s));const r=f(e,["config"]);return r!=null&&FR(r,t),t}function KR(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],Zi(n,s));const r=f(e,["config"]);return r!=null&&YR(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QR extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Il(Ro.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=CR(this.apiClient,e);return p=pe("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const g=SR(this.apiClient,e);return p=pe("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async get(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=VR(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const g=bR(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async delete(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=IR(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=MR(T),C=new pT;return Object.assign(C,E),C})}else{const g=RR(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=wR(T),C=new pT;return Object.assign(C,E),C})}}async update(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=KR(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const g=JR(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async listInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=qR(e);return p=pe("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=BR(T),C=new gT;return Object.assign(C,E),C})}else{const g=kR(e);return p=pe("cachedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=OR(T),C=new gT;return Object.assign(C,E),C})}}}function ST(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(n){return this instanceof rt?(this.v=n,this):new rt(n)}function br(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(D){return function(O){return Promise.resolve(O).then(D,E)}}function p(D,O){s[D]&&(r[D]=function(H){return new Promise(function(J,ne){l.push([D,H,J,ne])>1||y(D,H)})},O&&(r[D]=O(r[D])))}function y(D,O){try{g(s[D](O))}catch(H){C(l[0][3],H)}}function g(D){D.value instanceof rt?Promise.resolve(D.value.v).then(T,E):C(l[0][2],D)}function T(D){y("next",D)}function E(D){y("throw",D)}function C(D,O){D(O),l.shift(),l.length&&y(l[0][0],l[0][1])}}function cl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ST=="function"?ST(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(p,y){c=n[l](c),r(p,y,c.done,c.value)})}}function r(l,c,p,y){Promise.resolve(y).then(function(g){l({value:g,done:p})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XR(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:oE(t)}function oE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $R(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function CT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!oE(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class ZR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new WR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class WR{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),$R(l)}async sendMessage(e){var t;await this.sendPromise;const s=tn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,p;const y=await r,g=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,T=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let C=[];T!=null&&(C=(p=T.slice(E))!==null&&p!==void 0?p:[]);const D=g?[g]:[];this.recordHistory(s,D,C)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=tn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?CT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,r;return br(this,arguments,function*(){var c,p,y,g;const T=[];try{for(var E=!0,C=cl(e),D;D=yield rt(C.next()),c=D.done,!c;E=!0){g=D.value,E=!1;const O=g;if(XR(O)){const H=(r=(s=O.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content;H!==void 0&&T.push(H)}yield yield rt(O)}}catch(O){p={error:O}}finally{try{!E&&!c&&(y=C.return)&&(yield rt(y.call(C)))}finally{if(p)throw p.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...CT(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Oc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jR(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function eI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function tI(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],Wv(t)),e}function nI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function iI(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],Wv(t)),e}function sI(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function oI(n){const e={},t=f(n,["config"]);return t!=null&&sI(t,e),e}function rI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aI extends Mo{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Il(Ro.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=oI(e);return l=pe("files",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const T=g;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const g=rI(y),T=new TC;return Object.assign(T,g),T})}}async createInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=jR(e);return l=pe("upload/v1beta/files",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const g=eI(y),T=new vC;return Object.assign(T,g),T})}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=iI(e);return l=pe("files/{file}",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tI(e);return l=pe("files/{file}",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const T=g;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const g=nI(y),T=new EC;return Object.assign(T,g),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mc(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function lI(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>SI(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function uI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function cI(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const p=f(n,["responseJsonSchema"]);return p!=null&&h(e,["responseJsonSchema"],p),e}function fI(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const r=f(n,["candidateCount"]);r!=null&&h(e,["candidateCount"],r);const l=f(n,["enableAffectiveDialog"]);l!=null&&h(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&h(e,["frequencyPenalty"],c);const p=f(n,["logprobs"]);p!=null&&h(e,["logprobs"],p);const y=f(n,["maxOutputTokens"]);y!=null&&h(e,["maxOutputTokens"],y);const g=f(n,["mediaResolution"]);g!=null&&h(e,["mediaResolution"],g);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const E=f(n,["responseJsonSchema"]);E!=null&&h(e,["responseJsonSchema"],E);const C=f(n,["responseLogprobs"]);C!=null&&h(e,["responseLogprobs"],C);const D=f(n,["responseMimeType"]);D!=null&&h(e,["responseMimeType"],D);const O=f(n,["responseModalities"]);O!=null&&h(e,["responseModalities"],O);const H=f(n,["responseSchema"]);H!=null&&h(e,["responseSchema"],H);const J=f(n,["routingConfig"]);J!=null&&h(e,["routingConfig"],J);const ne=f(n,["seed"]);ne!=null&&h(e,["seed"],ne);const ie=f(n,["speechConfig"]);ie!=null&&h(e,["speechConfig"],rE(ie));const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const ae=f(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const he=f(n,["thinkingConfig"]);he!=null&&h(e,["thinkingConfig"],he);const ue=f(n,["topK"]);ue!=null&&h(e,["topK"],ue);const N=f(n,["topP"]);return N!=null&&h(e,["topP"],N),e}function dI(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function hI(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function mI(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const p=f(n,["topK"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","topK"],p);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","mediaResolution"],g);const T=f(n,["seed"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],im(E));const C=f(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);const D=f(n,["enableAffectiveDialog"]);e!==void 0&&D!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],D);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],lI(tn(O)));const H=f(n,["tools"]);if(e!==void 0&&H!=null){let ue=Yr(H);Array.isArray(ue)&&(ue=ue.map(N=>RI(Fr(N)))),h(e,["setup","tools"],ue)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&h(e,["setup","sessionResumption"],CI(J));const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","inputAudioTranscription"],ne);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&h(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&h(e,["setup","proactivity"],he),t}function pI(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],fI(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const p=f(n,["topK"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","topK"],p);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","mediaResolution"],g);const T=f(n,["seed"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],rE(im(E)));const C=f(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);const D=f(n,["enableAffectiveDialog"]);e!==void 0&&D!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],D);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],tn(O));const H=f(n,["tools"]);if(e!==void 0&&H!=null){let ue=Yr(H);Array.isArray(ue)&&(ue=ue.map(N=>II(Fr(N)))),h(e,["setup","tools"],ue)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&h(e,["setup","sessionResumption"],J);const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","inputAudioTranscription"],ne);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&h(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&h(e,["setup","proactivity"],he),t}function gI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],He(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],mI(r,t)),t}function yI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],He(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],pI(r,t)),t}function _I(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function TI(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function vI(n){const e={},t=f(n,["media"]);if(t!=null){let g=Kv(t);Array.isArray(g)&&(g=g.map(T=>mc(T))),h(e,["mediaChunks"],g)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],mc(Xv(s)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],mc(Qv(l)));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const p=f(n,["activityStart"]);p!=null&&h(e,["activityStart"],p);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function EI(n){const e={},t=f(n,["media"]);if(t!=null){let g=Kv(t);Array.isArray(g)&&(g=g.map(T=>T)),h(e,["mediaChunks"],g)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],Xv(s));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Qv(l));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const p=f(n,["activityStart"]);p!=null&&h(e,["activityStart"],p);const y=f(n,["activityEnd"]);return y!=null&&h(e,["activityEnd"],y),e}function AI(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],wI(c));const p=f(n,["goAway"]);p!=null&&h(e,["goAway"],p);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&h(e,["sessionResumptionUpdate"],y),e}function SI(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&h(e,["thought"],s);const r=f(n,["inlineData"]);r!=null&&h(e,["inlineData"],mc(r));const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],uI(l));const c=f(n,["thoughtSignature"]);c!=null&&h(e,["thoughtSignature"],c);const p=f(n,["functionCall"]);p!=null&&h(e,["functionCall"],p);const y=f(n,["codeExecutionResult"]);y!=null&&h(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&h(e,["executableCode"],g);const T=f(n,["functionResponse"]);T!=null&&h(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&h(e,["text"],E),e}function CI(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rE(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function RI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(T=>T)),h(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],hI(s));const r=f(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&h(e,["googleMaps"],dI(l));const c=f(n,["urlContext"]);c!=null&&h(e,["urlContext"],c);const p=f(n,["computerUse"]);p!=null&&h(e,["computerUse"],p);const y=f(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}function II(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(C=>cI(C))),h(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearch"]);r!=null&&h(e,["googleSearch"],r);const l=f(n,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&h(e,["enterpriseWebSearch"],c);const p=f(n,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const y=f(n,["urlContext"]);y!=null&&h(e,["urlContext"],y);const g=f(n,["computerUse"]);g!=null&&h(e,["computerUse"],g);const T=f(n,["codeExecution"]);return T!=null&&h(e,["codeExecution"],T),e}function wI(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const p=f(n,["totalTokenCount"]);p!=null&&h(e,["totalTokenCount"],p);const y=f(n,["promptTokensDetails"]);if(y!=null){let D=y;Array.isArray(D)&&(D=D.map(O=>O)),h(e,["promptTokensDetails"],D)}const g=f(n,["cacheTokensDetails"]);if(g!=null){let D=g;Array.isArray(D)&&(D=D.map(O=>O)),h(e,["cacheTokensDetails"],D)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let D=T;Array.isArray(D)&&(D=D.map(O=>O)),h(e,["responseTokensDetails"],D)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let D=E;Array.isArray(D)&&(D=D.map(O=>O)),h(e,["toolUsePromptTokensDetails"],D)}const C=f(n,["trafficType"]);return C!=null&&h(e,["trafficType"],C),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function NI(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],DI(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&h(e,["urlContextMetadata"],c);const p=f(n,["avgLogprobs"]);p!=null&&h(e,["avgLogprobs"],p);const y=f(n,["groundingMetadata"]);y!=null&&h(e,["groundingMetadata"],y);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const T=f(n,["logprobsResult"]);T!=null&&h(e,["logprobsResult"],T);const E=f(n,["safetyRatings"]);if(E!=null){let C=E;Array.isArray(C)&&(C=C.map(D=>D)),h(e,["safetyRatings"],C)}return e}function DI(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function bI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let l=qn(r);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function VI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function xI(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],PI(s)),e}function PI(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function Bc(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>O1(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function UI(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function LI(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kI(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],tn(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(p=>fE(p))),h(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],I1(l)),t}function qI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let c=qn(r);Array.isArray(c)&&(c=c.map(p=>Bc(p))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&LI(l),t}function OI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let c=qn(r);Array.isArray(c)&&(c=c.map(p=>p)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&kI(l,t),t}function BI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function GI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function zI(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],He(n,s)),t}function HI(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],He(n,s)),t}function FI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function YI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function JI(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const p=f(n,["guidanceScale"]);e!==void 0&&p!=null&&h(e,["parameters","guidanceScale"],p);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const C=f(n,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);const D=f(n,["language"]);e!==void 0&&D!=null&&h(e,["parameters","language"],D);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const H=f(n,["outputCompressionQuality"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","compressionQuality"],H);const J=f(n,["addWatermark"]);e!==void 0&&J!=null&&h(e,["parameters","addWatermark"],J);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&h(e,["labels"],ne);const ie=f(n,["editMode"]);e!==void 0&&ie!=null&&h(e,["parameters","editMode"],ie);const Z=f(n,["baseSteps"]);return e!==void 0&&Z!=null&&h(e,["parameters","editConfig","baseSteps"],Z),t}function KI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(y=>Y1(y))),h(t,["instances[0]","referenceImages"],p)}const c=f(e,["config"]);return c!=null&&JI(c,t),t}function QI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Gc(l))),h(e,["generatedImages"],r)}return e}function XI(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function $I(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const p=f(n,["autoTruncate"]);return e!==void 0&&p!=null&&h(e,["parameters","autoTruncate"],p),t}function ZI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let p=em(n,r);Array.isArray(p)&&(p=p.map(y=>y)),h(t,["requests[]","content"],p)}const l=f(e,["config"]);l!=null&&XI(l,t);const c=f(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],He(n,c)),t}function WI(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let c=em(n,r);Array.isArray(c)&&(c=c.map(p=>p)),h(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&$I(l,t),t}function jI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function e1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>xI(c))),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function t1(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function n1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function i1(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const p=f(n,["responseJsonSchema"]);return p!=null&&h(e,["responseJsonSchema"],p),e}function s1(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],Bc(tn(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const p=f(e,["topK"]);p!=null&&h(s,["topK"],p);const y=f(e,["candidateCount"]);y!=null&&h(s,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&h(s,["maxOutputTokens"],g);const T=f(e,["stopSequences"]);T!=null&&h(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const C=f(e,["logprobs"]);C!=null&&h(s,["logprobs"],C);const D=f(e,["presencePenalty"]);D!=null&&h(s,["presencePenalty"],D);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const H=f(e,["seed"]);H!=null&&h(s,["seed"],H);const J=f(e,["responseMimeType"]);J!=null&&h(s,["responseMimeType"],J);const ne=f(e,["responseSchema"]);ne!=null&&h(s,["responseSchema"],tm(ne));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&h(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let k=Z;Array.isArray(k)&&(k=k.map(b=>J1(b))),h(t,["safetySettings"],k)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let k=Yr(ae);Array.isArray(k)&&(k=k.map(b=>W1(Fr(b)))),h(t,["tools"],k)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&h(t,["toolConfig"],he),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&h(t,["cachedContent"],Zi(n,ue));const N=f(e,["responseModalities"]);N!=null&&h(s,["responseModalities"],N);const w=f(e,["mediaResolution"]);w!=null&&h(s,["mediaResolution"],w);const M=f(e,["speechConfig"]);if(M!=null&&h(s,["speechConfig"],nm(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=f(e,["thinkingConfig"]);x!=null&&h(s,["thinkingConfig"],x);const P=f(e,["imageConfig"]);return P!=null&&h(s,["imageConfig"],P),s}function o1(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],tn(r));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const p=f(e,["topK"]);p!=null&&h(s,["topK"],p);const y=f(e,["candidateCount"]);y!=null&&h(s,["candidateCount"],y);const g=f(e,["maxOutputTokens"]);g!=null&&h(s,["maxOutputTokens"],g);const T=f(e,["stopSequences"]);T!=null&&h(s,["stopSequences"],T);const E=f(e,["responseLogprobs"]);E!=null&&h(s,["responseLogprobs"],E);const C=f(e,["logprobs"]);C!=null&&h(s,["logprobs"],C);const D=f(e,["presencePenalty"]);D!=null&&h(s,["presencePenalty"],D);const O=f(e,["frequencyPenalty"]);O!=null&&h(s,["frequencyPenalty"],O);const H=f(e,["seed"]);H!=null&&h(s,["seed"],H);const J=f(e,["responseMimeType"]);J!=null&&h(s,["responseMimeType"],J);const ne=f(e,["responseSchema"]);ne!=null&&h(s,["responseSchema"],tm(ne));const ie=f(e,["responseJsonSchema"]);ie!=null&&h(s,["responseJsonSchema"],ie);const Z=f(e,["routingConfig"]);Z!=null&&h(s,["routingConfig"],Z);const ae=f(e,["modelSelectionConfig"]);ae!=null&&h(s,["modelConfig"],ae);const he=f(e,["safetySettings"]);if(t!==void 0&&he!=null){let Q=he;Array.isArray(Q)&&(Q=Q.map(re=>re)),h(t,["safetySettings"],Q)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let Q=Yr(ue);Array.isArray(Q)&&(Q=Q.map(re=>fE(Fr(re)))),h(t,["tools"],Q)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&h(t,["toolConfig"],N);const w=f(e,["labels"]);t!==void 0&&w!=null&&h(t,["labels"],w);const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&h(t,["cachedContent"],Zi(n,M));const x=f(e,["responseModalities"]);x!=null&&h(s,["responseModalities"],x);const P=f(e,["mediaResolution"]);P!=null&&h(s,["mediaResolution"],P);const k=f(e,["speechConfig"]);k!=null&&h(s,["speechConfig"],cE(nm(k)));const b=f(e,["audioTimestamp"]);b!=null&&h(s,["audioTimestamp"],b);const tt=f(e,["thinkingConfig"]);tt!=null&&h(s,["thinkingConfig"],tt);const ht=f(e,["imageConfig"]);return ht!=null&&h(s,["imageConfig"],ht),s}function RT(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let c=qn(r);Array.isArray(c)&&(c=c.map(p=>Bc(p))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],s1(n,l,t)),t}function IT(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["contents"]);if(r!=null){let c=qn(r);Array.isArray(c)&&(c=c.map(p=>p)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],o1(n,l,t)),t}function wT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(g=>NI(g))),h(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const p=f(n,["usageMetadata"]);return p!=null&&h(e,["usageMetadata"],p),e}function MT(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(T=>T)),h(e,["candidates"],g)}const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const p=f(n,["responseId"]);p!=null&&h(e,["responseId"],p);const y=f(n,["usageMetadata"]);return y!=null&&h(e,["usageMetadata"],y),e}function r1(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&h(e,["parameters","includeSafetyAttributes"],y);const g=f(n,["includeRaiReason"]);e!==void 0&&g!=null&&h(e,["parameters","includeRaiReason"],g);const T=f(n,["language"]);e!==void 0&&T!=null&&h(e,["parameters","language"],T);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","mimeType"],E);const C=f(n,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&h(e,["parameters","outputOptions","compressionQuality"],C),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=f(n,["imageSize"]);if(e!==void 0&&D!=null&&h(e,["parameters","sampleImageSize"],D),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function a1(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const p=f(n,["guidanceScale"]);e!==void 0&&p!=null&&h(e,["parameters","guidanceScale"],p);const y=f(n,["seed"]);e!==void 0&&y!=null&&h(e,["parameters","seed"],y);const g=f(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&h(e,["parameters","safetySetting"],g);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&h(e,["parameters","includeSafetyAttributes"],E);const C=f(n,["includeRaiReason"]);e!==void 0&&C!=null&&h(e,["parameters","includeRaiReason"],C);const D=f(n,["language"]);e!==void 0&&D!=null&&h(e,["parameters","language"],D);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","mimeType"],O);const H=f(n,["outputCompressionQuality"]);e!==void 0&&H!=null&&h(e,["parameters","outputOptions","compressionQuality"],H);const J=f(n,["addWatermark"]);e!==void 0&&J!=null&&h(e,["parameters","addWatermark"],J);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&h(e,["labels"],ne);const ie=f(n,["imageSize"]);e!==void 0&&ie!=null&&h(e,["parameters","sampleImageSize"],ie);const Z=f(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&h(e,["parameters","enhancePrompt"],Z),t}function l1(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&r1(l,t),t}function u1(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&a1(l,t),t}function c1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>A1(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],lE(r)),e}function f1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Gc(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],uE(r)),e}function d1(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const p=f(n,["personGeneration"]);if(e!==void 0&&p!=null&&h(e,["parameters","personGeneration"],p),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","negativePrompt"],y);const g=f(n,["enhancePrompt"]);if(e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&h(e,["instances[0]","lastFrame"],zc(T));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let C=E;Array.isArray(C)&&(C=C.map(D=>fw(D))),h(e,["instances[0]","referenceImages"],C)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function h1(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const p=f(n,["seed"]);e!==void 0&&p!=null&&h(e,["parameters","seed"],p);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&h(e,["parameters","aspectRatio"],y);const g=f(n,["resolution"]);e!==void 0&&g!=null&&h(e,["parameters","resolution"],g);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&h(e,["parameters","personGeneration"],T);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&h(e,["parameters","pubsubTopic"],E);const C=f(n,["negativePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","negativePrompt"],C);const D=f(n,["enhancePrompt"]);e!==void 0&&D!=null&&h(e,["parameters","enhancePrompt"],D);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&h(e,["parameters","generateAudio"],O);const H=f(n,["lastFrame"]);e!==void 0&&H!=null&&h(e,["instances[0]","lastFrame"],jn(H));const J=f(n,["referenceImages"]);if(e!==void 0&&J!=null){let Z=J;Array.isArray(Z)&&(Z=Z.map(ae=>dw(ae))),h(e,["instances[0]","referenceImages"],Z)}const ne=f(n,["mask"]);e!==void 0&&ne!=null&&h(e,["instances[0]","mask"],cw(ne));const ie=f(n,["compressionQuality"]);return e!==void 0&&ie!=null&&h(e,["parameters","compressionQuality"],ie),t}function m1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],_1(c)),e}function p1(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],T1(c)),e}function g1(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],zc(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],dE(c));const p=f(e,["source"]);p!=null&&v1(p,t);const y=f(e,["config"]);return y!=null&&d1(y,t),t}function y1(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],jn(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],hE(c));const p=f(e,["source"]);p!=null&&E1(p,t);const y=f(e,["config"]);return y!=null&&h1(y,t),t}function _1(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>C1(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function T1(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>R1(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function v1(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],zc(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],dE(l)),t}function E1(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],jn(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],hE(l)),t}function A1(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],b1(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],lE(r)),e}function Gc(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],aE(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&h(e,["safetyAttributes"],uE(r));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function S1(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],aE(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function C1(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],lw(t)),e}function R1(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],uw(t)),e}function I1(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&h(e,["audioTimestamp"],s);const r=f(n,["candidateCount"]);r!=null&&h(e,["candidateCount"],r);const l=f(n,["enableAffectiveDialog"]);l!=null&&h(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&h(e,["frequencyPenalty"],c);const p=f(n,["logprobs"]);p!=null&&h(e,["logprobs"],p);const y=f(n,["maxOutputTokens"]);y!=null&&h(e,["maxOutputTokens"],y);const g=f(n,["mediaResolution"]);g!=null&&h(e,["mediaResolution"],g);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const E=f(n,["responseJsonSchema"]);E!=null&&h(e,["responseJsonSchema"],E);const C=f(n,["responseLogprobs"]);C!=null&&h(e,["responseLogprobs"],C);const D=f(n,["responseMimeType"]);D!=null&&h(e,["responseMimeType"],D);const O=f(n,["responseModalities"]);O!=null&&h(e,["responseModalities"],O);const H=f(n,["responseSchema"]);H!=null&&h(e,["responseSchema"],H);const J=f(n,["routingConfig"]);J!=null&&h(e,["routingConfig"],J);const ne=f(n,["seed"]);ne!=null&&h(e,["seed"],ne);const ie=f(n,["speechConfig"]);ie!=null&&h(e,["speechConfig"],cE(ie));const Z=f(n,["stopSequences"]);Z!=null&&h(e,["stopSequences"],Z);const ae=f(n,["temperature"]);ae!=null&&h(e,["temperature"],ae);const he=f(n,["thinkingConfig"]);he!=null&&h(e,["thinkingConfig"],he);const ue=f(n,["topK"]);ue!=null&&h(e,["topK"],ue);const N=f(n,["topP"]);return N!=null&&h(e,["topP"],N),e}function w1(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],He(n,s)),t}function M1(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],He(n,s)),t}function N1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function D1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function b1(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],Fs(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function aE(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],Fs(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function zc(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],Fs(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function jn(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Fs(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function V1(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const p=f(e,["queryBase"]);return t!==void 0&&p!=null&&h(t,["_url","models_url"],jv(n,p)),s}function x1(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const p=f(e,["queryBase"]);return t!==void 0&&p!=null&&h(t,["_url","models_url"],jv(n,p)),s}function P1(n,e){const t={},s=f(e,["config"]);return s!=null&&V1(n,s,t),t}function U1(n,e){const t={},s=f(e,["config"]);return s!=null&&x1(n,s,t),t}function L1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=eE(r);Array.isArray(l)&&(l=l.map(c=>Rh(c))),h(e,["models"],l)}return e}function k1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=eE(r);Array.isArray(l)&&(l=l.map(c=>Ih(c))),h(e,["models"],l)}return e}function q1(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function Rh(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const c=f(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],j1(c));const p=f(n,["inputTokenLimit"]);p!=null&&h(e,["inputTokenLimit"],p);const y=f(n,["outputTokenLimit"]);y!=null&&h(e,["outputTokenLimit"],y);const g=f(n,["supportedGenerationMethods"]);return g!=null&&h(e,["supportedActions"],g),e}function Ih(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(C=>t1(C))),h(e,["endpoints"],E)}const p=f(n,["labels"]);p!=null&&h(e,["labels"],p);const y=f(n,["_self"]);y!=null&&h(e,["tunedModelInfo"],ew(y));const g=f(n,["defaultCheckpointId"]);g!=null&&h(e,["defaultCheckpointId"],g);const T=f(n,["checkpoints"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(C=>C)),h(e,["checkpoints"],E)}return e}function O1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&h(e,["thought"],s);const r=f(n,["inlineData"]);r!=null&&h(e,["inlineData"],MI(r));const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],n1(l));const c=f(n,["thoughtSignature"]);c!=null&&h(e,["thoughtSignature"],c);const p=f(n,["functionCall"]);p!=null&&h(e,["functionCall"],p);const y=f(n,["codeExecutionResult"]);y!=null&&h(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&h(e,["executableCode"],g);const T=f(n,["functionResponse"]);T!=null&&h(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&h(e,["text"],E),e}function B1(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],jn(t)),e}function G1(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","editConfig","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&h(e,["parameters","personGeneration"],y);const g=f(n,["addWatermark"]);e!==void 0&&g!=null&&h(e,["parameters","addWatermark"],g);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&h(e,["parameters","outputOptions","compressionQuality"],E);const C=f(n,["enhancePrompt"]);e!==void 0&&C!=null&&h(e,["parameters","enhancePrompt"],C);const D=f(n,["labels"]);return e!==void 0&&D!=null&&h(e,["labels"],D),t}function z1(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["source"]);r!=null&&F1(r,t);const l=f(e,["config"]);return l!=null&&G1(l,t),t}function H1(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Gc(r))),h(e,["generatedImages"],s)}return e}function F1(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],jn(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(p=>B1(p))),h(e,["instances[0]","productImages"],c)}return t}function Y1(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],jn(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],q1(l));const c=f(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],UI(c));const p=f(n,["styleImageConfig"]);p!=null&&h(e,["styleImageConfig"],p);const y=f(n,["subjectImageConfig"]);return y!=null&&h(e,["subjectImageConfig"],y),e}function lE(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function uE(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function J1(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&h(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function K1(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],jn(t)),e}function Q1(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const p=f(n,["binaryColorThreshold"]);e!==void 0&&p!=null&&h(e,["parameters","binaryColorThreshold"],p);const y=f(n,["labels"]);return e!==void 0&&y!=null&&h(e,["labels"],y),t}function X1(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["source"]);r!=null&&Z1(r,t);const l=f(e,["config"]);return l!=null&&Q1(l,t),t}function $1(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>S1(r))),h(e,["generatedMasks"],s)}return e}function Z1(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],jn(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],K1(l)),t}function cE(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function W1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(T=>T)),h(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],D1(s));const r=f(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&h(e,["googleMaps"],N1(l));const c=f(n,["urlContext"]);c!=null&&h(e,["urlContext"],c);const p=f(n,["computerUse"]);p!=null&&h(e,["computerUse"],p);const y=f(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}function fE(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(C=>i1(C))),h(e,["functionDeclarations"],E)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearch"]);r!=null&&h(e,["googleSearch"],r);const l=f(n,["googleSearchRetrieval"]);l!=null&&h(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&h(e,["enterpriseWebSearch"],c);const p=f(n,["googleMaps"]);p!=null&&h(e,["googleMaps"],p);const y=f(n,["urlContext"]);y!=null&&h(e,["urlContext"],y);const g=f(n,["computerUse"]);g!=null&&h(e,["computerUse"],g);const T=f(n,["codeExecution"]);return T!=null&&h(e,["codeExecution"],T),e}function j1(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function ew(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function tw(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function nw(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function iw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],He(n,s));const r=f(e,["config"]);return r!=null&&tw(r,t),t}function sw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["config"]);return r!=null&&nw(r,t),t}function ow(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["includeRaiReason"]);e!==void 0&&r!=null&&h(e,["parameters","includeRaiReason"],r);const l=f(n,["outputMimeType"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&h(e,["parameters","outputOptions","compressionQuality"],c);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const y=f(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const g=f(n,["labels"]);e!==void 0&&g!=null&&h(e,["labels"],g);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&h(e,["parameters","sampleCount"],T);const E=f(n,["mode"]);return e!==void 0&&E!=null&&h(e,["parameters","mode"],E),t}function rw(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],He(n,s));const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],jn(r));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&ow(c,t),t}function aw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Gc(l))),h(e,["generatedImages"],r)}return e}function lw(n){const e={},t=f(n,["video","uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["video","encodedVideo"]);s!=null&&h(e,["videoBytes"],Fs(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function uw(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Fs(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function cw(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],jn(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function fw(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],zc(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function dw(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],jn(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function dE(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["video","uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["video","encodedVideo"],Fs(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function hE(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],Fs(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hw="Content-Type",mw="X-Server-Timeout",pw="User-Agent",wh="x-goog-api-client",gw="1.24.0",yw=`google-genai-sdk/${gw}`,_w="v1beta1",Tw="v1beta",NT=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class vw{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:_w,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Tw,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,p]of Object.entries(e.queryParams))r.searchParams.append(c,String(p));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const r=new AbortController,l=r.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>r.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&Ew(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await DT(r),new Ah(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await DT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return br(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";for(;;){const{done:p,value:y}=yield rt(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=l.decode(y,{stream:!0});try{const E=JSON.parse(g);if("error"in E){const C=JSON.parse(JSON.stringify(E.error)),D=C.status,O=C.code,H=`got status: ${D}. ${JSON.stringify(E)}`;if(O>=400&&O<600)throw new Oc({message:H,status:O})}}catch(E){if(E.name==="ApiError")throw E}c+=g;let T=c.match(NT);for(;T;){const E=T[1];try{const C=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield rt(new Ah(C)),c=c.slice(T[0].length),T=c.match(NT)}catch(C){throw new Error(`exception parsing stream chunk ${E}. ${C}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=yw+" "+this.clientOptions.userAgentExtra;return e[pw]=t,e[wh]=t,e[hw]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))t.append(s,r);e.timeout&&e.timeout>0&&t.append(mw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const p=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=p;const y=await this.fetchUploadUrl(r,t);return l.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:pe("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function DT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Oc({message:r,status:t}):new Error(r)}}function Ew(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const p=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const g=c[y],T=p[y];g&&typeof g=="object"&&!Array.isArray(g)&&T&&typeof T=="object"&&!Array.isArray(T)?p[y]=s(T,g):(T&&g&&typeof T!=typeof g&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof T}, New type: ${typeof g}. Overwriting.`),p[y]=g)}return p}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Aw="mcp_used/unknown";let Sw=!1;function mE(n){for(const e of n)if(Cw(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Sw}function pE(n){var e;const t=(e=n[wh])!==null&&e!==void 0?e:"";n[wh]=(t+` ${Aw}`).trimStart()}function Cw(n){return n!==null&&typeof n=="object"&&n instanceof sm}function Rw(n,e=100){return br(this,arguments,function*(){let s,r=0;for(;r<e;){const l=yield rt(n.listTools({cursor:s}));for(const c of l.tools)yield yield rt(c),r++;if(!l.nextCursor)break;s=l.nextCursor}})}class sm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new sm(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const T of this.mcpClients)try{for(var p=!0,y=(t=void 0,cl(Rw(T))),g;g=await y.next(),e=g.done,!e;p=!0){r=g.value,p=!1;const E=r;c.push(E);const C=E.name;if(l[C])throw new Error(`Duplicate function name ${C} found in MCP tools. Please ensure function names are unique.`);l[C]=T}}catch(E){t={error:E}}finally{try{!p&&!e&&(s=y.return)&&await s.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),bC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Iw(n,e,t){const s=new SC;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class ww{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=Dw(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${p}`;let g=()=>{};const T=new Promise(Z=>{g=Z}),E=e.callbacks,C=function(){g({})},D=this.apiClient,O={onopen:C,onmessage:Z=>{Iw(D,E.onmessage,Z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(Z){}},H=this.webSocketFactory.create(y,Nw(c),O);H.connect(),await T;const ie={setup:{model:He(this.apiClient,e.model)}};return H.send(JSON.stringify(ie)),new Mw(H,this.apiClient)}}class Mw{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=TI(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=_I(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Nr.PLAY)}pause(){this.sendPlaybackControl(Nr.PAUSE)}stop(){this.sendPlaybackControl(Nr.STOP)}resetContext(){this.sendPlaybackControl(Nr.RESET_CONTEXT)}close(){this.conn.close()}}function Nw(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function Dw(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bw="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Vw(n,e,t){const s=new AC;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=AI(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class xw{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new ww(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,c,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let T;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&mE(e.config.tools)&&pE(E);const C=kw(E);if(this.apiClient.isVertexAI())T=`${y}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(C);else{const M=this.apiClient.getApiKey();let x="BidiGenerateContent",P="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),g!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),x="BidiGenerateContentConstrained",P="access_token"),T=`${y}/ws/google.ai.generativelanguage.${g}.GenerativeService.${x}?${P}=${M}`}let D=()=>{};const O=new Promise(M=>{D=M}),H=e.callbacks,J=function(){var M;(M=H==null?void 0:H.onopen)===null||M===void 0||M.call(H),D({})},ne=this.apiClient,ie={onopen:J,onmessage:M=>{Vw(ne,H.onmessage,M)},onerror:(t=H==null?void 0:H.onerror)!==null&&t!==void 0?t:function(M){},onclose:(s=H==null?void 0:H.onclose)!==null&&s!==void 0?s:function(M){}},Z=this.webSocketFactory.create(T,Lw(C),ie);Z.connect(),await O;let ae=He(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const M=this.apiClient.getProject(),x=this.apiClient.getLocation();ae=`projects/${M}/locations/${x}/`+ae}let he={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ec.AUDIO]}:e.config.responseModalities=[Ec.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(p=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[],N=[];for(const M of ue)if(this.isCallableTool(M)){const x=M;N.push(await x.tool())}else N.push(M);N.length>0&&(e.config.tools=N);const w={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=yI(this.apiClient,w):he=gI(this.apiClient,w),delete he.config,Z.send(JSON.stringify(he)),new Uw(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Pw={turnComplete:!0};class Uw{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=qn(t.turns),e.isVertexAI()||(s=s.map(r=>Bc(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(bw)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},Pw),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:EI(e)}:t={realtimeInput:vI(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Lw(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function kw(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bT=10;function VT(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Vr(c)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Vr(n){return"callTool"in n&&typeof n.callTool=="function"}function qw(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Vr(r)))!==null&&s!==void 0?s:!1}function Ow(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!Vr(r)))!==null&&s!==void 0?s:!1}function xT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bw extends Mo{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,c,p;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!qw(t)||VT(t.config))return await this.generateContentInternal(y);if(Ow(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let g,T;const E=qn(y.contents),C=(l=(r=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:bT;let D=0;for(;D<C&&(g=await this.generateContentInternal(y),!(!g.functionCalls||g.functionCalls.length===0));){const O=g.candidates[0].content,H=[];for(const J of(p=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&p!==void 0?p:[])if(Vr(J)){const ie=await J.callTool(g.functionCalls);H.push(...ie)}D++,T={role:"user",parts:H},y.contents=qn(y.contents),y.contents.push(O),y.contents.push(T),xT(y.config)&&(E.push(O),E.push(T))}return xT(y.config)&&(g.automaticFunctionCallingHistory=E),g},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),VT(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let p;return l?p={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:p={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},p}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Il(Ro.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>Vr(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(p.config.tools=c,e.config&&e.config.tools&&mE(e.config.tools)){const y=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let g=Object.assign({},y);Object.keys(g).length===0&&(g=this.apiClient.getDefaultHeaders()),pE(g),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:g})}return p}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Vr(c)){const p=c,y=await p.tool();for(const g of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!g.name)throw new Error("Function declaration name is required.");if(l.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);l.set(g.name,p)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:bT;let c=!1,p=0;const y=await this.initAfcToolsMap(e);return(function(g,T,E){var C,D;return br(this,arguments,function*(){for(var O,H,J,ne;p<l;){c&&(p++,c=!1);const he=yield rt(g.processParamsMaybeAddMcpUsage(E)),ue=yield rt(g.generateContentStreamInternal(he)),N=[],w=[];try{for(var ie=!0,Z=(H=void 0,cl(ue)),ae;ae=yield rt(Z.next()),O=ae.done,!O;ie=!0){ne=ae.value,ie=!1;const M=ne;if(yield yield rt(M),M.candidates&&(!((C=M.candidates[0])===null||C===void 0)&&C.content)){w.push(M.candidates[0].content);for(const x of(D=M.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(p<l&&x.functionCall){if(!x.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(x.functionCall.name)){const P=yield rt(T.get(x.functionCall.name).callTool([x.functionCall]));N.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${x.functionCall.name}`)}}}}catch(M){H={error:M}}finally{try{!ie&&!O&&(J=Z.return)&&(yield rt(J.call(Z)))}finally{if(H)throw H.error}}if(N.length>0){c=!0;const M=new ol;M.candidates=[{content:{role:"user",parts:N}}],yield yield rt(M);const x=[];x.push(...w),x.push({role:"user",parts:N});const P=qn(E.contents).concat(x);E.contents=P}else break}})})(this,y,e)}async generateContentInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=IT(this.apiClient,e);return p=pe("{model}:generateContent",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=MT(T),C=new ol;return Object.assign(C,E),C})}else{const g=RT(this.apiClient,e);return p=pe("{model}:generateContent",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=wT(T),C=new ol;return Object.assign(C,E),C})}}async generateContentStreamInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=IT(this.apiClient,e);return p=pe("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return br(this,arguments,function*(){var C,D,O,H;try{for(var J=!0,ne=cl(E),ie;ie=yield rt(ne.next()),C=ie.done,!C;J=!0){H=ie.value,J=!1;const Z=H,ae=MT(yield rt(Z.json()));ae.sdkHttpResponse={headers:Z.headers};const he=new ol;Object.assign(he,ae),yield yield rt(he)}}catch(Z){D={error:Z}}finally{try{!J&&!C&&(O=ne.return)&&(yield rt(O.call(ne)))}finally{if(D)throw D.error}}})})}else{const g=RT(this.apiClient,e);return p=pe("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return br(this,arguments,function*(){var C,D,O,H;try{for(var J=!0,ne=cl(E),ie;ie=yield rt(ne.next()),C=ie.done,!C;J=!0){H=ie.value,J=!1;const Z=H,ae=wT(yield rt(Z.json()));ae.sdkHttpResponse={headers:Z.headers};const he=new ol;Object.assign(he,ae),yield yield rt(he)}}catch(Z){D={error:Z}}finally{try{!J&&!C&&(O=ne.return)&&(yield rt(O.call(ne)))}finally{if(D)throw D.error}}})})}}async embedContent(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=WI(this.apiClient,e);return p=pe("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=e1(T),C=new uT;return Object.assign(C,E),C})}else{const g=ZI(this.apiClient,e);return p=pe("{model}:batchEmbedContents",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=jI(T),C=new uT;return Object.assign(C,E),C})}}async generateImagesInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=u1(this.apiClient,e);return p=pe("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=f1(T),C=new cT;return Object.assign(C,E),C})}else{const g=l1(this.apiClient,e);return p=pe("{model}:predict",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=c1(T),C=new cT;return Object.assign(C,E),C})}}async editImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const p=KI(this.apiClient,e);return l=pe("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const T=g;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const g=QI(y),T=new mC;return Object.assign(T,g),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const p=rw(this.apiClient,e);return l=pe("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const T=g;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const g=aw(y),T=new pC;return Object.assign(T,g),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const p=z1(this.apiClient,e);return l=pe("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const g=H1(y),T=new gC;return Object.assign(T,g),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const p=X1(this.apiClient,e);return l=pe("{model}:predict",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const g=$1(y),T=new yC;return Object.assign(T,g),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=M1(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Ih(T))}else{const g=w1(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Rh(T))}}async listInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=U1(this.apiClient,e);return p=pe("{models_url}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=k1(T),C=new fT;return Object.assign(C,E),C})}else{const g=P1(this.apiClient,e);return p=pe("{models_url}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=L1(T),C=new fT;return Object.assign(C,E),C})}}async update(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=sw(this.apiClient,e);return p=pe("{model}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Ih(T))}else{const g=iw(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Rh(T))}}async delete(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=HI(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=YI(T),C=new dT;return Object.assign(C,E),C})}else{const g=zI(this.apiClient,e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=FI(T),C=new dT;return Object.assign(C,E),C})}}async countTokens(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=OI(this.apiClient,e);return p=pe("{model}:countTokens",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=GI(T),C=new hT;return Object.assign(C,E),C})}else{const g=qI(this.apiClient,e);return p=pe("{model}:countTokens",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=BI(T),C=new hT;return Object.assign(C,E),C})}}async computeTokens(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const p=bI(this.apiClient,e);return l=pe("{model}:computeTokens",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const T=g;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>{const g=VI(y),T=new _C;return Object.assign(T,g),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=y1(this.apiClient,e);return p=pe("{model}:predictLongRunning",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>{const E=p1(T),C=new Ac;return Object.assign(C,E),C})}else{const g=g1(this.apiClient,e);return p=pe("{model}:predictLongRunning",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>{const E=m1(T),C=new Ac;return Object.assign(C,E),C})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gw extends Mo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=fC(e);return p=pe("{operationName}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c}else{const g=cC(e);return p=pe("{operationName}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const p=iC(e);return l=pe("{resourceName}:fetchPredictOperation",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&h(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Hw(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Zw(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function Fw(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const p=f(e,["liveConnectConstraints"]);t!==void 0&&p!=null&&h(t,["bidiGenerateContentSetup"],$w(n,p));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&h(t,["fieldMask"],y),s}function Yw(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],Fw(n,s,t)),t}function Jw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Kw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function Qw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Xw(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const p=f(n,["topK"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","topK"],p);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&h(e,["setup","generationConfig","maxOutputTokens"],y);const g=f(n,["mediaResolution"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","mediaResolution"],g);const T=f(n,["seed"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","seed"],T);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&h(e,["setup","generationConfig","speechConfig"],im(E));const C=f(n,["thinkingConfig"]);e!==void 0&&C!=null&&h(e,["setup","generationConfig","thinkingConfig"],C);const D=f(n,["enableAffectiveDialog"]);e!==void 0&&D!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],D);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&h(e,["setup","systemInstruction"],Hw(tn(O)));const H=f(n,["tools"]);if(e!==void 0&&H!=null){let ue=Yr(H);Array.isArray(ue)&&(ue=ue.map(N=>jw(Fr(N)))),h(e,["setup","tools"],ue)}const J=f(n,["sessionResumption"]);e!==void 0&&J!=null&&h(e,["setup","sessionResumption"],Ww(J));const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&h(e,["setup","inputAudioTranscription"],ne);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&h(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&h(e,["setup","realtimeInputConfig"],Z);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&h(e,["setup","contextWindowCompression"],ae);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&h(e,["setup","proactivity"],he),t}function $w(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],He(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],Xw(r,t)),t}function Zw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&h(e,["thought"],s);const r=f(n,["inlineData"]);r!=null&&h(e,["inlineData"],zw(r));const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],Jw(l));const c=f(n,["thoughtSignature"]);c!=null&&h(e,["thoughtSignature"],c);const p=f(n,["functionCall"]);p!=null&&h(e,["functionCall"],p);const y=f(n,["codeExecutionResult"]);y!=null&&h(e,["codeExecutionResult"],y);const g=f(n,["executableCode"]);g!=null&&h(e,["executableCode"],g);const T=f(n,["functionResponse"]);T!=null&&h(e,["functionResponse"],T);const E=f(n,["text"]);return E!=null&&h(e,["text"],E),e}function Ww(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(T=>T)),h(e,["functionDeclarations"],g)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],Qw(s));const r=f(n,["googleSearchRetrieval"]);if(r!=null&&h(e,["googleSearchRetrieval"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&h(e,["googleMaps"],Kw(l));const c=f(n,["urlContext"]);c!=null&&h(e,["urlContext"],c);const p=f(n,["computerUse"]);p!=null&&h(e,["computerUse"],p);const y=f(n,["codeExecution"]);return y!=null&&h(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eM(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function tM(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=eM(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];r.length>0&&(p=r.map(g=>c.includes(g)?`generationConfig.${g}`:g));const y=[];l&&y.push(l),p.length>0&&y.push(...p),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class nM extends Mo{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=Yw(this.apiClient,e);l=pe("auth_tokens",p._url),c=p._query,delete p.config,delete p._url,delete p._query;const y=tM(p,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function sM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function oM(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&h(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=f(n,["epochCount"]);e!==void 0&&r!=null&&h(e,["tuningTask","hyperparameters","epochCount"],r);const l=f(n,["learningRateMultiplier"]);if(l!=null&&h(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&h(e,["tuningTask","hyperparameters","batchSize"],c);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&h(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function rM(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&h(e,["supervisedTuningSpec"],EM(s,t));const r=f(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&h(e,["tunedModelDisplayName"],r);const l=f(n,["description"]);e!==void 0&&l!=null&&h(e,["description"],l);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const p=f(n,["learningRateMultiplier"]);e!==void 0&&p!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],p);const y=f(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const g=f(n,["adapterSize"]);if(e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);return e!==void 0&&T!=null&&h(e,["labels"],T),t}function aM(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&h(e,["preTunedModel"],s);const r=f(n,["trainingDataset"]);r!=null&&h(e,["tuningTask","trainingData"],_M(r));const l=f(n,["config"]);return l!=null&&oM(l,e),e}function lM(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&h(e,["preTunedModel"],s);const r=f(n,["trainingDataset"]);r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],TM(r,e));const l=f(n,["config"]);return l!=null&&rM(l,e),e}function uM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function cM(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function fM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function dM(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function hM(n){const e={},t=f(n,["config"]);return t!=null&&fM(t,e),e}function mM(n){const e={},t=f(n,["config"]);return t!=null&&dM(t,e),e}function pM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>gE(c))),h(e,["tuningJobs"],l)}return e}function gM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Mh(c))),h(e,["tuningJobs"],l)}return e}function yM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["model"],t);const s=f(n,["name"]);return s!=null&&h(e,["endpoint"],s),e}function _M(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["examples","examples"],s)}return e}function TM(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],r),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function gE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["state"]);r!=null&&h(e,["state"],Zv(r));const l=f(n,["createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["tuningTask","startTime"]);c!=null&&h(e,["startTime"],c);const p=f(n,["tuningTask","completeTime"]);p!=null&&h(e,["endTime"],p);const y=f(n,["updateTime"]);y!=null&&h(e,["updateTime"],y);const g=f(n,["description"]);g!=null&&h(e,["description"],g);const T=f(n,["baseModel"]);T!=null&&h(e,["baseModel"],T);const E=f(n,["_self"]);E!=null&&h(e,["tunedModel"],yM(E));const C=f(n,["customBaseModel"]);C!=null&&h(e,["customBaseModel"],C);const D=f(n,["experiment"]);D!=null&&h(e,["experiment"],D);const O=f(n,["labels"]);O!=null&&h(e,["labels"],O);const H=f(n,["outputUri"]);H!=null&&h(e,["outputUri"],H);const J=f(n,["pipelineJob"]);J!=null&&h(e,["pipelineJob"],J);const ne=f(n,["serviceAccount"]);ne!=null&&h(e,["serviceAccount"],ne);const ie=f(n,["tunedModelDisplayName"]);ie!=null&&h(e,["tunedModelDisplayName"],ie);const Z=f(n,["veoTuningSpec"]);return Z!=null&&h(e,["veoTuningSpec"],Z),e}function Mh(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["state"]);r!=null&&h(e,["state"],Zv(r));const l=f(n,["createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["startTime"]);c!=null&&h(e,["startTime"],c);const p=f(n,["endTime"]);p!=null&&h(e,["endTime"],p);const y=f(n,["updateTime"]);y!=null&&h(e,["updateTime"],y);const g=f(n,["error"]);g!=null&&h(e,["error"],g);const T=f(n,["description"]);T!=null&&h(e,["description"],T);const E=f(n,["baseModel"]);E!=null&&h(e,["baseModel"],E);const C=f(n,["tunedModel"]);C!=null&&h(e,["tunedModel"],C);const D=f(n,["preTunedModel"]);D!=null&&h(e,["preTunedModel"],D);const O=f(n,["supervisedTuningSpec"]);O!=null&&h(e,["supervisedTuningSpec"],O);const H=f(n,["tuningDataStats"]);H!=null&&h(e,["tuningDataStats"],H);const J=f(n,["encryptionSpec"]);J!=null&&h(e,["encryptionSpec"],J);const ne=f(n,["partnerModelTuningSpec"]);ne!=null&&h(e,["partnerModelTuningSpec"],ne);const ie=f(n,["customBaseModel"]);ie!=null&&h(e,["customBaseModel"],ie);const Z=f(n,["experiment"]);Z!=null&&h(e,["experiment"],Z);const ae=f(n,["labels"]);ae!=null&&h(e,["labels"],ae);const he=f(n,["outputUri"]);he!=null&&h(e,["outputUri"],he);const ue=f(n,["pipelineJob"]);ue!=null&&h(e,["pipelineJob"],ue);const N=f(n,["serviceAccount"]);N!=null&&h(e,["serviceAccount"],N);const w=f(n,["tunedModelDisplayName"]);w!=null&&h(e,["tunedModelDisplayName"],w);const M=f(n,["veoTuningSpec"]);return M!=null&&h(e,["veoTuningSpec"],M),e}function vM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["metadata"]);r!=null&&h(e,["metadata"],r);const l=f(n,["done"]);l!=null&&h(e,["done"],l);const c=f(n,["error"]);return c!=null&&h(e,["error"],c),e}function EM(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AM extends Mo{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Il(Ro.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Eh.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=cM(e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>Mh(T))}else{const g=uM(e);return p=pe("{name}",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>gE(T))}}async listInternal(e){var t,s,r,l;let c,p="",y={};if(this.apiClient.isVertexAI()){const g=mM(e);return p=pe("tuningJobs",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=gM(T),C=new mT;return Object.assign(C,E),C})}else{const g=hM(e);return p=pe("tunedModels",g._url),y=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(E=>{const C=E;return C.sdkHttpResponse={headers:T.headers},C})),c.then(T=>{const E=pM(T),C=new mT;return Object.assign(C,E),C})}}async cancel(e){var t,s,r,l;let c="",p={};if(this.apiClient.isVertexAI()){const y=sM(e);c=pe("{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=iM(e);c=pe("{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const p=lM(e);return l=pe("tuningJobs",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const T=g;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>Mh(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aM(e);return l=pe("tunedModels",p._url),c=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(g=>{const T=g;return T.sdkHttpResponse={headers:y.headers},T})),r.then(y=>vM(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SM{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const CM=1024*1024*8,RM=3,IM=1e3,wM=2,uh="x-goog-upload-status";async function MM(n,e,t){var s,r,l;let c=0,p=0,y=new Ah(new Response),g="upload";for(c=n.size;p<c;){const E=Math.min(CM,c-p),C=n.slice(p,p+E);p+E>=c&&(g+=", finalize");let D=0,O=IM;for(;D<RM&&(y=await t.request({path:"",body:C,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(p),"Content-Length":String(E)}}}),!(!((s=y==null?void 0:y.headers)===null||s===void 0)&&s[uh]));)D++,await DM(O),O=O*wM;if(p+=E,((r=y==null?void 0:y.headers)===null||r===void 0?void 0:r[uh])!=="active")break;if(c<=p)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const T=await(y==null?void 0:y.json());if(((l=y==null?void 0:y.headers)===null||l===void 0?void 0:l[uh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return T.file}async function NM(n){return{size:n.size,type:n.type}}function DM(n){return new Promise(e=>setTimeout(e,n))}class bM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MM(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VM{create(e,t,s){return new xM(e,t,s)}}class xM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PT="x-goog-api-key";class PM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(PT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(PT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UM="gl-node/";class LM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=nC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const r=new PM(this.apiKey);this.apiClient=new vw({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:UM+"web",uploader:new bM,downloader:new SM}),this.models=new Bw(this.apiClient),this.live=new xw(this.apiClient,r,new VM),this.batches=new TR(this.apiClient),this.chats=new ZR(this.models,this.apiClient),this.caches=new QR(this.apiClient),this.files=new aI(this.apiClient),this.operations=new Gw(this.apiClient),this.authTokens=new nM(this.apiClient),this.tunings=new AM(this.apiClient)}}const kM=()=>{};var UT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},qM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],p=n[t++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},_E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,p=c?n[r+1]:0,y=r+2<n.length,g=y?n[r+2]:0,T=l>>2,E=(l&3)<<4|p>>4;let C=(p&15)<<2|g>>6,D=g&63;y||(D=64,c||(C=64)),s.push(t[T],t[E],t[C],t[D])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],p=r<n.length?t[n.charAt(r)]:0;++r;const g=r<n.length?t[n.charAt(r)]:64;++r;const E=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||p==null||g==null||E==null)throw new OM;const C=l<<2|p>>4;if(s.push(C),g!==64){const D=p<<4&240|g>>2;if(s.push(D),E!==64){const O=g<<6&192|E;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class OM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BM=function(n){const e=yE(n);return _E.encodeByteArray(e,!0)},Cc=function(n){return BM(n).replace(/\./g,"")},GM=function(n){try{return _E.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=()=>zM().__FIREBASE_DEFAULTS__,FM=()=>{if(typeof process>"u"||typeof UT>"u")return;const n=UT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},YM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GM(n[1]);return e&&JSON.parse(e)},om=()=>{try{return kM()||HM()||FM()||YM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JM=n=>{var e,t;return(t=(e=om())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},KM=n=>{const e=JM(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},TE=()=>{var n;return(n=om())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function XM(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Cc(JSON.stringify(t)),Cc(JSON.stringify(c)),""].join(".")}const fl={};function ZM(){const n={prod:[],emulator:[]};for(const e of Object.keys(fl))fl[e]?n.emulator.push(e):n.prod.push(e);return n}function WM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let LT=!1;function jM(n,e){if(typeof window>"u"||typeof document>"u"||!rm(window.location.host)||fl[n]===e||fl[n]||LT)return;fl[n]=e;function t(C){return`__firebase__banner__${C}`}const s="__firebase__banner",l=ZM().prod.length>0;function c(){const C=document.getElementById(s);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function y(C,D){C.setAttribute("width","24"),C.setAttribute("id",D),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function g(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{LT=!0,c()},C}function T(C,D){C.setAttribute("id",D),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=WM(s),D=t("text"),O=document.getElementById(D)||document.createElement("span"),H=t("learnmore"),J=document.getElementById(H)||document.createElement("a"),ne=t("preprendIcon"),ie=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const Z=C.element;p(Z),T(J,H);const ae=g();y(ie,ne),Z.append(ie,O,J,ae),document.body.appendChild(Z)}l?(O.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tN(){var e;const n=(e=om())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nN(){return!tN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iN(){try{return typeof indexedDB=="object"}catch{return!1}}function sN(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="FirebaseError";class Kr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=oN,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vE.prototype.create)}}class vE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?rN(l,s):"Error",p=`${this.serviceName}: ${c} (${r}).`;return new Kr(r,p,s)}}function rN(n,e){return n.replace(aN,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const aN=/\{\$([^}]+)}/g;function Rc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],c=e[r];if(kT(l)&&kT(c)){if(!Rc(l,c))return!1}else if(l!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function kT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n){return n&&n._delegate?n._delegate:n}class gl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new QM;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cN(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:uN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uN(n){return n===So?void 0:n}function cN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const dN={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},hN=Oe.INFO,mN={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},pN=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=mN[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class EE{constructor(e){this.name=e,this._logLevel=hN,this._logHandler=pN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const gN=(n,e)=>e.some(t=>n instanceof t);let qT,OT;function yN(){return qT||(qT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _N(){return OT||(OT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AE=new WeakMap,Nh=new WeakMap,SE=new WeakMap,ch=new WeakMap,am=new WeakMap;function TN(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(xs(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&AE.set(t,n)}).catch(()=>{}),am.set(e,n),e}function vN(n){if(Nh.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Nh.set(n,e)}let Dh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Nh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||SE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function EN(n){Dh=n(Dh)}function AN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(fh(this),e,...t);return SE.set(s,e.sort?e.sort():[e]),xs(s)}:_N().includes(n)?function(...e){return n.apply(fh(this),e),xs(AE.get(this))}:function(...e){return xs(n.apply(fh(this),e))}}function SN(n){return typeof n=="function"?AN(n):(n instanceof IDBTransaction&&vN(n),gN(n,yN())?new Proxy(n,Dh):n)}function xs(n){if(n instanceof IDBRequest)return TN(n);if(ch.has(n))return ch.get(n);const e=SN(n);return e!==n&&(ch.set(n,e),am.set(e,n)),e}const fh=n=>am.get(n);function CN(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),p=xs(c);return s&&c.addEventListener("upgradeneeded",y=>{s(xs(c.result),y.oldVersion,y.newVersion,xs(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),p.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const RN=["get","getKey","getAll","getAllKeys","count"],IN=["put","add","delete","clear"],dh=new Map;function BT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dh.get(e))return dh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=IN.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||RN.includes(t)))return;const l=async function(c,...p){const y=this.transaction(c,r?"readwrite":"readonly");let g=y.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[t](...p),r&&y.done]))[0]};return dh.set(e,l),l}EN(n=>({...n,get:(e,t,s)=>BT(e,t)||n.get(e,t,s),has:(e,t)=>!!BT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(MN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function MN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bh="@firebase/app",GT="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new EE("@firebase/app"),NN="@firebase/app-compat",DN="@firebase/analytics-compat",bN="@firebase/analytics",VN="@firebase/app-check-compat",xN="@firebase/app-check",PN="@firebase/auth",UN="@firebase/auth-compat",LN="@firebase/database",kN="@firebase/data-connect",qN="@firebase/database-compat",ON="@firebase/functions",BN="@firebase/functions-compat",GN="@firebase/installations",zN="@firebase/installations-compat",HN="@firebase/messaging",FN="@firebase/messaging-compat",YN="@firebase/performance",JN="@firebase/performance-compat",KN="@firebase/remote-config",QN="@firebase/remote-config-compat",XN="@firebase/storage",$N="@firebase/storage-compat",ZN="@firebase/firestore",WN="@firebase/ai",jN="@firebase/firestore-compat",eD="firebase",tD="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="[DEFAULT]",nD={[bh]:"fire-core",[NN]:"fire-core-compat",[bN]:"fire-analytics",[DN]:"fire-analytics-compat",[xN]:"fire-app-check",[VN]:"fire-app-check-compat",[PN]:"fire-auth",[UN]:"fire-auth-compat",[LN]:"fire-rtdb",[kN]:"fire-data-connect",[qN]:"fire-rtdb-compat",[ON]:"fire-fn",[BN]:"fire-fn-compat",[GN]:"fire-iid",[zN]:"fire-iid-compat",[HN]:"fire-fcm",[FN]:"fire-fcm-compat",[YN]:"fire-perf",[JN]:"fire-perf-compat",[KN]:"fire-rc",[QN]:"fire-rc-compat",[XN]:"fire-gcs",[$N]:"fire-gcs-compat",[ZN]:"fire-fst",[jN]:"fire-fst-compat",[WN]:"fire-vertex","fire-js":"fire-js",[eD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,iD=new Map,xh=new Map;function zT(n,e){try{n.container.addComponent(e)}catch(t){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wc(n){const e=n.name;if(xh.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;xh.set(e,n);for(const t of Ic.values())zT(t,n);for(const t of iD.values())zT(t,n);return!0}function sD(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oD(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new vE("app","Firebase",rD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=tD;function CE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Vh,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ps.create("bad-app-name",{appName:String(r)});if(t||(t=TE()),!t)throw Ps.create("no-options");const l=Ic.get(r);if(l){if(Rc(t,l.options)&&Rc(s,l.config))return l;throw Ps.create("duplicate-app",{appName:r})}const c=new fN(r);for(const y of xh.values())c.addComponent(y);const p=new aD(t,s,c);return Ic.set(r,p),p}function uD(n=Vh){const e=Ic.get(n);if(!e&&n===Vh&&TE())return CE();if(!e)throw Ps.create("no-app",{appName:n});return e}function xr(n,e,t){let s=nD[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qi.warn(c.join(" "));return}wc(new gl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="firebase-heartbeat-database",fD=1,yl="firebase-heartbeat-store";let hh=null;function RE(){return hh||(hh=CN(cD,fD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),hh}async function dD(n){try{const t=(await RE()).transaction(yl),s=await t.objectStore(yl).get(IE(n));return await t.done,s}catch(e){if(e instanceof Kr)Qi.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qi.warn(t.message)}}}async function HT(n,e){try{const s=(await RE()).transaction(yl,"readwrite");await s.objectStore(yl).put(e,IE(n)),await s.done}catch(t){if(t instanceof Kr)Qi.warn(t.message);else{const s=Ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Qi.warn(s.message)}}}function IE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=1024,mD=30;class pD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yD(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=FT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>mD){const c=_D(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Qi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=FT(),{heartbeatsToSend:s,unsentEntries:r}=gD(this._heartbeatsCache.heartbeats),l=Cc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Qi.warn(t),""}}}function FT(){return new Date().toISOString().substring(0,10)}function gD(n,e=hD){const t=[];let s=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),YT(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),YT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class yD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iN()?sN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return HT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return HT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function YT(n){return Cc(JSON.stringify({version:2,heartbeats:n})).length}function _D(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(n){wc(new gl("platform-logger",e=>new wN(e),"PRIVATE")),wc(new gl("heartbeat",e=>new pD(e),"PRIVATE")),xr(bh,GT,n),xr(bh,GT,"esm2020"),xr("fire-js","")}TD("");var vD="firebase",ED="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr(vD,ED,"app");var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Us,wE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function M(){}M.prototype=w.prototype,N.F=w.prototype,N.prototype=new M,N.prototype.constructor=N,N.D=function(x,P,k){for(var b=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)b[tt-2]=arguments[tt];return w.prototype[P].apply(x,b)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,w,M){M||(M=0);const x=Array(16);if(typeof w=="string")for(var P=0;P<16;++P)x[P]=w.charCodeAt(M++)|w.charCodeAt(M++)<<8|w.charCodeAt(M++)<<16|w.charCodeAt(M++)<<24;else for(P=0;P<16;++P)x[P]=w[M++]|w[M++]<<8|w[M++]<<16|w[M++]<<24;w=N.g[0],M=N.g[1],P=N.g[2];let k=N.g[3],b;b=w+(k^M&(P^k))+x[0]+3614090360&4294967295,w=M+(b<<7&4294967295|b>>>25),b=k+(P^w&(M^P))+x[1]+3905402710&4294967295,k=w+(b<<12&4294967295|b>>>20),b=P+(M^k&(w^M))+x[2]+606105819&4294967295,P=k+(b<<17&4294967295|b>>>15),b=M+(w^P&(k^w))+x[3]+3250441966&4294967295,M=P+(b<<22&4294967295|b>>>10),b=w+(k^M&(P^k))+x[4]+4118548399&4294967295,w=M+(b<<7&4294967295|b>>>25),b=k+(P^w&(M^P))+x[5]+1200080426&4294967295,k=w+(b<<12&4294967295|b>>>20),b=P+(M^k&(w^M))+x[6]+2821735955&4294967295,P=k+(b<<17&4294967295|b>>>15),b=M+(w^P&(k^w))+x[7]+4249261313&4294967295,M=P+(b<<22&4294967295|b>>>10),b=w+(k^M&(P^k))+x[8]+1770035416&4294967295,w=M+(b<<7&4294967295|b>>>25),b=k+(P^w&(M^P))+x[9]+2336552879&4294967295,k=w+(b<<12&4294967295|b>>>20),b=P+(M^k&(w^M))+x[10]+4294925233&4294967295,P=k+(b<<17&4294967295|b>>>15),b=M+(w^P&(k^w))+x[11]+2304563134&4294967295,M=P+(b<<22&4294967295|b>>>10),b=w+(k^M&(P^k))+x[12]+1804603682&4294967295,w=M+(b<<7&4294967295|b>>>25),b=k+(P^w&(M^P))+x[13]+4254626195&4294967295,k=w+(b<<12&4294967295|b>>>20),b=P+(M^k&(w^M))+x[14]+2792965006&4294967295,P=k+(b<<17&4294967295|b>>>15),b=M+(w^P&(k^w))+x[15]+1236535329&4294967295,M=P+(b<<22&4294967295|b>>>10),b=w+(P^k&(M^P))+x[1]+4129170786&4294967295,w=M+(b<<5&4294967295|b>>>27),b=k+(M^P&(w^M))+x[6]+3225465664&4294967295,k=w+(b<<9&4294967295|b>>>23),b=P+(w^M&(k^w))+x[11]+643717713&4294967295,P=k+(b<<14&4294967295|b>>>18),b=M+(k^w&(P^k))+x[0]+3921069994&4294967295,M=P+(b<<20&4294967295|b>>>12),b=w+(P^k&(M^P))+x[5]+3593408605&4294967295,w=M+(b<<5&4294967295|b>>>27),b=k+(M^P&(w^M))+x[10]+38016083&4294967295,k=w+(b<<9&4294967295|b>>>23),b=P+(w^M&(k^w))+x[15]+3634488961&4294967295,P=k+(b<<14&4294967295|b>>>18),b=M+(k^w&(P^k))+x[4]+3889429448&4294967295,M=P+(b<<20&4294967295|b>>>12),b=w+(P^k&(M^P))+x[9]+568446438&4294967295,w=M+(b<<5&4294967295|b>>>27),b=k+(M^P&(w^M))+x[14]+3275163606&4294967295,k=w+(b<<9&4294967295|b>>>23),b=P+(w^M&(k^w))+x[3]+4107603335&4294967295,P=k+(b<<14&4294967295|b>>>18),b=M+(k^w&(P^k))+x[8]+1163531501&4294967295,M=P+(b<<20&4294967295|b>>>12),b=w+(P^k&(M^P))+x[13]+2850285829&4294967295,w=M+(b<<5&4294967295|b>>>27),b=k+(M^P&(w^M))+x[2]+4243563512&4294967295,k=w+(b<<9&4294967295|b>>>23),b=P+(w^M&(k^w))+x[7]+1735328473&4294967295,P=k+(b<<14&4294967295|b>>>18),b=M+(k^w&(P^k))+x[12]+2368359562&4294967295,M=P+(b<<20&4294967295|b>>>12),b=w+(M^P^k)+x[5]+4294588738&4294967295,w=M+(b<<4&4294967295|b>>>28),b=k+(w^M^P)+x[8]+2272392833&4294967295,k=w+(b<<11&4294967295|b>>>21),b=P+(k^w^M)+x[11]+1839030562&4294967295,P=k+(b<<16&4294967295|b>>>16),b=M+(P^k^w)+x[14]+4259657740&4294967295,M=P+(b<<23&4294967295|b>>>9),b=w+(M^P^k)+x[1]+2763975236&4294967295,w=M+(b<<4&4294967295|b>>>28),b=k+(w^M^P)+x[4]+1272893353&4294967295,k=w+(b<<11&4294967295|b>>>21),b=P+(k^w^M)+x[7]+4139469664&4294967295,P=k+(b<<16&4294967295|b>>>16),b=M+(P^k^w)+x[10]+3200236656&4294967295,M=P+(b<<23&4294967295|b>>>9),b=w+(M^P^k)+x[13]+681279174&4294967295,w=M+(b<<4&4294967295|b>>>28),b=k+(w^M^P)+x[0]+3936430074&4294967295,k=w+(b<<11&4294967295|b>>>21),b=P+(k^w^M)+x[3]+3572445317&4294967295,P=k+(b<<16&4294967295|b>>>16),b=M+(P^k^w)+x[6]+76029189&4294967295,M=P+(b<<23&4294967295|b>>>9),b=w+(M^P^k)+x[9]+3654602809&4294967295,w=M+(b<<4&4294967295|b>>>28),b=k+(w^M^P)+x[12]+3873151461&4294967295,k=w+(b<<11&4294967295|b>>>21),b=P+(k^w^M)+x[15]+530742520&4294967295,P=k+(b<<16&4294967295|b>>>16),b=M+(P^k^w)+x[2]+3299628645&4294967295,M=P+(b<<23&4294967295|b>>>9),b=w+(P^(M|~k))+x[0]+4096336452&4294967295,w=M+(b<<6&4294967295|b>>>26),b=k+(M^(w|~P))+x[7]+1126891415&4294967295,k=w+(b<<10&4294967295|b>>>22),b=P+(w^(k|~M))+x[14]+2878612391&4294967295,P=k+(b<<15&4294967295|b>>>17),b=M+(k^(P|~w))+x[5]+4237533241&4294967295,M=P+(b<<21&4294967295|b>>>11),b=w+(P^(M|~k))+x[12]+1700485571&4294967295,w=M+(b<<6&4294967295|b>>>26),b=k+(M^(w|~P))+x[3]+2399980690&4294967295,k=w+(b<<10&4294967295|b>>>22),b=P+(w^(k|~M))+x[10]+4293915773&4294967295,P=k+(b<<15&4294967295|b>>>17),b=M+(k^(P|~w))+x[1]+2240044497&4294967295,M=P+(b<<21&4294967295|b>>>11),b=w+(P^(M|~k))+x[8]+1873313359&4294967295,w=M+(b<<6&4294967295|b>>>26),b=k+(M^(w|~P))+x[15]+4264355552&4294967295,k=w+(b<<10&4294967295|b>>>22),b=P+(w^(k|~M))+x[6]+2734768916&4294967295,P=k+(b<<15&4294967295|b>>>17),b=M+(k^(P|~w))+x[13]+1309151649&4294967295,M=P+(b<<21&4294967295|b>>>11),b=w+(P^(M|~k))+x[4]+4149444226&4294967295,w=M+(b<<6&4294967295|b>>>26),b=k+(M^(w|~P))+x[11]+3174756917&4294967295,k=w+(b<<10&4294967295|b>>>22),b=P+(w^(k|~M))+x[2]+718787259&4294967295,P=k+(b<<15&4294967295|b>>>17),b=M+(k^(P|~w))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,N.g[2]=N.g[2]+P&4294967295,N.g[3]=N.g[3]+k&4294967295}s.prototype.v=function(N,w){w===void 0&&(w=N.length);const M=w-this.blockSize,x=this.C;let P=this.h,k=0;for(;k<w;){if(P==0)for(;k<=M;)r(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<w;)if(x[P++]=N.charCodeAt(k++),P==this.blockSize){r(this,x),P=0;break}}else for(;k<w;)if(x[P++]=N[k++],P==this.blockSize){r(this,x),P=0;break}}this.h=P,this.o+=w},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var M=N.length-8;M<N.length;++M)N[M]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,M=0;M<4;++M)for(let x=0;x<32;x+=8)N[w++]=this.g[M]>>>x&255;return N};function l(N,w){var M=p;return Object.prototype.hasOwnProperty.call(M,N)?M[N]:M[N]=w(N)}function c(N,w){this.h=w;const M=[];let x=!0;for(let P=N.length-1;P>=0;P--){const k=N[P]|0;x&&k==w||(M[P]=k,x=!1)}this.g=M}var p={};function y(N){return-128<=N&&N<128?l(N,function(w){return new c([w|0],w<0?-1:0)}):new c([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return J(g(-N));const w=[];let M=1;for(let x=0;N>=M;x++)w[x]=N/M|0,M*=4294967296;return new c(w,0)}function T(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return J(T(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=g(Math.pow(w,8));let x=E;for(let k=0;k<N.length;k+=8){var P=Math.min(8,N.length-k);const b=parseInt(N.substring(k,k+P),w);P<8?(P=g(Math.pow(w,P)),x=x.j(P).add(g(b))):(x=x.j(M),x=x.add(g(b)))}return x}var E=y(0),C=y(1),D=y(16777216);n=c.prototype,n.m=function(){if(H(this))return-J(this).m();let N=0,w=1;for(let M=0;M<this.g.length;M++){const x=this.i(M);N+=(x>=0?x:4294967296+x)*w,w*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(H(this))return"-"+J(this).toString(N);const w=g(Math.pow(N,6));var M=this;let x="";for(;;){const P=ae(M,w).g;M=ne(M,P.j(w));let k=((M.g.length>0?M.g[0]:M.h)>>>0).toString(N);if(M=P,O(M))return k+x;for(;k.length<6;)k="0"+k;x=k+x}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function H(N){return N.h==-1}n.l=function(N){return N=ne(this,N),H(N)?-1:O(N)?0:1};function J(N){const w=N.g.length,M=[];for(let x=0;x<w;x++)M[x]=~N.g[x];return new c(M,~N.h).add(C)}n.abs=function(){return H(this)?J(this):this},n.add=function(N){const w=Math.max(this.g.length,N.g.length),M=[];let x=0;for(let P=0;P<=w;P++){let k=x+(this.i(P)&65535)+(N.i(P)&65535),b=(k>>>16)+(this.i(P)>>>16)+(N.i(P)>>>16);x=b>>>16,k&=65535,b&=65535,M[P]=b<<16|k}return new c(M,M[M.length-1]&-2147483648?-1:0)};function ne(N,w){return N.add(J(w))}n.j=function(N){if(O(this)||O(N))return E;if(H(this))return H(N)?J(this).j(J(N)):J(J(this).j(N));if(H(N))return J(this.j(J(N)));if(this.l(D)<0&&N.l(D)<0)return g(this.m()*N.m());const w=this.g.length+N.g.length,M=[];for(var x=0;x<2*w;x++)M[x]=0;for(x=0;x<this.g.length;x++)for(let P=0;P<N.g.length;P++){const k=this.i(x)>>>16,b=this.i(x)&65535,tt=N.i(P)>>>16,ht=N.i(P)&65535;M[2*x+2*P]+=b*ht,ie(M,2*x+2*P),M[2*x+2*P+1]+=k*ht,ie(M,2*x+2*P+1),M[2*x+2*P+1]+=b*tt,ie(M,2*x+2*P+1),M[2*x+2*P+2]+=k*tt,ie(M,2*x+2*P+2)}for(N=0;N<w;N++)M[N]=M[2*N+1]<<16|M[2*N];for(N=w;N<2*w;N++)M[N]=0;return new c(M,0)};function ie(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function Z(N,w){this.g=N,this.h=w}function ae(N,w){if(O(w))throw Error("division by zero");if(O(N))return new Z(E,E);if(H(N))return w=ae(J(N),w),new Z(J(w.g),J(w.h));if(H(w))return w=ae(N,J(w)),new Z(J(w.g),w.h);if(N.g.length>30){if(H(N)||H(w))throw Error("slowDivide_ only works with positive integers.");for(var M=C,x=w;x.l(N)<=0;)M=he(M),x=he(x);var P=ue(M,1),k=ue(x,1);for(x=ue(x,2),M=ue(M,2);!O(x);){var b=k.add(x);b.l(N)<=0&&(P=P.add(M),k=b),x=ue(x,1),M=ue(M,1)}return w=ne(N,P.j(w)),new Z(P,w)}for(P=E;N.l(w)>=0;){for(M=Math.max(1,Math.floor(N.m()/w.m())),x=Math.ceil(Math.log(M)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),k=g(M),b=k.j(w);H(b)||b.l(N)>0;)M-=x,k=g(M),b=k.j(w);O(k)&&(k=C),P=P.add(k),N=ne(N,b)}return new Z(P,N)}n.B=function(N){return ae(this,N).h},n.and=function(N){const w=Math.max(this.g.length,N.g.length),M=[];for(let x=0;x<w;x++)M[x]=this.i(x)&N.i(x);return new c(M,this.h&N.h)},n.or=function(N){const w=Math.max(this.g.length,N.g.length),M=[];for(let x=0;x<w;x++)M[x]=this.i(x)|N.i(x);return new c(M,this.h|N.h)},n.xor=function(N){const w=Math.max(this.g.length,N.g.length),M=[];for(let x=0;x<w;x++)M[x]=this.i(x)^N.i(x);return new c(M,this.h^N.h)};function he(N){const w=N.g.length+1,M=[];for(let x=0;x<w;x++)M[x]=N.i(x)<<1|N.i(x-1)>>>31;return new c(M,N.h)}function ue(N,w){const M=w>>5;w%=32;const x=N.g.length-M,P=[];for(let k=0;k<x;k++)P[k]=w>0?N.i(k+M)>>>w|N.i(k+M+1)<<32-w:N.i(k+M);return new c(P,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,wE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=T,Us=c}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ME,al,NE,pc,Ph,DE,bE,VE;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var v=0;v<d.length;++v){var S=d[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=t(this);function r(d,v){if(v)e:{var S=s;d=d.split(".");for(var I=0;I<d.length-1;I++){var B=d[I];if(!(B in S))break e;S=S[B]}d=d[d.length-1],I=S[d],v=v(I),v!=I&&v!=null&&e(S,d,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(d){return d||function(v){var S=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&S.push([I,v[I]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function y(d,v,S){return d.call.apply(d.bind,arguments)}function g(d,v,S){return g=y,g.apply(null,arguments)}function T(d,v){var S=Array.prototype.slice.call(arguments,1);return function(){var I=S.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function E(d,v){function S(){}S.prototype=v.prototype,d.Z=v.prototype,d.prototype=new S,d.prototype.constructor=d,d.Ob=function(I,B,Y){for(var oe=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)oe[Ie-2]=arguments[Ie];return v.prototype[B].apply(I,oe)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function D(d){const v=d.length;if(v>0){const S=Array(v);for(let I=0;I<v;I++)S[I]=d[I];return S}return[]}function O(d,v){for(let I=1;I<arguments.length;I++){const B=arguments[I];var S=typeof B;if(S=S!="object"?S:B?Array.isArray(B)?"array":S:"null",S=="array"||S=="object"&&typeof B.length=="number"){S=d.length||0;const Y=B.length||0;d.length=S+Y;for(let oe=0;oe<Y;oe++)d[S+oe]=B[oe]}else d.push(B)}}class H{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function J(d){c.setTimeout(()=>{throw d},0)}function ne(){var d=N;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class ie{constructor(){this.h=this.g=null}add(v,S){const I=Z.get();I.set(v,S),this.h?this.h.next=I:this.g=I,this.h=I}}var Z=new H(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ue=!1,N=new ie,w=()=>{const d=Promise.resolve(void 0);he=()=>{d.then(M)}};function M(){for(var d;d=ne();){try{d.h.call(d.g)}catch(S){J(S)}var v=Z;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}ue=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};c.addEventListener("test",S,v),c.removeEventListener("test",S,v)}catch{}return d})();function b(d){return/^[\s\xa0]*$/.test(d)}function tt(d,v){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}E(tt,P),tt.prototype.init=function(d,v){const S=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(S=="mouseover"?v=d.fromElement:S=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&tt.Z.h.call(this)},tt.prototype.h=function(){tt.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ht="closure_listenable_"+(Math.random()*1e6|0),Q=0;function re(d,v,S,I,B){this.listener=d,this.proxy=null,this.src=v,this.type=S,this.capture=!!I,this.ha=B,this.key=++Q,this.da=this.fa=!1}function Te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Be(d,v,S){for(const I in d)v.call(S,d[I],I,d)}function Ke(d,v){for(const S in d)v.call(void 0,d[S],S,d)}function L(d){const v={};for(const S in d)v[S]=d[S];return v}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(d,v){let S,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(S in I)d[S]=I[S];for(let Y=0;Y<j.length;Y++)S=j[Y],Object.prototype.hasOwnProperty.call(I,S)&&(d[S]=I[S])}}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,v,S,I,B){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const oe=Me(d,v,I,B);return oe>-1?(v=d[oe],S||(v.fa=!1)):(v=new re(v,this.src,Y,!!I,B),v.fa=S,d.push(v)),v};function Ae(d,v){const S=v.type;if(S in d.g){var I=d.g[S],B=Array.prototype.indexOf.call(I,v,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(I,B,1),Y&&(Te(v),d.g[S].length==0&&(delete d.g[S],d.h--))}}function Me(d,v,S,I){for(let B=0;B<d.length;++B){const Y=d[B];if(!Y.da&&Y.listener==v&&Y.capture==!!S&&Y.ha==I)return B}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),xt={};function lt(d,v,S,I,B){if(Array.isArray(v)){for(let Y=0;Y<v.length;Y++)lt(d,v[Y],S,I,B);return null}return S=ta(S),d&&d[ht]?d.J(v,S,p(I)?!!I.capture:!1,B):Ys(d,v,S,!1,I,B)}function Ys(d,v,S,I,B,Y){if(!v)throw Error("Invalid event type");const oe=p(B)?!!B.capture:!!B;let Ie=Js(d);if(Ie||(d[ke]=Ie=new de(d)),S=Ie.add(v,S,I,oe,Y),S.proxy)return S;if(I=Po(),S.proxy=I,I.src=d,I.listener=S,d.addEventListener)k||(B=oe),B===void 0&&(B=!1),d.addEventListener(v.toString(),I,B);else if(d.attachEvent)d.attachEvent(ei(v.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Po(){function d(S){return v.call(d.src,d.listener,S)}const v=jr;return d}function Uo(d,v,S,I,B){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)Uo(d,v[Y],S,I,B);else I=p(I)?!!I.capture:!!I,S=ta(S),d&&d[ht]?(d=d.i,Y=String(v).toString(),Y in d.g&&(v=d.g[Y],S=Me(v,S,I,B),S>-1&&(Te(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete d.g[Y],d.h--)))):d&&(d=Js(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Me(v,S,I,B)),(S=d>-1?v[d]:null)&&Lo(S))}function Lo(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ht])Ae(v.i,d);else{var S=d.type,I=d.proxy;v.removeEventListener?v.removeEventListener(S,I,d.capture):v.detachEvent?v.detachEvent(ei(S),I):v.addListener&&v.removeListener&&v.removeListener(I),(S=Js(v))?(Ae(S,d),S.h==0&&(S.src=null,v[ke]=null)):Te(d)}}}function ei(d){return d in xt?xt[d]:xt[d]="on"+d}function jr(d,v){if(d.da)d=!0;else{v=new tt(v,this);const S=d.listener,I=d.ha||d.src;d.fa&&Lo(d),d=S.call(I,v)}return d}function Js(d){return d=d[ke],d instanceof de?d:null}var ea="__closure_events_fn_"+(Math.random()*1e9>>>0);function ta(d){return typeof d=="function"?d:(d[ea]||(d[ea]=function(v){return d.handleEvent(v)}),d[ea])}function Et(){x.call(this),this.i=new de(this),this.M=this,this.G=null}E(Et,x),Et.prototype[ht]=!0,Et.prototype.removeEventListener=function(d,v,S,I){Uo(this,d,v,S,I)};function Pt(d,v){var S,I=d.G;if(I)for(S=[];I;I=I.G)S.push(I);if(d=d.M,I=v.type||v,typeof v=="string")v=new P(v,d);else if(v instanceof P)v.target=v.target||d;else{var B=v;v=new P(I,d),le(v,B)}B=!0;let Y,oe;if(S)for(oe=S.length-1;oe>=0;oe--)Y=v.g=S[oe],B=Wi(Y,I,!0,v)&&B;if(Y=v.g=d,B=Wi(Y,I,!0,v)&&B,B=Wi(Y,I,!1,v)&&B,S)for(oe=0;oe<S.length;oe++)Y=v.g=S[oe],B=Wi(Y,I,!1,v)&&B}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const S=d.g[v];for(let I=0;I<S.length;I++)Te(S[I]);delete d.g[v],d.h--}}this.G=null},Et.prototype.J=function(d,v,S,I){return this.i.add(String(d),v,!1,S,I)},Et.prototype.K=function(d,v,S,I){return this.i.add(String(d),v,!0,S,I)};function Wi(d,v,S,I){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let Y=0;Y<v.length;++Y){const oe=v[Y];if(oe&&!oe.da&&oe.capture==S){const Ie=oe.listener,yt=oe.ha||oe.src;oe.fa&&Ae(d.i,oe),B=Ie.call(yt,I)!==!1&&B}}return B&&!I.defaultPrevented}function sf(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(d,v||0)}function Vl(d){d.g=sf(()=>{d.g=null,d.i&&(d.i=!1,Vl(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class nn extends x{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Vl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(d){x.call(this),this.h=d,this.g={}}E(Ks,x);var na=[];function ia(d){Be(d.g,function(v,S){this.g.hasOwnProperty(S)&&Lo(v)},d),d.g={}}Ks.prototype.N=function(){Ks.Z.N.call(this),ia(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=c.JSON.stringify,of=c.JSON.parse,xl=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Pl(){}function Ul(){}var On={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){P.call(this,"d")}E(zt,P);function Sn(){P.call(this,"c")}E(Sn,P);var gt={},Ll=null;function ko(){return Ll=Ll||new Et}gt.Ia="serverreachability";function kl(d){P.call(this,gt.Ia,d)}E(kl,P);function ti(d){const v=ko();Pt(v,new kl(v))}gt.STAT_EVENT="statevent";function Qs(d,v){P.call(this,gt.STAT_EVENT,d),this.stat=v}E(Qs,P);function At(d){const v=ko();Pt(v,new Qs(v,d))}gt.Ja="timingevent";function ni(d,v){P.call(this,gt.Ja,d),this.size=v}E(ni,P);function ii(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},v)}function Bn(){this.g=!0}Bn.prototype.ua=function(){this.g=!1};function rf(d,v,S,I,B,Y){d.info(function(){if(d.g)if(Y){var oe="",Ie=Y.split("&");for(let Fe=0;Fe<Ie.length;Fe++){var yt=Ie[Fe].split("=");if(yt.length>1){const ut=yt[0];yt=yt[1];const wn=ut.split("_");oe=wn.length>=2&&wn[1]=="type"?oe+(ut+"="+yt+"&"):oe+(ut+"=redacted&")}}}else oe=null;else oe=Y;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+v+`
`+S+`
`+oe})}function ql(d,v,S,I,B,Y,oe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+v+`
`+S+`
`+Y+" "+oe})}function si(d,v,S,I){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+af(d,S)+(I?" "+I:"")})}function Xs(d,v){d.info(function(){return"TIMEOUT: "+v})}Bn.prototype.info=function(){};function af(d,v){if(!d.g)return v;if(!v)return null;try{const Y=JSON.parse(v);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var S=Y[d];if(!(S.length<2)){var I=S[1];if(Array.isArray(I)&&!(I.length<1)){var B=I[0];if(B!="noop"&&B!="stop"&&B!="close")for(let oe=1;oe<I.length;oe++)I[oe]=""}}}}return ji(Y)}catch{return v}}var $s={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oa;function Zs(){}E(Zs,Pl),Zs.prototype.g=function(){return new XMLHttpRequest},oa=new Zs;function Ni(d){return encodeURIComponent(String(d))}function Ol(d){var v=1;d=d.split(":");const S=[];for(;v>0&&d.length;)S.push(d.shift()),v--;return d.length&&S.push(d.join(":")),S}function Gn(d,v,S,I){this.j=d,this.i=v,this.l=S,this.S=I||1,this.V=new Ks(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zn}function zn(){this.i=null,this.g="",this.h=!1}var St={},kt={};function oi(d,v,S){d.M=1,d.A=Ws(Rt(v)),d.u=S,d.R=!0,qo(d,null)}function qo(d,v){d.F=Date.now(),ri(d),d.B=Rt(d.A);var S=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),zo(S.i,"t",I),d.C=0,S=d.j.L,d.h=new zn,d.g=eu(d.j,S?v:null,!d.u),d.P>0&&(d.O=new nn(g(d.Y,d,d.g),d.P)),v=d.V,S=d.g,I=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(na[0]=B.toString()),B=na);for(let Y=0;Y<B.length;Y++){const oe=lt(S,B[Y],I||v.handleEvent,!1,v.h||v);if(!oe)break;v.g[oe.key]=oe}v=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),ti(),rf(d.i,d.v,d.B,d.l,d.S,d.u)}Gn.prototype.ba=function(d){d=d.target;const v=this.O;v&&Yn(d)==3?v.j():this.Y(d)},Gn.prototype.Y=function(d){try{if(d==this.g)e:{const Ie=Yn(this.g),yt=this.g.ya(),Fe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Ht(this.g)))){this.K||Ie!=4||yt==7||(yt==8||Fe<=0?ti(3):ti(2)),ai(this);var v=this.g.ca();this.X=v;var S=lf(this);if(this.o=v==200,ql(this.i,this.v,this.B,this.l,this.S,Ie,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,B=this.g;if((I=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(I)){var Y=I;break t}}Y=null}if(d=Y)si(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,li(this,d);else{this.o=!1,this.m=3,At(12),mn(this),Cn(this);break e}}if(this.R){d=!0;let ut;for(;!this.K&&this.C<S.length;)if(ut=Gl(this,S),ut==kt){Ie==4&&(this.m=4,At(14),d=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==St){this.m=4,At(15),si(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else si(this.i,this.l,ut,null),li(this,ut);if(Bl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||S.length!=0||this.h.h||(this.m=1,At(16),d=!1),this.o=this.o&&d,!d)si(this.i,this.l,S,"[Invalid Chunked Response]"),mn(this),Cn(this);else if(S.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),va(oe),oe.P=!0,At(11))}}else si(this.i,this.l,S,null),li(this,S);Ie==4&&mn(this),this.o&&!this.K&&(Ie==4?$l(this.j,this):(this.o=!1,ri(this)))}else bi(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),mn(this),Cn(this)}}}catch{}finally{}};function lf(d){if(!Bl(d))return d.g.la();const v=Ht(d.g);if(v==="")return"";let S="";const I=v.length,B=Yn(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return mn(d),Cn(d),"";d.h.i=new c.TextDecoder}for(let Y=0;Y<I;Y++)d.h.h=!0,S+=d.h.i.decode(v[Y],{stream:!(B&&Y==I-1)});return v.length=0,d.h.g+=S,d.C=0,d.h.g}function Bl(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Gl(d,v){var S=d.C,I=v.indexOf(`
`,S);return I==-1?kt:(S=Number(v.substring(S,I)),isNaN(S)?St:(I+=1,I+S>v.length?kt:(v=v.slice(I,I+S),d.C=I+S,v)))}Gn.prototype.cancel=function(){this.K=!0,mn(this)};function ri(d){d.T=Date.now()+d.H,Oo(d,d.H)}function Oo(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ii(g(d.aa,d),v)}function ai(d){d.D&&(c.clearTimeout(d.D),d.D=null)}Gn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Xs(this.i,this.B),this.M!=2&&(ti(),At(17)),mn(this),this.m=2,Cn(this)):Oo(this,this.T-d)};function Cn(d){d.j.I==0||d.K||$l(d.j,d)}function mn(d){ai(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,ia(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function li(d,v){try{var S=d.j;if(S.I!=0&&(S.g==d||ci(S.h,d))){if(!d.L&&ci(S.h,d)&&S.I==3){try{var I=S.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<d.F)Ko(S),as(S);else break e;oo(S),At(18)}}else S.xa=B[1],0<S.xa-S.K&&B[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=ii(g(S.Va,S),6e3));ui(S.h)<=1&&S.ta&&(S.ta=void 0)}else gi(S,11)}else if((d.L||S.g==d)&&Ko(S),!b(v))for(B=S.Ba.g.parse(v),v=0;v<B.length;v++){let Fe=B[v];const ut=Fe[0];if(!(ut<=S.K))if(S.K=ut,Fe=Fe[1],S.I==2)if(Fe[0]=="c"){S.M=Fe[1],S.ba=Fe[2];const wn=Fe[3];wn!=null&&(S.ka=wn,S.j.info("VER="+S.ka));const yi=Fe[4];yi!=null&&(S.za=yi,S.j.info("SVER="+S.za));const Jn=Fe[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(I=1.5*Jn,S.O=I,S.j.info("backChannelRequestTimeoutMs_="+I)),I=S;const Kn=d.g;if(Kn){const ro=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var Y=I.h;Y.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(la(Y,Y.h),Y.h=null))}if(I.G){const Qo=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(I.wa=Qo,Qe(I.J,I.G,Qo))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-d.F,S.j.info("Handshake RTT: "+S.T+"ms")),I=S;var oe=d;if(I.na=jl(I,I.L?I.ba:null,I.W),oe.L){ua(I.h,oe);var Ie=oe,yt=I.O;yt&&(Ie.H=yt),Ie.D&&(ai(Ie),ri(Ie)),I.g=oe}else Ql(I);S.i.length>0&&pi(S)}else Fe[0]!="stop"&&Fe[0]!="close"||gi(S,7);else S.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?gi(S,7):_a(S):Fe[0]!="noop"&&S.l&&S.l.qa(Fe),S.A=0)}}ti(4)}catch{}}var Ct=class{constructor(d,v){this.g=d,this.map=v}};function ra(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ui(d){return d.h?1:d.g?d.g.size:0}function ci(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function la(d,v){d.g?d.g.add(v):d.h=v}function ua(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}ra.prototype.cancel=function(){if(this.i=ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ca(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const S of d.g.values())v=v.concat(S.G);return v}return D(d.i)}var zl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bo(d,v){if(d){d=d.split("&");for(let S=0;S<d.length;S++){const I=d[S].indexOf("=");let B,Y=null;I>=0?(B=d[S].substring(0,I),Y=d[S].substring(I+1)):B=d[S],v(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function pn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof pn?(this.l=d.l,qt(this,d.j),this.o=d.o,this.g=d.g,es(this,d.u),this.h=d.h,fa(this,Jl(d.i)),this.m=d.m):d&&(v=String(d).match(zl))?(this.l=!1,qt(this,v[1]||"",!0),this.o=fi(v[2]||""),this.g=fi(v[3]||"",!0),es(this,v[4]),this.h=fi(v[5]||"",!0),fa(this,v[6]||"",!0),this.m=fi(v[7]||"")):(this.l=!1,this.i=new ns(null,this.l))}pn.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(js(v,Go,!0),":");var S=this.g;return(S||v=="file")&&(d.push("//"),(v=this.o)&&d.push(js(v,Go,!0),"@"),d.push(Ni(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&d.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(js(S,S.charAt(0)=="/"?da:Hl,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",js(S,Fl)),d.join("")},pn.prototype.resolve=function(d){const v=Rt(this);let S=!!d.j;S?qt(v,d.j):S=!!d.o,S?v.o=d.o:S=!!d.g,S?v.g=d.g:S=d.u!=null;var I=d.h;if(S)es(v,d.u);else if(S=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var B=v.h.lastIndexOf("/");B!=-1&&(I=v.h.slice(0,B+1)+I)}if(B=I,B==".."||B==".")I="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){I=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let oe=0;oe<B.length;){const Ie=B[oe++];Ie=="."?I&&oe==B.length&&Y.push(""):Ie==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),I&&oe==B.length&&Y.push("")):(Y.push(Ie),I=!0)}I=Y.join("/")}else I=B}return S?v.h=I:S=d.i.toString()!=="",S?fa(v,Jl(d.i)):S=!!d.m,S&&(v.m=d.m),v};function Rt(d){return new pn(d)}function qt(d,v,S){d.j=S?fi(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function es(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function fa(d,v,S){v instanceof ns?(d.i=v,Ho(d.i,d.l)):(S||(v=js(v,ts)),d.i=new ns(v,d.l))}function Qe(d,v,S){d.i.set(v,S)}function Ws(d){return Qe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function fi(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function js(d,v,S){return typeof d=="string"?(d=encodeURI(d).replace(v,rn),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function rn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Go=/[#\/\?@]/g,Hl=/[#\?:]/g,da=/[#\?]/g,ts=/[#\?@]/g,Fl=/#/g;function ns(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function an(d){d.g||(d.g=new Map,d.h=0,d.i&&Bo(d.i,function(v,S){d.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=ns.prototype,n.add=function(d,v){an(this),this.i=null,d=is(this,d);let S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(v),this.h+=1,this};function Yl(d,v){an(d),v=is(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function ha(d,v){return an(d),v=is(d,v),d.g.has(v)}n.forEach=function(d,v){an(this),this.g.forEach(function(S,I){S.forEach(function(B){d.call(v,B,I,this)},this)},this)};function ma(d,v){an(d);let S=[];if(typeof v=="string")ha(d,v)&&(S=S.concat(d.g.get(is(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)S=S.concat(d[v]);return S}n.set=function(d,v){return an(this),this.i=null,d=is(this,d),ha(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=ma(this,d),d.length>0?String(d[0]):v):v};function zo(d,v,S){Yl(d,v),S.length>0&&(d.i=null,d.g.set(is(d,v),D(S)),d.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var S=v[I];const B=Ni(S);S=ma(this,S);for(let Y=0;Y<S.length;Y++){let oe=B;S[Y]!==""&&(oe+="="+Ni(S[Y])),d.push(oe)}}return this.i=d.join("&")};function Jl(d){const v=new ns;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function is(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Ho(d,v){v&&!d.j&&(an(d),d.i=null,d.g.forEach(function(S,I){const B=I.toLowerCase();I!=B&&(Yl(this,I),zo(this,B,S))},d)),d.j=v}function Hn(d,v){const S=new Bn;if(c.Image){const I=new Image;I.onload=T(Rn,S,"TestLoadImage: loaded",!0,v,I),I.onerror=T(Rn,S,"TestLoadImage: error",!1,v,I),I.onabort=T(Rn,S,"TestLoadImage: abort",!1,v,I),I.ontimeout=T(Rn,S,"TestLoadImage: timeout",!1,v,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else v(!1)}function pa(d,v){const S=new Bn,I=new AbortController,B=setTimeout(()=>{I.abort(),Rn(S,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:I.signal}).then(Y=>{clearTimeout(B),Y.ok?Rn(S,"TestPingServer: ok",!0,v):Rn(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),Rn(S,"TestPingServer: error",!1,v)})}function Rn(d,v,S,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(S)}catch{}}function ss(){this.g=new xl}function di(d){this.i=d.Sb||null,this.h=d.ab||!1}E(di,Pl),di.prototype.g=function(){return new eo(this.i,this.h)};function eo(d,v){Et.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(eo,Et),n=eo.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Fn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fn(this)),this.g&&(this.readyState=3,Fn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fo(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fo(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?os(this):Fn(this),this.readyState==3&&Fo(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,os(this))},n.Na=function(d){this.g&&(this.response=d,os(this))},n.ga=function(){this.g&&os(this)};function os(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Fn(d)}n.setRequestHeader=function(d,v){this.A.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=v.next();return d.join(`\r
`)};function Fn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function In(d){let v="";return Be(d,function(S,I){v+=I,v+=":",v+=S,v+=`\r
`}),v}function to(d,v,S){e:{for(I in S){var I=!1;break e}I=!0}I||(S=In(S),typeof d=="string"?S!=null&&Ni(S):Qe(d,v,S))}function Ze(d){Et.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ze,Et);var hi=/^https?$/i,ga=["POST","PUT"];n=Ze.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,v,S,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oa.g(),this.g.onreadystatechange=C(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(Y){no(this,Y);return}if(d=S||"",S=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)S.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())S.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(S.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=c.FormData&&d instanceof c.FormData,!(Array.prototype.indexOf.call(ga,v,void 0)>=0)||I||B||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,oe]of S)this.g.setRequestHeader(Y,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){no(this,Y)}};function no(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,ya(d),Di(d)}function ya(d){d.A||(d.A=!0,Pt(d,"complete"),Pt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Pt(this,"complete"),Pt(this,"abort"),Di(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),Ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?io(this):this.Xa())},n.Xa=function(){io(this)};function io(d){if(d.h&&typeof l<"u"){if(d.v&&Yn(d)==4)setTimeout(d.Ca.bind(d),0);else if(Pt(d,"readystatechange"),Yn(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var I;if(I=Y===0){let oe=String(d.D).match(zl)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),I=!hi.test(oe?oe.toLowerCase():"")}S=I}if(S)Pt(d,"complete"),Pt(d,"success");else{d.o=6;try{var B=Yn(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",ya(d)}}finally{Di(d)}}}}function Di(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const S=d.g;d.g=null,v||Pt(d,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Yn(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),of(v)}};function Ht(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function bi(d){const v={};d=(d.g&&Yn(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(b(d[I]))continue;var S=Ol(d[I]);const B=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Y=v[B]||[];v[B]=Y,Y.push(S)}Ke(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(d,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||v}function rs(d){this.za=0,this.i=[],this.j=new Bn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mi("baseRetryDelayMs",5e3,d),this.Za=mi("retryDelaySeedMs",1e4,d),this.Ta=mi("forwardChannelMaxRetries",2,d),this.va=mi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ra(d&&d.concurrentRequestLimit),this.Ba=new ss,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=rs.prototype,n.ka=8,n.I=1,n.connect=function(d,v,S,I){At(0),this.W=d,this.H=v||{},S&&I!==void 0&&(this.H.OSID=S,this.H.OAID=I),this.F=this.X,this.J=jl(this,null,this.W),pi(this)};function _a(d){if(Yo(d),d.I==3){var v=d.V++,S=Rt(d.J);if(Qe(S,"SID",d.M),Qe(S,"RID",v),Qe(S,"TYPE","terminate"),so(d,S),v=new Gn(d,d.j,v),v.M=2,v.A=Ws(Rt(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&c.Image&&(new Image().src=v.A,S=!0),S||(v.g=eu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ri(v)}Wl(d)}function as(d){d.g&&(va(d),d.g.cancel(),d.g=null)}function Yo(d){as(d),d.v&&(c.clearTimeout(d.v),d.v=null),Ko(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&c.clearTimeout(d.m),d.m=null)}function pi(d){if(!aa(d.h)&&!d.m){d.m=!0;var v=d.Ea;he||w(),ue||(he(),ue=!0),N.add(v,d),d.D=0}}function Jo(d,v){return ui(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ii(g(d.Ea,d,v),Zl(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new Gn(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=L(Y),le(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var I=this.i[S];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Kl(this,B,v),S=Rt(this.J),Qe(S,"RID",d),Qe(S,"CVER",22),this.G&&Qe(S,"X-HTTP-Session-Id",this.G),so(this,S),Y&&(this.R?v="headers="+Ni(In(Y))+"&"+v:this.u&&to(S,this.u,Y)),la(this.h,B),this.Ra&&Qe(S,"TYPE","init"),this.S?(Qe(S,"$req",v),Qe(S,"SID","null"),B.U=!0,oi(B,S,null)):oi(B,S,v),this.I=2}}else this.I==3&&(d?Ta(this,d):this.i.length==0||aa(this.h)||Ta(this))};function Ta(d,v){var S;v?S=v.l:S=d.V++;const I=Rt(d.J);Qe(I,"SID",d.M),Qe(I,"RID",S),Qe(I,"AID",d.K),so(d,I),d.u&&d.o&&to(I,d.u,d.o),S=new Gn(d,d.j,S,d.D+1),d.u===null&&(S.J=d.o),v&&(d.i=v.G.concat(d.i)),v=Kl(d,S,1e3),S.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),la(d.h,S),oi(S,I,v)}function so(d,v){d.H&&Be(d.H,function(S,I){Qe(v,I,S)}),d.l&&Be({},function(S,I){Qe(v,I,S)})}function Kl(d,v,S){S=Math.min(d.i.length,S);const I=d.l?g(d.l.Ka,d.l,d):null;e:{var B=d.i;let Ie=-1;for(;;){const yt=["count="+S];Ie==-1?S>0?(Ie=B[0].g,yt.push("ofs="+Ie)):Ie=0:yt.push("ofs="+Ie);let Fe=!0;for(let ut=0;ut<S;ut++){var Y=B[ut].g;const wn=B[ut].map;if(Y-=Ie,Y<0)Ie=Math.max(0,B[ut].g-100),Fe=!1;else try{Y="req"+Y+"_"||"";try{var oe=wn instanceof Map?wn:Object.entries(wn);for(const[yi,Jn]of oe){let Kn=Jn;p(Jn)&&(Kn=ji(Jn)),yt.push(Y+yi+"="+encodeURIComponent(Kn))}}catch(yi){throw yt.push(Y+"type="+encodeURIComponent("_badmap")),yi}}catch{I&&I(wn)}}if(Fe){oe=yt.join("&");break e}}oe=void 0}return d=d.i.splice(0,S),v.G=d,oe}function Ql(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;he||w(),ue||(he(),ue=!0),N.add(v,d),d.A=0}}function oo(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ii(g(d.Da,d),Zl(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Xl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ii(g(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),as(this),Xl(this))};function va(d){d.B!=null&&(c.clearTimeout(d.B),d.B=null)}function Xl(d){d.g=new Gn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Rt(d.na);Qe(v,"RID","rpc"),Qe(v,"SID",d.M),Qe(v,"AID",d.K),Qe(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Qe(v,"TO",d.ia),Qe(v,"TYPE","xmlhttp"),so(d,v),d.u&&d.o&&to(v,d.u,d.o),d.O&&(d.g.H=d.O);var S=d.g;d=d.ba,S.M=1,S.A=Ws(Rt(v)),S.u=null,S.R=!0,qo(S,d)}n.Va=function(){this.C!=null&&(this.C=null,as(this),oo(this),At(19))};function Ko(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function $l(d,v){var S=null;if(d.g==v){Ko(d),va(d),d.g=null;var I=2}else if(ci(d.h,v))S=v.G,ua(d.h,v),I=1;else return;if(d.I!=0){if(v.o)if(I==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var B=d.D;I=ko(),Pt(I,new ni(I,S)),pi(d)}else Ql(d);else if(B=v.m,B==3||B==0&&v.X>0||!(I==1&&Jo(d,v)||I==2&&oo(d)))switch(S&&S.length>0&&(v=d.h,v.i=v.i.concat(S)),B){case 1:gi(d,5);break;case 4:gi(d,10);break;case 3:gi(d,6);break;default:gi(d,2)}}}function Zl(d,v){let S=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(S*=2),S*v}function gi(d,v){if(d.j.info("Error code "+v),v==2){var S=g(d.bb,d),I=d.Ua;const B=!I;I=new pn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qt(I,"https"),Ws(I),B?Hn(I.toString(),S):pa(I.toString(),S)}else At(2);d.I=0,d.l&&d.l.pa(v),Wl(d),Yo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Wl(d){if(d.I=0,d.ja=[],d.l){const v=ca(d.h);(v.length!=0||d.i.length!=0)&&(O(d.ja,v),O(d.ja,d.i),d.h.i.length=0,D(d.i),d.i.length=0),d.l.oa()}}function jl(d,v,S){var I=S instanceof pn?Rt(S):new pn(S);if(I.g!="")v&&(I.g=v+"."+I.g),es(I,I.u);else{var B=c.location;I=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const Y=new pn(null);I&&qt(Y,I),v&&(Y.g=v),B&&es(Y,B),S&&(Y.h=S),I=Y}return S=d.G,v=d.wa,S&&v&&Qe(I,S,v),Qe(I,"VER",d.ka),so(d,I),I}function eu(d,v,S){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new Ze(new di({ab:S})):new Ze(d.ma),v.Fa(d.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}n=tu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ls(){}ls.prototype.g=function(d,v){return new sn(d,v)};function sn(d,v){Et.call(this),this.g=new rs(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!b(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!b(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Vi(this)}E(sn,Et),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){_a(this.g)},sn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.v&&(S={},S.__data__=ji(d),d=S);v.i.push(new Ct(v.Ya++,d)),v.I==3&&pi(v)},sn.prototype.N=function(){this.g.l=null,delete this.j,_a(this.g),delete this.g,sn.Z.N.call(this)};function nu(d){zt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const S in v){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}E(nu,zt);function iu(){Sn.call(this),this.status=1}E(iu,Sn);function Vi(d){this.g=d}E(Vi,tu),Vi.prototype.ra=function(){Pt(this.g,"a")},Vi.prototype.qa=function(d){Pt(this.g,new nu(d))},Vi.prototype.pa=function(d){Pt(this.g,new iu)},Vi.prototype.oa=function(){Pt(this.g,"b")},ls.prototype.createWebChannel=ls.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,VE=function(){return new ls},bE=function(){return ko()},DE=gt,Ph={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,pc=$s,sa.COMPLETE="complete",NE=sa,Ul.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",Et.prototype.listen=Et.prototype.J,al=Ul,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,ME=Ze}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const KT="@firebase/firestore",QT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new EE("@firebase/firestore");function Rr(){return Io.logLevel}function fe(n,...e){if(Io.logLevel<=Oe.DEBUG){const t=e.map(lm);Io.debug(`Firestore (${Qr}): ${n}`,...t)}}function Xi(n,...e){if(Io.logLevel<=Oe.ERROR){const t=e.map(lm);Io.error(`Firestore (${Qr}): ${n}`,...t)}}function qr(n,...e){if(Io.logLevel<=Oe.WARN){const t=e.map(lm);Io.warn(`Firestore (${Qr}): ${n}`,...t)}}function lm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,xE(n,s,t)}function xE(n,e,t){let s=`FIRESTORE (${Qr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Xi(s),new Error(s)}function Je(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||xE(e,r,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jt.UNAUTHENTICATED)))}shutdown(){}}class SD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class CD{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let s=this.i;const r=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let l=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ls,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},p=y=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ls)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new PE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class RD{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ID{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new RD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class XT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const s=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new XT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new XT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=MD(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function Pe(n,e){return n<e?-1:n>e?1:0}function Uh(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return mh(r)===mh(l)?Pe(r,l):mh(r)?1:-1}return Pe(n.length,e.length)}const ND=55296,DD=57343;function mh(n){const e=n.charCodeAt(0);return e>=ND&&e<=DD}function Or(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="__name__";class Ai{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=Ai.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const s=Ai.isNumericId(e),r=Ai.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):Uh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Us.fromString(e.substring(4,e.length-2))}}class it extends Ai{construct(e,t,s){return new it(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const bD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Ai{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return bD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$T}static keyField(){return new Xt([$T])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const p=e[r];if(p==="\\"){if(r+1===e.length)throw new ce(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,r+=2}else p==="`"?(c=!c,r++):p!=="."||c?(s+=p,r++):(l(),r++)}if(l(),c)throw new ce(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(it.fromString(e))}static fromName(e){return new _e(it.fromString(e).popFirst(5))}static empty(){return new _e(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n,e,t){if(!t)throw new ce(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VD(n,e,t,s){if(e===!0&&s===!0)throw new ce(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ZT(n){if(!_e.isDocumentKey(n))throw new ce(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WT(n){if(_e.isDocumentKey(n))throw new ce(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function _l(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hc(n);throw new ce(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function wl(n,e){if(!LE(n))throw new ce(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ce(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=-62135596800,ev=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*ev);return new at(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jT)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ev}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wl(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Vt("string",at._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new at(0,0))}static max(){return new Se(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;function xD(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Se.fromTimestamp(s===1e9?new at(t+1,0):new at(t,s));return new qs(r,_e.empty(),e)}function PD(n){return new qs(n.readTime,n.key,Tl)}class qs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new qs(Se.min(),_e.empty(),Tl)}static max(){return new qs(Se.max(),_e.empty(),Tl)}}function UD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xr(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==LD)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,s)=>{t(e)}))}static reject(e){return new te(((t,s)=>{s(e)}))}static waitFor(e){return new te(((t,s)=>{let r=0,l=0,c=!1;e.forEach((p=>{++r,p.next((()=>{++l,c&&l===r&&t()}),(y=>s(y)))})),c=!0,l===r&&t()}))}static or(e){let t=te.resolve(!1);for(const s of e)t=t.next((r=>r?te.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new te(((s,r)=>{const l=e.length,c=new Array(l);let p=0;for(let y=0;y<l;y++){const g=y;t(e[g]).next((T=>{c[g]=T,++p,p===l&&s(c)}),(T=>r(T)))}}))}static doWhile(e,t){return new te(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function qD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $r(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-1;function Yc(n){return n==null}function Mc(n){return n===0&&1/n==-1/0}function OD(n){return typeof n=="number"&&Number.isInteger(n)&&!Mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="";function BD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tv(e)),e=GD(n.get(t),e);return tv(e)}function GD(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case kE:t+="";break;default:t+=l}}return t}function tv(n){return n+kE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function No(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Qt.RED,this.left=r??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Qt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Qt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new Lt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Or(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new OE("Invalid base64 string: "+l):l}})(e);return new $t(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const zD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=zD.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bs(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="server_timestamp",GE="__type__",zE="__previous_value__",HE="__local_write_time__";function fm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[GE])==null?void 0:s.stringValue)===BE}function Jc(n){const e=n.mapValue.fields[zE];return fm(e)?Jc(e):e}function vl(n){const e=Os(n.mapValue.fields[HE].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,t,s,r,l,c,p,y,g,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=T}}const Nc="(default)";class El{constructor(e,t){this.projectId=e,this.database=t||Nc}static empty(){return new El("","")}get isDefaultDatabase(){return this.database===Nc}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="__type__",FD="__max__",uc={mapValue:{}},YE="__vector__",Dc="value";function Gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fm(n)?4:JD(n)?9007199254740991:YD(n)?10:11:Ee(28295,{value:n})}function Mi(n,e){if(n===e)return!0;const t=Gs(n);if(t!==Gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vl(n).isEqual(vl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Os(r.timestampValue),p=Os(l.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Bs(r.bytesValue).isEqual(Bs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return vt(r.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return vt(r.integerValue)===vt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=vt(r.doubleValue),p=vt(l.doubleValue);return c===p?Mc(c)===Mc(p):isNaN(c)&&isNaN(p)}return!1})(n,e);case 9:return Or(n.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},p=l.mapValue.fields||{};if(nv(c)!==nv(p))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(p[y]===void 0||!Mi(c[y],p[y])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function Al(n,e){return(n.values||[]).find((t=>Mi(t,e)))!==void 0}function Br(n,e){if(n===e)return 0;const t=Gs(n),s=Gs(e);if(t!==s)return Pe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const p=vt(l.integerValue||l.doubleValue),y=vt(c.integerValue||c.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(n,e);case 3:return sv(n.timestampValue,e.timestampValue);case 4:return sv(vl(n),vl(e));case 5:return Uh(n.stringValue,e.stringValue);case 6:return(function(l,c){const p=Bs(l),y=Bs(c);return p.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const p=l.split("/"),y=c.split("/");for(let g=0;g<p.length&&g<y.length;g++){const T=Pe(p[g],y[g]);if(T!==0)return T}return Pe(p.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const p=Pe(vt(l.latitude),vt(c.latitude));return p!==0?p:Pe(vt(l.longitude),vt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ov(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var C,D,O,H;const p=l.fields||{},y=c.fields||{},g=(C=p[Dc])==null?void 0:C.arrayValue,T=(D=y[Dc])==null?void 0:D.arrayValue,E=Pe(((O=g==null?void 0:g.values)==null?void 0:O.length)||0,((H=T==null?void 0:T.values)==null?void 0:H.length)||0);return E!==0?E:ov(g,T)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===uc.mapValue&&c===uc.mapValue)return 0;if(l===uc.mapValue)return 1;if(c===uc.mapValue)return-1;const p=l.fields||{},y=Object.keys(p),g=c.fields||{},T=Object.keys(g);y.sort(),T.sort();for(let E=0;E<y.length&&E<T.length;++E){const C=Uh(y[E],T[E]);if(C!==0)return C;const D=Br(p[y[E]],g[T[E]]);if(D!==0)return D}return Pe(y.length,T.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function sv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=Os(n),s=Os(e),r=Pe(t.seconds,s.seconds);return r!==0?r:Pe(t.nanos,s.nanos)}function ov(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=Br(t[r],s[r]);if(l)return l}return Pe(t.length,s.length)}function Gr(n){return Lh(n)}function Lh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Os(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=Lh(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of s)l?l=!1:r+=",",r+=`${c}:${Lh(t.fields[c])}`;return r+"}"})(n.mapValue):Ee(61005,{value:n})}function gc(n){switch(Gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jc(n);return e?16+gc(e):16;case 5:return 2*n.stringValue.length;case 6:return Bs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+gc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return No(s.fields,((l,c)=>{r+=l.length+gc(c)})),r})(n.mapValue);default:throw Ee(13486,{value:n})}}function rv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kh(n){return!!n&&"integerValue"in n}function dm(n){return!!n&&"arrayValue"in n}function av(n){return!!n&&"nullValue"in n}function lv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yc(n){return!!n&&"mapValue"in n}function YD(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[FE])==null?void 0:s.stringValue)===YE}function dl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return No(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=dl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dl(n.arrayValue.values[t]);return e}return{...n}}function JD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!yc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(t)}setAll(e){let t=Xt.emptyPath(),s={},r=[];e.forEach(((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,s,r),s={},r=[],t=p.popLast()}c?s[p.lastSegment()]=dl(c):r.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());yc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){No(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new Ln(dl(this.value))}}function JE(n){const e=[];return No(n.fields,((t,s)=>{const r=new Xt([t]);if(yc(s)){const l=JE(s.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,s,r,l,c,p){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=c,this.documentState=p}static newInvalidDocument(e){return new en(e,0,Se.min(),Se.min(),Se.min(),Ln.empty(),0)}static newFoundDocument(e,t,s,r){return new en(e,1,t,Se.min(),s,r,0)}static newNoDocument(e,t){return new en(e,2,t,Se.min(),Se.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,Se.min(),Se.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t){this.position=e,this.inclusive=t}}function uv(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?s=_e.comparator(_e.fromName(c.referenceValue),t.key):s=Br(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function cv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function KD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{}class bt extends KE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new XD(e,t,s):t==="array-contains"?new WD(e,s):t==="in"?new jD(e,s):t==="not-in"?new e2(e,s):t==="array-contains-any"?new t2(e,s):new bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new $D(e,s):new ZD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Br(t,this.value)):t!==null&&Gs(this.value)===Gs(t)&&this.matchesComparison(Br(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends KE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wn(e,t)}matches(e){return QE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QE(n){return n.op==="and"}function XE(n){return QD(n)&&QE(n)}function QD(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function qh(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+Gr(n.value);if(XE(n))return n.filters.map((e=>qh(e))).join(",");{const e=n.filters.map((t=>qh(t))).join(",");return`${n.op}(${e})`}}function $E(n,e){return n instanceof bt?(function(s,r){return r instanceof bt&&s.op===r.op&&s.field.isEqual(r.field)&&Mi(s.value,r.value)})(n,e):n instanceof Wn?(function(s,r){return r instanceof Wn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,c,p)=>l&&$E(c,r.filters[p])),!0):!1})(n,e):void Ee(19439)}function ZE(n){return n instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Gr(t.value)}`})(n):n instanceof Wn?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZE).join(" ,")+"}"})(n):"Filter"}class XD extends bt{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class $D extends bt{constructor(e,t){super(e,"in",t),this.keys=WE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ZD extends bt{constructor(e,t){super(e,"not-in",t),this.keys=WE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function WE(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>_e.fromName(s.referenceValue)))}class WD extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dm(t)&&Al(t.arrayValue,this.value)}}class jD extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}}class e2 extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Al(this.value.arrayValue,t)}}class t2 extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Al(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t=null,s=[],r=[],l=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=c,this.endAt=p,this.Te=null}}function fv(n,e=null,t=[],s=[],r=null,l=null,c=null){return new n2(n,e,t,s,r,l,c)}function hm(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>qh(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Yc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Gr(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Gr(s))).join(",")),e.Te=t}return e.Te}function mm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$E(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cv(n.startAt,e.startAt)&&cv(n.endAt,e.endAt)}function Oh(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,t=null,s=[],r=[],l=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=c,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function i2(n,e,t,s,r,l,c,p){return new Zr(n,e,t,s,r,l,c,p)}function jE(n){return new Zr(n)}function dv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eA(n){return n.collectionGroup!==null}function hl(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let p=new Lt(Xt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Sl(l,s))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new Sl(Xt.keyField(),s))}return e.Ie}function Si(n){const e=Re(n);return e.Ee||(e.Ee=s2(e,hl(n))),e.Ee}function s2(n,e){if(n.limitType==="F")return fv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Sl(r.field,l)}));const t=n.endAt?new bc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new bc(n.startAt.position,n.startAt.inclusive):null;return fv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Bh(n,e){const t=n.filters.concat([e]);return new Zr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gh(n,e,t){return new Zr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kc(n,e){return mm(Si(n),Si(e))&&n.limitType===e.limitType}function tA(n){return`${hm(Si(n))}|lt:${n.limitType}`}function Ir(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>ZE(r))).join(", ")}]`),Yc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>Gr(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>Gr(r))).join(",")),`Target(${s})`})(Si(n))}; limitType=${n.limitType})`}function Qc(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):_e.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of hl(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,p,y){const g=uv(c,p,y);return c.inclusive?g<=0:g<0})(s.startAt,hl(s),r)||s.endAt&&!(function(c,p,y){const g=uv(c,p,y);return c.inclusive?g>=0:g>0})(s.endAt,hl(s),r))})(n,e)}function o2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nA(n){return(e,t)=>{let s=!1;for(const r of hl(n)){const l=r2(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function r2(n,e,t){const s=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,p){const y=c.data.field(l),g=p.data.field(l);return y!==null&&g!==null?Br(y,g):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return qE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new dt(_e.comparator);function $i(){return a2}const iA=new dt(_e.comparator);function ll(...n){let e=iA;for(const t of n)e=e.insert(t.key,t);return e}function sA(n){let e=iA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Co(){return ml()}function oA(){return ml()}function ml(){return new Do((n=>n.toString()),((n,e)=>n.isEqual(e)))}const l2=new dt(_e.comparator),u2=new Lt(_e.comparator);function Ue(...n){let e=u2;for(const t of n)e=e.add(t);return e}const c2=new Lt(Pe);function f2(){return c2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function rA(n){return{integerValue:""+n}}function d2(n,e){return OD(e)?rA(e):pm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function h2(n,e,t){return n instanceof Vc?(function(r,l){const c={fields:{[GE]:{stringValue:BE},[HE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&fm(l)&&(l=Jc(l)),l&&(c.fields[zE]=l),{mapValue:c}})(t,e):n instanceof Cl?lA(n,e):n instanceof Rl?uA(n,e):(function(r,l){const c=aA(r,l),p=hv(c)+hv(r.Ae);return kh(c)&&kh(r.Ae)?rA(p):pm(r.serializer,p)})(n,e)}function m2(n,e,t){return n instanceof Cl?lA(n,e):n instanceof Rl?uA(n,e):t}function aA(n,e){return n instanceof xc?(function(s){return kh(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Vc extends Xc{}class Cl extends Xc{constructor(e){super(),this.elements=e}}function lA(n,e){const t=cA(e);for(const s of n.elements)t.some((r=>Mi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Rl extends Xc{constructor(e){super(),this.elements=e}}function uA(n,e){let t=cA(e);for(const s of n.elements)t=t.filter((r=>!Mi(r,s)));return{arrayValue:{values:t}}}class xc extends Xc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function hv(n){return vt(n.integerValue||n.doubleValue)}function cA(n){return dm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function p2(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof Cl&&r instanceof Cl||s instanceof Rl&&r instanceof Rl?Or(s.elements,r.elements,Mi):s instanceof xc&&r instanceof xc?Mi(s.Ae,r.Ae):s instanceof Vc&&r instanceof Vc})(n.transform,e.transform)}class g2{constructor(e,t){this.version=e,this.transformResults=t}}class Ci{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ci}static exists(e){return new Ci(void 0,e)}static updateTime(e){return new Ci(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $c{}function fA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gm(n.key,Ci.none()):new Ml(n.key,n.data,Ci.none());{const t=n.data,s=Ln.empty();let r=new Lt(Xt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),r=r.add(l)}return new bo(n.key,s,new Zn(r.toArray()),Ci.none())}}function y2(n,e,t){n instanceof Ml?(function(r,l,c){const p=r.value.clone(),y=pv(r.fieldTransforms,l,c.transformResults);p.setAll(y),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):n instanceof bo?(function(r,l,c){if(!_c(r.precondition,l))return void l.convertToUnknownDocument(c.version);const p=pv(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(dA(r)),y.setAll(p),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function pl(n,e,t,s){return n instanceof Ml?(function(l,c,p,y){if(!_c(l.precondition,c))return p;const g=l.value.clone(),T=gv(l.fieldTransforms,y,c);return g.setAll(T),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,s):n instanceof bo?(function(l,c,p,y){if(!_c(l.precondition,c))return p;const g=gv(l.fieldTransforms,y,c),T=c.data;return T.setAll(dA(l)),T.setAll(g),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,p){return _c(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p})(n,e,t)}function _2(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=aA(s.transform,r||null);l!=null&&(t===null&&(t=Ln.empty()),t.set(s.field,l))}return t||null}function mv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Or(s,r,((l,c)=>p2(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ml extends $c{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bo extends $c{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function dA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function pv(n,e,t){const s=new Map;Je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,p=e.data.field(l.field);s.set(l.field,m2(c,p,t[r]))}return s}function gv(n,e,t){const s=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);s.set(r.field,h2(l,c,e))}return s}class gm extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T2 extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&y2(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=pl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=pl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=oA();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let p=this.applyToLocalView(c,l.mutatedFields);p=t.has(r.key)?null:p;const y=fA(c,p);y!==null&&s.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Or(this.mutations,e.mutations,((t,s)=>mv(t,s)))&&Or(this.baseMutations,e.baseMutations,((t,s)=>mv(t,s)))}}class ym{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){Je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return l2})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,s[c].version);return new ym(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,qe;function S2(n){switch(n){case ee.OK:return Ee(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function hA(n){if(n===void 0)return Xi("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Dt.OK:return ee.OK;case Dt.CANCELLED:return ee.CANCELLED;case Dt.UNKNOWN:return ee.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return ee.INTERNAL;case Dt.UNAVAILABLE:return ee.UNAVAILABLE;case Dt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Dt.NOT_FOUND:return ee.NOT_FOUND;case Dt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Dt.ABORTED:return ee.ABORTED;case Dt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Dt.DATA_LOSS:return ee.DATA_LOSS;default:return Ee(39323,{code:n})}}(qe=Dt||(Dt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Us([4294967295,4294967295],0);function yv(n){const e=C2().encode(n),t=new wE;return t.update(e),new Uint8Array(t.digest())}function _v(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Us([t,s],0),new Us([r,l],0)]}class _m{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ul(`Invalid padding: ${t}`);if(s<0)throw new ul(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ul(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ul(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Us.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Us.fromNumber(s)));return r.compare(R2)===1&&(r=new Us([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=yv(e),[s,r]=_v(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new _m(l,r,t);return s.forEach((p=>c.insert(p))),c}insert(e){if(this.ge===0)return;const t=yv(e),[s,r]=_v(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Nl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Zc(Se.min(),r,new dt(Pe),$i(),Ue())}}class Nl{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Nl(s,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class mA{constructor(e,t){this.targetId=e,this.Ce=t}}class pA{constructor(e,t,s=$t.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class Tv{constructor(){this.ve=0,this.Fe=vv(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),s=Ue();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Ee(38017,{changeType:l})}})),new Nl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=vv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class I2{constructor(e){this.Ge=e,this.ze=new Map,this.je=$i(),this.Je=cc(),this.He=cc(),this.Ye=new dt(Pe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Oh(l))if(s===0){const c=new _e(l.path);this.et(t,c,en.newNoDocument(c,Se.min()))}else Je(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const p=this.ut(e),y=p?this.ct(p,e,c):1;if(y!==0){this.it(t);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let c,p;try{c=Bs(s).toUint8Array()}catch(y){if(y instanceof OE)return qr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new _m(c,r,l)}catch(y){return qr(y instanceof ul?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const c=this.Ge.ht(),p=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const p=this.ot(c);if(p){if(l.current&&Oh(p.target)){const y=new _e(p.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,en.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ue();this.He.forEach(((l,c)=>{let p=!0;c.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new Zc(e,t,this.Ye,this.je,s);return this.je=$i(),this.Je=cc(),this.He=cc(),this.Ye=new dt(Pe),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Tv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Lt(Pe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Lt(Pe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cc(){return new dt(_e.comparator)}function vv(){return new dt(_e.comparator)}const w2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N2={and:"AND",or:"OR"};class D2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zh(n,e){return n.useProto3Json||Yc(e)?e:{value:e}}function Pc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function b2(n,e){return Pc(n,e.toTimestamp())}function Ri(n){return Je(!!n,49232),Se.fromTimestamp((function(t){const s=Os(t);return new at(s.seconds,s.nanos)})(n))}function Tm(n,e){return Hh(n,e).canonicalString()}function Hh(n,e){const t=(function(r){return new it(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function yA(n){const e=it.fromString(n);return Je(AA(e),10190,{key:e.toString()}),e}function Fh(n,e){return Tm(n.databaseId,e.path)}function ph(n,e){const t=yA(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(TA(t))}function _A(n,e){return Tm(n.databaseId,e)}function V2(n){const e=yA(n);return e.length===4?it.emptyPath():TA(e)}function Yh(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TA(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ev(n,e,t){return{name:Fh(n,e),fields:t.value.mapValue.fields}}function x2(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ee(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(g,T){return g.useProto3Json?(Je(T===void 0||typeof T=="string",58123),$t.fromBase64String(T||"")):(Je(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$t.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&(function(g){const T=g.code===void 0?ee.UNKNOWN:hA(g.code);return new ce(T,g.message||"")})(c);t=new pA(s,r,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=ph(n,s.document.name),l=Ri(s.document.updateTime),c=s.document.createTime?Ri(s.document.createTime):Se.min(),p=new Ln({mapValue:{fields:s.document.fields}}),y=en.newFoundDocument(r,l,c,p),g=s.targetIds||[],T=s.removedTargetIds||[];t=new Tc(g,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=ph(n,s.document),l=s.readTime?Ri(s.readTime):Se.min(),c=en.newNoDocument(r,l),p=s.removedTargetIds||[];t=new Tc([],p,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=ph(n,s.document),l=s.removedTargetIds||[];t=new Tc([],l,r,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,c=new A2(r,l),p=s.targetId;t=new mA(p,c)}}return t}function P2(n,e){let t;if(e instanceof Ml)t={update:Ev(n,e.key,e.value)};else if(e instanceof gm)t={delete:Fh(n,e.key)};else if(e instanceof bo)t={update:Ev(n,e.key,e.data),updateMask:H2(e.fieldMask)};else{if(!(e instanceof T2))return Ee(16599,{Vt:e.type});t={verify:Fh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const p=c.transform;if(p instanceof Vc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Cl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Rl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof xc)return{fieldPath:c.field.canonicalString(),increment:p.Ae};throw Ee(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:b2(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(n,e.precondition)),t}function U2(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?Ri(r.updateTime):Ri(l);return c.isEqual(Se.min())&&(c=Ri(l)),new g2(c,r.transformResults||[])})(t,e)))):[]}function L2(n,e){return{documents:[_A(n,e.path)]}}function k2(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=_A(n,r);const l=(function(g){if(g.length!==0)return EA(Wn.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((T=>(function(C){return{field:wr(C.field),direction:B2(C.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=zh(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:r}}function q2(n){let e=V2(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){Je(s===1,65062);const T=t.from[0];T.allDescendants?r=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(E){const C=vA(E);return C instanceof Wn&&XE(C)?C.getFilters():[C]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((C=>(function(O){return new Sl(Mr(O.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(C)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let C;return C=typeof E=="object"?E.value:E,Yc(C)?null:C})(t.limit));let y=null;t.startAt&&(y=(function(E){const C=!!E.before,D=E.values||[];return new bc(D,C)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const C=!E.before,D=E.values||[];return new bc(D,C)})(t.endAt)),i2(e,r,c,l,p,"F",y,g)}function O2(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Mr(t.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Mr(t.unaryFilter.field);return bt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Mr(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Mr(t.unaryFilter.field);return bt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bt.create(Mr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wn.create(t.compositeFilter.filters.map((s=>vA(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function B2(n){return w2[n]}function G2(n){return M2[n]}function z2(n){return N2[n]}function wr(n){return{fieldPath:n.canonicalString()}}function Mr(n){return Xt.fromServerFormat(n.fieldPath)}function EA(n){return n instanceof bt?(function(t){if(t.op==="=="){if(lv(t.value))return{unaryFilter:{field:wr(t.field),op:"IS_NAN"}};if(av(t.value))return{unaryFilter:{field:wr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lv(t.value))return{unaryFilter:{field:wr(t.field),op:"IS_NOT_NAN"}};if(av(t.value))return{unaryFilter:{field:wr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(t.field),op:G2(t.op),value:t.value}}})(n):n instanceof Wn?(function(t){const s=t.getFilters().map((r=>EA(r)));return s.length===1?s[0]:{compositeFilter:{op:z2(t.op),filters:s}}})(n):Ee(54877,{filter:n})}function H2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function AA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,s,r,l=Se.min(),c=Se.min(),p=$t.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.yt=e}}function Y2(n){const e=q2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.Cn=new K2}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(qs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(qs.min())}updateCollectionGroup(e,t,s){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class K2{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Lt(it.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Lt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SA=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(SA,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zr(0)}static cr(){return new zr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="LruGarbageCollector",Q2=1048576;function Cv([n,e],[t,s]){const r=Pe(n,t);return r===0?Pe(e,s):r}class X2{constructor(e){this.Ir=e,this.buffer=new Lt(Cv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Cv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $2{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(Sv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$r(t)?fe(Sv,"Ignoring IndexedDB error during garbage collection: ",t):await Xr(t)}await this.Vr(3e5)}))}}class Z2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Fc.ce);const s=new X2(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Av)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Av):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,c,p,y,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),r=this.params.maximumSequenceNumbersToCollect):r=E,c=Date.now(),this.nthSequenceNumber(e,r)))).next((E=>(s=E,p=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(g=Date.now(),Rr()<=Oe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${r} in `+(p-c)+`ms
	Removed ${l} targets in `+(y-p)+`ms
	Removed ${E} documents in `+(g-y)+`ms
Total Duration: ${g-T}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:E}))))}}function W2(n,e){return new Z2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.changes=new Do((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?te.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&pl(s.mutation,r,Zn.empty(),at.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ue()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ue()){const r=Co();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let c=ll();return l.forEach(((p,y)=>{c=c.insert(p,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Co();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ue())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,p)=>{t.set(c,p)}))}))}computeViews(e,t,s,r){let l=$i();const c=ml(),p=(function(){return ml()})();return t.forEach(((y,g)=>{const T=s.get(g.key);r.has(g.key)&&(T===void 0||T.mutation instanceof bo)?l=l.insert(g.key,g):T!==void 0?(c.set(g.key,T.mutation.getFieldMask()),pl(T.mutation,g,T.mutation.getFieldMask(),at.now())):c.set(g.key,Zn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((g,T)=>c.set(g,T))),t.forEach(((g,T)=>p.set(g,new eb(T,c.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=ml();let r=new dt(((c,p)=>c-p)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const p of c)p.keys().forEach((y=>{const g=t.get(y);if(g===null)return;let T=s.get(y)||Zn.empty();T=p.applyToLocalView(g,T),s.set(y,T);const E=(r.get(p.batchId)||Ue()).add(y);r=r.insert(p.batchId,E)}))})).next((()=>{const c=[],p=r.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,T=y.value,E=oA();T.forEach((C=>{if(!l.has(C)){const D=fA(t.get(C),s.get(C));D!==null&&E.set(C,D),l=l.add(C)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return te.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):te.resolve(Co());let p=Tl,y=l;return c.next((g=>te.forEach(g,((T,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(T)?te.resolve():this.remoteDocumentCache.getEntry(e,T).next((C=>{y=y.insert(T,C)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,y,g,Ue()))).next((T=>({batchId:p,changes:sA(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let r=ll();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let c=ll();return this.indexManager.getCollectionParents(e,l).next((p=>te.forEach(p,(y=>{const g=(function(E,C){return new Zr(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,r).next((T=>{T.forEach(((E,C)=>{c=c.insert(E,C)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((c=>{l.forEach(((y,g)=>{const T=g.getKey();c.get(T)===null&&(c=c.insert(T,en.newInvalidDocument(T)))}));let p=ll();return c.forEach(((y,g)=>{const T=l.get(y);T!==void 0&&pl(T.mutation,g,Zn.empty(),at.now()),Qc(t,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Ri(r.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:Y2(r.bundledQuery),readTime:Ri(r.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(){this.overlays=new dt(_e.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Co();return te.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(e,t,s){const r=Co(),l=t.length+1,c=new _e(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&y.largestBatchId>s&&r.set(y.getKey(),y)}return te.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new dt(((g,T)=>g-T));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let T=l.get(g.largestBatchId);T===null&&(T=Co(),l=l.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const p=Co(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,T)=>p.set(g,T))),!(p.size()>=r)););return te.resolve(p)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new E2(t,s));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.Qr=new Lt(Bt.$r),this.Ur=new Lt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Bt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Bt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new it([])),s=new Bt(t,e),r=new Bt(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new it([])),s=new Bt(t,e),r=new Bt(t,e+1);let l=Ue();return this.Ur.forEachInRange([s,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Bt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Pe(e.Yr,t.Yr)}static Kr(e,t){return Pe(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(Bt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new v2(l,t,s,r);this.mutationQueue.push(c);for(const p of r)this.Zr=this.Zr.add(new Bt(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?cm:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bt(t,0),r=new Bt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(c=>{const p=this.Xr(c.Yr);l.push(p)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Lt(Pe);return t.forEach((r=>{const l=new Bt(r,0),c=new Bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(p=>{s=s.add(p.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;_e.isDocumentKey(l)||(l=l.child(""));const c=new Bt(new _e(l),0);let p=new Lt(Pe);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!s.isPrefixOf(g)&&(g.length===r&&(p=p.add(y.Yr)),!0)}),c),te.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(t.mutations,(r=>{const l=new Bt(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Bt(t,0),r=this.Zr.firstAfterOrEqual(s);return te.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.ri=e,this.docs=(function(){return new dt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return te.resolve(s?s.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let s=$i();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():en.newInvalidDocument(r))})),te.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=$i();const c=t.path,p=new _e(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:T}}=y.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||UD(PD(T),s)<=0||(r.has(T.key)||Qc(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,s,r){Ee(9500)}ii(e,t){return te.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new ab(this)}getSize(e){return te.resolve(this.size)}}class ab extends j2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.persistence=e,this.si=new Do((t=>hm(t)),mm),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new vm,this.targetCount=0,this.ai=zr.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new zr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((c,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),r++)})),te.waitFor(l).next((()=>r))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return te.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),te.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return te.resolve(s)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.ui={},this.overlays={},this.ci=new Fc(0),this.li=!1,this.li=!0,this.hi=new sb,this.referenceDelegate=e(this),this.Pi=new lb(this),this.indexManager=new J2,this.remoteDocumentCache=(function(r){return new rb(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new F2(t),this.Ii=new nb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ib,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new ob(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const r=new ub(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class ub extends kD{constructor(e){super(),this.currentSequenceNumber=e}}class Em{constructor(e){this.persistence=e,this.Ri=new vm,this.Vi=null}static mi(e){return new Em(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),te.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const r=_e.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Uc{constructor(e,t){this.persistence=e,this.pi=new Do((s=>BD(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=W2(this,t)}static mi(e,t){return new Uc(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?te.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((p=>{p||(s++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gc(e.data.value)),t}br(e,t,s){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return te.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=Ue(),r=Ue();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Am(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nN()?8:qD(eN())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new cb;return this.Ss(e,t,c).next((p=>{if(l.result=p,this.Vs)return this.bs(e,t,c,p.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Rr()<=Oe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Ir(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Rr()<=Oe.DEBUG&&fe("QueryEngine","Query:",Ir(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Rr()<=Oe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Ir(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(t))):te.resolve())}ys(e,t){if(dv(t))return te.resolve(null);let s=Si(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Gh(t,null,"F"),s=Si(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ue(...l);return this.ps.getDocuments(e,c).next((p=>this.indexManager.getMinOffset(e,s).next((y=>{const g=this.Ds(t,p);return this.Cs(t,g,c,y.readTime)?this.ys(e,Gh(t,null,"F")):this.vs(e,g,t,y)}))))})))))}ws(e,t,s,r){return dv(t)||r.isEqual(Se.min())?te.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,r)?te.resolve(null):(Rr()<=Oe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ir(t)),this.vs(e,c,t,xD(r,Tl)).next((p=>p)))}))}Ds(e,t){let s=new Lt(nA(e));return t.forEach(((r,l)=>{Qc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Rr()<=Oe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Ir(t)),this.ps.getDocumentsMatchingQuery(e,t,qs.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="LocalStore",db=3e8;class hb{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new dt(Pe),this.xs=new Do((l=>hm(l)),mm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function mb(n,e,t,s){return new hb(n,e,t,s)}async function RA(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],p=[];let y=Ue();for(const g of r){c.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}for(const g of l){p.push(g.batchId);for(const T of g.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(s,y).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:p})))}))}))}function pb(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,T){const E=g.batch,C=E.keys();let D=te.resolve();return C.forEach((O=>{D=D.next((()=>T.getEntry(y,O))).next((H=>{const J=g.docVersions.get(O);Je(J!==null,48541),H.version.compareTo(J)<0&&(E.applyToRemoteDocument(H,g),H.isValidDocument()&&(H.setReadTime(g.commitVersion),T.addEntry(H)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(y,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let y=Ue();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function IA(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function gb(n,e){const t=Re(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const p=[];e.targetChanges.forEach(((T,E)=>{const C=r.get(E);if(!C)return;p.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,E))));let D=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?D=D.withResumeToken($t.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(T.resumeToken,s)),r=r.insert(E,D),(function(H,J,ne){return H.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=db?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(C,D,T)&&p.push(t.Pi.updateTargetData(l,D))}));let y=$i(),g=Ue();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),p.push(yb(l,c,e.documentUpdates).next((T=>{y=T.ks,g=T.qs}))),!s.isEqual(Se.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));p.push(T)}return te.waitFor(p).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,g))).next((()=>y))})).then((l=>(t.Ms=r,l)))}function yb(n,e,t){let s=Ue(),r=Ue();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=$i();return t.forEach(((p,y)=>{const g=l.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(p)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(p,y.readTime),c=c.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),c=c.insert(p,y)):fe(Sm,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:c,qs:r}}))}function _b(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=cm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Tb(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,te.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new Vs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Jh(n,e,t){const s=Re(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!$r(c))throw c;fe(Sm,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Rv(n,e,t){const s=Re(n);let r=Se.min(),l=Ue();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,g,T){const E=Re(y),C=E.xs.get(T);return C!==void 0?te.resolve(E.Ms.get(C)):E.Pi.getTargetData(g,T)})(s,c,Si(e)).next((p=>{if(p)return r=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,p.targetId).next((y=>{l=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:Se.min(),t?l:Ue()))).next((p=>(vb(s,o2(e),p),{documents:p,Qs:l})))))}function vb(n,e,t){let s=n.Os.get(e)||Se.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Iv{constructor(){this.activeTargetIds=f2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Eb{constructor(){this.Mo=new Iv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Iv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="ConnectivityMonitor";class Mv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(wv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fc=null;function Kh(){return fc===null?fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():fc++,"0x"+fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="RestConnection",Sb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Nc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const c=Kh(),p=this.zo(e,t.toUriEncodedString());fe(gh,`Sending RPC '${e}' ${c}:`,p,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,r,l);const{host:g}=new URL(p),T=rm(g);return this.Jo(e,p,y,s,T).then((E=>(fe(gh,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw qr(gh,`RPC '${e}' ${c} failed with error: `,E,"url: ",p,"request:",s),E}))}Ho(e,t,s,r,l,c){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=Sb[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class Ib extends Cb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const c=Kh();return new Promise(((p,y)=>{const g=new ME;g.setWithCredentials(!0),g.listenOnce(NE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case pc.NO_ERROR:const E=g.getResponseJson();fe(Wt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),p(E);break;case pc.TIMEOUT:fe(Wt,`RPC '${e}' ${c} timed out`),y(new ce(ee.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:const C=g.getStatus();if(fe(Wt,`RPC '${e}' ${c} failed with status:`,C,"response text:",g.getResponseText()),C>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const O=D==null?void 0:D.error;if(O&&O.status&&O.message){const H=(function(ne){const ie=ne.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ie)>=0?ie:ee.UNKNOWN})(O.status);y(new ce(H,O.message))}else y(new ce(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ce(ee.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{fe(Wt,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(r);fe(Wt,`RPC '${e}' ${c} sending request:`,r),g.send(t,"POST",T,s,15)}))}T_(e,t,s){const r=Kh(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=VE(),p=bE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const T=l.join("");fe(Wt,`Creating RPC '${e}' stream ${r}: ${T}`,y);const E=c.createWebChannel(T,y);this.I_(E);let C=!1,D=!1;const O=new Rb({Yo:J=>{D?fe(Wt,`Not sending because RPC '${e}' stream ${r} is closed:`,J):(C||(fe(Wt,`Opening RPC '${e}' stream ${r} transport.`),E.open(),C=!0),fe(Wt,`RPC '${e}' stream ${r} sending:`,J),E.send(J))},Zo:()=>E.close()}),H=(J,ne,ie)=>{J.listen(ne,(Z=>{try{ie(Z)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return H(E,al.EventType.OPEN,(()=>{D||(fe(Wt,`RPC '${e}' stream ${r} transport opened.`),O.o_())})),H(E,al.EventType.CLOSE,(()=>{D||(D=!0,fe(Wt,`RPC '${e}' stream ${r} transport closed`),O.a_(),this.E_(E))})),H(E,al.EventType.ERROR,(J=>{D||(D=!0,qr(Wt,`RPC '${e}' stream ${r} transport errored. Name:`,J.name,"Message:",J.message),O.a_(new ce(ee.UNAVAILABLE,"The operation could not be completed")))})),H(E,al.EventType.MESSAGE,(J=>{var ne;if(!D){const ie=J.data[0];Je(!!ie,16349);const Z=ie,ae=(Z==null?void 0:Z.error)||((ne=Z[0])==null?void 0:ne.error);if(ae){fe(Wt,`RPC '${e}' stream ${r} received error:`,ae);const he=ae.status;let ue=(function(M){const x=Dt[M];if(x!==void 0)return hA(x)})(he),N=ae.message;ue===void 0&&(ue=ee.INTERNAL,N="Unknown error status: "+he+" with message "+ae.message),D=!0,O.a_(new ce(ue,N)),E.close()}else fe(Wt,`RPC '${e}' stream ${r} received:`,ie),O.u_(ie)}})),H(p,DE.STAT_EVENT,(J=>{J.stat===Ph.PROXY?fe(Wt,`RPC '${e}' stream ${r} detected buffering proxy`):J.stat===Ph.NOPROXY&&fe(Wt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n){return new D2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="PersistentStream";class MA{constructor(e,t,s,r,l,c,p,y){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Xi(t.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new ce(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(Nv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(Nv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wb extends MA{constructor(e,t,s,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=x2(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?Ri(c.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Yh(this.serializer),t.addTarget=(function(l,c){let p;const y=c.target;if(p=Oh(y)?{documents:L2(l,y)}:{query:k2(l,y).ft},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=gA(l,c.resumeToken);const g=zh(l,c.expectedCount);g!==null&&(p.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){p.readTime=Pc(l,c.snapshotVersion.toTimestamp());const g=zh(l,c.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const s=O2(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Yh(this.serializer),t.removeTarget=e,this.q_(t)}}class Mb extends MA{constructor(e,t,s,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=U2(e.writeResults,e.commitTime),s=Ri(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Yh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>P2(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{}class Db extends Nb{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Hh(t,s),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(ee.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Ho(e,Hh(t,s),r,c,p,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xi(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="RemoteStore";class Vb{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Vo(this)&&(fe(wo,"Restarting streams for network reachability change."),await(async function(y){const g=Re(y);g.Ea.add(4),await Dl(g),g.Ra.set("Unknown"),g.Ea.delete(4),await jc(g)})(this))}))})),this.Ra=new bb(s,r)}}async function jc(n){if(Vo(n))for(const e of n.da)await e(!0)}async function Dl(n){for(const e of n.da)await e(!1)}function NA(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),wm(t)?Im(t):Wr(t).O_()&&Rm(t,e))}function Cm(n,e){const t=Re(n),s=Wr(t);t.Ia.delete(e),s.O_()&&DA(t,e),t.Ia.size===0&&(s.O_()?s.L_():Vo(t)&&t.Ra.set("Unknown"))}function Rm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wr(n).Y_(e)}function DA(n,e){n.Va.Ue(e),Wr(n).Z_(e)}function Im(n){n.Va=new I2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wr(n).start(),n.Ra.ua()}function wm(n){return Vo(n)&&!Wr(n).x_()&&n.Ia.size>0}function Vo(n){return Re(n).Ea.size===0}function bA(n){n.Va=void 0}async function xb(n){n.Ra.set("Online")}async function Pb(n){n.Ia.forEach(((e,t)=>{Rm(n,e)}))}async function Ub(n,e){bA(n),wm(n)?(n.Ra.ha(e),Im(n)):n.Ra.set("Unknown")}async function Lb(n,e,t){if(n.Ra.set("Online"),e instanceof pA&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const p of l.targetIds)r.Ia.has(p)&&(await r.remoteSyncer.rejectListen(p,c),r.Ia.delete(p),r.Va.removeTarget(p))})(n,e)}catch(s){fe(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Lc(n,s)}else if(e instanceof Tc?n.Va.Ze(e):e instanceof mA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const s=await IA(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const p=l.Va.Tt(c);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const T=l.Ia.get(g);T&&l.Ia.set(g,T.withResumeToken(y.resumeToken,c))}})),p.targetMismatches.forEach(((y,g)=>{const T=l.Ia.get(y);if(!T)return;l.Ia.set(y,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),DA(l,y);const E=new Vs(T.target,y,g,T.sequenceNumber);Rm(l,E)})),l.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(s){fe(wo,"Failed to raise snapshot:",s),await Lc(n,s)}}async function Lc(n,e,t){if(!$r(e))throw e;n.Ea.add(1),await Dl(n),n.Ra.set("Offline"),t||(t=()=>IA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(wo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await jc(n)}))}function VA(n,e){return e().catch((t=>Lc(n,t,e)))}async function ef(n){const e=Re(n),t=zs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cm;for(;kb(e);)try{const r=await _b(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,qb(e,r)}catch(r){await Lc(e,r)}xA(e)&&PA(e)}function kb(n){return Vo(n)&&n.Ta.length<10}function qb(n,e){n.Ta.push(e);const t=zs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function xA(n){return Vo(n)&&!zs(n).x_()&&n.Ta.length>0}function PA(n){zs(n).start()}async function Ob(n){zs(n).ra()}async function Bb(n){const e=zs(n);for(const t of n.Ta)e.ea(t.mutations)}async function Gb(n,e,t){const s=n.Ta.shift(),r=ym.from(s,e,t);await VA(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await ef(n)}async function zb(n,e){e&&zs(n).X_&&await(async function(s,r){if((function(c){return S2(c)&&c!==ee.ABORTED})(r.code)){const l=s.Ta.shift();zs(s).B_(),await VA(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await ef(s)}})(n,e),xA(n)&&PA(n)}async function Dv(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),fe(wo,"RemoteStore received new credentials");const s=Vo(t);t.Ea.add(3),await Dl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jc(t)}async function Hb(n,e){const t=Re(n);e?(t.Ea.delete(2),await jc(t)):e||(t.Ea.add(2),await Dl(t),t.Ra.set("Unknown"))}function Wr(n){return n.ma||(n.ma=(function(t,s,r){const l=Re(t);return l.sa(),new wb(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:xb.bind(null,n),t_:Pb.bind(null,n),r_:Ub.bind(null,n),H_:Lb.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),wm(n)?Im(n):n.Ra.set("Unknown")):(await n.ma.stop(),bA(n))}))),n.ma}function zs(n){return n.fa||(n.fa=(function(t,s,r){const l=Re(t);return l.sa(),new Mb(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ob.bind(null,n),r_:zb.bind(null,n),ta:Bb.bind(null,n),na:Gb.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await ef(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(wo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const c=Date.now()+s,p=new Mm(e,t,c,r,l);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nm(n,e){if(Xi("AsyncQueue",`${e}: ${n}`),$r(n))return new ce(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{static emptySet(e){return new Pr(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=ll(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Pr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.ga=new dt(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Hr{constructor(e,t,s,r,l,c,p,y,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,r,l){const c=[];return t.forEach((p=>{c.push({type:0,doc:p})})),new Hr(e,t,Pr.emptySet(t),c,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Yb{constructor(){this.queries=Vv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Re(t),l=r.queries;r.queries=Vv(),l.forEach(((c,p)=>{for(const y of p.Sa)y.onError(s)}))})(this,new ce(ee.ABORTED,"Firestore shutting down"))}}function Vv(){return new Do((n=>tA(n)),Kc)}async function Jb(n,e){const t=Re(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new Fb,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const p=Nm(c,`Initialization of query '${Ir(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Dm(t)}async function Kb(n,e){const t=Re(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Qb(n,e){const t=Re(n);let s=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const p of c.Sa)p.Fa(r)&&(s=!0);c.wa=r}}s&&Dm(t)}function Xb(n,e,t){const s=Re(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function Dm(n){n.Ca.forEach((e=>{e.next()}))}var Qh,xv;(xv=Qh||(Qh={})).Ma="default",xv.Cache="cache";class $b{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Hr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Hr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.key=e}}class LA{constructor(e){this.key=e}}class Zb{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=nA(e),this.tu=new Pr(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new bv,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,p=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((T,E)=>{const C=r.get(T),D=Qc(this.query,E)?E:null,O=!!C&&this.mutatedKeys.has(C.key),H=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let J=!1;C&&D?C.data.isEqual(D.data)?O!==H&&(s.track({type:3,doc:D}),J=!0):this.su(C,D)||(s.track({type:2,doc:D}),J=!0,(y&&this.eu(D,y)>0||g&&this.eu(D,g)<0)&&(p=!0)):!C&&D?(s.track({type:0,doc:D}),J=!0):C&&!D&&(s.track({type:1,doc:C}),J=!0,(y||g)&&(p=!0)),J&&(D?(c=c.add(D),l=H?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{tu:c,iu:s,Cs:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,E)=>(function(D,O){const H=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:J})}};return H(D)-H(O)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(s),r=r??!1;const p=t&&!r?this._u():[],y=this.Xa.size===0&&this.current&&!r?1:0,g=y!==this.Za;return this.Za=y,c.length!==0||g?{snapshot:new Hr(this.query,e.tu,l,c,e.mutatedKeys,y===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new LA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new UA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Hr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bm="SyncEngine";class Wb{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class jb{constructor(e){this.key=e,this.hu=!1}}class eV{constructor(e,t,s,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Do((p=>tA(p)),Kc),this.Iu=new Map,this.Eu=new Set,this.du=new dt(_e.comparator),this.Au=new Map,this.Ru=new vm,this.Vu={},this.mu=new Map,this.fu=zr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tV(n,e,t=!0){const s=zA(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await kA(s,e,t,!0),r}async function nV(n,e){const t=zA(n);await kA(t,e,!0,!1)}async function kA(n,e,t,s){const r=await Tb(n.localStore,Si(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await iV(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&NA(n.remoteStore,r),p}async function iV(n,e,t,s,r){n.pu=(E,C,D)=>(async function(H,J,ne,ie){let Z=J.view.ru(ne);Z.Cs&&(Z=await Rv(H.localStore,J.query,!1).then((({documents:N})=>J.view.ru(N,Z))));const ae=ie&&ie.targetChanges.get(J.targetId),he=ie&&ie.targetMismatches.get(J.targetId)!=null,ue=J.view.applyChanges(Z,H.isPrimaryClient,ae,he);return Uv(H,J.targetId,ue.au),ue.snapshot})(n,E,C,D);const l=await Rv(n.localStore,e,!0),c=new Zb(e,l.Qs),p=c.ru(l.documents),y=Nl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),g=c.applyChanges(p,n.isPrimaryClient,y);Uv(n,t,g.au);const T=new Wb(e,t,c);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function sV(n,e,t){const s=Re(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((c=>!Kc(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Jh(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&Cm(s.remoteStore,r.targetId),Xh(s,r.targetId)})).catch(Xr)):(Xh(s,r.targetId),await Jh(s.localStore,r.targetId,!0))}async function oV(n,e){const t=Re(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Cm(t.remoteStore,s.targetId))}async function rV(n,e,t){const s=hV(n);try{const r=await(function(c,p){const y=Re(c),g=at.now(),T=p.reduce(((D,O)=>D.add(O.key)),Ue());let E,C;return y.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let O=$i(),H=Ue();return y.Ns.getEntries(D,T).next((J=>{O=J,O.forEach(((ne,ie)=>{ie.isValidDocument()||(H=H.add(ne))}))})).next((()=>y.localDocuments.getOverlayedDocuments(D,O))).next((J=>{E=J;const ne=[];for(const ie of p){const Z=_2(ie,E.get(ie.key).overlayedDocument);Z!=null&&ne.push(new bo(ie.key,Z,JE(Z.value.mapValue),Ci.exists(!0)))}return y.mutationQueue.addMutationBatch(D,g,ne,p)})).next((J=>{C=J;const ne=J.applyToLocalDocumentSet(E,H);return y.documentOverlayCache.saveOverlays(D,J.batchId,ne)}))})).then((()=>({batchId:C.batchId,changes:sA(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,p,y){let g=c.Vu[c.currentUser.toKey()];g||(g=new dt(Pe)),g=g.insert(p,y),c.Vu[c.currentUser.toKey()]=g})(s,r.batchId,t),await bl(s,r.changes),await ef(s.remoteStore)}catch(r){const l=Nm(r,"Failed to persist write");t.reject(l)}}async function qA(n,e){const t=Re(n);try{const s=await gb(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(Je(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Je(c.hu,14607):r.removedDocuments.size>0&&(Je(c.hu,42227),c.hu=!1))})),await bl(t,s,e)}catch(s){await Xr(s)}}function Pv(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,c)=>{const p=c.view.va(e);p.snapshot&&r.push(p.snapshot)})),(function(c,p){const y=Re(c);y.onlineState=p;let g=!1;y.queries.forEach(((T,E)=>{for(const C of E.Sa)C.va(p)&&(g=!0)})),g&&Dm(y)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function aV(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let c=new dt(_e.comparator);c=c.insert(l,en.newNoDocument(l,Se.min()));const p=Ue().add(l),y=new Zc(Se.min(),new Map,new dt(Pe),c,p);await qA(s,y),s.du=s.du.remove(l),s.Au.delete(e),Vm(s)}else await Jh(s.localStore,e,!1).then((()=>Xh(s,e,t))).catch(Xr)}async function lV(n,e){const t=Re(n),s=e.batch.batchId;try{const r=await pb(t.localStore,e);BA(t,s,null),OA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await bl(t,r)}catch(r){await Xr(r)}}async function uV(n,e,t){const s=Re(n);try{const r=await(function(c,p){const y=Re(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let T;return y.mutationQueue.lookupMutationBatch(g,p).next((E=>(Je(E!==null,37113),T=E.keys(),y.mutationQueue.removeMutationBatch(g,E)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,T,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T))).next((()=>y.localDocuments.getDocuments(g,T)))}))})(s.localStore,e);BA(s,e,t),OA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await bl(s,r)}catch(r){await Xr(r)}}function OA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function BA(n,e,t){const s=Re(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Xh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||GA(n,s)}))}function GA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Cm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Vm(n))}function Uv(n,e,t){for(const s of t)s instanceof UA?(n.Ru.addReference(s.key,e),cV(n,s)):s instanceof LA?(fe(bm,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||GA(n,s.key)):Ee(19791,{wu:s})}function cV(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(fe(bm,"New document in limbo: "+t),n.Eu.add(s),Vm(n))}function Vm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(it.fromString(e)),s=n.fu.next();n.Au.set(s,new jb(t)),n.du=n.du.insert(t,s),NA(n.remoteStore,new Vs(Si(jE(t.path)),s,"TargetPurposeLimboResolution",Fc.ce))}}async function bl(n,e,t){const s=Re(n),r=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,y)=>{c.push(s.pu(y,e,t).then((g=>{var T;if((g||t)&&s.isPrimaryClient){const E=g?!g.fromCache:(T=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(g){r.push(g);const E=Am.As(y.targetId,g);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(y,g){const T=Re(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(g,(C=>te.forEach(C.Es,(D=>T.persistence.referenceDelegate.addReference(E,C.targetId,D))).next((()=>te.forEach(C.ds,(D=>T.persistence.referenceDelegate.removeReference(E,C.targetId,D)))))))))}catch(E){if(!$r(E))throw E;fe(Sm,"Failed to update sequence numbers: "+E)}for(const E of g){const C=E.targetId;if(!E.fromCache){const D=T.Ms.get(C),O=D.snapshotVersion,H=D.withLastLimboFreeSnapshotVersion(O);T.Ms=T.Ms.insert(C,H)}}})(s.localStore,l))}async function fV(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){fe(bm,"User change. New user:",e.toKey());const s=await RA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((p=>{p.forEach((y=>{y.reject(new ce(ee.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await bl(t,s.Ls)}}function dV(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Ue().add(s.key);{let r=Ue();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const p=t.Tu.get(c);r=r.unionWith(p.view.nu)}return r}}function zA(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aV.bind(null,e),e.Pu.H_=Qb.bind(null,e.eventManager),e.Pu.yu=Xb.bind(null,e.eventManager),e}function hV(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uV.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mb(this.persistence,new fb,e.initialUser,this.serializer)}Cu(e){return new CA(Em.mi,this.serializer)}Du(e){return new Eb}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class mV extends kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof Uc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new $2(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new CA((s=>Uc.mi(s,t)),this.serializer)}}class $h{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Pv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=fV.bind(null,this.syncEngine),await Hb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Yb})()}createDatastore(e){const t=Wc(e.databaseInfo.databaseId),s=(function(l){return new Ib(l)})(e.databaseInfo);return(function(l,c,p,y){return new Db(l,c,p,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,c,p){return new Vb(s,r,l,c,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Pv(this.syncEngine,t,0)),(function(){return Mv.v()?new Mv:new Ab})())}createSyncEngine(e,t){return(function(r,l,c,p,y,g,T){const E=new eV(r,l,c,p,y,g);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Re(r);fe(wo,"RemoteStore shutting down."),l.Ea.add(5),await Dl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}$h.provider={build:()=>new $h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="FirestoreClient";class gV{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=jt.UNAUTHENTICATED,this.clientId=um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{fe(Hs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(fe(Hs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Nm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function _h(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Hs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await RA(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Lv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await yV(n);fe(Hs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Dv(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>Dv(e.remoteStore,r))),n._onlineComponents=e}async function yV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Hs,"Using user provided OfflineComponentProvider");try{await _h(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ee.FAILED_PRECONDITION||r.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;qr("Error using user provided cache. Falling back to memory cache: "+t),await _h(n,new kc)}}else fe(Hs,"Using default OfflineComponentProvider"),await _h(n,new mV(void 0));return n._offlineComponents}async function HA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Hs,"Using user provided OnlineComponentProvider"),await Lv(n,n._uninitializedComponentsProvider._online)):(fe(Hs,"Using default OnlineComponentProvider"),await Lv(n,new $h))),n._onlineComponents}function _V(n){return HA(n).then((e=>e.syncEngine))}async function TV(n){const e=await HA(n),t=e.eventManager;return t.onListen=tV.bind(null,e.syncEngine),t.onUnlisten=sV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oV.bind(null,e.syncEngine),t}function vV(n,e,t={}){const s=new Ls;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,p,y,g){const T=new pV({next:C=>{T.Nu(),c.enqueueAndForget((()=>Kb(l,E))),C.fromCache&&y.source==="server"?g.reject(new ce(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(C)},error:C=>g.reject(C)}),E=new $b(p,T,{includeMetadataChanges:!0,qa:!0});return Jb(l,E)})(await TV(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firestore.googleapis.com",qv=!0;class Ov{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YA,this.ssl=qv}else this.host=e.host,this.ssl=e.ssl??qv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q2)throw new ce(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ov({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ov(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new AD;switch(s.type){case"firstParty":return new ID(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=kv.get(t);s&&(fe("ComponentProvider","Removing Datastore"),kv.delete(t),s.terminate())})(this),Promise.resolve()}}function EV(n,e,t,s={}){var g;n=_l(n,tf);const r=rm(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},p=`${e}:${t}`;r&&(XM(`https://${p}`),jM("Firestore",!0)),l.host!==YA&&l.host!==p&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:p,ssl:r,emulatorOptions:s};if(!Rc(y,c)&&(n._setSettings(y),s.mockUserToken)){let T,E;if(typeof s.mockUserToken=="string")T=s.mockUserToken,E=jt.MOCK_USER;else{T=$M(s.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ce(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new jt(C)}n._authCredentials=new SD(new PE(T,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xo(this.firestore,e,this._query)}}class Gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(wl(t,Gt._jsonSchema))return new Gt(e,s||null,new _e(it.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:Vt("string",Gt._jsonSchemaVersion),referencePath:Vt("string")};class ks extends xo{constructor(e,t,s){super(e,t,jE(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new _e(e))}withConverter(e){return new ks(this.firestore,e,this._path)}}function AV(n,e,...t){if(n=kr(n),UE("collection","path",e),n instanceof tf){const s=it.fromString(e,...t);return WT(s),new ks(n,null,s)}{if(!(n instanceof Gt||n instanceof ks))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(it.fromString(e,...t));return WT(s),new ks(n.firestore,null,s)}}function JA(n,e,...t){if(n=kr(n),arguments.length===1&&(e=um.newId()),UE("doc","path",e),n instanceof tf){const s=it.fromString(e,...t);return ZT(s),new Gt(n,null,new _e(s))}{if(!(n instanceof Gt||n instanceof ks))throw new ce(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(it.fromString(e,...t));return ZT(s),new Gt(n.firestore,n instanceof ks?n.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="AsyncQueue";class Gv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wA(this,"async_queue_retry"),this._c=()=>{const s=yh();s&&fe(Bv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=yh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ls;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$r(e))throw e;fe(Bv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Xi("INTERNAL UNHANDLED ERROR: ",zv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Mm.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ee(47125,{Pc:zv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function zv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class nf extends tf{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new Gv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function SV(n,e){const t=typeof n=="object"?n:uD(),s=typeof n=="string"?n:Nc,r=sD(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=KM("firestore");l&&EV(r,...l)}return r}function KA(n){if(n._terminated)throw new ce(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CV(n),n._firestoreClient}function CV(n){var s,r,l;const e=n._freezeSettings(),t=(function(p,y,g,T){return new HD(p,y,g,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,FA(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new gV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn($t.fromBase64String(e))}catch(t){throw new ce(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wl(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:Vt("string",kn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(e){if(wl(e,Ii._jsonSchema))return new Ii(e.latitude,e.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:Vt("string",Ii._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wl(e,wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wi(e.vectorValues);throw new ce(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wi._jsonSchemaVersion="firestore/vectorValue/1.0",wi._jsonSchema={type:Vt("string",wi._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^__.*__$/;class IV{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ml(e,this.data,t,this.fieldTransforms)}}function XA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:n})}}class Pm{constructor(e,t,s,r,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(XA(this.Ac)&&RV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wV{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Wc(e)}Cc(e,t,s,r=!1){return new Pm({Ac:e,methodName:t,Dc:s,path:Xt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $A(n){const e=n._freezeSettings(),t=Wc(n._databaseId);return new wV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MV(n,e,t,s,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);jA("Data must be an object, but it was:",c,s);const p=ZA(s,c);let y,g;if(l.merge)y=new Zn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const E of l.mergeFields){const C=DV(e,E,t);if(!c.contains(C))throw new ce(ee.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);VV(T,C)||T.push(C)}y=new Zn(T),g=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,g=c.fieldTransforms;return new IV(new Ln(p),y,g)}function NV(n,e,t,s=!1){return Um(t,n.Cc(s?4:3,e))}function Um(n,e){if(WA(n=kr(n)))return jA("Unsupported field value:",e,n),ZA(n,e);if(n instanceof QA)return(function(s,r){if(!XA(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let c=0;for(const p of s){let y=Um(p,r.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=kr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return d2(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=at.fromDate(s);return{timestampValue:Pc(r.serializer,l)}}if(s instanceof at){const l=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Pc(r.serializer,l)}}if(s instanceof Ii)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof kn)return{bytesValue:gA(r.serializer,s._byteString)};if(s instanceof Gt){const l=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tm(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof wi)return(function(c,p){return{mapValue:{fields:{[FE]:{stringValue:YE},[Dc]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return pm(p.serializer,g)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Hc(s)}`)})(n,e)}function ZA(n,e){const t={};return qE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):No(n,((s,r)=>{const l=Um(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function WA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof Ii||n instanceof kn||n instanceof Gt||n instanceof QA||n instanceof wi)}function jA(n,e,t){if(!WA(t)||!LE(t)){const s=Hc(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function DV(n,e,t){if((e=kr(e))instanceof xm)return e._internalPath;if(typeof e=="string")return e0(n,e);throw qc("Field path arguments must be of type string or ",n,!1,void 0,t)}const bV=new RegExp("[~\\*/\\[\\]]");function e0(n,e,t){if(e.search(bV)>=0)throw qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xm(...e.split("."))._internalPath}catch{throw qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qc(n,e,t,s,r){const l=s&&!s.isEmpty(),c=r!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${s}`),c&&(y+=` in document ${r}`),y+=")"),new ce(ee.INVALID_ARGUMENT,p+n+y)}function VV(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xV extends t0{data(){return super.data()}}function Lm(n,e){return typeof e=="string"?e0(n,e):e instanceof xm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class km{}class n0 extends km{}function i0(n,e,...t){let s=[];e instanceof km&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((y=>y instanceof Om)).length,p=l.filter((y=>y instanceof qm)).length;if(c>1||c>0&&p>0)throw new ce(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class qm extends n0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new qm(e,t,s)}_apply(e){const t=this._parse(e);return o0(e._query,t),new xo(e.firestore,e.converter,Bh(e._query,t))}_parse(e){const t=$A(e.firestore);return(function(l,c,p,y,g,T,E){let C;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Fv(E,T);const O=[];for(const H of E)O.push(Hv(y,l,H));C={arrayValue:{values:O}}}else C=Hv(y,l,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Fv(E,T),C=NV(p,c,E,T==="in"||T==="not-in");return bt.create(g,T,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Om extends km{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Om(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const p=l.getFlattenedFilters();for(const y of p)o0(c,y),c=Bh(c,y)})(e._query,t),new xo(e.firestore,e.converter,Bh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bm extends n0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bm(e,t)}_apply(e){const t=(function(r,l,c){if(r.startAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ce(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sl(l,c)})(e._query,this._field,this._direction);return new xo(e.firestore,e.converter,(function(r,l){const c=r.explicitOrderBy.concat([l]);return new Zr(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function s0(n,e="asc"){const t=e,s=Lm("orderBy",n);return Bm._create(s,t)}function Hv(n,e,t){if(typeof(t=kr(t))=="string"){if(t==="")throw new ce(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eA(e)&&t.indexOf("/")!==-1)throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(it.fromString(t));if(!_e.isDocumentKey(s))throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return rv(n,new _e(s))}if(t instanceof Gt)return rv(n,t._key);throw new ce(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hc(t)}.`)}function Fv(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o0(n,e){const t=(function(r,l){for(const c of r)for(const p of c.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class UV{convertValue(e,t="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return No(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[Dc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>vt(c.doubleValue)));return new wi(t)}convertGeoPoint(e){return new Ii(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Jc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){const t=Os(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=it.fromString(e);Je(AA(s),9688,{name:e});const r=new El(s.get(1),s.get(3)),l=new _e(s.popFirst(5));return r.isEqual(t)||Xi(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ur extends t0{constructor(e,t,s,r,l,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Lm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ur._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:Vt("string",Ur._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class vc extends Ur{data(e={}){return super.data(e)}}class Lr{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dc(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new vc(this._firestore,this._userDataWriter,s.key,s,new dc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((p=>{const y=new vc(r._firestore,r._userDataWriter,p.doc.key,p.doc,new dc(r._snapshot.mutatedKeys.has(p.doc.key),r._snapshot.fromCache),r.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const y=new vc(r._firestore,r._userDataWriter,p.doc.key,p.doc,new dc(r._snapshot.mutatedKeys.has(p.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,T=-1;return p.type!==0&&(g=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),p.type!==1&&(c=c.add(p.doc),T=c.indexOf(p.doc.key)),{type:kV(p.type),doc:y,oldIndex:g,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=um.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}Lr._jsonSchemaVersion="firestore/querySnapshot/1.0",Lr._jsonSchema={type:Vt("string",Lr._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class qV extends UV{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function r0(n){n=_l(n,xo);const e=_l(n.firestore,nf),t=KA(e),s=new qV(e);return PV(n._query),vV(t,n._query).then((r=>new Lr(e,s,n,r)))}function OV(n){return a0(_l(n.firestore,nf),[new gm(n._key,Ci.none())])}function BV(n,e){const t=_l(n.firestore,nf),s=JA(n),r=LV(n.converter,e);return a0(t,[MV($A(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Ci.exists(!1))]).then((()=>s))}function a0(n,e){return(function(s,r){const l=new Ls;return s.asyncQueue.enqueueAndForget((async()=>rV(await _V(s),r,l))),l.promise})(KA(n),e)}(function(e,t=!0){(function(r){Qr=r})(lD),wc(new gl("firestore",((s,{instanceIdentifier:r,options:l})=>{const c=s.getProvider("app").getImmediate(),p=new nf(new CD(s.getProvider("auth-internal")),new wD(c,s.getProvider("app-check-internal")),(function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(g.options.projectId,T)})(c,r),c);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),xr(KT,QT,e),xr(KT,QT,"esm2020")})();var Cr=var Cr = {
  apiKey: "AIzaSyD0yavRTchwhwA97F6lr_9BYkLoXMksLSw",
  authDomain: "help-bot-55e76.firebaseapp.com",
  projectId: "help-bot-55e76",
  storageBucket: "help-bot-55e76.firebasestorage.app",
  messagingSenderId: "360675539401",
  appId: "1:360675539401:web:12fa60fc2e4e8ac7a0d018"
};const GV=()=>"AIzaSyCQjq9iI6AKP5VYaJ-iQOkQlWGQgh5lbmI",l0=()=>{const n={apiKey:Cr.FIREBASE_API_KEY,authDomain:Cr.FIREBASE_AUTH_DOMAIN,projectId:Cr.FIREBASE_PROJECT_ID,storageBucket:Cr.FIREBASE_STORAGE_BUCKET,messagingSenderId:Cr.FIREBASE_MESSAGING_SENDER_ID,appId:Cr.FIREBASE_APP_ID};return Object.values(n).some(e=>!e)?null:n},zV=()=>!!l0();let Th=null,Zh=null;const HV=()=>{if(Th)return;const n=l0();if(!n)throw new Error("Firebase config is not set. Please check your environment variables.");Th=CE(n),Zh=SV(Th)},u0=()=>(Zh||HV(),Zh),Gm=()=>AV(u0(),"knowledgeBase"),FV=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=t,s.readAsText(n)}),YV=async n=>{const e=Gm();for(const t of n){const s=await FV(t);await BV(e,{fileName:t.name,content:s,uploadedAt:new Date})}},JV=async()=>{const n=Gm(),e=i0(n,s0("fileName")),t=await r0(e);return t.empty?null:t.docs.map(r=>{const l=r.data();return`--- START OF FILE: ${l.fileName} ---

${l.content}

--- END OF FILE: ${l.fileName} ---`}).join(`

`)},KV=async()=>{const n=Gm(),e=i0(n,s0("fileName"));return(await r0(e)).docs.map(s=>{const r=s.data();return{id:s.id,fileName:r.fileName}})},QV=async n=>{const e=JA(u0(),"knowledgeBase",n);await OV(e)};let hc=null;const XV=()=>{if(hc)return hc;const n=GV();return hc=new LM({apiKey:n}),hc},$V=async n=>{try{const e=await JV();if(!e)return"죄송합니다, 아직 지식 베이스가 준비되지 않았어요. 관리자가 관련 정보를 업로드해야 합니다.";const t="gemini-2.5-flash",s=XV(),r=`당신은 '생활백서봇'이며, 사용자를 돕는 것을 좋아하는 친절한 안내원입니다. 당신의 성격은 밝고, 예의 바르며, 언제나 기꺼이 돕고자 합니다.

**가장 중요한 목표:** 사용자의 질문에 대해 주어진 "지식 베이스" 내용만을 사용하여 답변해야 합니다.

**답변 규칙:**

1.  **어조:** 항상 친구에게 말하듯 친절하고, 대화하며, 존중하는 어조를 사용하세요. '해요체'를 사용해주세요.
2.  **출처 표기:** 답변을 할 때, 어떤 지식 베이스 문서에서 정보를 찾았는지 반드시 출처를 밝혀야 합니다. 지식 베이스는 \`--- START OF FILE: [파일명] ---\` 형식으로 구분되어 있습니다. 파일명과, 가능하다면 파일 내 관련 섹션 제목(#, ## 등으로 표시된 제목)을 함께 언급해야 합니다.
    *   **출처 형식:** 답변의 마지막에 \`(출처: [파일명], [섹션 제목] 섹션)\` 과 같은 형식으로 추가하세요.
    *   **예시:** "네, 저희 상담 가능 시간은 평일 오전 9시부터 오후 6시까지입니다. (출처: sample-knowledge.md, 기본 정보 섹션)"
3.  **정보 제한:** 반드시 "지식 베이스"에 있는 정보만 사용하세요. 절대로 외부 지식을 사용하거나 답변을 지어내면 안 됩니다.
4.  **모르는 질문:** 사용자의 질문에 대한 내용이 지식 베이스에 없다면, 반드시 "죄송하지만, 그 내용에 대해서는 제가 아는 정보가 없네요. 다른 질문이 있으시면 언제든지 말씀해주세요!" 와 같이 정중하게 답변해야 합니다. 절대로 추측해서 답하지 마세요.
5.  **명료함:** 명확하고 간결하게 답변해주세요.`,l=`
---
지식 베이스:
${e}
---
사용자 질문: "${n}"`;return(await s.models.generateContent({model:t,contents:l,config:{systemInstruction:r,temperature:.2,topP:.8,topK:10}})).text}catch(e){return console.error("Error generating content with Gemini:",e),"죄송합니다. 답변을 생성하는 중 오류가 발생했어요. 잠시 후 다시 시도해주세요."}},ZV=()=>{const[n,e]=ft.useState([{id:"init",text:"안녕하세요. 궁금한 점은 뭐든 말씀해주세요.",sender:"bot"}]),[t,s]=ft.useState(""),[r,l]=ft.useState(!1),c=y=>{s(y.target.value)},p=ft.useCallback(async y=>{if(y.preventDefault(),!t.trim())return;const g={id:Date.now().toString(),text:t,sender:"user"};e(T=>[...T,g]),s(""),l(!0);try{const T=await $V(t),E={id:(Date.now()+1).toString(),text:T,sender:"bot"};e(C=>[...C,E])}catch(T){console.error("Error getting response from Gemini:",T);const E={id:(Date.now()+1).toString(),text:"죄송합니다. 답변을 생성하는 중 오류가 발생했어요. 잠시 후 다시 시도해주세요.",sender:"bot"};e(C=>[...C,E])}finally{l(!1)}},[t]);return{messages:n,userInput:t,isLoading:r,handleInputChange:c,handleSubmit:p}},WV=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),jV=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),ex=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:se.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),tx=()=>se.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),nx=()=>se.jsx("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:se.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4 4-4-4h3v-3h2v3z"})}),ix=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),sx=()=>{const{messages:n,userInput:e,isLoading:t,handleInputChange:s,handleSubmit:r}=ZV(),l=ft.useRef(null),c=()=>{var p;(p=l.current)==null||p.scrollIntoView({behavior:"smooth"})};return ft.useEffect(()=>{c()},[n,t]),se.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[se.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[n.map(p=>se.jsx("div",{className:`flex ${p.sender==="user"?"justify-end":"justify-start"}`,children:se.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl ${p.sender==="user"?"bg-primary text-black rounded-br-none":"bg-gray-700 text-white rounded-bl-none"}`,children:se.jsx("p",{className:"text-sm break-words",children:p.text})})},p.id)),t&&se.jsx("div",{className:"flex justify-start",children:se.jsx("div",{className:"max-w-[80%] p-3 rounded-2xl text-white bg-gray-700 rounded-bl-none",children:se.jsxs("div",{className:"flex items-center space-x-2",children:[se.jsx("span",{className:"h-2 w-2 bg-white rounded-full animate-bounce [animation-delay:-0.3s]"}),se.jsx("span",{className:"h-2 w-2 bg-white rounded-full animate-bounce [animation-delay:-0.15s]"}),se.jsx("span",{className:"h-2 w-2 bg-white rounded-full animate-bounce"})]})})}),se.jsx("div",{ref:l})]}),se.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:se.jsxs("form",{onSubmit:r,className:"flex items-center space-x-2",children:[se.jsx("input",{type:"text",value:e,onChange:s,placeholder:"Ask a question...",className:"flex-1 w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary transition",disabled:t}),se.jsx("button",{type:"submit",disabled:t||e.trim()==="",className:"bg-primary text-black p-3 rounded-full hover:bg-primary-dark disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Send message",children:se.jsx(ex,{})})]})})]})},vh=()=>se.jsx("div",{className:"inline-block h-5 w-5 animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:se.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})}),ox=({onAuthSuccess:n})=>{const[e,t]=ft.useState(""),[s,r]=ft.useState(!1),[l,c]=ft.useState(""),[p,y]=ft.useState([]),[g,T]=ft.useState(!1),[E,C]=ft.useState(""),[D,O]=ft.useState([]),[H,J]=ft.useState(!0),[ne,ie]=ft.useState(null),Z=ft.useCallback(async()=>{J(!0);try{const w=await KV();O(w)}catch(w){console.error("Failed to fetch knowledge files:",w),C("기존 파일을 불러오지 못했습니다.")}finally{J(!1)}},[]);ft.useEffect(()=>{s&&Z()},[s,Z]);const ae=w=>{w.preventDefault(),e==="adminarena"?(r(!0),c("")):c("비밀번호가 올바르지 않습니다.")},he=w=>{if(w.target.files){const M=Array.from(w.target.files),x=M.filter(P=>P.type==="text/markdown"||P.name.endsWith(".md"));x.length!==M.length?C("마크다운(.md)이 아닌 파일은 제외되었습니다."):C(""),y(x)}},ue=ft.useCallback(async()=>{if(p.length===0){C("먼저 파일을 선택해주세요.");return}T(!0),C(`파일 ${p.length}개를 업로드 중입니다...`);try{await YV(p),C("지식 베이스가 성공적으로 업데이트되었습니다!"),y([]),await Z()}catch(w){console.error("Upload failed:",w),C("업로드에 실패했습니다. 콘솔을 확인해주세요.")}finally{T(!1)}},[p,Z]),N=ft.useCallback(async w=>{if(window.confirm(`'${w.fileName}' 파일을 정말 삭제하시겠습니까?`)){ie(w.id);try{await QV(w.id),C(`'${w.fileName}' 파일이 삭제되었습니다.`),O(M=>M.filter(x=>x.id!==w.id))}catch(M){console.error("Delete failed:",M),C(`'${w.fileName}' 파일 삭제에 실패했습니다.`)}finally{ie(null)}}},[]);return s?se.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[se.jsxs("div",{className:"p-4 space-y-4",children:[se.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"지식 베이스 업데이트"}),se.jsx("div",{children:se.jsxs("label",{htmlFor:"file-upload",className:"w-full flex flex-col items-center px-4 py-6 bg-white text-primary-dark rounded-lg shadow-md tracking-wide uppercase border border-primary cursor-pointer hover:bg-primary hover:text-black",children:[se.jsx(nx,{}),se.jsx("span",{className:"mt-2 text-base leading-normal",children:p.length>0?`${p.length}개 파일 선택됨`:".md 파일 선택"}),se.jsx("input",{id:"file-upload",type:"file",accept:".md,text/markdown",className:"hidden",onChange:he,multiple:!0})]})}),se.jsx("button",{onClick:ue,disabled:p.length===0||g,className:"w-full bg-primary text-black font-bold py-2 px-4 rounded-lg hover:bg-primary-dark transition duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:g?se.jsx(vh,{}):`파일 ${p.length}개 업로드`}),E&&se.jsx("p",{className:"text-gray-600 text-sm text-center",children:E})]}),se.jsxs("div",{className:"flex-1 p-4 border-t border-gray-200 overflow-y-auto",children:[se.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"업로드된 파일"}),H?se.jsx("div",{className:"flex justify-center",children:se.jsx(vh,{})}):D.length>0?se.jsx("ul",{className:"space-y-2",children:D.map(w=>se.jsxs("li",{className:"flex items-center justify-between bg-white p-2 rounded-lg shadow-sm",children:[se.jsx("span",{className:"text-gray-800 truncate pr-2",children:w.fileName}),se.jsx("button",{onClick:()=>N(w),disabled:ne===w.id,className:"text-red-500 hover:text-red-700 disabled:text-gray-400 p-1 rounded-full",children:ne===w.id?se.jsx(vh,{}):se.jsx(ix,{})})]},w.id))}):se.jsx("p",{className:"text-gray-500 text-center",children:"업로드된 지식 파일이 없습니다."})]})]}):se.jsx("div",{className:"p-6 h-full flex flex-col items-center justify-center bg-gray-50",children:se.jsxs("form",{onSubmit:ae,className:"w-full max-w-sm",children:[se.jsx("h3",{className:"text-xl font-semibold mb-4 text-center text-gray-800",children:"관리자 로그인"}),se.jsx("p",{className:"text-center text-gray-500 mb-6",children:"지식 베이스를 관리하려면 비밀번호를 입력하세요."}),se.jsx("div",{className:"mb-4",children:se.jsx("input",{type:"password",value:e,onChange:w=>t(w.target.value),placeholder:"비밀번호",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})}),se.jsx("button",{type:"submit",className:"w-full bg-primary text-black font-bold py-2 px-4 rounded-lg hover:bg-primary-dark transition duration-300",children:"로그인"}),l&&se.jsx("p",{className:"text-red-500 text-sm mt-4 text-center",children:l})]})})},rx=()=>{const[n,e]=ft.useState(!1),[t,s]=ft.useState("chat"),r=()=>{e(!n),n&&s("chat")};ft.useEffect(()=>{const p=y=>{y.key==="Escape"&&(e(!1),s("chat"))};return n&&window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}},[n]);const l=t==="chat"?"생활백서봇":"관리자 페이지",c=n?"animate-slide-in-up":"animate-slide-out-down";return se.jsxs(se.Fragment,{children:[se.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:se.jsx("button",{onClick:r,className:`bg-primary text-black rounded-full p-4 shadow-lg hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 transition-transform transform hover:scale-110 ${n?"opacity-0 scale-0":"opacity-100 scale-100"}`,style:{animationFillMode:"forwards"},"aria-label":n?"Close chat":"Open chat",children:se.jsx(WV,{})})}),n&&se.jsxs("div",{className:`fixed bottom-20 right-5 z-40 w-[90vw] max-w-md h-[70vh] max-h-[600px] flex flex-col bg-white rounded-2xl shadow-2xl border border-gray-200 ${c}`,children:[se.jsxs("header",{className:"flex items-center justify-between p-4 bg-primary text-black rounded-t-2xl shadow-md",children:[se.jsx("h2",{className:"text-lg font-semibold",children:l}),se.jsxs("div",{className:"flex items-center space-x-2",children:[se.jsx("button",{onClick:()=>s(t==="chat"?"adminLogin":"chat"),className:"p-1 rounded-full hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Toggle Admin Panel",title:"Admin Panel",children:se.jsx(tx,{})}),se.jsx("button",{onClick:r,className:"p-1 rounded-full hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Close",children:se.jsx(jV,{})})]})]}),se.jsxs("div",{className:"flex-1 min-h-0",children:[t==="chat"&&se.jsx(sx,{}),t==="adminLogin"&&se.jsx(ox,{onAuthSuccess:()=>s("chat")})]})]})]})};function ax(){return zV()?se.jsxs("div",{className:"font-sans",children:[se.jsx("div",{className:"w-full h-screen bg-gray-100 flex items-center justify-center text-gray-700",children:se.jsxs("div",{className:"text-center",children:[se.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Your Website Content"}),se.jsx("p",{className:"text-lg",children:"The AI Chatbot will appear in the bottom right corner."}),se.jsx("p",{className:"text-sm mt-4 text-gray-500",children:"(테스트 설정이 완료되었습니다. 챗봇과 대화해보세요!)"})]})}),se.jsx(rx,{})]}):se.jsx("div",{className:"w-full h-screen bg-red-50 flex items-center justify-center font-sans p-4",children:se.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-xl shadow-lg border border-red-200",children:[se.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-red-800 mb-2",children:"Configuration Error"}),se.jsx("p",{className:"text-gray-600 mb-6",children:"Application is not configured correctly. Please make sure you have set up your environment variables."})]})})}const c0=document.getElementById("chatbot-root");if(!c0)throw new Error("Could not find root element to mount to");const lx=WS.createRoot(c0);lx.render(se.jsx(FS.StrictMode,{children:se.jsx(ax,{})}));
