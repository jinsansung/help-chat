var YP=Object.defineProperty;var JP=(as,Fn,er)=>Fn in as?YP(as,Fn,{enumerable:!0,configurable:!0,writable:!0,value:er}):as[Fn]=er;var it=(as,Fn,er)=>JP(as,typeof Fn!="symbol"?Fn+"":Fn,er);(function(){"use strict";var Wu;var as=document.createElement("style");as.textContent=`.cw-widget-container{all:revert;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:16px!important;line-height:1.5;color:#1f293d}.cw-widget-container *,.cw-widget-container *:before,.cw-widget-container *:after{box-sizing:border-box}.cw-widget-container h1,.cw-widget-container h2,.cw-widget-container h3,.cw-widget-container h4,.cw-widget-container p{margin:0;padding:0}.cw-widget-container button{background-color:transparent;border:none;padding:0;margin:0;cursor:pointer;font-family:inherit;font-size:inherit;color:inherit}.cw-widget-container input{font-family:inherit;font-size:inherit;margin:0}@keyframes cw-slide-in-up{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes cw-slide-out-down{0%{transform:translateY(0);opacity:1}to{transform:translateY(100%);opacity:0}}@keyframes cw-scale-in{0%{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}@keyframes cw-scale-out{0%{transform:scale(1);opacity:1}to{transform:scale(0);opacity:0}}@keyframes cw-typing-bounce{0%,70%,to{transform:translateY(0)}35%{transform:translateY(-8px)}}.cw-animate-slide-in-up{animation:cw-slide-in-up .3s ease-out forwards}.cw-animate-slide-out-down{animation:cw-slide-out-down .3s ease-in forwards}.cw-animate-scale-in{animation:cw-scale-in .2s ease-out forwards}.cw-animate-scale-out{animation:cw-scale-out .2s ease-in forwards}.cw-bot-message ul{list-style-type:disc!important;list-style-position:outside!important;padding-left:20px!important;margin-top:8px;margin-bottom:8px}.cw-bot-message ol{list-style-type:decimal!important;list-style-position:outside!important;padding-left:20px!important;margin-top:8px;margin-bottom:8px}.cw-bot-message li{margin-bottom:4px}.cw-bot-message p{margin-bottom:12px}.cw-bot-message p:last-child{margin-bottom:0}.cw-bot-message strong{font-weight:600}.cw-typing-indicator{display:flex;align-items:center;justify-content:center;height:20px;width:20px}.cw-typing-dot{display:inline-block;width:6px;height:6px;border-radius:9999px;background-color:currentColor;margin:0 1px;animation:cw-typing-bounce 1.2s infinite ease-in-out both}.cw-typing-dot:nth-child(2){animation-delay:-1s}.cw-typing-dot:nth-child(3){animation-delay:-.8s}.cw-font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.cw-font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.cw-text-xs{font-size:12px!important;line-height:16px!important}.cw-text-sm{font-size:14px!important;line-height:20px!important}.cw-text-base{font-size:16px!important;line-height:24px!important}.cw-text-lg{font-size:18px!important;line-height:28px!important}.cw-text-xl{font-size:20px!important;line-height:28px!important}.cw-text-3xl{font-size:30px!important;line-height:36px!important}.cw-font-medium{font-weight:500}.cw-font-semibold{font-weight:600}.cw-font-bold{font-weight:700}.cw-uppercase{text-transform:uppercase}.cw-leading-normal{line-height:1.5}.cw-tracking-wide{letter-spacing:.025em}.cw-text-black{color:#000}.cw-text-white{color:#fff}.cw-text-red-500{color:#ef4444}.cw-text-red-700{color:#b91c1c}.cw-text-gray-500{color:#6b7280}.cw-text-gray-600{color:#4b5563}.cw-text-gray-700{color:#374151}.cw-text-gray-800{color:#1f293d}.cw-text-primary-dark{color:#e5b800}.cw-text-center{text-align:center}.cw-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cw-break-words{overflow-wrap:break-word}.cw-fixed{position:fixed!important}.cw-block{display:block!important}.cw-flex{display:flex!important}.cw-inline-flex{display:inline-flex!important}.cw-hidden{display:none!important}.cw-w-5{width:20px!important}.cw-h-5{height:20px!important}.cw-w-6{width:24px!important}.cw-h-6{height:24px!important}.cw-w-8{width:32px!important}.cw-h-8{height:32px!important}.cw-w-full{width:100%!important}.cw-h-full{height:100%!important}.cw-h-screen{height:100vh!important}.cw-max-w-sm{max-width:384px!important}.cw-max-w-md{max-width:448px!important}.cw-max-w-2xl{max-width:672px!important}.cw-max-w-\\[80\\%\\]{max-width:80%!important}.cw-w-\\[90vw\\]{width:90vw!important}.cw-h-\\[70vh\\]{height:70vh!important}.cw-max-h-\\[600px\\]{max-height:600px!important}.cw-min-h-0{min-height:0!important}.cw-flex-1{flex:1 1 0%!important}.cw-flex-col{flex-direction:column!important}.cw-flex-shrink-0{flex-shrink:0!important}.cw-items-center{align-items:center!important}.cw-justify-center{justify-content:center!important}.cw-justify-end{justify-content:flex-end!important}.cw-justify-start{justify-content:flex-start!important}.cw-justify-between{justify-content:space-between!important}.cw-bottom-5{bottom:20px!important}.cw-right-5{right:20px!important}.cw-z-40{z-index:40!important}.cw-z-50{z-index:50!important}.cw-overflow-hidden{overflow:hidden!important}.cw-overflow-y-auto{overflow-y:auto!important}.cw-m-0{margin:0!important}.cw-p-1{padding:4px!important}.cw-p-2{padding:8px!important}.cw-p-3{padding:12px!important}.cw-p-4{padding:16px!important}.cw-p-6{padding:24px!important}.cw-p-8{padding:32px!important}.cw-px-4{padding-left:16px!important;padding-right:16px!important}.cw-py-2{padding-top:8px!important;padding-bottom:8px!important}.cw-py-3{padding-top:12px!important;padding-bottom:12px!important}.cw-py-4{padding-top:16px!important;padding-bottom:16px!important}.cw-py-6{padding-top:24px!important;padding-bottom:24px!important}.cw-pr-2{padding-right:8px!important}.cw-mb-1{margin-bottom:4px!important}.cw-mb-2{margin-bottom:8px!important}.cw-mb-4{margin-bottom:16px!important}.cw-mb-6{margin-bottom:24px!important}.cw-mt-1{margin-top:4px!important}.cw-mt-2{margin-top:8px!important}.cw-mt-4{margin-top:16px!important}.cw-mt-8{margin-top:32px!important}.cw-space-x-2>:not([hidden])~:not([hidden]){margin-right:0!important;margin-left:8px!important}.cw-space-y-2>:not([hidden])~:not([hidden]){margin-top:8px!important;margin-bottom:0!important}.cw-space-y-4>:not([hidden])~:not([hidden]){margin-top:16px!important;margin-bottom:0!important}.cw-space-y-6>:not([hidden])~:not([hidden]){margin-top:24px!important;margin-bottom:0!important}.cw-bg-white{background-color:#fff!important}.cw-bg-gray-50{background-color:#f9fafb!important}.cw-bg-gray-100{background-color:#f3f4f6!important}.cw-bg-gray-200{background-color:#e5e7eb!important}.cw-bg-gray-400{background-color:#9ca3af!important}.cw-bg-primary{background-color:#ffcd00!important}.cw-rounded-lg{border-radius:8px}.cw-rounded-xl{border-radius:12px}.cw-rounded-2xl{border-radius:16px}.cw-rounded-full{border-radius:9999px}.cw-rounded-bl-none{border-bottom-left-radius:0}.cw-rounded-br-none{border-bottom-right-radius:0}.cw-rounded-t-2xl{border-top-left-radius:16px;border-top-right-radius:16px}.cw-border{border-width:1px!important;border-style:solid!important;border-color:#e5e7eb!important}.cw-border-primary{border-color:#ffcd00!important}.cw-border-gray-200{border-color:#e5e7eb!important}.cw-border-gray-300{border-color:#d1d4d7!important}.cw-border-custom-gray{border-color:#999!important}.cw-border-t{border-top-width:1px!important}.cw-shadow-sm{box-shadow:0 1px 2px #0000000d!important}.cw-shadow-md{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a!important}.cw-shadow-lg{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a!important}.cw-shadow-2xl{box-shadow:0 20px 25px -5px #0000004d,0 8px 10px -6px #0000001a!important}.cw-opacity-0{opacity:0}.cw-opacity-100{opacity:1}.cw-transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cw-transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cw-transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.cw-duration-300{transition-duration:.3s}.cw-transform{transform:translate(0) rotate(0) skew(0) skewY(0) scaleX(1) scaleY(1)}.cw-scale-0{transform:scale(0)}.cw-scale-100{transform:scale(1)}.cw-cursor-pointer{cursor:pointer}.cw-cursor-not-allowed{cursor:not-allowed}.cw-hover\\:scale-110:hover{transform:scale(1.1)}.cw-hover\\:bg-primary:hover{background-color:#ffcd00!important}.cw-hover\\:bg-primary-dark:hover{background-color:#e5b800!important}.cw-hover\\:text-black:hover{color:#000}.cw-hover\\:text-red-700:hover{color:#b91c1c}.cw-focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.cw-focus\\:ring-2:focus{box-shadow:0 0 0 2px var(--ring-color)}.cw-focus\\:ring-primary:focus{--ring-color: #FFCD00}.cw-focus\\:ring-white:focus{--ring-color: #fff}.cw-focus\\:ring-opacity-50:focus{--ring-color: rgba(255, 205, 0, .5)}.cw-disabled\\:bg-gray-200:disabled{background-color:#e5e7eb!important}.cw-disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.cw-disabled\\:text-gray-400:disabled{color:#9ca3af}.cw-disabled\\:text-gray-500:disabled{color:#6b7280}.cw-fill-current{fill:currentColor}.cw-stroke-currentColor{stroke:currentColor}
/*$vite$:1*/`,document.head.appendChild(as);var Fn=typeof document<"u"?document.currentScript:null;function er(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xf={exports:{}},fa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function hS(){if(wm)return fa;wm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var h in o)h!=="key"&&(l[h]=o[h])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:l}}return fa.Fragment=e,fa.jsx=t,fa.jsxs=t,fa}var Cm;function dS(){return Cm||(Cm=1,xf.exports=hS()),xf.exports}var se=dS(),Mf={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function pS(){if(Rm)return we;Rm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),A=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=A&&L[A]||L["@@iterator"],typeof L=="function"?L:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,H={};function ne(L,ee,ue){this.props=L,this.context=ee,this.refs=H,this.updater=ue||k}ne.prototype.isReactComponent={},ne.prototype.setState=function(L,ee){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ee,"setState")},ne.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ie(){}ie.prototype=ne.prototype;function X(L,ee,ue){this.props=L,this.context=ee,this.refs=H,this.updater=ue||k}var oe=X.prototype=new ie;oe.constructor=X,B(oe,ne.prototype),oe.isPureReactComponent=!0;var he=Array.isArray;function le(){}var M={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function b(L,ee,ue){var de=ue.ref;return{$$typeof:n,type:L,key:ee,ref:de!==void 0?de:null,props:ue}}function V(L,ee){return b(L.type,ee,L.props)}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function q(L){var ee={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ue){return ee[ue]})}var D=/\/+/g;function st(L,ee){return typeof L=="object"&&L!==null&&L.key!=null?q(""+L.key):ee.toString(36)}function gt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(le,le):(L.status="pending",L.then(function(ee){L.status==="pending"&&(L.status="fulfilled",L.value=ee)},function(ee){L.status==="pending"&&(L.status="rejected",L.reason=ee)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function $(L,ee,ue,de,Ae){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var Oe=!1;if(L===null)Oe=!0;else switch(be){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(L.$$typeof){case n:case e:Oe=!0;break;case T:return Oe=L._init,$(Oe(L._payload),ee,ue,de,Ae)}}if(Oe)return Ae=Ae(L),Oe=de===""?"."+st(L,0):de,he(Ae)?(ue="",Oe!=null&&(ue=Oe.replace(D,"$&/")+"/"),$(Ae,ee,ue,"",function(mr){return mr})):Ae!=null&&(P(Ae)&&(Ae=V(Ae,ue+(Ae.key==null||L&&L.key===Ae.key?"":(""+Ae.key).replace(D,"$&/")+"/")+Oe)),ee.push(Ae)),1;Oe=0;var Lt=de===""?".":de+":";if(he(L))for(var ht=0;ht<L.length;ht++)de=L[ht],be=Lt+st(de,ht),Oe+=$(de,ee,ue,be,Ae);else if(ht=x(L),typeof ht=="function")for(L=ht.call(L),ht=0;!(de=L.next()).done;)de=de.value,be=Lt+st(de,ht++),Oe+=$(de,ee,ue,be,Ae);else if(be==="object"){if(typeof L.then=="function")return $(gt(L),ee,ue,de,Ae);throw ee=String(L),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ae(L,ee,ue){if(L==null)return L;var de=[],Ae=0;return $(L,de,"","",function(be){return ee.call(ue,be,Ae++)}),de}function Te(L){if(L._status===-1){var ee=L._result;ee=ee(),ee.then(function(ue){(L._status===0||L._status===-1)&&(L._status=1,L._result=ue)},function(ue){(L._status===0||L._status===-1)&&(L._status=2,L._result=ue)}),L._status===-1&&(L._status=0,L._result=ee)}if(L._status===1)return L._result.default;throw L._result}var Be=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Qe={map:ae,forEach:function(L,ee,ue){ae(L,function(){ee.apply(this,arguments)},ue)},count:function(L){var ee=0;return ae(L,function(){ee++}),ee},toArray:function(L){return ae(L,function(ee){return ee})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return we.Activity=v,we.Children=Qe,we.Component=ne,we.Fragment=t,we.Profiler=o,we.PureComponent=X,we.StrictMode=s,we.Suspense=y,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,we.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},we.cache=function(L){return function(){return L.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(L,ee,ue){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=B({},L.props),Ae=L.key;if(ee!=null)for(be in ee.key!==void 0&&(Ae=""+ee.key),ee)!I.call(ee,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ee.ref===void 0||(de[be]=ee[be]);var be=arguments.length-2;if(be===1)de.children=ue;else if(1<be){for(var Oe=Array(be),Lt=0;Lt<be;Lt++)Oe[Lt]=arguments[Lt+2];de.children=Oe}return b(L.type,Ae,de)},we.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},we.createElement=function(L,ee,ue){var de,Ae={},be=null;if(ee!=null)for(de in ee.key!==void 0&&(be=""+ee.key),ee)I.call(ee,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ae[de]=ee[de]);var Oe=arguments.length-2;if(Oe===1)Ae.children=ue;else if(1<Oe){for(var Lt=Array(Oe),ht=0;ht<Oe;ht++)Lt[ht]=arguments[ht+2];Ae.children=Lt}if(L&&L.defaultProps)for(de in Oe=L.defaultProps,Oe)Ae[de]===void 0&&(Ae[de]=Oe[de]);return b(L,be,Ae)},we.createRef=function(){return{current:null}},we.forwardRef=function(L){return{$$typeof:h,render:L}},we.isValidElement=P,we.lazy=function(L){return{$$typeof:T,_payload:{_status:-1,_result:L},_init:Te}},we.memo=function(L,ee){return{$$typeof:p,type:L,compare:ee===void 0?null:ee}},we.startTransition=function(L){var ee=M.T,ue={};M.T=ue;try{var de=L(),Ae=M.S;Ae!==null&&Ae(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(le,Be)}catch(be){Be(be)}finally{ee!==null&&ue.types!==null&&(ee.types=ue.types),M.T=ee}},we.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},we.use=function(L){return M.H.use(L)},we.useActionState=function(L,ee,ue){return M.H.useActionState(L,ee,ue)},we.useCallback=function(L,ee){return M.H.useCallback(L,ee)},we.useContext=function(L){return M.H.useContext(L)},we.useDebugValue=function(){},we.useDeferredValue=function(L,ee){return M.H.useDeferredValue(L,ee)},we.useEffect=function(L,ee){return M.H.useEffect(L,ee)},we.useEffectEvent=function(L){return M.H.useEffectEvent(L)},we.useId=function(){return M.H.useId()},we.useImperativeHandle=function(L,ee,ue){return M.H.useImperativeHandle(L,ee,ue)},we.useInsertionEffect=function(L,ee){return M.H.useInsertionEffect(L,ee)},we.useLayoutEffect=function(L,ee){return M.H.useLayoutEffect(L,ee)},we.useMemo=function(L,ee){return M.H.useMemo(L,ee)},we.useOptimistic=function(L,ee){return M.H.useOptimistic(L,ee)},we.useReducer=function(L,ee,ue){return M.H.useReducer(L,ee,ue)},we.useRef=function(L){return M.H.useRef(L)},we.useState=function(L){return M.H.useState(L)},we.useSyncExternalStore=function(L,ee,ue){return M.H.useSyncExternalStore(L,ee,ue)},we.useTransition=function(){return M.H.useTransition()},we.version="19.2.0",we}var Im;function Df(){return Im||(Im=1,Mf.exports=pS()),Mf.exports}var at=Df();const mS=er(at);var Nf={exports:{}},ha={},Vf={exports:{}},Pf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function gS(){return bm||(bm=1,(function(n){function e($,ae){var Te=$.length;$.push(ae);e:for(;0<Te;){var Be=Te-1>>>1,Qe=$[Be];if(0<o(Qe,ae))$[Be]=ae,$[Te]=Qe,Te=Be;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var ae=$[0],Te=$.pop();if(Te!==ae){$[0]=Te;e:for(var Be=0,Qe=$.length,L=Qe>>>1;Be<L;){var ee=2*(Be+1)-1,ue=$[ee],de=ee+1,Ae=$[de];if(0>o(ue,Te))de<Qe&&0>o(Ae,ue)?($[Be]=Ae,$[de]=Te,Be=de):($[Be]=ue,$[ee]=Te,Be=ee);else if(de<Qe&&0>o(Ae,Te))$[Be]=Ae,$[de]=Te,Be=de;else break e}}return ae}function o($,ae){var Te=$.sortIndex-ae.sortIndex;return Te!==0?Te:$.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var y=[],p=[],T=1,v=null,A=3,x=!1,k=!1,B=!1,H=!1,ne=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function oe($){for(var ae=t(p);ae!==null;){if(ae.callback===null)s(p);else if(ae.startTime<=$)s(p),ae.sortIndex=ae.expirationTime,e(y,ae);else break;ae=t(p)}}function he($){if(B=!1,oe($),!k)if(t(y)!==null)k=!0,le||(le=!0,q());else{var ae=t(p);ae!==null&&gt(he,ae.startTime-$)}}var le=!1,M=-1,I=5,b=-1;function V(){return H?!0:!(n.unstable_now()-b<I)}function P(){if(H=!1,le){var $=n.unstable_now();b=$;var ae=!0;try{e:{k=!1,B&&(B=!1,ie(M),M=-1),x=!0;var Te=A;try{t:{for(oe($),v=t(y);v!==null&&!(v.expirationTime>$&&V());){var Be=v.callback;if(typeof Be=="function"){v.callback=null,A=v.priorityLevel;var Qe=Be(v.expirationTime<=$);if($=n.unstable_now(),typeof Qe=="function"){v.callback=Qe,oe($),ae=!0;break t}v===t(y)&&s(y),oe($)}else s(y);v=t(y)}if(v!==null)ae=!0;else{var L=t(p);L!==null&&gt(he,L.startTime-$),ae=!1}}break e}finally{v=null,A=Te,x=!1}ae=void 0}}finally{ae?q():le=!1}}}var q;if(typeof X=="function")q=function(){X(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,st=D.port2;D.port1.onmessage=P,q=function(){st.postMessage(null)}}else q=function(){ne(P,0)};function gt($,ae){M=ne(function(){$(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function($){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var Te=A;A=ae;try{return $()}finally{A=Te}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Te=A;A=$;try{return ae()}finally{A=Te}},n.unstable_scheduleCallback=function($,ae,Te){var Be=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Be+Te:Be):Te=Be,$){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Te+Qe,$={id:T++,callback:ae,priorityLevel:$,startTime:Te,expirationTime:Qe,sortIndex:-1},Te>Be?($.sortIndex=Te,e(p,$),t(y)===null&&$===t(p)&&(B?(ie(M),M=-1):B=!0,gt(he,Te-Be))):($.sortIndex=Qe,e(y,$),k||x||(k=!0,le||(le=!0,q()))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var ae=A;return function(){var Te=A;A=ae;try{return $.apply(this,arguments)}finally{A=Te}}}})(Pf)),Pf}var xm;function yS(){return xm||(xm=1,Vf.exports=gS()),Vf.exports}var kf={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function _S(){if(Mm)return en;Mm=1;var n=Df();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(y,p,T){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:y,containerInfo:p,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(y,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(y,p,null,T)},en.flushSync=function(y){var p=c.T,T=s.p;try{if(c.T=null,s.p=2,y)return y()}finally{c.T=p,s.p=T,s.d.f()}},en.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},en.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},en.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var T=p.as,v=h(T,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:A,fetchPriority:x}):T==="script"&&s.d.X(y,{crossOrigin:v,integrity:A,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=h(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},en.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,v=h(T,p.crossOrigin);s.d.L(y,T,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(y,p){if(typeof y=="string")if(p){var T=h(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},en.requestFormReset=function(y){s.d.r(y)},en.unstable_batchedUpdates=function(y,p){return y(p)},en.useFormState=function(y,p,T){return c.H.useFormState(y,p,T)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.0",en}var Dm;function TS(){if(Dm)return kf.exports;Dm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kf.exports=_S(),kf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function ES(){if(Nm)return ha;Nm=1;var n=yS(),e=Df(),t=TS();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,u=r;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),r;_=_.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=_;else{for(var S=!1,C=g.child;C;){if(C===a){S=!0,a=g,u=_;break}if(C===u){S=!0,u=g,a=_;break}C=C.sibling}if(!S){for(C=_.child;C;){if(C===a){S=!0,a=_,u=g;break}if(C===u){S=!0,u=_,a=g;break}C=C.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function T(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=T(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),X=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function st(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case ne:return"Profiler";case H:return"StrictMode";case he:return"Suspense";case le:return"SuspenseList";case b:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case X:return i.displayName||"Context";case ie:return(i._context.displayName||"Context")+".Consumer";case oe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return r=i.displayName||null,r!==null?r:st(i.type)||"Memo";case I:r=i._payload,i=i._init;try{return st(i(r))}catch{}}return null}var gt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Be=[],Qe=-1;function L(i){return{current:i}}function ee(i){0>Qe||(i.current=Be[Qe],Be[Qe]=null,Qe--)}function ue(i,r){Qe++,Be[Qe]=i.current,i.current=r}var de=L(null),Ae=L(null),be=L(null),Oe=L(null);function Lt(i,r){switch(ue(be,r),ue(Ae,i),ue(de,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?kA(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=kA(r),i=UA(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(de),ue(de,i)}function ht(){ee(de),ee(Ae),ee(be)}function mr(i){i.memoizedState!==null&&ue(Oe,i);var r=de.current,a=UA(r,i.type);r!==a&&(ue(Ae,i),ue(de,a))}function vo(i){Ae.current===i&&(ee(de),ee(Ae)),Oe.current===i&&(ee(Oe),Hl._currentValue=Te)}var Ao,So;function gi(i){if(Ao===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ao=r&&r[1]||"",So=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ao+i+So}var Ha=!1;function gr(i,r){if(!i||Ha)return"";Ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var Y=K}Reflect.construct(i,[],W)}else{try{W.call()}catch(K){Y=K}i.call(W.prototype)}}else{try{throw Error()}catch(K){Y=K}(W=i())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],C=_[1];if(S&&C){var N=S.split(`
`),F=C.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===F.length)for(u=N.length-1,g=F.length-1;1<=u&&0<=g&&N[u]!==F[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==F[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==F[g]){var Q=`
`+N[u].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=u&&0<=g);break}}}finally{Ha=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?gi(a):""}function Ya(i,r){switch(i.tag){case 26:case 27:case 5:return gi(i.type);case 16:return gi("Lazy");case 13:return i.child!==r&&r!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return gr(i.type,!1);case 11:return gr(i.type.render,!1);case 1:return gr(i.type,!0);case 31:return gi("Activity");default:return""}}function Ja(i){try{var r="",a=null;do r+=Ya(i,a),a=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var It=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,vs=n.unstable_cancelCallback,wd=n.unstable_shouldYield,ju=n.unstable_requestPaint,an=n.unstable_now,yr=n.unstable_getCurrentPriorityLevel,Ka=n.unstable_ImmediatePriority,$a=n.unstable_UserBlockingPriority,As=n.unstable_NormalPriority,Cd=n.unstable_LowPriority,ec=n.unstable_IdlePriority,tc=n.log,nc=n.unstable_setDisableYieldValue,Xn=null,$t=null;function Mn(i){if(typeof tc=="function"&&nc(i),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Xn,i)}catch{}}var Et=Math.clz32?Math.clz32:sc,ic=Math.log,wo=Math.LN2;function sc(i){return i>>>=0,i===0?32:31-(ic(i)/wo|0)|0}var yi=256,_r=262144,bt=4194304;function _i(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ti(i,r,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~_,u!==0?g=_i(u):(S&=C,S!==0?g=_i(S):a||(a=C&~i,a!==0&&(g=_i(a))))):(C=u&~_,C!==0?g=_i(C):S!==0?g=_i(S):a||(a=u&~i,a!==0&&(g=_i(a)))),g===0?0:r!==0&&r!==g&&(r&_)===0&&(_=g&-g,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:g}function Zn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Rd(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rc(){var i=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),i}function Ei(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Tr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Id(i,r,a,u,g,_){var S=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var C=i.entanglements,N=i.expirationTimes,F=i.hiddenUpdates;for(a=S&~a;0<a;){var Q=31-Et(a),W=1<<Q;C[Q]=0,N[Q]=-1;var Y=F[Q];if(Y!==null)for(F[Q]=null,Q=0;Q<Y.length;Q++){var K=Y[Q];K!==null&&(K.lane&=-536870913)}a&=~W}u!==0&&Er(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~r))}function Er(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Et(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function Qa(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var u=31-Et(a),g=1<<u;g&r|i[u]&r&&(i[u]|=r),a&=~g}}function Xa(i,r){var a=r&-r;return a=(a&42)!==0?1:vr(a),(a&(i.suspendedLanes|r))!==0?0:a}function vr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Gi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function oc(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:rS(i.type))}function Wn(i,r){var a=ae.p;try{return ae.p=i,r()}finally{ae.p=a}}var jn=Math.random().toString(36).slice(2),xt="__reactFiber$"+jn,Gt="__reactProps$"+jn,vi="__reactContainer$"+jn,Co="__reactEvents$"+jn,bd="__reactListeners$"+jn,ac="__reactHandles$"+jn,lc="__reactResources$"+jn,Ai="__reactMarker$"+jn;function Ro(i){delete i[xt],delete i[Gt],delete i[Co],delete i[bd],delete i[ac]}function Si(i){var r=i[xt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[vi]||a[xt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=FA(i);i!==null;){if(a=i[xt])return a;i=FA(i)}return r}i=a,a=i.parentNode}return null}function Dn(i){if(i=i[xt]||i[vi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function _n(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function wi(i){var r=i[lc];return r||(r=i[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Mt(i){i[Ai]=!0}var Za=new Set,Wa={};function Ci(i,r){Ri(i,r),Ri(i+"Capture",r)}function Ri(i,r){for(Wa[i]=r,i=0;i<r.length;i++)Za.add(r[i])}var ja=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),el={},tl={};function uc(i){return It.call(tl,i)?!0:It.call(el,i)?!1:ja.test(i)?tl[i]=!0:(el[i]=!0,!1)}function Io(i,r,a){if(uc(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function Tn(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function Dt(i,r,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+u)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ss(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function nl(i,r,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,_.call(this,S)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Xe(i){if(!i._valueTracker){var r=Ss(i)?"checked":"value";i._valueTracker=nl(i,r,""+i[r])}}function Ar(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return i&&(u=Ss(i)?i.checked?"true":"false":i.value),i=u,i!==a?(r.setValue(i),!0):!1}function Ii(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sr=/[\n"\\]/g;function fn(i){return i.replace(Sr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function bo(i,r,a,u,g,_,S,C){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Ft(r)):i.value!==""+Ft(r)&&(i.value=""+Ft(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?il(i,S,Ft(r)):a!=null?il(i,S,Ft(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Ft(C):i.removeAttribute("name")}function cc(i,r,a,u,g,_,S,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Xe(i);return}a=a!=null?""+Ft(a):"",r=r!=null?""+Ft(r):a,C||r===i.value||(i.value=r),i.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Xe(i)}function il(i,r,a){r==="number"&&Ii(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ws(i,r,a,u){if(i=i.options,r){r={};for(var g=0;g<a.length;g++)r["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=r.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),r=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function fc(i,r,a){if(r!=null&&(r=""+Ft(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Ft(a):""}function Cs(i,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(gt(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=Ft(r),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Xe(i)}function hn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sl(i,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,a):typeof a!="number"||a===0||hc.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function rl(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&a[g]!==u&&sl(i,g,u)}else for(var _ in r)r.hasOwnProperty(_)&&sl(i,_,r[_])}function xo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(i){return Rs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ei(){}var ol=null;function Nn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Is=null,bi=null;function wr(i){var r=Dn(i);if(r&&(i=r.stateNode)){var a=i[Gt]||null;e:switch(i=r.stateNode,r.type){case"input":if(bo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==i&&u.form===i.form){var g=u[Gt]||null;if(!g)throw Error(s(90));bo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===i.form&&Ar(u)}break e;case"textarea":fc(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ws(i,!!a.multiple,r,!1)}}}var Do=!1;function bs(i,r,a){if(Do)return i(r,a);Do=!0;try{var u=i(r);return u}finally{if(Do=!1,(Is!==null||bi!==null)&&(af(),Is&&(r=Is,i=bi,bi=Is=null,wr(r),i)))for(r=0;r<i.length;r++)wr(i[r])}}function ti(i,r){var a=i.stateNode;if(a===null)return null;var u=a[Gt]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cr=!1;if(Vn)try{var je={};Object.defineProperty(je,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{Cr=!1}var xi=null,al=null,Rr=null;function ll(){if(Rr)return Rr;var i,r=al,a=r.length,u,g="value"in xi?xi.value:xi.textContent,_=g.length;for(i=0;i<a&&r[i]===g[i];i++);var S=a-i;for(u=1;u<=S&&r[a-u]===g[_-u];u++);return Rr=g.slice(i,1<u?1-u:void 0)}function Ir(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Fi(){return!0}function ni(){return!1}function Qt(i){function r(a,u,g,_,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(a=i[C],this[C]=a?a(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Fi:ni,this.isPropagationStopped=ni,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),r}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Qt(Hi),xs=v({},Hi,{view:0,detail:0}),ul=Qt(xs),Ms,No,Di,Vo=v({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Di&&(Di&&i.type==="mousemove"?(Ms=i.screenX-Di.screenX,No=i.screenY-Di.screenY):No=Ms=0,Di=i),Ms)},movementY:function(i){return"movementY"in i?i.movementY:No}}),cl=Qt(Vo),br=v({},Vo,{dataTransfer:0}),pc=Qt(br),mc=v({},xs,{relatedTarget:0}),xr=Qt(mc),fl=v({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=Qt(fl),Po=v({},Hi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),yc=Qt(Po),_c=v({},Hi,{data:0}),Ni=Qt(_c),Tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ac(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=vc[i])?!!r[i]:!1}function Ds(){return Ac}var ln=v({},xs,{key:function(i){if(i.key){var r=Tc[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ir(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ec[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(i){return i.type==="keypress"?Ir(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ir(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Sc=Qt(ln),wc=v({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yi=Qt(wc),d=v({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),E=Qt(d),w=v({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Qt(w),z=v({},Vo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Qt(z),re=v({},Hi,{newState:0,oldState:0}),Re=Qt(re),vt=[9,13,27,32],Ye=Vn&&"CompositionEvent"in window,dt=null;Vn&&"documentMode"in document&&(dt=document.documentMode);var Pn=Vn&&"TextEvent"in window&&!dt,Vi=Vn&&(!Ye||dt&&8<dt&&11>=dt),ii=" ",si=!1;function Mr(i,r){switch(i){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ko(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Uo=!1;function mV(i,r){switch(i){case"compositionend":return ko(r);case"keypress":return r.which!==32?null:(si=!0,ii);case"textInput":return i=r.data,i===ii&&si?null:i;default:return null}}function gV(i,r){if(Uo)return i==="compositionend"||!Ye&&Mr(i,r)?(i=ll(),Rr=al=xi=null,Uo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vi&&r.locale!=="ko"?null:r.data;default:return null}}var yV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JE(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!yV[i.type]:r==="textarea"}function KE(i,r,a,u){Is?bi?bi.push(u):bi=[u]:Is=u,r=pf(r,"onChange"),0<r.length&&(a=new Mi("onChange","change",null,a,u),i.push({event:a,listeners:r}))}var hl=null,dl=null;function _V(i){xA(i,0)}function Cc(i){var r=_n(i);if(Ar(r))return i}function $E(i,r){if(i==="change")return r}var QE=!1;if(Vn){var xd;if(Vn){var Md="oninput"in document;if(!Md){var XE=document.createElement("div");XE.setAttribute("oninput","return;"),Md=typeof XE.oninput=="function"}xd=Md}else xd=!1;QE=xd&&(!document.documentMode||9<document.documentMode)}function ZE(){hl&&(hl.detachEvent("onpropertychange",WE),dl=hl=null)}function WE(i){if(i.propertyName==="value"&&Cc(dl)){var r=[];KE(r,dl,i,Nn(i)),bs(_V,r)}}function TV(i,r,a){i==="focusin"?(ZE(),hl=r,dl=a,hl.attachEvent("onpropertychange",WE)):i==="focusout"&&ZE()}function EV(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Cc(dl)}function vV(i,r){if(i==="click")return Cc(r)}function AV(i,r){if(i==="input"||i==="change")return Cc(r)}function SV(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var En=typeof Object.is=="function"?Object.is:SV;function pl(i,r){if(En(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!It.call(r,g)||!En(i[g],r[g]))return!1}return!0}function jE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ev(i,r){var a=jE(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=r&&u>=r)return{node:a,offset:r-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jE(a)}}function tv(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?tv(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function nv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ii(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=Ii(i.document)}return r}function Dd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var wV=Vn&&"documentMode"in document&&11>=document.documentMode,Lo=null,Nd=null,ml=null,Vd=!1;function iv(i,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vd||Lo==null||Lo!==Ii(u)||(u=Lo,"selectionStart"in u&&Dd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ml&&pl(ml,u)||(ml=u,u=pf(Nd,"onSelect"),0<u.length&&(r=new Mi("onSelect","select",null,r,a),i.push({event:r,listeners:u}),r.target=Lo)))}function Dr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var qo={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},Pd={},sv={};Vn&&(sv=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Nr(i){if(Pd[i])return Pd[i];if(!qo[i])return i;var r=qo[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in sv)return Pd[i]=r[a];return i}var rv=Nr("animationend"),ov=Nr("animationiteration"),av=Nr("animationstart"),CV=Nr("transitionrun"),RV=Nr("transitionstart"),IV=Nr("transitioncancel"),lv=Nr("transitionend"),uv=new Map,kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kd.push("scrollEnd");function ri(i,r){uv.set(i,r),Ci(r,[i])}var Rc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},kn=[],Oo=0,Ud=0;function Ic(){for(var i=Oo,r=Ud=Oo=0;r<i;){var a=kn[r];kn[r++]=null;var u=kn[r];kn[r++]=null;var g=kn[r];kn[r++]=null;var _=kn[r];if(kn[r++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}_!==0&&cv(a,g,_)}}function bc(i,r,a,u){kn[Oo++]=i,kn[Oo++]=r,kn[Oo++]=a,kn[Oo++]=u,Ud|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Ld(i,r,a,u){return bc(i,r,a,u),xc(i)}function Vr(i,r){return bc(i,null,null,r),xc(i)}function cv(i,r,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&r!==null&&(g=31-Et(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[r]:u.push(r),r.lane=a|536870912),_):null}function xc(i){if(50<Ll)throw Ll=0,Jp=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Bo={};function bV(i,r,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(i,r,a,u){return new bV(i,r,a,u)}function qd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ji(i,r){var a=i.alternate;return a===null?(a=vn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function fv(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Mc(i,r,a,u,g,_){var S=0;if(u=i,typeof i=="function")qd(i)&&(S=1);else if(typeof i=="string")S=VP(i,a,de.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case b:return i=vn(31,a,r,g),i.elementType=b,i.lanes=_,i;case B:return Pr(a.children,g,_,r);case H:S=8,g|=24;break;case ne:return i=vn(12,a,r,g|2),i.elementType=ne,i.lanes=_,i;case he:return i=vn(13,a,r,g),i.elementType=he,i.lanes=_,i;case le:return i=vn(19,a,r,g),i.elementType=le,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case X:S=10;break e;case ie:S=9;break e;case oe:S=11;break e;case M:S=14;break e;case I:S=16,u=null;break e}S=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=vn(S,a,r,g),r.elementType=i,r.type=u,r.lanes=_,r}function Pr(i,r,a,u){return i=vn(7,i,u,r),i.lanes=a,i}function Od(i,r,a){return i=vn(6,i,null,r),i.lanes=a,i}function hv(i){var r=vn(18,null,null,0);return r.stateNode=i,r}function Bd(i,r,a){return r=vn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var dv=new WeakMap;function Un(i,r){if(typeof i=="object"&&i!==null){var a=dv.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Ja(r)},dv.set(i,r),r)}return{value:i,source:r,stack:Ja(r)}}var zo=[],Go=0,Dc=null,gl=0,Ln=[],qn=0,Ns=null,Pi=1,ki="";function Ki(i,r){zo[Go++]=gl,zo[Go++]=Dc,Dc=i,gl=r}function pv(i,r,a){Ln[qn++]=Pi,Ln[qn++]=ki,Ln[qn++]=Ns,Ns=i;var u=Pi;i=ki;var g=32-Et(u)-1;u&=~(1<<g),a+=1;var _=32-Et(r)+g;if(30<_){var S=g-g%5;_=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Pi=1<<32-Et(r)+g|a<<g|u,ki=_+i}else Pi=1<<_|a<<g|u,ki=i}function zd(i){i.return!==null&&(Ki(i,1),pv(i,1,0))}function Gd(i){for(;i===Dc;)Dc=zo[--Go],zo[Go]=null,gl=zo[--Go],zo[Go]=null;for(;i===Ns;)Ns=Ln[--qn],Ln[qn]=null,ki=Ln[--qn],Ln[qn]=null,Pi=Ln[--qn],Ln[qn]=null}function mv(i,r){Ln[qn++]=Pi,Ln[qn++]=ki,Ln[qn++]=Ns,Pi=r.id,ki=r.overflow,Ns=i}var Xt=null,ct=null,Ue=!1,Vs=null,On=!1,Fd=Error(s(519));function Ps(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yl(Un(r,i)),Fd}function gv(i){var r=i.stateNode,a=i.type,u=i.memoizedProps;switch(r[xt]=i,r[Gt]=u,a){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(a=0;a<Ol.length;a++)De(Ol[a],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":De("invalid",r),cc(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":De("invalid",r);break;case"textarea":De("invalid",r),Cs(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||VA(r.textContent,a)?(u.popover!=null&&(De("beforetoggle",r),De("toggle",r)),u.onScroll!=null&&De("scroll",r),u.onScrollEnd!=null&&De("scrollend",r),u.onClick!=null&&(r.onclick=ei),r=!0):r=!1,r||Ps(i,!0)}function yv(i){for(Xt=i.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Xt=Xt.return}}function Fo(i){if(i!==Xt)return!1;if(!Ue)return yv(i),Ue=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||am(i.type,i.memoizedProps)),a=!a),a&&ct&&Ps(i),yv(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=GA(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=GA(i)}else r===27?(r=ct,$s(i.type)?(i=hm,hm=null,ct=i):ct=r):ct=Xt?zn(i.stateNode.nextSibling):null;return!0}function kr(){ct=Xt=null,Ue=!1}function Hd(){var i=Vs;return i!==null&&(gn===null?gn=i:gn.push.apply(gn,i),Vs=null),i}function yl(i){Vs===null?Vs=[i]:Vs.push(i)}var Yd=L(null),Ur=null,$i=null;function ks(i,r,a){ue(Yd,r._currentValue),r._currentValue=a}function Qi(i){i._currentValue=Yd.current,ee(Yd)}function Jd(i,r,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===a)break;i=i.return}}function Kd(i,r,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var S=g.child;_=_.firstContext;e:for(;_!==null;){var C=_;_=g;for(var N=0;N<r.length;N++)if(C.context===r[N]){_.lanes|=a,C=_.alternate,C!==null&&(C.lanes|=a),Jd(_.return,a,i),u||(S=null);break e}_=C.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(s(341));S.lanes|=a,_=S.alternate,_!==null&&(_.lanes|=a),Jd(S,a,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Ho(i,r,a,u){i=null;for(var g=r,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var C=g.type;En(g.pendingProps.value,S.value)||(i!==null?i.push(C):i=[C])}}else if(g===Oe.current){if(S=g.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Hl):i=[Hl])}g=g.return}i!==null&&Kd(r,i,a,u),r.flags|=262144}function Nc(i){for(i=i.firstContext;i!==null;){if(!En(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Lr(i){Ur=i,$i=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Zt(i){return _v(Ur,i)}function Vc(i,r){return Ur===null&&Lr(i),_v(i,r)}function _v(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},$i===null){if(i===null)throw Error(s(308));$i=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else $i=$i.next=r;return a}var xV=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},MV=n.unstable_scheduleCallback,DV=n.unstable_NormalPriority,Nt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $d(){return{controller:new xV,data:new Map,refCount:0}}function _l(i){i.refCount--,i.refCount===0&&MV(DV,function(){i.controller.abort()})}var Tl=null,Qd=0,Yo=0,Jo=null;function NV(i,r){if(Tl===null){var a=Tl=[];Qd=0,Yo=Wp(),Jo={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Qd++,r.then(Tv,Tv),r}function Tv(){if(--Qd===0&&Tl!==null){Jo!==null&&(Jo.status="fulfilled");var i=Tl;Tl=null,Yo=0,Jo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function VV(i,r){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<a.length;g++)(0,a[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Ev=$.S;$.S=function(i,r){iA=an(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&NV(i,r),Ev!==null&&Ev(i,r)};var qr=L(null);function Xd(){var i=qr.current;return i!==null?i:rt.pooledCache}function Pc(i,r){r===null?ue(qr,qr.current):ue(qr,r.pool)}function vv(){var i=Xd();return i===null?null:{parent:Nt._currentValue,pool:i}}var Ko=Error(s(460)),Zd=Error(s(474)),kc=Error(s(542)),Uc={then:function(){}};function Av(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Sv(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(ei,ei),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Cv(i),i;default:if(typeof r.status=="string")r.then(ei,ei);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Cv(i),i}throw Br=r,Ko}}function Or(i){try{var r=i._init;return r(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Br=a,Ko):a}}var Br=null;function wv(){if(Br===null)throw Error(s(459));var i=Br;return Br=null,i}function Cv(i){if(i===Ko||i===kc)throw Error(s(483))}var $o=null,El=0;function Lc(i){var r=El;return El+=1,$o===null&&($o=[]),Sv($o,i,r)}function vl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function qc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Rv(i){function r(O,U){if(i){var G=O.deletions;G===null?(O.deletions=[U],O.flags|=16):G.push(U)}}function a(O,U){if(!i)return null;for(;U!==null;)r(O,U),U=U.sibling;return null}function u(O){for(var U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function g(O,U){return O=Ji(O,U),O.index=0,O.sibling=null,O}function _(O,U,G){return O.index=G,i?(G=O.alternate,G!==null?(G=G.index,G<U?(O.flags|=67108866,U):G):(O.flags|=67108866,U)):(O.flags|=1048576,U)}function S(O){return i&&O.alternate===null&&(O.flags|=67108866),O}function C(O,U,G,Z){return U===null||U.tag!==6?(U=Od(G,O.mode,Z),U.return=O,U):(U=g(U,G),U.return=O,U)}function N(O,U,G,Z){var _e=G.type;return _e===B?Q(O,U,G.props.children,Z,G.key):U!==null&&(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===I&&Or(_e)===U.type)?(U=g(U,G.props),vl(U,G),U.return=O,U):(U=Mc(G.type,G.key,G.props,null,O.mode,Z),vl(U,G),U.return=O,U)}function F(O,U,G,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Bd(G,O.mode,Z),U.return=O,U):(U=g(U,G.children||[]),U.return=O,U)}function Q(O,U,G,Z,_e){return U===null||U.tag!==7?(U=Pr(G,O.mode,Z,_e),U.return=O,U):(U=g(U,G),U.return=O,U)}function W(O,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Od(""+U,O.mode,G),U.return=O,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return G=Mc(U.type,U.key,U.props,null,O.mode,G),vl(G,U),G.return=O,G;case k:return U=Bd(U,O.mode,G),U.return=O,U;case I:return U=Or(U),W(O,U,G)}if(gt(U)||q(U))return U=Pr(U,O.mode,G,null),U.return=O,U;if(typeof U.then=="function")return W(O,Lc(U),G);if(U.$$typeof===X)return W(O,Vc(O,U),G);qc(O,U)}return null}function Y(O,U,G,Z){var _e=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:C(O,U,""+G,Z);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return G.key===_e?N(O,U,G,Z):null;case k:return G.key===_e?F(O,U,G,Z):null;case I:return G=Or(G),Y(O,U,G,Z)}if(gt(G)||q(G))return _e!==null?null:Q(O,U,G,Z,null);if(typeof G.then=="function")return Y(O,U,Lc(G),Z);if(G.$$typeof===X)return Y(O,U,Vc(O,G),Z);qc(O,G)}return null}function K(O,U,G,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return O=O.get(G)||null,C(U,O,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return O=O.get(Z.key===null?G:Z.key)||null,N(U,O,Z,_e);case k:return O=O.get(Z.key===null?G:Z.key)||null,F(U,O,Z,_e);case I:return Z=Or(Z),K(O,U,G,Z,_e)}if(gt(Z)||q(Z))return O=O.get(G)||null,Q(U,O,Z,_e,null);if(typeof Z.then=="function")return K(O,U,G,Lc(Z),_e);if(Z.$$typeof===X)return K(O,U,G,Vc(U,Z),_e);qc(U,Z)}return null}function pe(O,U,G,Z){for(var _e=null,Ge=null,ge=U,xe=U=0,ke=null;ge!==null&&xe<G.length;xe++){ge.index>xe?(ke=ge,ge=null):ke=ge.sibling;var Fe=Y(O,ge,G[xe],Z);if(Fe===null){ge===null&&(ge=ke);break}i&&ge&&Fe.alternate===null&&r(O,ge),U=_(Fe,U,xe),Ge===null?_e=Fe:Ge.sibling=Fe,Ge=Fe,ge=ke}if(xe===G.length)return a(O,ge),Ue&&Ki(O,xe),_e;if(ge===null){for(;xe<G.length;xe++)ge=W(O,G[xe],Z),ge!==null&&(U=_(ge,U,xe),Ge===null?_e=ge:Ge.sibling=ge,Ge=ge);return Ue&&Ki(O,xe),_e}for(ge=u(ge);xe<G.length;xe++)ke=K(ge,O,xe,G[xe],Z),ke!==null&&(i&&ke.alternate!==null&&ge.delete(ke.key===null?xe:ke.key),U=_(ke,U,xe),Ge===null?_e=ke:Ge.sibling=ke,Ge=ke);return i&&ge.forEach(function(js){return r(O,js)}),Ue&&Ki(O,xe),_e}function Ee(O,U,G,Z){if(G==null)throw Error(s(151));for(var _e=null,Ge=null,ge=U,xe=U=0,ke=null,Fe=G.next();ge!==null&&!Fe.done;xe++,Fe=G.next()){ge.index>xe?(ke=ge,ge=null):ke=ge.sibling;var js=Y(O,ge,Fe.value,Z);if(js===null){ge===null&&(ge=ke);break}i&&ge&&js.alternate===null&&r(O,ge),U=_(js,U,xe),Ge===null?_e=js:Ge.sibling=js,Ge=js,ge=ke}if(Fe.done)return a(O,ge),Ue&&Ki(O,xe),_e;if(ge===null){for(;!Fe.done;xe++,Fe=G.next())Fe=W(O,Fe.value,Z),Fe!==null&&(U=_(Fe,U,xe),Ge===null?_e=Fe:Ge.sibling=Fe,Ge=Fe);return Ue&&Ki(O,xe),_e}for(ge=u(ge);!Fe.done;xe++,Fe=G.next())Fe=K(ge,O,xe,Fe.value,Z),Fe!==null&&(i&&Fe.alternate!==null&&ge.delete(Fe.key===null?xe:Fe.key),U=_(Fe,U,xe),Ge===null?_e=Fe:Ge.sibling=Fe,Ge=Fe);return i&&ge.forEach(function(HP){return r(O,HP)}),Ue&&Ki(O,xe),_e}function nt(O,U,G,Z){if(typeof G=="object"&&G!==null&&G.type===B&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case x:e:{for(var _e=G.key;U!==null;){if(U.key===_e){if(_e=G.type,_e===B){if(U.tag===7){a(O,U.sibling),Z=g(U,G.props.children),Z.return=O,O=Z;break e}}else if(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===I&&Or(_e)===U.type){a(O,U.sibling),Z=g(U,G.props),vl(Z,G),Z.return=O,O=Z;break e}a(O,U);break}else r(O,U);U=U.sibling}G.type===B?(Z=Pr(G.props.children,O.mode,Z,G.key),Z.return=O,O=Z):(Z=Mc(G.type,G.key,G.props,null,O.mode,Z),vl(Z,G),Z.return=O,O=Z)}return S(O);case k:e:{for(_e=G.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(O,U.sibling),Z=g(U,G.children||[]),Z.return=O,O=Z;break e}else{a(O,U);break}else r(O,U);U=U.sibling}Z=Bd(G,O.mode,Z),Z.return=O,O=Z}return S(O);case I:return G=Or(G),nt(O,U,G,Z)}if(gt(G))return pe(O,U,G,Z);if(q(G)){if(_e=q(G),typeof _e!="function")throw Error(s(150));return G=_e.call(G),Ee(O,U,G,Z)}if(typeof G.then=="function")return nt(O,U,Lc(G),Z);if(G.$$typeof===X)return nt(O,U,Vc(O,G),Z);qc(O,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(O,U.sibling),Z=g(U,G),Z.return=O,O=Z):(a(O,U),Z=Od(G,O.mode,Z),Z.return=O,O=Z),S(O)):a(O,U)}return function(O,U,G,Z){try{El=0;var _e=nt(O,U,G,Z);return $o=null,_e}catch(ge){if(ge===Ko||ge===kc)throw ge;var Ge=vn(29,ge,null,O.mode);return Ge.lanes=Z,Ge.return=O,Ge}finally{}}}var zr=Rv(!0),Iv=Rv(!1),Us=!1;function Wd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ls(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function qs(i,r,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=xc(i),cv(i,null,a),r}return bc(i,u,r,a),xc(i)}function Al(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Qa(i,a)}}function ep(i,r){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=S:_=_.next=S,a=a.next}while(a!==null);_===null?g=_=r:_=_.next=r}else g=_=r;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var tp=!1;function Sl(){if(tp){var i=Jo;if(i!==null)throw i}}function wl(i,r,a,u){tp=!1;var g=i.updateQueue;Us=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var N=C,F=N.next;N.next=null,S===null?_=F:S.next=F,S=N;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,C=Q.lastBaseUpdate,C!==S&&(C===null?Q.firstBaseUpdate=F:C.next=F,Q.lastBaseUpdate=N))}if(_!==null){var W=g.baseState;S=0,Q=F=N=null,C=_;do{var Y=C.lane&-536870913,K=Y!==C.lane;if(K?(Pe&Y)===Y:(u&Y)===Y){Y!==0&&Y===Yo&&(tp=!0),Q!==null&&(Q=Q.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var pe=i,Ee=C;Y=r;var nt=a;switch(Ee.tag){case 1:if(pe=Ee.payload,typeof pe=="function"){W=pe.call(nt,W,Y);break e}W=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ee.payload,Y=typeof pe=="function"?pe.call(nt,W,Y):pe,Y==null)break e;W=v({},W,Y);break e;case 2:Us=!0}}Y=C.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Q===null?(F=Q=K,N=W):Q=Q.next=K,S|=Y;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;K=C,C=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);Q===null&&(N=W),g.baseState=N,g.firstBaseUpdate=F,g.lastBaseUpdate=Q,_===null&&(g.shared.lanes=0),Fs|=S,i.lanes=S,i.memoizedState=W}}function bv(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function xv(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)bv(a[i],r)}var Qo=L(null),Oc=L(0);function Mv(i,r){i=ss,ue(Oc,i),ue(Qo,r),ss=i|r.baseLanes}function np(){ue(Oc,ss),ue(Qo,Qo.current)}function ip(){ss=Oc.current,ee(Qo),ee(Oc)}var An=L(null),Bn=null;function Os(i){var r=i.alternate;ue(At,At.current&1),ue(An,i),Bn===null&&(r===null||Qo.current!==null||r.memoizedState!==null)&&(Bn=i)}function sp(i){ue(At,At.current),ue(An,i),Bn===null&&(Bn=i)}function Dv(i){i.tag===22?(ue(At,At.current),ue(An,i),Bn===null&&(Bn=i)):Bs()}function Bs(){ue(At,At.current),ue(An,An.current)}function Sn(i){ee(An),Bn===i&&(Bn=null),ee(At)}var At=L(0);function Bc(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||cm(a)||fm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Xi=0,Ie=null,et=null,Vt=null,zc=!1,Xo=!1,Gr=!1,Gc=0,Cl=0,Zo=null,PV=0;function yt(){throw Error(s(321))}function rp(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!En(i[a],r[a]))return!1;return!0}function op(i,r,a,u,g,_){return Xi=_,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=i===null||i.memoizedState===null?p0:vp,Gr=!1,_=a(u,g),Gr=!1,Xo&&(_=Vv(r,a,u,g)),Nv(i),_}function Nv(i){$.H=bl;var r=et!==null&&et.next!==null;if(Xi=0,Vt=et=Ie=null,zc=!1,Cl=0,Zo=null,r)throw Error(s(300));i===null||Pt||(i=i.dependencies,i!==null&&Nc(i)&&(Pt=!0))}function Vv(i,r,a,u){Ie=i;var g=0;do{if(Xo&&(Zo=null),Cl=0,Xo=!1,25<=g)throw Error(s(301));if(g+=1,Vt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=m0,_=r(a,u)}while(Xo);return _}function kV(){var i=$.H,r=i.useState()[0];return r=typeof r.then=="function"?Rl(r):r,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(Ie.flags|=1024),r}function ap(){var i=Gc!==0;return Gc=0,i}function lp(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function up(i){if(zc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}zc=!1}Xi=0,Vt=et=Ie=null,Xo=!1,Cl=Gc=0,Zo=null}function un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ie.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function St(){if(et===null){var i=Ie.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var r=Vt===null?Ie.memoizedState:Vt.next;if(r!==null)Vt=r,et=i;else{if(i===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Vt===null?Ie.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function Fc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(i){var r=Cl;return Cl+=1,Zo===null&&(Zo=[]),i=Sv(Zo,i,r),r=Ie,(Vt===null?r.memoizedState:Vt.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?p0:vp),i}function Hc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Rl(i);if(i.$$typeof===X)return Zt(i)}throw Error(s(438,String(i)))}function cp(i){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Ie.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Fc(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),u=0;u<i;u++)a[u]=V;return r.index++,a}function Zi(i,r){return typeof r=="function"?r(i):r}function Yc(i){var r=St();return fp(r,et,i)}function fp(i,r,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}r.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{r=g.next;var C=S=null,N=null,F=r,Q=!1;do{var W=F.lane&-536870913;if(W!==F.lane?(Pe&W)===W:(Xi&W)===W){var Y=F.revertLane;if(Y===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),W===Yo&&(Q=!0);else if((Xi&Y)===Y){F=F.next,Y===Yo&&(Q=!0);continue}else W={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(C=N=W,S=_):N=N.next=W,Ie.lanes|=Y,Fs|=Y;W=F.action,Gr&&a(_,W),_=F.hasEagerState?F.eagerState:a(_,W)}else Y={lane:W,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(C=N=Y,S=_):N=N.next=Y,Ie.lanes|=W,Fs|=W;F=F.next}while(F!==null&&F!==r);if(N===null?S=_:N.next=C,!En(_,i.memoizedState)&&(Pt=!0,Q&&(a=Jo,a!==null)))throw a;i.memoizedState=_,i.baseState=S,i.baseQueue=N,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function hp(i){var r=St(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=r.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do _=i(_,S.action),S=S.next;while(S!==g);En(_,r.memoizedState)||(Pt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,u]}function Pv(i,r,a){var u=Ie,g=St(),_=Ue;if(_){if(a===void 0)throw Error(s(407));a=a()}else a=r();var S=!En((et||g).memoizedState,a);if(S&&(g.memoizedState=a,Pt=!0),g=g.queue,mp(Lv.bind(null,u,g,i),[i]),g.getSnapshot!==r||S||Vt!==null&&Vt.memoizedState.tag&1){if(u.flags|=2048,Wo(9,{destroy:void 0},Uv.bind(null,u,g,a,r),null),rt===null)throw Error(s(349));_||(Xi&127)!==0||kv(u,r,a)}return a}function kv(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=Fc(),Ie.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function Uv(i,r,a,u){r.value=a,r.getSnapshot=u,qv(r)&&Ov(i)}function Lv(i,r,a){return a(function(){qv(r)&&Ov(i)})}function qv(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!En(i,a)}catch{return!0}}function Ov(i){var r=Vr(i,2);r!==null&&yn(r,i,2)}function dp(i){var r=un();if(typeof i=="function"){var a=i;if(i=a(),Gr){Mn(!0);try{a()}finally{Mn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:i},r}function Bv(i,r,a,u){return i.baseState=a,fp(i,et,typeof u=="function"?u:Zi)}function UV(i,r,a,u,g){if($c(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};$.T!==null?a(!0):_.isTransition=!1,u(_),a=r.pending,a===null?(_.next=r.pending=_,zv(r,_)):(_.next=a.next,r.pending=a.next=_)}}function zv(i,r){var a=r.action,u=r.payload,g=i.state;if(r.isTransition){var _=$.T,S={};$.T=S;try{var C=a(g,u),N=$.S;N!==null&&N(S,C),Gv(i,r,C)}catch(F){pp(i,r,F)}finally{_!==null&&S.types!==null&&(_.types=S.types),$.T=_}}else try{_=a(g,u),Gv(i,r,_)}catch(F){pp(i,r,F)}}function Gv(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Fv(i,r,u)},function(u){return pp(i,r,u)}):Fv(i,r,a)}function Fv(i,r,a){r.status="fulfilled",r.value=a,Hv(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,zv(i,a)))}function pp(i,r,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Hv(r),r=r.next;while(r!==u)}i.action=null}function Hv(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Yv(i,r){return r}function Jv(i,r){if(Ue){var a=rt.formState;if(a!==null){e:{var u=Ie;if(Ue){if(ct){t:{for(var g=ct,_=On;g.nodeType!==8;){if(!_){g=null;break t}if(g=zn(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){ct=zn(g.nextSibling),u=g.data==="F!";break e}}Ps(u)}u=!1}u&&(r=a[0])}}return a=un(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yv,lastRenderedState:r},a.queue=u,a=f0.bind(null,Ie,u),u.dispatch=a,u=dp(!1),_=Ep.bind(null,Ie,!1,u.queue),u=un(),g={state:r,dispatch:null,action:i,pending:null},u.queue=g,a=UV.bind(null,Ie,g,_,a),g.dispatch=a,u.memoizedState=i,[r,a,!1]}function Kv(i){var r=St();return $v(r,et,i)}function $v(i,r,a){if(r=fp(i,r,Yv)[0],i=Yc(Zi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Rl(r)}catch(S){throw S===Ko?kc:S}else u=r;r=St();var g=r.queue,_=g.dispatch;return a!==r.memoizedState&&(Ie.flags|=2048,Wo(9,{destroy:void 0},LV.bind(null,g,a),null)),[u,_,i]}function LV(i,r){i.action=r}function Qv(i){var r=St(),a=et;if(a!==null)return $v(r,a,i);St(),r=r.memoizedState,a=St();var u=a.queue.dispatch;return a.memoizedState=i,[r,u,!1]}function Wo(i,r,a,u){return i={tag:i,create:a,deps:u,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=Fc(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,r.lastEffect=i),i}function Xv(){return St().memoizedState}function Jc(i,r,a,u){var g=un();Ie.flags|=i,g.memoizedState=Wo(1|r,{destroy:void 0},a,u===void 0?null:u)}function Kc(i,r,a,u){var g=St();u=u===void 0?null:u;var _=g.memoizedState.inst;et!==null&&u!==null&&rp(u,et.memoizedState.deps)?g.memoizedState=Wo(r,_,a,u):(Ie.flags|=i,g.memoizedState=Wo(1|r,_,a,u))}function Zv(i,r){Jc(8390656,8,i,r)}function mp(i,r){Kc(2048,8,i,r)}function qV(i){Ie.flags|=4;var r=Ie.updateQueue;if(r===null)r=Fc(),Ie.updateQueue=r,r.events=[i];else{var a=r.events;a===null?r.events=[i]:a.push(i)}}function Wv(i){var r=St().memoizedState;return qV({ref:r,nextImpl:i}),function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function jv(i,r){return Kc(4,2,i,r)}function e0(i,r){return Kc(4,4,i,r)}function t0(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function n0(i,r,a){a=a!=null?a.concat([i]):null,Kc(4,4,t0.bind(null,r,i),a)}function gp(){}function i0(i,r){var a=St();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&rp(r,u[1])?u[0]:(a.memoizedState=[i,r],i)}function s0(i,r){var a=St();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&rp(r,u[1]))return u[0];if(u=i(),Gr){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[u,r],u}function yp(i,r,a){return a===void 0||(Xi&1073741824)!==0&&(Pe&261930)===0?i.memoizedState=r:(i.memoizedState=a,i=rA(),Ie.lanes|=i,Fs|=i,a)}function r0(i,r,a,u){return En(a,r)?a:Qo.current!==null?(i=yp(i,a,u),En(i,r)||(Pt=!0),i):(Xi&42)===0||(Xi&1073741824)!==0&&(Pe&261930)===0?(Pt=!0,i.memoizedState=a):(i=rA(),Ie.lanes|=i,Fs|=i,r)}function o0(i,r,a,u,g){var _=ae.p;ae.p=_!==0&&8>_?_:8;var S=$.T,C={};$.T=C,Ep(i,!1,r,a);try{var N=g(),F=$.S;if(F!==null&&F(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Q=VV(N,u);Il(i,r,Q,Rn(i))}else Il(i,r,u,Rn(i))}catch(W){Il(i,r,{then:function(){},status:"rejected",reason:W},Rn())}finally{ae.p=_,S!==null&&C.types!==null&&(S.types=C.types),$.T=S}}function OV(){}function _p(i,r,a,u){if(i.tag!==5)throw Error(s(476));var g=a0(i).queue;o0(i,g,r,Te,a===null?OV:function(){return l0(i),a(u)})}function a0(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:Te},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function l0(i){var r=a0(i);r.next===null&&(r=i.alternate.memoizedState),Il(i,r.next.queue,{},Rn())}function Tp(){return Zt(Hl)}function u0(){return St().memoizedState}function c0(){return St().memoizedState}function BV(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Rn();i=Ls(a);var u=qs(r,i,a);u!==null&&(yn(u,r,a),Al(u,r,a)),r={cache:$d()},i.payload=r;return}r=r.return}}function zV(i,r,a){var u=Rn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},$c(i)?h0(r,a):(a=Ld(i,r,a,u),a!==null&&(yn(a,i,u),d0(a,r,u)))}function f0(i,r,a){var u=Rn();Il(i,r,a,u)}function Il(i,r,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if($c(i))h0(r,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var S=r.lastRenderedState,C=_(S,a);if(g.hasEagerState=!0,g.eagerState=C,En(C,S))return bc(i,r,g,0),rt===null&&Ic(),!1}catch{}finally{}if(a=Ld(i,r,g,u),a!==null)return yn(a,i,u),d0(a,r,u),!0}return!1}function Ep(i,r,a,u){if(u={lane:2,revertLane:Wp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},$c(i)){if(r)throw Error(s(479))}else r=Ld(i,a,u,2),r!==null&&yn(r,i,2)}function $c(i){var r=i.alternate;return i===Ie||r!==null&&r===Ie}function h0(i,r){Xo=zc=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function d0(i,r,a){if((a&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,a|=u,r.lanes=a,Qa(i,a)}}var bl={readContext:Zt,use:Hc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};bl.useEffectEvent=yt;var p0={readContext:Zt,use:Hc,useCallback:function(i,r){return un().memoizedState=[i,r===void 0?null:r],i},useContext:Zt,useEffect:Zv,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Jc(4194308,4,t0.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Jc(4194308,4,i,r)},useInsertionEffect:function(i,r){Jc(4,2,i,r)},useMemo:function(i,r){var a=un();r=r===void 0?null:r;var u=i();if(Gr){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(i,r,a){var u=un();if(a!==void 0){var g=a(r);if(Gr){Mn(!0);try{a(r)}finally{Mn(!1)}}}else g=r;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=zV.bind(null,Ie,i),[u.memoizedState,i]},useRef:function(i){var r=un();return i={current:i},r.memoizedState=i},useState:function(i){i=dp(i);var r=i.queue,a=f0.bind(null,Ie,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:gp,useDeferredValue:function(i,r){var a=un();return yp(a,i,r)},useTransition:function(){var i=dp(!1);return i=o0.bind(null,Ie,i.queue,!0,!1),un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var u=Ie,g=un();if(Ue){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),rt===null)throw Error(s(349));(Pe&127)!==0||kv(u,r,a)}g.memoizedState=a;var _={value:a,getSnapshot:r};return g.queue=_,Zv(Lv.bind(null,u,_,i),[i]),u.flags|=2048,Wo(9,{destroy:void 0},Uv.bind(null,u,_,a,r),null),a},useId:function(){var i=un(),r=rt.identifierPrefix;if(Ue){var a=ki,u=Pi;a=(u&~(1<<32-Et(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Gc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=PV++,r="_"+r+"r_"+a.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Tp,useFormState:Jv,useActionState:Jv,useOptimistic:function(i){var r=un();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Ep.bind(null,Ie,!0,a),a.dispatch=r,[i,r]},useMemoCache:cp,useCacheRefresh:function(){return un().memoizedState=BV.bind(null,Ie)},useEffectEvent:function(i){var r=un(),a={impl:i};return r.memoizedState=a,function(){if((Je&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},vp={readContext:Zt,use:Hc,useCallback:i0,useContext:Zt,useEffect:mp,useImperativeHandle:n0,useInsertionEffect:jv,useLayoutEffect:e0,useMemo:s0,useReducer:Yc,useRef:Xv,useState:function(){return Yc(Zi)},useDebugValue:gp,useDeferredValue:function(i,r){var a=St();return r0(a,et.memoizedState,i,r)},useTransition:function(){var i=Yc(Zi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:Rl(i),r]},useSyncExternalStore:Pv,useId:u0,useHostTransitionStatus:Tp,useFormState:Kv,useActionState:Kv,useOptimistic:function(i,r){var a=St();return Bv(a,et,i,r)},useMemoCache:cp,useCacheRefresh:c0};vp.useEffectEvent=Wv;var m0={readContext:Zt,use:Hc,useCallback:i0,useContext:Zt,useEffect:mp,useImperativeHandle:n0,useInsertionEffect:jv,useLayoutEffect:e0,useMemo:s0,useReducer:hp,useRef:Xv,useState:function(){return hp(Zi)},useDebugValue:gp,useDeferredValue:function(i,r){var a=St();return et===null?yp(a,i,r):r0(a,et.memoizedState,i,r)},useTransition:function(){var i=hp(Zi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:Rl(i),r]},useSyncExternalStore:Pv,useId:u0,useHostTransitionStatus:Tp,useFormState:Qv,useActionState:Qv,useOptimistic:function(i,r){var a=St();return et!==null?Bv(a,et,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:cp,useCacheRefresh:c0};m0.useEffectEvent=Wv;function Ap(i,r,a,u){r=i.memoizedState,a=a(u,r),a=a==null?r:v({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Sp={enqueueSetState:function(i,r,a){i=i._reactInternals;var u=Rn(),g=Ls(u);g.payload=r,a!=null&&(g.callback=a),r=qs(i,g,u),r!==null&&(yn(r,i,u),Al(r,i,u))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var u=Rn(),g=Ls(u);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=qs(i,g,u),r!==null&&(yn(r,i,u),Al(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Rn(),u=Ls(a);u.tag=2,r!=null&&(u.callback=r),r=qs(i,u,a),r!==null&&(yn(r,i,a),Al(r,i,a))}};function g0(i,r,a,u,g,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,S):r.prototype&&r.prototype.isPureReactComponent?!pl(a,u)||!pl(g,_):!0}function y0(i,r,a,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==i&&Sp.enqueueReplaceState(r,r.state,null)}function Fr(i,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(i=i.defaultProps){a===r&&(a=v({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function _0(i){Rc(i)}function T0(i){console.error(i)}function E0(i){Rc(i)}function Qc(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function v0(i,r,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function wp(i,r,a){return a=Ls(a),a.tag=3,a.payload={element:null},a.callback=function(){Qc(i,r)},a}function A0(i){return i=Ls(i),i.tag=3,i}function S0(i,r,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){v0(r,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){v0(r,a,u),typeof g!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function GV(i,r,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&Ho(r,a,g,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return Bn===null?lf():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Uc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),Qp(i,u,g)),!1;case 22:return a.flags|=65536,u===Uc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),Qp(i,u,g)),!1}throw Error(s(435,a.tag))}return Qp(i,u,g),lf(),!1}if(Ue)return r=An.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==Fd&&(i=Error(s(422),{cause:u}),yl(Un(i,a)))):(u!==Fd&&(r=Error(s(423),{cause:u}),yl(Un(r,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Un(u,a),g=wp(i.stateNode,u,g),ep(i,g),_t!==4&&(_t=2)),!1;var _=Error(s(520),{cause:u});if(_=Un(_,a),Ul===null?Ul=[_]:Ul.push(_),_t!==4&&(_t=2),r===null)return!0;u=Un(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=wp(a.stateNode,u,i),ep(a,i),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Hs===null||!Hs.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=A0(g),S0(g,i,a,u),ep(a,g),!1}a=a.return}while(a!==null);return!1}var Cp=Error(s(461)),Pt=!1;function Wt(i,r,a,u){r.child=i===null?Iv(r,null,a,u):zr(r,i.child,a,u)}function w0(i,r,a,u,g){a=a.render;var _=r.ref;if("ref"in u){var S={};for(var C in u)C!=="ref"&&(S[C]=u[C])}else S=u;return Lr(r),u=op(i,r,a,S,_,g),C=ap(),i!==null&&!Pt?(lp(i,r,g),Wi(i,r,g)):(Ue&&C&&zd(r),r.flags|=1,Wt(i,r,u,g),r.child)}function C0(i,r,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!qd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,R0(i,r,_,u,g)):(i=Mc(a.type,null,u,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Vp(i,g)){var S=_.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(S,u)&&i.ref===r.ref)return Wi(i,r,g)}return r.flags|=1,i=Ji(_,u),i.ref=r.ref,i.return=r,r.child=i}function R0(i,r,a,u,g){if(i!==null){var _=i.memoizedProps;if(pl(_,u)&&i.ref===r.ref)if(Pt=!1,r.pendingProps=u=_,Vp(i,g))(i.flags&131072)!==0&&(Pt=!0);else return r.lanes=i.lanes,Wi(i,r,g)}return Rp(i,r,a,u,g)}function I0(i,r,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=r.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,r.child=null;return b0(i,r,_,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Pc(r,_!==null?_.cachePool:null),_!==null?Mv(r,_):np(),Dv(r);else return u=r.lanes=536870912,b0(i,r,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Pc(r,_.cachePool),Mv(r,_),Bs(),r.memoizedState=null):(i!==null&&Pc(r,null),np(),Bs());return Wt(i,r,g,a),r.child}function xl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function b0(i,r,a,u,g){var _=Xd();return _=_===null?null:{parent:Nt._currentValue,pool:_},r.memoizedState={baseLanes:a,cachePool:_},i!==null&&Pc(r,null),np(),Dv(r),i!==null&&Ho(i,r,u,!0),r.childLanes=g,null}function Xc(i,r){return r=Wc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function x0(i,r,a){return zr(r,i.child,null,a),i=Xc(r,r.pendingProps),i.flags|=2,Sn(r),r.memoizedState=null,i}function FV(i,r,a){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ue){if(u.mode==="hidden")return i=Xc(r,u),r.lanes=536870912,xl(null,i);if(sp(r),(i=ct)?(i=zA(i,On),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ns!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=hv(i),a.return=r,r.child=a,Xt=r,ct=null)):i=null,i===null)throw Ps(r);return r.lanes=536870912,null}return Xc(r,u)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(sp(r),g)if(r.flags&256)r.flags&=-257,r=x0(i,r,a);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Pt||Ho(i,r,a,!1),g=(a&i.childLanes)!==0,Pt||g){if(u=rt,u!==null&&(S=Xa(u,a),S!==0&&S!==_.retryLane))throw _.retryLane=S,Vr(i,S),yn(u,i,S),Cp;lf(),r=x0(i,r,a)}else i=_.treeContext,ct=zn(S.nextSibling),Xt=r,Ue=!0,Vs=null,On=!1,i!==null&&mv(r,i),r=Xc(r,u),r.flags|=4096;return r}return i=Ji(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Zc(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function Rp(i,r,a,u,g){return Lr(r),a=op(i,r,a,u,void 0,g),u=ap(),i!==null&&!Pt?(lp(i,r,g),Wi(i,r,g)):(Ue&&u&&zd(r),r.flags|=1,Wt(i,r,a,g),r.child)}function M0(i,r,a,u,g,_){return Lr(r),r.updateQueue=null,a=Vv(r,u,a,g),Nv(i),u=ap(),i!==null&&!Pt?(lp(i,r,_),Wi(i,r,_)):(Ue&&u&&zd(r),r.flags|=1,Wt(i,r,a,_),r.child)}function D0(i,r,a,u,g){if(Lr(r),r.stateNode===null){var _=Bo,S=a.contextType;typeof S=="object"&&S!==null&&(_=Zt(S)),_=new a(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Sp,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Wd(r),S=a.contextType,_.context=typeof S=="object"&&S!==null?Zt(S):Bo,_.state=r.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Ap(r,a,S,u),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&Sp.enqueueReplaceState(_,_.state,null),wl(r,u,_,g),Sl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var C=r.memoizedProps,N=Fr(a,C);_.props=N;var F=_.context,Q=a.contextType;S=Bo,typeof Q=="object"&&Q!==null&&(S=Zt(Q));var W=a.getDerivedStateFromProps;Q=typeof W=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||F!==S)&&y0(r,_,u,S),Us=!1;var Y=r.memoizedState;_.state=Y,wl(r,u,_,g),Sl(),F=r.memoizedState,C||Y!==F||Us?(typeof W=="function"&&(Ap(r,a,W,u),F=r.memoizedState),(N=Us||g0(r,a,N,u,Y,F,S))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=F),_.props=u,_.state=F,_.context=S,u=N):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,jd(i,r),S=r.memoizedProps,Q=Fr(a,S),_.props=Q,W=r.pendingProps,Y=_.context,F=a.contextType,N=Bo,typeof F=="object"&&F!==null&&(N=Zt(F)),C=a.getDerivedStateFromProps,(F=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==W||Y!==N)&&y0(r,_,u,N),Us=!1,Y=r.memoizedState,_.state=Y,wl(r,u,_,g),Sl();var K=r.memoizedState;S!==W||Y!==K||Us||i!==null&&i.dependencies!==null&&Nc(i.dependencies)?(typeof C=="function"&&(Ap(r,a,C,u),K=r.memoizedState),(Q=Us||g0(r,a,Q,u,Y,K,N)||i!==null&&i.dependencies!==null&&Nc(i.dependencies))?(F||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,K,N),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,K,N)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=K),_.props=u,_.state=K,_.context=N,u=Q):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,Zc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=zr(r,i.child,null,g),r.child=zr(r,null,a,g)):Wt(i,r,a,g),r.memoizedState=_.state,i=r.child):i=Wi(i,r,g),i}function N0(i,r,a,u){return kr(),r.flags|=256,Wt(i,r,a,u),r.child}var Ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bp(i){return{baseLanes:i,cachePool:vv()}}function xp(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=Cn),i}function V0(i,r,a){var u=r.pendingProps,g=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(At.current&2)!==0),S&&(g=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ue){if(g?Os(r):Bs(),(i=ct)?(i=zA(i,On),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ns!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=hv(i),a.return=r,r.child=a,Xt=r,ct=null)):i=null,i===null)throw Ps(r);return fm(i)?r.lanes=32:r.lanes=536870912,null}var C=u.children;return u=u.fallback,g?(Bs(),g=r.mode,C=Wc({mode:"hidden",children:C},g),u=Pr(u,g,a,null),C.return=r,u.return=r,C.sibling=u,r.child=C,u=r.child,u.memoizedState=bp(a),u.childLanes=xp(i,S,a),r.memoizedState=Ip,xl(null,u)):(Os(r),Mp(r,C))}var N=i.memoizedState;if(N!==null&&(C=N.dehydrated,C!==null)){if(_)r.flags&256?(Os(r),r.flags&=-257,r=Dp(i,r,a)):r.memoizedState!==null?(Bs(),r.child=i.child,r.flags|=128,r=null):(Bs(),C=u.fallback,g=r.mode,u=Wc({mode:"visible",children:u.children},g),C=Pr(C,g,a,null),C.flags|=2,u.return=r,C.return=r,u.sibling=C,r.child=u,zr(r,i.child,null,a),u=r.child,u.memoizedState=bp(a),u.childLanes=xp(i,S,a),r.memoizedState=Ip,r=xl(null,u));else if(Os(r),fm(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var F=S.dgst;S=F,u=Error(s(419)),u.stack="",u.digest=S,yl({value:u,source:null,stack:null}),r=Dp(i,r,a)}else if(Pt||Ho(i,r,a,!1),S=(a&i.childLanes)!==0,Pt||S){if(S=rt,S!==null&&(u=Xa(S,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Vr(i,u),yn(S,i,u),Cp;cm(C)||lf(),r=Dp(i,r,a)}else cm(C)?(r.flags|=192,r.child=i.child,r=null):(i=N.treeContext,ct=zn(C.nextSibling),Xt=r,Ue=!0,Vs=null,On=!1,i!==null&&mv(r,i),r=Mp(r,u.children),r.flags|=4096);return r}return g?(Bs(),C=u.fallback,g=r.mode,N=i.child,F=N.sibling,u=Ji(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,F!==null?C=Ji(F,C):(C=Pr(C,g,a,null),C.flags|=2),C.return=r,u.return=r,u.sibling=C,r.child=u,xl(null,u),u=r.child,C=i.child.memoizedState,C===null?C=bp(a):(g=C.cachePool,g!==null?(N=Nt._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=vv(),C={baseLanes:C.baseLanes|a,cachePool:g}),u.memoizedState=C,u.childLanes=xp(i,S,a),r.memoizedState=Ip,xl(i.child,u)):(Os(r),a=i.child,i=a.sibling,a=Ji(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=a,r.memoizedState=null,a)}function Mp(i,r){return r=Wc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Wc(i,r){return i=vn(22,i,null,r),i.lanes=0,i}function Dp(i,r,a){return zr(r,i.child,null,a),i=Mp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function P0(i,r,a){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Jd(i.return,r,a)}function Np(i,r,a,u,g,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=_)}function k0(i,r,a){var u=r.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var S=At.current,C=(S&2)!==0;if(C?(S=S&1|2,r.flags|=128):S&=1,ue(At,S),Wt(i,r,u,a),u=Ue?gl:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&P0(i,a,r);else if(i.tag===19)P0(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=r.child,g=null;a!==null;)i=a.alternate,i!==null&&Bc(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=r.child,r.child=null):(g=a.sibling,a.sibling=null),Np(r,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&Bc(i)===null){r.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Np(r,!0,a,null,_,u);break;case"together":Np(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Wi(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),Fs|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Ho(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=Ji(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=Ji(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function Vp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Nc(i)))}function HV(i,r,a){switch(r.tag){case 3:Lt(r,r.stateNode.containerInfo),ks(r,Nt,i.memoizedState.cache),kr();break;case 27:case 5:mr(r);break;case 4:Lt(r,r.stateNode.containerInfo);break;case 10:ks(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,sp(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Os(r),r.flags|=128,null):(a&r.child.childLanes)!==0?V0(i,r,a):(Os(r),i=Wi(i,r,a),i!==null?i.sibling:null);Os(r);break;case 19:var g=(i.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(Ho(i,r,a,!1),u=(a&r.childLanes)!==0),g){if(u)return k0(i,r,a);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(At,At.current),u)break;return null;case 22:return r.lanes=0,I0(i,r,a,r.pendingProps);case 24:ks(r,Nt,i.memoizedState.cache)}return Wi(i,r,a)}function U0(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Pt=!0;else{if(!Vp(i,a)&&(r.flags&128)===0)return Pt=!1,HV(i,r,a);Pt=(i.flags&131072)!==0}else Pt=!1,Ue&&(r.flags&1048576)!==0&&pv(r,gl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Or(r.elementType),r.type=i,typeof i=="function")qd(i)?(u=Fr(i,u),r.tag=1,r=D0(null,r,i,u,a)):(r.tag=0,r=Rp(null,r,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===oe){r.tag=11,r=w0(null,r,i,u,a);break e}else if(g===M){r.tag=14,r=C0(null,r,i,u,a);break e}}throw r=st(i)||i,Error(s(306,r,""))}}return r;case 0:return Rp(i,r,r.type,r.pendingProps,a);case 1:return u=r.type,g=Fr(u,r.pendingProps),D0(i,r,u,g,a);case 3:e:{if(Lt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;g=_.element,jd(i,r),wl(r,u,null,a);var S=r.memoizedState;if(u=S.cache,ks(r,Nt,u),u!==_.cache&&Kd(r,[Nt],a,!0),Sl(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=N0(i,r,u,a);break e}else if(u!==g){g=Un(Error(s(424)),r),yl(g),r=N0(i,r,u,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=zn(i.firstChild),Xt=r,Ue=!0,Vs=null,On=!0,a=Iv(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(kr(),u===g){r=Wi(i,r,a);break e}Wt(i,r,u,a)}r=r.child}return r;case 26:return Zc(i,r),i===null?(a=KA(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ue||(a=r.type,i=r.pendingProps,u=mf(be.current).createElement(a),u[xt]=r,u[Gt]=i,jt(u,a,i),Mt(u),r.stateNode=u):r.memoizedState=KA(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return mr(r),i===null&&Ue&&(u=r.stateNode=HA(r.type,r.pendingProps,be.current),Xt=r,On=!0,g=ct,$s(r.type)?(hm=g,ct=zn(u.firstChild)):ct=g),Wt(i,r,r.pendingProps.children,a),Zc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ue&&((g=u=ct)&&(u=EP(u,r.type,r.pendingProps,On),u!==null?(r.stateNode=u,Xt=r,ct=zn(u.firstChild),On=!1,g=!0):g=!1),g||Ps(r)),mr(r),g=r.type,_=r.pendingProps,S=i!==null?i.memoizedProps:null,u=_.children,am(g,_)?u=null:S!==null&&am(g,S)&&(r.flags|=32),r.memoizedState!==null&&(g=op(i,r,kV,null,null,a),Hl._currentValue=g),Zc(i,r),Wt(i,r,u,a),r.child;case 6:return i===null&&Ue&&((i=a=ct)&&(a=vP(a,r.pendingProps,On),a!==null?(r.stateNode=a,Xt=r,ct=null,i=!0):i=!1),i||Ps(r)),null;case 13:return V0(i,r,a);case 4:return Lt(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=zr(r,null,u,a):Wt(i,r,u,a),r.child;case 11:return w0(i,r,r.type,r.pendingProps,a);case 7:return Wt(i,r,r.pendingProps,a),r.child;case 8:return Wt(i,r,r.pendingProps.children,a),r.child;case 12:return Wt(i,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,ks(r,r.type,u.value),Wt(i,r,u.children,a),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,Lr(r),g=Zt(g),u=u(g),r.flags|=1,Wt(i,r,u,a),r.child;case 14:return C0(i,r,r.type,r.pendingProps,a);case 15:return R0(i,r,r.type,r.pendingProps,a);case 19:return k0(i,r,a);case 31:return FV(i,r,a);case 22:return I0(i,r,a,r.pendingProps);case 24:return Lr(r),u=Zt(Nt),i===null?(g=Xd(),g===null&&(g=rt,_=$d(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),r.memoizedState={parent:u,cache:g},Wd(r),ks(r,Nt,g)):((i.lanes&a)!==0&&(jd(i,r),wl(r,null,null,a),Sl()),g=i.memoizedState,_=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),ks(r,Nt,u)):(u=_.cache,ks(r,Nt,u),u!==g.cache&&Kd(r,[Nt],a,!0))),Wt(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ji(i){i.flags|=4}function Pp(i,r,a,u,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(uA())i.flags|=8192;else throw Br=Uc,Zd}else i.flags&=-16777217}function L0(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!WA(r))if(uA())i.flags|=8192;else throw Br=Uc,Zd}function jc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?rc():536870912,i.lanes|=r,na|=r)}function Ml(i,r){if(!Ue)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ft(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(r)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,r}function YV(i,r,a){var u=r.pendingProps;switch(Gd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return a=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Qi(Nt),ht(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Fo(r)?ji(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hd())),ft(r),null;case 26:var g=r.type,_=r.memoizedState;return i===null?(ji(r),_!==null?(ft(r),L0(r,_)):(ft(r),Pp(r,g,null,u,a))):_?_!==i.memoizedState?(ji(r),ft(r),L0(r,_)):(ft(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&ji(r),ft(r),Pp(r,g,i,u,a)),null;case 27:if(vo(r),a=be.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ji(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ft(r),null}i=de.current,Fo(r)?gv(r):(i=HA(g,u,a),r.stateNode=i,ji(r))}return ft(r),null;case 5:if(vo(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&ji(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ft(r),null}if(_=de.current,Fo(r))gv(r);else{var S=mf(be.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}_[xt]=r,_[Gt]=u;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=_;e:switch(jt(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ji(r)}}return ft(r),Pp(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,a),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&ji(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=be.current,Fo(r)){if(i=r.stateNode,a=r.memoizedProps,u=null,g=Xt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[xt]=r,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||VA(i.nodeValue,a)),i||Ps(r,!0)}else i=mf(i).createTextNode(u),i[xt]=r,r.stateNode=i}return ft(r),null;case 31:if(a=r.memoizedState,i===null||i.memoizedState!==null){if(u=Fo(r),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[xt]=r}else kr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),i=!1}else a=Hd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return r.flags&256?(Sn(r),r):(Sn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ft(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Fo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[xt]=r}else kr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),g=!1}else g=Hd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Sn(r),r):(Sn(r),null)}return Sn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(r.child.flags|=8192),jc(r,r.updateQueue),ft(r),null);case 4:return ht(),i===null&&nm(r.stateNode.containerInfo),ft(r),null;case 10:return Qi(r.type),ft(r),null;case 19:if(ee(At),u=r.memoizedState,u===null)return ft(r),null;if(g=(r.flags&128)!==0,_=u.rendering,_===null)if(g)Ml(u,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=Bc(i),_!==null){for(r.flags|=128,Ml(u,!1),i=_.updateQueue,r.updateQueue=i,jc(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)fv(a,i),a=a.sibling;return ue(At,At.current&1|2),Ue&&Ki(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&an()>rf&&(r.flags|=128,g=!0,Ml(u,!1),r.lanes=4194304)}else{if(!g)if(i=Bc(_),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,jc(r,i),Ml(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ue)return ft(r),null}else 2*an()-u.renderingStartTime>rf&&a!==536870912&&(r.flags|=128,g=!0,Ml(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=an(),i.sibling=null,a=At.current,ue(At,g?a&1|2:a&1),Ue&&Ki(r,u.treeForkCount),i):(ft(r),null);case 22:case 23:return Sn(r),ip(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),a=r.updateQueue,a!==null&&jc(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),i!==null&&ee(qr),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Qi(Nt),ft(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function JV(i,r){switch(Gd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Qi(Nt),ht(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return vo(r),null;case 31:if(r.memoizedState!==null){if(Sn(r),r.alternate===null)throw Error(s(340));kr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Sn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));kr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return ee(At),null;case 4:return ht(),null;case 10:return Qi(r.type),null;case 22:case 23:return Sn(r),ip(),i!==null&&ee(qr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Qi(Nt),null;case 25:return null;default:return null}}function q0(i,r){switch(Gd(r),r.tag){case 3:Qi(Nt),ht();break;case 26:case 27:case 5:vo(r);break;case 4:ht();break;case 31:r.memoizedState!==null&&Sn(r);break;case 13:Sn(r);break;case 19:ee(At);break;case 10:Qi(r.type);break;case 22:case 23:Sn(r),ip(),i!==null&&ee(qr);break;case 24:Qi(Nt)}}function Dl(i,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,S=a.inst;u=_(),S.destroy=u}a=a.next}while(a!==g)}}catch(C){We(r,r.return,C)}}function zs(i,r,a){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var S=u.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,g=r;var N=a,F=C;try{F()}catch(Q){We(g,N,Q)}}}u=u.next}while(u!==_)}}catch(Q){We(r,r.return,Q)}}function O0(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{xv(r,a)}catch(u){We(i,i.return,u)}}}function B0(i,r,a){a.props=Fr(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){We(i,r,u)}}function Nl(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){We(i,r,g)}}function Ui(i,r){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){We(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){We(i,r,g)}else a.current=null}function z0(i){var r=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){We(i,i.return,g)}}function kp(i,r,a){try{var u=i.stateNode;pP(u,i.type,a,r),u[Gt]=r}catch(g){We(i,i.return,g)}}function G0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$s(i.type)||i.tag===4}function Up(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||G0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$s(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lp(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ei));else if(u!==4&&(u===27&&$s(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(Lp(i,r,a),i=i.sibling;i!==null;)Lp(i,r,a),i=i.sibling}function ef(i,r,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(u!==4&&(u===27&&$s(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(ef(i,r,a),i=i.sibling;i!==null;)ef(i,r,a),i=i.sibling}function F0(i){var r=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);jt(r,u,a),r[xt]=i,r[Gt]=a}catch(_){We(i,i.return,_)}}var es=!1,kt=!1,qp=!1,H0=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function KV(i,r){if(i=i.containerInfo,rm=Af,i=nv(i),Dd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var S=0,C=-1,N=-1,F=0,Q=0,W=i,Y=null;t:for(;;){for(var K;W!==a||g!==0&&W.nodeType!==3||(C=S+g),W!==_||u!==0&&W.nodeType!==3||(N=S+u),W.nodeType===3&&(S+=W.nodeValue.length),(K=W.firstChild)!==null;)Y=W,W=K;for(;;){if(W===i)break t;if(Y===a&&++F===g&&(C=S),Y===_&&++Q===u&&(N=S),(K=W.nextSibling)!==null)break;W=Y,Y=W.parentNode}W=K}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:i,selectionRange:a},Af=!1,Ht=r;Ht!==null;)if(r=Ht,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Ht=i;else for(;Ht!==null;){switch(r=Ht,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=r,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var pe=Fr(a.type,g);i=u.getSnapshotBeforeUpdate(pe,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){We(a,a.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)um(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":um(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Ht=i;break}Ht=r.return}}function Y0(i,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:ns(i,a),u&4&&Dl(5,a);break;case 1:if(ns(i,a),u&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(S){We(a,a.return,S)}else{var g=Fr(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){We(a,a.return,S)}}u&64&&O0(a),u&512&&Nl(a,a.return);break;case 3:if(ns(i,a),u&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{xv(i,r)}catch(S){We(a,a.return,S)}}break;case 27:r===null&&u&4&&F0(a);case 26:case 5:ns(i,a),r===null&&u&4&&z0(a),u&512&&Nl(a,a.return);break;case 12:ns(i,a);break;case 31:ns(i,a),u&4&&$0(i,a);break;case 13:ns(i,a),u&4&&Q0(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=nP.bind(null,a),AP(i,a))));break;case 22:if(u=a.memoizedState!==null||es,!u){r=r!==null&&r.memoizedState!==null||kt,g=es;var _=kt;es=u,(kt=r)&&!_?is(i,a,(a.subtreeFlags&8772)!==0):ns(i,a),es=g,kt=_}break;case 30:break;default:ns(i,a)}}function J0(i){var r=i.alternate;r!==null&&(i.alternate=null,J0(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Ro(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,dn=!1;function ts(i,r,a){for(a=a.child;a!==null;)K0(i,r,a),a=a.sibling}function K0(i,r,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:kt||Ui(a,r),ts(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Ui(a,r);var u=pt,g=dn;$s(a.type)&&(pt=a.stateNode,dn=!1),ts(i,r,a),zl(a.stateNode),pt=u,dn=g;break;case 5:kt||Ui(a,r);case 6:if(u=pt,g=dn,pt=null,ts(i,r,a),pt=u,dn=g,pt!==null)if(dn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(_){We(a,r,_)}else try{pt.removeChild(a.stateNode)}catch(_){We(a,r,_)}break;case 18:pt!==null&&(dn?(i=pt,OA(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ca(i)):OA(pt,a.stateNode));break;case 4:u=pt,g=dn,pt=a.stateNode.containerInfo,dn=!0,ts(i,r,a),pt=u,dn=g;break;case 0:case 11:case 14:case 15:zs(2,a,r),kt||zs(4,a,r),ts(i,r,a);break;case 1:kt||(Ui(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&B0(a,r,u)),ts(i,r,a);break;case 21:ts(i,r,a);break;case 22:kt=(u=kt)||a.memoizedState!==null,ts(i,r,a),kt=u;break;default:ts(i,r,a)}}function $0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ca(i)}catch(a){We(r,r.return,a)}}}function Q0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ca(i)}catch(a){We(r,r.return,a)}}function $V(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new H0),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new H0),r;default:throw Error(s(435,i.tag))}}function tf(i,r){var a=$V(i);r.forEach(function(u){if(!a.has(u)){a.add(u);var g=iP.bind(null,i,u);u.then(g,g)}})}function pn(i,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,S=r,C=S;e:for(;C!==null;){switch(C.tag){case 27:if($s(C.type)){pt=C.stateNode,dn=!1;break e}break;case 5:pt=C.stateNode,dn=!1;break e;case 3:case 4:pt=C.stateNode.containerInfo,dn=!0;break e}C=C.return}if(pt===null)throw Error(s(160));K0(_,S,g),pt=null,dn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)X0(r,i),r=r.sibling}var oi=null;function X0(i,r){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pn(r,i),mn(i),u&4&&(zs(3,i,i.return),Dl(3,i),zs(5,i,i.return));break;case 1:pn(r,i),mn(i),u&512&&(kt||a===null||Ui(a,a.return)),u&64&&es&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=oi;if(pn(r,i),mn(i),u&512&&(kt||a===null||Ui(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Ai]||_[xt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),jt(_,u,a),_[xt]=i,Mt(_),u=_;break e;case"link":var S=XA("link","href",g).get(u+(a.href||""));if(S){for(var C=0;C<S.length;C++)if(_=S[C],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(C,1);break t}}_=g.createElement(u),jt(_,u,a),g.head.appendChild(_);break;case"meta":if(S=XA("meta","content",g).get(u+(a.content||""))){for(C=0;C<S.length;C++)if(_=S[C],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(C,1);break t}}_=g.createElement(u),jt(_,u,a),g.head.appendChild(_);break;default:throw Error(s(468,u))}_[xt]=i,Mt(_),u=_}i.stateNode=u}else ZA(g,i.type,i.stateNode);else i.stateNode=QA(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?ZA(g,i.type,i.stateNode):QA(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&kp(i,i.memoizedProps,a.memoizedProps)}break;case 27:pn(r,i),mn(i),u&512&&(kt||a===null||Ui(a,a.return)),a!==null&&u&4&&kp(i,i.memoizedProps,a.memoizedProps);break;case 5:if(pn(r,i),mn(i),u&512&&(kt||a===null||Ui(a,a.return)),i.flags&32){g=i.stateNode;try{hn(g,"")}catch(pe){We(i,i.return,pe)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,kp(i,g,a!==null?a.memoizedProps:g)),u&1024&&(qp=!0);break;case 6:if(pn(r,i),mn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(pe){We(i,i.return,pe)}}break;case 3:if(_f=null,g=oi,oi=gf(r.containerInfo),pn(r,i),oi=g,mn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ca(r.containerInfo)}catch(pe){We(i,i.return,pe)}qp&&(qp=!1,Z0(i));break;case 4:u=oi,oi=gf(i.stateNode.containerInfo),pn(r,i),mn(i),oi=u;break;case 12:pn(r,i),mn(i);break;case 31:pn(r,i),mn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tf(i,u)));break;case 13:pn(r,i),mn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sf=an()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tf(i,u)));break;case 22:g=i.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,F=es,Q=kt;if(es=F||g,kt=Q||N,pn(r,i),kt=Q,es=F,mn(i),u&8192)e:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(a===null||N||es||kt||Hr(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(_=N.stateNode,g)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=N.stateNode;var W=N.memoizedProps.style,Y=W!=null&&W.hasOwnProperty("display")?W.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(pe){We(N,N.return,pe)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(pe){We(N,N.return,pe)}}}else if(r.tag===18){if(a===null){N=r;try{var K=N.stateNode;g?BA(K,!0):BA(N.stateNode,!1)}catch(pe){We(N,N.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,tf(i,a))));break;case 19:pn(r,i),mn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tf(i,u)));break;case 30:break;case 21:break;default:pn(r,i),mn(i)}}function mn(i){var r=i.flags;if(r&2){try{for(var a,u=i.return;u!==null;){if(G0(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,_=Up(i);ef(i,_,g);break;case 5:var S=a.stateNode;a.flags&32&&(hn(S,""),a.flags&=-33);var C=Up(i);ef(i,C,S);break;case 3:case 4:var N=a.stateNode.containerInfo,F=Up(i);Lp(i,F,N);break;default:throw Error(s(161))}}catch(Q){We(i,i.return,Q)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Z0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Z0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ns(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Y0(i,r.alternate,r),r=r.sibling}function Hr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:zs(4,r,r.return),Hr(r);break;case 1:Ui(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&B0(r,r.return,a),Hr(r);break;case 27:zl(r.stateNode);case 26:case 5:Ui(r,r.return),Hr(r);break;case 22:r.memoizedState===null&&Hr(r);break;case 30:Hr(r);break;default:Hr(r)}i=i.sibling}}function is(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=i,_=r,S=_.flags;switch(_.tag){case 0:case 11:case 15:is(g,_,a),Dl(4,_);break;case 1:if(is(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){We(u,u.return,F)}if(u=_,g=u.updateQueue,g!==null){var C=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)bv(N[g],C)}catch(F){We(u,u.return,F)}}a&&S&64&&O0(_),Nl(_,_.return);break;case 27:F0(_);case 26:case 5:is(g,_,a),a&&u===null&&S&4&&z0(_),Nl(_,_.return);break;case 12:is(g,_,a);break;case 31:is(g,_,a),a&&S&4&&$0(g,_);break;case 13:is(g,_,a),a&&S&4&&Q0(g,_);break;case 22:_.memoizedState===null&&is(g,_,a),Nl(_,_.return);break;case 30:break;default:is(g,_,a)}r=r.sibling}}function Op(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&_l(a))}function Bp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_l(i))}function ai(i,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)W0(i,r,a,u),r=r.sibling}function W0(i,r,a,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:ai(i,r,a,u),g&2048&&Dl(9,r);break;case 1:ai(i,r,a,u);break;case 3:ai(i,r,a,u),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_l(i)));break;case 12:if(g&2048){ai(i,r,a,u),i=r.stateNode;try{var _=r.memoizedProps,S=_.id,C=_.onPostCommit;typeof C=="function"&&C(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){We(r,r.return,N)}}else ai(i,r,a,u);break;case 31:ai(i,r,a,u);break;case 13:ai(i,r,a,u);break;case 23:break;case 22:_=r.stateNode,S=r.alternate,r.memoizedState!==null?_._visibility&2?ai(i,r,a,u):Vl(i,r):_._visibility&2?ai(i,r,a,u):(_._visibility|=2,jo(i,r,a,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Op(S,r);break;case 24:ai(i,r,a,u),g&2048&&Bp(r.alternate,r);break;default:ai(i,r,a,u)}}function jo(i,r,a,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,S=r,C=a,N=u,F=S.flags;switch(S.tag){case 0:case 11:case 15:jo(_,S,C,N,g),Dl(8,S);break;case 23:break;case 22:var Q=S.stateNode;S.memoizedState!==null?Q._visibility&2?jo(_,S,C,N,g):Vl(_,S):(Q._visibility|=2,jo(_,S,C,N,g)),g&&F&2048&&Op(S.alternate,S);break;case 24:jo(_,S,C,N,g),g&&F&2048&&Bp(S.alternate,S);break;default:jo(_,S,C,N,g)}r=r.sibling}}function Vl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,u=r,g=u.flags;switch(u.tag){case 22:Vl(a,u),g&2048&&Op(u.alternate,u);break;case 24:Vl(a,u),g&2048&&Bp(u.alternate,u);break;default:Vl(a,u)}r=r.sibling}}var Pl=8192;function ea(i,r,a){if(i.subtreeFlags&Pl)for(i=i.child;i!==null;)j0(i,r,a),i=i.sibling}function j0(i,r,a){switch(i.tag){case 26:ea(i,r,a),i.flags&Pl&&i.memoizedState!==null&&PP(a,oi,i.memoizedState,i.memoizedProps);break;case 5:ea(i,r,a);break;case 3:case 4:var u=oi;oi=gf(i.stateNode.containerInfo),ea(i,r,a),oi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Pl,Pl=16777216,ea(i,r,a),Pl=u):ea(i,r,a));break;default:ea(i,r,a)}}function eA(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function kl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ht=u,nA(u,i)}eA(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)tA(i),i=i.sibling}function tA(i){switch(i.tag){case 0:case 11:case 15:kl(i),i.flags&2048&&zs(9,i,i.return);break;case 3:kl(i);break;case 12:kl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,nf(i)):kl(i);break;default:kl(i)}}function nf(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Ht=u,nA(u,i)}eA(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:zs(8,r,r.return),nf(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,nf(r));break;default:nf(r)}i=i.sibling}}function nA(i,r){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:zs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:_l(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ht=u;else e:for(a=i;Ht!==null;){u=Ht;var g=u.sibling,_=u.return;if(J0(u),u===a){Ht=null;break e}if(g!==null){g.return=_,Ht=g;break e}Ht=_}}}var QV={getCacheForType:function(i){var r=Zt(Nt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a},cacheSignal:function(){return Zt(Nt).controller.signal}},XV=typeof WeakMap=="function"?WeakMap:Map,Je=0,rt=null,Me=null,Pe=0,Ze=0,wn=null,Gs=!1,ta=!1,zp=!1,ss=0,_t=0,Fs=0,Yr=0,Gp=0,Cn=0,na=0,Ul=null,gn=null,Fp=!1,sf=0,iA=0,rf=1/0,of=null,Hs=null,Ot=0,Ys=null,ia=null,rs=0,Hp=0,Yp=null,sA=null,Ll=0,Jp=null;function Rn(){return(Je&2)!==0&&Pe!==0?Pe&-Pe:$.T!==null?Wp():oc()}function rA(){if(Cn===0)if((Pe&536870912)===0||Ue){var i=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Cn=i}else Cn=536870912;return i=An.current,i!==null&&(i.flags|=32),Cn}function yn(i,r,a){(i===rt&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(sa(i,0),Js(i,Pe,Cn,!1)),Tr(i,a),((Je&2)===0||i!==rt)&&(i===rt&&((Je&2)===0&&(Yr|=a),_t===4&&Js(i,Pe,Cn,!1)),Li(i))}function oA(i,r,a){if((Je&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&i.expiredLanes)===0||Zn(i,r),g=u?jV(i,r):$p(i,r,!0),_=u;do{if(g===0){ta&&!u&&Js(i,r,0,!1);break}else{if(a=i.current.alternate,_&&!ZV(a)){g=$p(i,r,!1),_=!1;continue}if(g===2){if(_=r,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var C=i;g=Ul;var N=C.current.memoizedState.isDehydrated;if(N&&(sa(C,S).flags|=256),S=$p(C,S,!1),S!==2){if(zp&&!N){C.errorRecoveryDisabledLanes|=_,Yr|=_,g=4;break e}_=gn,gn=g,_!==null&&(gn===null?gn=_:gn.push.apply(gn,_))}g=S}if(_=!1,g!==2)continue}}if(g===1){sa(i,0),Js(i,r,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Js(u,r,Cn,!Gs);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=sf+300-an(),10<g)){if(Js(u,r,Cn,!Gs),Ti(u,0,!0)!==0)break e;rs=r,u.timeoutHandle=LA(aA.bind(null,u,a,gn,of,Fp,r,Cn,Yr,na,Gs,_,"Throttled",-0,0),g);break e}aA(u,a,gn,of,Fp,r,Cn,Yr,na,Gs,_,null,-0,0)}}break}while(!0);Li(i)}function aA(i,r,a,u,g,_,S,C,N,F,Q,W,Y,K){if(i.timeoutHandle=-1,W=r.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},j0(r,_,W);var pe=(_&62914560)===_?sf-an():(_&4194048)===_?iA-an():0;if(pe=kP(W,pe),pe!==null){rs=_,i.cancelPendingCommit=pe(mA.bind(null,i,r,_,a,u,g,S,C,N,Q,W,null,Y,K)),Js(i,_,S,!F);return}}mA(i,r,_,a,u,g,S,C,N)}function ZV(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!En(_(),g))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Js(i,r,a,u){r&=~Gp,r&=~Yr,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var g=r;0<g;){var _=31-Et(g),S=1<<_;u[_]=-1,g&=~S}a!==0&&Er(i,a,r)}function af(){return(Je&6)===0?(ql(0),!1):!0}function Kp(){if(Me!==null){if(Ze===0)var i=Me.return;else i=Me,$i=Ur=null,up(i),$o=null,El=0,i=Me;for(;i!==null;)q0(i.alternate,i),i=i.return;Me=null}}function sa(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,yP(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),rs=0,Kp(),rt=i,Me=a=Ji(i.current,null),Pe=r,Ze=0,wn=null,Gs=!1,ta=Zn(i,r),zp=!1,na=Cn=Gp=Yr=Fs=_t=0,gn=Ul=null,Fp=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var g=31-Et(u),_=1<<g;r|=i[g],u&=~_}return ss=r,Ic(),a}function lA(i,r){Ie=null,$.H=bl,r===Ko||r===kc?(r=wv(),Ze=3):r===Zd?(r=wv(),Ze=4):Ze=r===Cp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,wn=r,Me===null&&(_t=1,Qc(i,Un(r,i.current)))}function uA(){var i=An.current;return i===null?!0:(Pe&4194048)===Pe?Bn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?i===Bn:!1}function cA(){var i=$.H;return $.H=bl,i===null?bl:i}function fA(){var i=$.A;return $.A=QV,i}function lf(){_t=4,Gs||(Pe&4194048)!==Pe&&An.current!==null||(ta=!0),(Fs&134217727)===0&&(Yr&134217727)===0||rt===null||Js(rt,Pe,Cn,!1)}function $p(i,r,a){var u=Je;Je|=2;var g=cA(),_=fA();(rt!==i||Pe!==r)&&(of=null,sa(i,r)),r=!1;var S=_t;e:do try{if(Ze!==0&&Me!==null){var C=Me,N=wn;switch(Ze){case 8:Kp(),S=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(r=!0);var F=Ze;if(Ze=0,wn=null,ra(i,C,N,F),a&&ta){S=0;break e}break;default:F=Ze,Ze=0,wn=null,ra(i,C,N,F)}}WV(),S=_t;break}catch(Q){lA(i,Q)}while(!0);return r&&i.shellSuspendCounter++,$i=Ur=null,Je=u,$.H=g,$.A=_,Me===null&&(rt=null,Pe=0,Ic()),S}function WV(){for(;Me!==null;)hA(Me)}function jV(i,r){var a=Je;Je|=2;var u=cA(),g=fA();rt!==i||Pe!==r?(of=null,rf=an()+500,sa(i,r)):ta=Zn(i,r);e:do try{if(Ze!==0&&Me!==null){r=Me;var _=wn;t:switch(Ze){case 1:Ze=0,wn=null,ra(i,r,_,1);break;case 2:case 9:if(Av(_)){Ze=0,wn=null,dA(r);break}r=function(){Ze!==2&&Ze!==9||rt!==i||(Ze=7),Li(i)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Av(_)?(Ze=0,wn=null,dA(r)):(Ze=0,wn=null,ra(i,r,_,7));break;case 5:var S=null;switch(Me.tag){case 26:S=Me.memoizedState;case 5:case 27:var C=Me;if(S?WA(S):C.stateNode.complete){Ze=0,wn=null;var N=C.sibling;if(N!==null)Me=N;else{var F=C.return;F!==null?(Me=F,uf(F)):Me=null}break t}}Ze=0,wn=null,ra(i,r,_,5);break;case 6:Ze=0,wn=null,ra(i,r,_,6);break;case 8:Kp(),_t=6;break e;default:throw Error(s(462))}}eP();break}catch(Q){lA(i,Q)}while(!0);return $i=Ur=null,$.H=u,$.A=g,Je=a,Me!==null?0:(rt=null,Pe=0,Ic(),_t)}function eP(){for(;Me!==null&&!wd();)hA(Me)}function hA(i){var r=U0(i.alternate,i,ss);i.memoizedProps=i.pendingProps,r===null?uf(i):Me=r}function dA(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=M0(a,r,r.pendingProps,r.type,void 0,Pe);break;case 11:r=M0(a,r,r.pendingProps,r.type.render,r.ref,Pe);break;case 5:up(r);default:q0(a,r),r=Me=fv(r,ss),r=U0(a,r,ss)}i.memoizedProps=i.pendingProps,r===null?uf(i):Me=r}function ra(i,r,a,u){$i=Ur=null,up(r),$o=null,El=0;var g=r.return;try{if(GV(i,g,r,a,Pe)){_t=1,Qc(i,Un(a,i.current)),Me=null;return}}catch(_){if(g!==null)throw Me=g,_;_t=1,Qc(i,Un(a,i.current)),Me=null;return}r.flags&32768?(Ue||u===1?i=!0:ta||(Pe&536870912)!==0?i=!1:(Gs=i=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),pA(r,i)):uf(r)}function uf(i){var r=i;do{if((r.flags&32768)!==0){pA(r,Gs);return}i=r.return;var a=YV(r.alternate,r,ss);if(a!==null){Me=a;return}if(r=r.sibling,r!==null){Me=r;return}Me=r=i}while(r!==null);_t===0&&(_t=5)}function pA(i,r){do{var a=JV(i.alternate,i);if(a!==null){a.flags&=32767,Me=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Me=i;return}Me=i=a}while(i!==null);_t=6,Me=null}function mA(i,r,a,u,g,_,S,C,N){i.cancelPendingCommit=null;do cf();while(Ot!==0);if((Je&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=Ud,Id(i,a,_,S,C,N),i===rt&&(Me=rt=null,Pe=0),ia=r,Ys=i,rs=a,Hp=_,Yp=g,sA=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,sP(As,function(){return EA(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,g=ae.p,ae.p=2,S=Je,Je|=4;try{KV(i,r,a)}finally{Je=S,ae.p=g,$.T=u}}Ot=1,gA(),yA(),_A()}}function gA(){if(Ot===1){Ot=0;var i=Ys,r=ia,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=ae.p;ae.p=2;var g=Je;Je|=4;try{X0(r,i);var _=om,S=nv(i.containerInfo),C=_.focusedElem,N=_.selectionRange;if(S!==C&&C&&C.ownerDocument&&tv(C.ownerDocument.documentElement,C)){if(N!==null&&Dd(C)){var F=N.start,Q=N.end;if(Q===void 0&&(Q=F),"selectionStart"in C)C.selectionStart=F,C.selectionEnd=Math.min(Q,C.value.length);else{var W=C.ownerDocument||document,Y=W&&W.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),pe=C.textContent.length,Ee=Math.min(N.start,pe),nt=N.end===void 0?Ee:Math.min(N.end,pe);!K.extend&&Ee>nt&&(S=nt,nt=Ee,Ee=S);var O=ev(C,Ee),U=ev(C,nt);if(O&&U&&(K.rangeCount!==1||K.anchorNode!==O.node||K.anchorOffset!==O.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var G=W.createRange();G.setStart(O.node,O.offset),K.removeAllRanges(),Ee>nt?(K.addRange(G),K.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),K.addRange(G))}}}}for(W=[],K=C;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<W.length;C++){var Z=W[C];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Af=!!rm,om=rm=null}finally{Je=g,ae.p=u,$.T=a}}i.current=r,Ot=2}}function yA(){if(Ot===2){Ot=0;var i=Ys,r=ia,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=ae.p;ae.p=2;var g=Je;Je|=4;try{Y0(i,r.alternate,r)}finally{Je=g,ae.p=u,$.T=a}}Ot=3}}function _A(){if(Ot===4||Ot===3){Ot=0,ju();var i=Ys,r=ia,a=rs,u=sA;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ot=5:(Ot=0,ia=Ys=null,TA(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Hs=null),Gi(a),r=r.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Xn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=$.T,g=ae.p,ae.p=2,$.T=null;try{for(var _=i.onRecoverableError,S=0;S<u.length;S++){var C=u[S];_(C.value,{componentStack:C.stack})}}finally{$.T=r,ae.p=g}}(rs&3)!==0&&cf(),Li(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Jp?Ll++:(Ll=0,Jp=i):Ll=0,ql(0)}}function TA(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,_l(r)))}function cf(){return gA(),yA(),_A(),EA()}function EA(){if(Ot!==5)return!1;var i=Ys,r=Hp;Hp=0;var a=Gi(rs),u=$.T,g=ae.p;try{ae.p=32>a?32:a,$.T=null,a=Yp,Yp=null;var _=Ys,S=rs;if(Ot=0,ia=Ys=null,rs=0,(Je&6)!==0)throw Error(s(331));var C=Je;if(Je|=4,tA(_.current),W0(_,_.current,S,a),Je=C,ql(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Xn,_)}catch{}return!0}finally{ae.p=g,$.T=u,TA(i,r)}}function vA(i,r,a){r=Un(a,r),r=wp(i.stateNode,r,2),i=qs(i,r,2),i!==null&&(Tr(i,2),Li(i))}function We(i,r,a){if(i.tag===3)vA(i,i,a);else for(;r!==null;){if(r.tag===3){vA(r,i,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hs===null||!Hs.has(u))){i=Un(a,i),a=A0(2),u=qs(r,a,2),u!==null&&(S0(a,u,r,i),Tr(u,2),Li(u));break}}r=r.return}}function Qp(i,r,a){var u=i.pingCache;if(u===null){u=i.pingCache=new XV;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(a)||(zp=!0,g.add(a),i=tP.bind(null,i,r,a),r.then(i,i))}function tP(i,r,a){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,rt===i&&(Pe&a)===a&&(_t===4||_t===3&&(Pe&62914560)===Pe&&300>an()-sf?(Je&2)===0&&sa(i,0):Gp|=a,na===Pe&&(na=0)),Li(i)}function AA(i,r){r===0&&(r=rc()),i=Vr(i,r),i!==null&&(Tr(i,r),Li(i))}function nP(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),AA(i,a)}function iP(i,r){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),AA(i,a)}function sP(i,r){return qt(i,r)}var ff=null,oa=null,Xp=!1,hf=!1,Zp=!1,Ks=0;function Li(i){i!==oa&&i.next===null&&(oa===null?ff=oa=i:oa=oa.next=i),hf=!0,Xp||(Xp=!0,oP())}function ql(i,r){if(!Zp&&hf){Zp=!0;do for(var a=!1,u=ff;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var S=u.suspendedLanes,C=u.pingedLanes;_=(1<<31-Et(42|i)+1)-1,_&=g&~(S&~C),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,RA(u,_))}else _=Pe,_=Ti(u,u===rt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Zn(u,_)||(a=!0,RA(u,_));u=u.next}while(a);Zp=!1}}function rP(){SA()}function SA(){hf=Xp=!1;var i=0;Ks!==0&&gP()&&(i=Ks);for(var r=an(),a=null,u=ff;u!==null;){var g=u.next,_=wA(u,r);_===0?(u.next=null,a===null?ff=g:a.next=g,g===null&&(oa=a)):(a=u,(i!==0||(_&3)!==0)&&(hf=!0)),u=g}Ot!==0&&Ot!==5||ql(i),Ks!==0&&(Ks=0)}function wA(i,r){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-Et(_),C=1<<S,N=g[S];N===-1?((C&a)===0||(C&u)!==0)&&(g[S]=Rd(C,r)):N<=r&&(i.expiredLanes|=C),_&=~C}if(r=rt,a=Pe,a=Ti(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===r&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&vs(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Zn(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(u!==null&&vs(u),Gi(a)){case 2:case 8:a=$a;break;case 32:a=As;break;case 268435456:a=ec;break;default:a=As}return u=CA.bind(null,i),a=qt(a,u),i.callbackPriority=r,i.callbackNode=a,r}return u!==null&&u!==null&&vs(u),i.callbackPriority=2,i.callbackNode=null,2}function CA(i,r){if(Ot!==0&&Ot!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(cf()&&i.callbackNode!==a)return null;var u=Pe;return u=Ti(i,i===rt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(oA(i,u,r),wA(i,an()),i.callbackNode!=null&&i.callbackNode===a?CA.bind(null,i):null)}function RA(i,r){if(cf())return null;oA(i,r,!0)}function oP(){_P(function(){(Je&6)!==0?qt(Ka,rP):SA()})}function Wp(){if(Ks===0){var i=Yo;i===0&&(i=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Ks=i}return Ks}function IA(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Mo(""+i)}function bA(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function aP(i,r,a,u,g){if(r==="submit"&&a&&a.stateNode===g){var _=IA((g[Gt]||null).action),S=u.submitter;S&&(r=(r=S[Gt]||null)?IA(r.formAction):S.getAttribute("formAction"),r!==null&&(_=r,S=null));var C=new Mi("action","action",null,u,g);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ks!==0){var N=S?bA(g,S):new FormData(g);_p(a,{pending:!0,data:N,method:g.method,action:_},null,N)}}else typeof _=="function"&&(C.preventDefault(),N=S?bA(g,S):new FormData(g),_p(a,{pending:!0,data:N,method:g.method,action:_},_,N))},currentTarget:g}]})}}for(var jp=0;jp<kd.length;jp++){var em=kd[jp],lP=em.toLowerCase(),uP=em[0].toUpperCase()+em.slice(1);ri(lP,"on"+uP)}ri(rv,"onAnimationEnd"),ri(ov,"onAnimationIteration"),ri(av,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(CV,"onTransitionRun"),ri(RV,"onTransitionStart"),ri(IV,"onTransitionCancel"),ri(lv,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function xA(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var S=u.length-1;0<=S;S--){var C=u[S],N=C.instance,F=C.currentTarget;if(C=C.listener,N!==_&&g.isPropagationStopped())break e;_=C,g.currentTarget=F;try{_(g)}catch(Q){Rc(Q)}g.currentTarget=null,_=N}else for(S=0;S<u.length;S++){if(C=u[S],N=C.instance,F=C.currentTarget,C=C.listener,N!==_&&g.isPropagationStopped())break e;_=C,g.currentTarget=F;try{_(g)}catch(Q){Rc(Q)}g.currentTarget=null,_=N}}}}function De(i,r){var a=r[Co];a===void 0&&(a=r[Co]=new Set);var u=i+"__bubble";a.has(u)||(MA(r,i,2,!1),a.add(u))}function tm(i,r,a){var u=0;r&&(u|=4),MA(a,i,u,r)}var df="_reactListening"+Math.random().toString(36).slice(2);function nm(i){if(!i[df]){i[df]=!0,Za.forEach(function(a){a!=="selectionchange"&&(cP.has(a)||tm(a,!1,i),tm(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[df]||(r[df]=!0,tm("selectionchange",!1,r))}}function MA(i,r,a,u){switch(rS(r)){case 2:var g=qP;break;case 8:g=OP;break;default:g=ym}a=g.bind(null,r,a,i),g=void 0,!Cr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(r,a,{capture:!0,passive:g}):i.addEventListener(r,a,!0):g!==void 0?i.addEventListener(r,a,{passive:g}):i.addEventListener(r,a,!1)}function im(i,r,a,u,g){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var C=u.stateNode.containerInfo;if(C===g)break;if(S===4)for(S=u.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;C!==null;){if(S=Si(C),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){u=_=S;continue e}C=C.parentNode}}u=u.return}bs(function(){var F=_,Q=Nn(a),W=[];e:{var Y=uv.get(i);if(Y!==void 0){var K=Mi,pe=i;switch(i){case"keypress":if(Ir(a)===0)break e;case"keydown":case"keyup":K=Sc;break;case"focusin":pe="focus",K=xr;break;case"focusout":pe="blur",K=xr;break;case"beforeblur":case"afterblur":K=xr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=E;break;case rv:case ov:case av:K=gc;break;case lv:K=R;break;case"scroll":case"scrollend":K=ul;break;case"wheel":K=J;break;case"copy":case"cut":case"paste":K=yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Yi;break;case"toggle":case"beforetoggle":K=Re}var Ee=(r&4)!==0,nt=!Ee&&(i==="scroll"||i==="scrollend"),O=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var U=F,G;U!==null;){var Z=U;if(G=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||G===null||O===null||(Z=ti(U,O),Z!=null&&Ee.push(Bl(U,Z,G))),nt)break;U=U.return}0<Ee.length&&(Y=new K(Y,pe,null,a,Q),W.push({event:Y,listeners:Ee}))}}if((r&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&a!==ol&&(pe=a.relatedTarget||a.fromElement)&&(Si(pe)||pe[vi]))break e;if((K||Y)&&(Y=Q.window===Q?Q:(Y=Q.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(pe=a.relatedTarget||a.toElement,K=F,pe=pe?Si(pe):null,pe!==null&&(nt=l(pe),Ee=pe.tag,pe!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(pe=null)):(K=null,pe=F),K!==pe)){if(Ee=cl,Z="onMouseLeave",O="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=Yi,Z="onPointerLeave",O="onPointerEnter",U="pointer"),nt=K==null?Y:_n(K),G=pe==null?Y:_n(pe),Y=new Ee(Z,U+"leave",K,a,Q),Y.target=nt,Y.relatedTarget=G,Z=null,Si(Q)===F&&(Ee=new Ee(O,U+"enter",pe,a,Q),Ee.target=G,Ee.relatedTarget=nt,Z=Ee),nt=Z,K&&pe)t:{for(Ee=fP,O=K,U=pe,G=0,Z=O;Z;Z=Ee(Z))G++;Z=0;for(var _e=U;_e;_e=Ee(_e))Z++;for(;0<G-Z;)O=Ee(O),G--;for(;0<Z-G;)U=Ee(U),Z--;for(;G--;){if(O===U||U!==null&&O===U.alternate){Ee=O;break t}O=Ee(O),U=Ee(U)}Ee=null}else Ee=null;K!==null&&DA(W,Y,K,Ee,!1),pe!==null&&nt!==null&&DA(W,nt,pe,Ee,!0)}}e:{if(Y=F?_n(F):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var Ge=$E;else if(JE(Y))if(QE)Ge=AV;else{Ge=EV;var ge=TV}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?F&&xo(F.elementType)&&(Ge=$E):Ge=vV;if(Ge&&(Ge=Ge(i,F))){KE(W,Ge,a,Q);break e}ge&&ge(i,Y,F),i==="focusout"&&F&&Y.type==="number"&&F.memoizedProps.value!=null&&il(Y,"number",Y.value)}switch(ge=F?_n(F):window,i){case"focusin":(JE(ge)||ge.contentEditable==="true")&&(Lo=ge,Nd=F,ml=null);break;case"focusout":ml=Nd=Lo=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,iv(W,a,Q);break;case"selectionchange":if(wV)break;case"keydown":case"keyup":iv(W,a,Q)}var xe;if(Ye)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Uo?Mr(i,a)&&(ke="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Vi&&a.locale!=="ko"&&(Uo||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Uo&&(xe=ll()):(xi=Q,al="value"in xi?xi.value:xi.textContent,Uo=!0)),ge=pf(F,ke),0<ge.length&&(ke=new Ni(ke,i,null,a,Q),W.push({event:ke,listeners:ge}),xe?ke.data=xe:(xe=ko(a),xe!==null&&(ke.data=xe)))),(xe=Pn?mV(i,a):gV(i,a))&&(ke=pf(F,"onBeforeInput"),0<ke.length&&(ge=new Ni("onBeforeInput","beforeinput",null,a,Q),W.push({event:ge,listeners:ke}),ge.data=xe)),aP(W,i,F,a,Q)}xA(W,r)})}function Bl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function pf(i,r){for(var a=r+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=ti(i,a),g!=null&&u.unshift(Bl(i,g,_)),g=ti(i,r),g!=null&&u.push(Bl(i,g,_))),i.tag===3)return u;i=i.return}return[]}function fP(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function DA(i,r,a,u,g){for(var _=r._reactName,S=[];a!==null&&a!==u;){var C=a,N=C.alternate,F=C.stateNode;if(C=C.tag,N!==null&&N===u)break;C!==5&&C!==26&&C!==27||F===null||(N=F,g?(F=ti(a,_),F!=null&&S.unshift(Bl(a,F,N))):g||(F=ti(a,_),F!=null&&S.push(Bl(a,F,N)))),a=a.return}S.length!==0&&i.push({event:r,listeners:S})}var hP=/\r\n?/g,dP=/\u0000|\uFFFD/g;function NA(i){return(typeof i=="string"?i:""+i).replace(hP,`
`).replace(dP,"")}function VA(i,r){return r=NA(r),NA(i)===r}function tt(i,r,a,u,g,_){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||hn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&hn(i,""+u);break;case"className":Tn(i,"class",u);break;case"tabIndex":Tn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(i,a,u);break;case"style":rl(i,u,_);break;case"data":if(r!=="object"){Tn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Mo(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&tt(i,r,"name",g.name,g,null),tt(i,r,"formEncType",g.formEncType,g,null),tt(i,r,"formMethod",g.formMethod,g,null),tt(i,r,"formTarget",g.formTarget,g,null)):(tt(i,r,"encType",g.encType,g,null),tt(i,r,"method",g.method,g,null),tt(i,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=Mo(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=ei);break;case"onScroll":u!=null&&De("scroll",i);break;case"onScrollEnd":u!=null&&De("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=Mo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":De("beforetoggle",i),De("toggle",i),Io(i,"popover",u);break;case"xlinkActuate":Dt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Dt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Dt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Dt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Dt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Dt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Dt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Dt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Dt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Io(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=dc.get(a)||a,Io(i,a,u))}}function sm(i,r,a,u,g,_){switch(a){case"style":rl(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?hn(i,u):(typeof u=="number"||typeof u=="bigint")&&hn(i,""+u);break;case"onScroll":u!=null&&De("scroll",i);break;case"onScrollEnd":u!=null&&De("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),r=a.slice(2,g?a.length-7:void 0),_=i[Gt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(r,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):Io(i,a,u)}}}function jt(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",i),De("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var S=a[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,_,S,a,null)}}g&&tt(i,r,"srcSet",a.srcSet,a,null),u&&tt(i,r,"src",a.src,a,null);return;case"input":De("invalid",i);var C=_=S=g=null,N=null,F=null;for(u in a)if(a.hasOwnProperty(u)){var Q=a[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":S=Q;break;case"checked":N=Q;break;case"defaultChecked":F=Q;break;case"value":_=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:tt(i,r,u,Q,a,null)}}cc(i,_,C,N,F,S,g,!1);return;case"select":De("invalid",i),u=S=_=null;for(g in a)if(a.hasOwnProperty(g)&&(C=a[g],C!=null))switch(g){case"value":_=C;break;case"defaultValue":S=C;break;case"multiple":u=C;default:tt(i,r,g,C,a,null)}r=_,a=S,i.multiple=!!u,r!=null?ws(i,!!u,r,!1):a!=null&&ws(i,!!u,a,!0);return;case"textarea":De("invalid",i),_=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(C=a[S],C!=null))switch(S){case"value":u=C;break;case"defaultValue":g=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:tt(i,r,S,C,a,null)}Cs(i,u,g,_);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(i,r,N,u,a,null)}return;case"dialog":De("beforetoggle",i),De("toggle",i),De("cancel",i),De("close",i);break;case"iframe":case"object":De("load",i);break;case"video":case"audio":for(u=0;u<Ol.length;u++)De(Ol[u],i);break;case"image":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"embed":case"source":case"link":De("error",i),De("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(u=a[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,F,u,a,null)}return;default:if(xo(r)){for(Q in a)a.hasOwnProperty(Q)&&(u=a[Q],u!==void 0&&sm(i,r,Q,u,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(u=a[C],u!=null&&tt(i,r,C,u,a,null))}function pP(i,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,S=null,C=null,N=null,F=null,Q=null;for(K in a){var W=a[K];if(a.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=W;default:u.hasOwnProperty(K)||tt(i,r,K,null,u,W)}}for(var Y in u){var K=u[Y];if(W=a[Y],u.hasOwnProperty(Y)&&(K!=null||W!=null))switch(Y){case"type":_=K;break;case"name":g=K;break;case"checked":F=K;break;case"defaultChecked":Q=K;break;case"value":S=K;break;case"defaultValue":C=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==W&&tt(i,r,Y,K,u,W)}}bo(i,S,C,N,F,Q,_,g);return;case"select":K=S=C=Y=null;for(_ in a)if(N=a[_],a.hasOwnProperty(_)&&N!=null)switch(_){case"value":break;case"multiple":K=N;default:u.hasOwnProperty(_)||tt(i,r,_,null,u,N)}for(g in u)if(_=u[g],N=a[g],u.hasOwnProperty(g)&&(_!=null||N!=null))switch(g){case"value":Y=_;break;case"defaultValue":C=_;break;case"multiple":S=_;default:_!==N&&tt(i,r,g,_,u,N)}r=C,a=S,u=K,Y!=null?ws(i,!!a,Y,!1):!!u!=!!a&&(r!=null?ws(i,!!a,r,!0):ws(i,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(C in a)if(g=a[C],a.hasOwnProperty(C)&&g!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:tt(i,r,C,null,u,g)}for(S in u)if(g=u[S],_=a[S],u.hasOwnProperty(S)&&(g!=null||_!=null))switch(S){case"value":Y=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==_&&tt(i,r,S,g,u,_)}fc(i,Y,K);return;case"option":for(var pe in a)if(Y=a[pe],a.hasOwnProperty(pe)&&Y!=null&&!u.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:tt(i,r,pe,null,u,Y)}for(N in u)if(Y=u[N],K=a[N],u.hasOwnProperty(N)&&Y!==K&&(Y!=null||K!=null))switch(N){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:tt(i,r,N,Y,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)Y=a[Ee],a.hasOwnProperty(Ee)&&Y!=null&&!u.hasOwnProperty(Ee)&&tt(i,r,Ee,null,u,Y);for(F in u)if(Y=u[F],K=a[F],u.hasOwnProperty(F)&&Y!==K&&(Y!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:tt(i,r,F,Y,u,K)}return;default:if(xo(r)){for(var nt in a)Y=a[nt],a.hasOwnProperty(nt)&&Y!==void 0&&!u.hasOwnProperty(nt)&&sm(i,r,nt,void 0,u,Y);for(Q in u)Y=u[Q],K=a[Q],!u.hasOwnProperty(Q)||Y===K||Y===void 0&&K===void 0||sm(i,r,Q,Y,u,K);return}}for(var O in a)Y=a[O],a.hasOwnProperty(O)&&Y!=null&&!u.hasOwnProperty(O)&&tt(i,r,O,null,u,Y);for(W in u)Y=u[W],K=a[W],!u.hasOwnProperty(W)||Y===K||Y==null&&K==null||tt(i,r,W,Y,u,K)}function PA(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mP(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,S=g.initiatorType,C=g.duration;if(_&&C&&PA(S)){for(S=0,C=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],F=N.startTime;if(F>C)break;var Q=N.transferSize,W=N.initiatorType;Q&&PA(W)&&(N=N.responseEnd,S+=Q*(N<C?1:(C-F)/(N-F)))}if(--u,r+=8*(_+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var rm=null,om=null;function mf(i){return i.nodeType===9?i:i.ownerDocument}function kA(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UA(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function am(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lm=null;function gP(){var i=window.event;return i&&i.type==="popstate"?i===lm?!1:(lm=i,!0):(lm=null,!1)}var LA=typeof setTimeout=="function"?setTimeout:void 0,yP=typeof clearTimeout=="function"?clearTimeout:void 0,qA=typeof Promise=="function"?Promise:void 0,_P=typeof queueMicrotask=="function"?queueMicrotask:typeof qA<"u"?function(i){return qA.resolve(null).then(i).catch(TP)}:LA;function TP(i){setTimeout(function(){throw i})}function $s(i){return i==="head"}function OA(i,r){var a=r,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),ca(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")zl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,zl(a);for(var _=a.firstChild;_;){var S=_.nextSibling,C=_.nodeName;_[Ai]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}else a==="body"&&zl(i.ownerDocument.body);a=g}while(a);ca(r)}function BA(i,r){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function um(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":um(a),Ro(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function EP(i,r,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ai])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=zn(i.nextSibling),i===null)break}return null}function vP(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=zn(i.nextSibling),i===null))return null;return i}function zA(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=zn(i.nextSibling),i===null))return null;return i}function cm(i){return i.data==="$?"||i.data==="$~"}function fm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function AP(i,r){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function zn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var hm=null;function GA(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(r===0)return zn(i.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}i=i.nextSibling}return null}function FA(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return i;r--}else a!=="/$"&&a!=="/&"||r++}i=i.previousSibling}return null}function HA(i,r,a){switch(r=mf(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function zl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Ro(i)}var Gn=new Map,YA=new Set;function gf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var os=ae.d;ae.d={f:SP,r:wP,D:CP,C:RP,L:IP,m:bP,X:MP,S:xP,M:DP};function SP(){var i=os.f(),r=af();return i||r}function wP(i){var r=Dn(i);r!==null&&r.tag===5&&r.type==="form"?l0(r):os.r(i)}var aa=typeof document>"u"?null:document;function JA(i,r,a){var u=aa;if(u&&typeof r=="string"&&r){var g=fn(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),YA.has(g)||(YA.add(g),i={rel:i,crossOrigin:a,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),jt(r,"link",i),Mt(r),u.head.appendChild(r)))}}function CP(i){os.D(i),JA("dns-prefetch",i,null)}function RP(i,r){os.C(i,r),JA("preconnect",i,r)}function IP(i,r,a){os.L(i,r,a);var u=aa;if(u&&i&&r){var g='link[rel="preload"][as="'+fn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+fn(a.imageSizes)+'"]')):g+='[href="'+fn(i)+'"]';var _=g;switch(r){case"style":_=la(i);break;case"script":_=ua(i)}Gn.has(_)||(i=v({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),Gn.set(_,i),u.querySelector(g)!==null||r==="style"&&u.querySelector(Gl(_))||r==="script"&&u.querySelector(Fl(_))||(r=u.createElement("link"),jt(r,"link",i),Mt(r),u.head.appendChild(r)))}}function bP(i,r){os.m(i,r);var a=aa;if(a&&i){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ua(i)}if(!Gn.has(_)&&(i=v({rel:"modulepreload",href:i},r),Gn.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(_)))return}u=a.createElement("link"),jt(u,"link",i),Mt(u),a.head.appendChild(u)}}}function xP(i,r,a){os.S(i,r,a);var u=aa;if(u&&i){var g=wi(u).hoistableStyles,_=la(i);r=r||"default";var S=g.get(_);if(!S){var C={loading:0,preload:null};if(S=u.querySelector(Gl(_)))C.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},a),(a=Gn.get(_))&&dm(i,a);var N=S=u.createElement("link");Mt(N),jt(N,"link",i),N._p=new Promise(function(F,Q){N.onload=F,N.onerror=Q}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,yf(S,r,u)}S={type:"stylesheet",instance:S,count:1,state:C},g.set(_,S)}}}function MP(i,r){os.X(i,r);var a=aa;if(a&&i){var u=wi(a).hoistableScripts,g=ua(i),_=u.get(g);_||(_=a.querySelector(Fl(g)),_||(i=v({src:i,async:!0},r),(r=Gn.get(g))&&pm(i,r),_=a.createElement("script"),Mt(_),jt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function DP(i,r){os.M(i,r);var a=aa;if(a&&i){var u=wi(a).hoistableScripts,g=ua(i),_=u.get(g);_||(_=a.querySelector(Fl(g)),_||(i=v({src:i,async:!0,type:"module"},r),(r=Gn.get(g))&&pm(i,r),_=a.createElement("script"),Mt(_),jt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function KA(i,r,a,u){var g=(g=be.current)?gf(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=la(a.href),a=wi(g).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=la(a.href);var _=wi(g).hoistableStyles,S=_.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=g.querySelector(Gl(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Gn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(i,a),_||NP(g,i,a,S.state))),r&&u===null)throw Error(s(528,""));return S}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ua(a),a=wi(g).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function la(i){return'href="'+fn(i)+'"'}function Gl(i){return'link[rel="stylesheet"]['+i+"]"}function $A(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function NP(i,r,a,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),jt(r,"link",a),Mt(r),i.head.appendChild(r))}function ua(i){return'[src="'+fn(i)+'"]'}function Fl(i){return"script[async]"+i}function QA(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+fn(a.href)+'"]');if(u)return r.instance=u,Mt(u),u;var g=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Mt(u),jt(u,"style",g),yf(u,a.precedence,i),r.instance=u;case"stylesheet":g=la(a.href);var _=i.querySelector(Gl(g));if(_)return r.state.loading|=4,r.instance=_,Mt(_),_;u=$A(a),(g=Gn.get(g))&&dm(u,g),_=(i.ownerDocument||i).createElement("link"),Mt(_);var S=_;return S._p=new Promise(function(C,N){S.onload=C,S.onerror=N}),jt(_,"link",u),r.state.loading|=4,yf(_,a.precedence,i),r.instance=_;case"script":return _=ua(a.src),(g=i.querySelector(Fl(_)))?(r.instance=g,Mt(g),g):(u=a,(g=Gn.get(_))&&(u=v({},a),pm(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),Mt(g),jt(g,"link",u),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,yf(u,a.precedence,i));return r.instance}function yf(i,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,S=0;S<u.length;S++){var C=u[S];if(C.dataset.precedence===r)_=C;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function dm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function pm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var _f=null;function XA(i,r,a){if(_f===null){var u=new Map,g=_f=new Map;g.set(a,u)}else g=_f,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[Ai]||_[xt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(r)||"";S=i+S;var C=u.get(S);C?C.push(_):u.set(S,[_])}}return u}function ZA(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function VP(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function WA(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function PP(i,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=la(u.href),_=r.querySelector(Gl(g));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Tf.bind(i),r.then(i,i)),a.state.loading|=4,a.instance=_,Mt(_);return}_=r.ownerDocument||r,u=$A(u),(g=Gn.get(g))&&dm(u,g),_=_.createElement("link"),Mt(_);var S=_;S._p=new Promise(function(C,N){S.onload=C,S.onerror=N}),jt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Tf.bind(i),r.addEventListener("load",a),r.addEventListener("error",a))}}var mm=0;function kP(i,r){return i.stylesheets&&i.count===0&&vf(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&vf(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&mm===0&&(mm=62500*mP());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&vf(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>mm?50:800)+r);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ef=null;function vf(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ef=new Map,r.forEach(UP,i),Ef=null,Tf.call(i))}function UP(i,r){if(!(r.state.loading&4)){var a=Ef.get(i);if(a)var u=a.get(null);else{a=new Map,Ef.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var S=g[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=r.instance,S=g.getAttribute("data-precedence"),_=a.get(S)||u,_===u&&a.set(null,g),a.set(S,g),this.count++,u=Tf.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var Hl={$$typeof:X,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function LP(i,r,a,u,g,_,S,C,N){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function jA(i,r,a,u,g,_,S,C,N,F,Q,W){return i=new LP(i,r,a,S,N,F,Q,W,C),r=1,_===!0&&(r|=24),_=vn(3,null,null,r),i.current=_,_.stateNode=i,r=$d(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:r},Wd(_),i}function eS(i){return i?(i=Bo,i):Bo}function tS(i,r,a,u,g,_){g=eS(g),u.context===null?u.context=g:u.pendingContext=g,u=Ls(r),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=qs(i,u,r),a!==null&&(yn(a,i,r),Al(a,i,r))}function nS(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function gm(i,r){nS(i,r),(i=i.alternate)&&nS(i,r)}function iS(i){if(i.tag===13||i.tag===31){var r=Vr(i,67108864);r!==null&&yn(r,i,67108864),gm(i,67108864)}}function sS(i){if(i.tag===13||i.tag===31){var r=Rn();r=vr(r);var a=Vr(i,r);a!==null&&yn(a,i,r),gm(i,r)}}var Af=!0;function qP(i,r,a,u){var g=$.T;$.T=null;var _=ae.p;try{ae.p=2,ym(i,r,a,u)}finally{ae.p=_,$.T=g}}function OP(i,r,a,u){var g=$.T;$.T=null;var _=ae.p;try{ae.p=8,ym(i,r,a,u)}finally{ae.p=_,$.T=g}}function ym(i,r,a,u){if(Af){var g=_m(u);if(g===null)im(i,r,u,Sf,a),oS(i,u);else if(zP(g,i,r,a,u))u.stopPropagation();else if(oS(i,u),r&4&&-1<BP.indexOf(i)){for(;g!==null;){var _=Dn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=_i(_.pendingLanes);if(S!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var N=1<<31-Et(S);C.entanglements[1]|=N,S&=~N}Li(_),(Je&6)===0&&(rf=an()+500,ql(0))}}break;case 31:case 13:C=Vr(_,2),C!==null&&yn(C,_,2),af(),gm(_,2)}if(_=_m(u),_===null&&im(i,r,u,Sf,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else im(i,r,u,null,a)}}function _m(i){return i=Nn(i),Tm(i)}var Sf=null;function Tm(i){if(Sf=null,i=Si(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=c(r),i!==null)return i;i=null}else if(a===31){if(i=h(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Sf=i,null}function rS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yr()){case Ka:return 2;case $a:return 8;case As:case Cd:return 32;case ec:return 268435456;default:return 32}default:return 32}}var Em=!1,Qs=null,Xs=null,Zs=null,Yl=new Map,Jl=new Map,Ws=[],BP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oS(i,r){switch(i){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Yl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(r.pointerId)}}function Kl(i,r,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},r!==null&&(r=Dn(r),r!==null&&iS(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function zP(i,r,a,u,g){switch(r){case"focusin":return Qs=Kl(Qs,i,r,a,u,g),!0;case"dragenter":return Xs=Kl(Xs,i,r,a,u,g),!0;case"mouseover":return Zs=Kl(Zs,i,r,a,u,g),!0;case"pointerover":var _=g.pointerId;return Yl.set(_,Kl(Yl.get(_)||null,i,r,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,Jl.set(_,Kl(Jl.get(_)||null,i,r,a,u,g)),!0}return!1}function aS(i){var r=Si(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){i.blockedOn=r,Wn(i.priority,function(){sS(a)});return}}else if(r===31){if(r=h(a),r!==null){i.blockedOn=r,Wn(i.priority,function(){sS(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wf(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=_m(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);ol=u,a.target.dispatchEvent(u),ol=null}else return r=Dn(a),r!==null&&iS(r),i.blockedOn=a,!1;r.shift()}return!0}function lS(i,r,a){wf(i)&&a.delete(r)}function GP(){Em=!1,Qs!==null&&wf(Qs)&&(Qs=null),Xs!==null&&wf(Xs)&&(Xs=null),Zs!==null&&wf(Zs)&&(Zs=null),Yl.forEach(lS),Jl.forEach(lS)}function Cf(i,r){i.blockedOn===r&&(i.blockedOn=null,Em||(Em=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,GP)))}var Rf=null;function uS(i){Rf!==i&&(Rf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rf===i&&(Rf=null);for(var r=0;r<i.length;r+=3){var a=i[r],u=i[r+1],g=i[r+2];if(typeof u!="function"){if(Tm(u||a)===null)continue;break}var _=Dn(a);_!==null&&(i.splice(r,3),r-=3,_p(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function ca(i){function r(N){return Cf(N,i)}Qs!==null&&Cf(Qs,i),Xs!==null&&Cf(Xs,i),Zs!==null&&Cf(Zs,i),Yl.forEach(r),Jl.forEach(r);for(var a=0;a<Ws.length;a++){var u=Ws[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ws.length&&(a=Ws[0],a.blockedOn===null);)aS(a),a.blockedOn===null&&Ws.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],S=g[Gt]||null;if(typeof _=="function")S||uS(a);else if(S){var C=null;if(_&&_.hasAttribute("formAction")){if(g=_,S=_[Gt]||null)C=S.formAction;else if(Tm(g)!==null)continue}else C=S.action;typeof C=="function"?a[u+1]=C:(a.splice(u,3),u-=3),uS(a)}}}function cS(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function vm(i){this._internalRoot=i}If.prototype.render=vm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Rn();tS(a,u,i,r,null,null)},If.prototype.unmount=vm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;tS(i.current,2,null,i,null,null),af(),r[vi]=null}};function If(i){this._internalRoot=i}If.prototype.unstable_scheduleHydration=function(i){if(i){var r=oc();i={blockedOn:null,target:i,priority:r};for(var a=0;a<Ws.length&&r!==0&&r<Ws[a].priority;a++);Ws.splice(a,0,i),a===0&&aS(i)}};var fS=e.version;if(fS!=="19.2.0")throw Error(s(527,fS,"19.2.0"));ae.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var FP={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{Xn=bf.inject(FP),$t=bf}catch{}}return ha.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,u="",g=_0,_=T0,S=E0;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=jA(i,1,!1,null,null,a,u,null,g,_,S,cS),i[vi]=r.current,nm(i),new vm(r)},ha.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var u=!1,g="",_=_0,S=T0,C=E0,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),r=jA(i,1,!0,r,a??null,u,g,N,_,S,C,cS),r.context=eS(null),a=r.current,u=Rn(),u=vr(u),g=Ls(u),g.callback=null,qs(a,g,u),a=u,r.current.lanes=a,Tr(r,a),Li(r),i[vi]=r.current,nm(i),new If(r)},ha.version="19.2.0",ha}var Vm;function vS(){if(Vm)return Nf.exports;Vm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nf.exports=ES(),Nf.exports}var AS=vS();const SS=er(AS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wS,CS;function RS(){return{geminiUrl:wS,vertexUrl:CS}}function IS(n,e,t,s){var o,l;if(!(n!=null&&n.baseUrl)){const c=RS();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tr{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const y=n[h];if(Array.isArray(t))for(let p=0;p<y.length;p++){const T=y[p];m(T,e.slice(l+1),t[p])}else for(const p of y)m(p,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const y=n[h];m(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(h=>f(h,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function bS(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),l=s.split("."),c=new Set;let h=-1;for(let y=0;y<o.length;y++)if(o[y]==="*"){h=y;break}if(h!==-1&&l.length>h)for(let y=h;y<l.length;y++){const p=l[y];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Uf(n,o,l,0,c)}}function Uf(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const y of h[c])Uf(y,e,t,s+1,o)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!o.has(p)),y={};for(const p of h)y[p]=c[p];for(const[p,T]of Object.entries(y)){const v=[];for(const A of t.slice(s))A==="*"?v.push(p):v.push(A);m(c,v,T)}for(const p of h)delete c[p]}}else{const c=n;l in c&&Uf(c[l],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lf(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xS(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&m(e,["_url","resourceName"],s),e}function MS(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],NS(c)),e}function DS(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const c=f(n,["response"]);return c!=null&&m(e,["response"],VS(c)),e}function NS(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>PS(c))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function VS(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>kS(c))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function PS(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],qS(t)),e}function kS(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],OS(t)),e}function US(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function LS(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function qS(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Lf(s));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function OS(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Lf(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pm;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Pm||(Pm={}));var km;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(km||(km={}));var Hn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Hn||(Hn={}));var Um;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Um||(Um={}));var Lm;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Lm||(Lm={}));var qm;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(qm||(qm={}));var Om;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Om||(Om={}));var Bm;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Bm||(Bm={}));var zm;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zm||(zm={}));var Gm;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Gm||(Gm={}));var Fm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Fm||(Fm={}));var Hm;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Hm||(Hm={}));var Ym;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ym||(Ym={}));var Jm;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Jm||(Jm={}));var Km;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Km||(Km={}));var $l;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})($l||($l={}));var $m;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($m||($m={}));var qf;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qf||(qf={}));var Qm;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qm||(Qm={}));var Xm;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xm||(Xm={}));var Zm;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Zm||(Zm={}));var Wm;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Wm||(Wm={}));var jm;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(jm||(jm={}));var eg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(eg||(eg={}));var tg;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tg||(tg={}));var ng;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(ng||(ng={}));var ig;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(ig||(ig={}));var sg;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(sg||(sg={}));var rg;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(rg||(rg={}));var og;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(og||(og={}));var ag;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ag||(ag={}));var lg;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lg||(lg={}));var ug;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ug||(ug={}));var cg;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(cg||(cg={}));var fg;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(fg||(fg={}));var hg;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(hg||(hg={}));var dg;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(dg||(dg={}));var pg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(pg||(pg={}));var mg;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(mg||(mg={}));var gg;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(gg||(gg={}));var yg;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(yg||(yg={}));var _g;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_g||(_g={}));var Tg;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tg||(Tg={}));var Eg;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Eg||(Eg={}));var vg;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vg||(vg={}));var Ag;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Ag||(Ag={}));var Sg;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Sg||(Sg={}));var wg;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(wg||(wg={}));var Jr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Jr||(Jr={}));class Of{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class da{get text(){var e,t,s,o,l,c,h,y;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",T=!1;const v=[];for(const A of(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[x,k]of Object.entries(A))x!=="text"&&x!=="thought"&&(k!==null||k!==void 0)&&v.push(x);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;T=!0,p+=A.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?p:void 0}get data(){var e,t,s,o,l,c,h,y;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const T=[];for(const v of(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[A,x]of Object.entries(v))A!=="inlineData"&&(x!==null||x!==void 0)&&T.push(A);v.inlineData&&typeof v.inlineData.data=="string"&&(p+=atob(v.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,o,l,c,h,y;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,o,l,c,h,y,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,o,l,c,h,y,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.output}}class Cg{}class Rg{}class BS{}class zS{}class GS{}class FS{}class Ig{}class bg{}class xg{}class HS{}class Ql{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Ql;let o;const l=e;return t?o=DS(l):o=MS(l),Object.assign(s,o),s}}class Mg{}class Dg{}class Ng{}class YS{}class JS{}class KS{}class Vg{}class $S{get text(){var e,t,s;let o="",l=!1;const c=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[y,p]of Object.entries(h))y!=="text"&&y!=="thought"&&p!==null&&c.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,o+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,t,s;let o="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,y]of Object.entries(c))h!=="inlineData"&&y!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class QS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Pg(n,e){const t=ze(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function kg(n){return Array.isArray(n)?n.map(e=>Xl(e)):[Xl(n)]}function Xl(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Ug(n){const e=Xl(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Lg(n){const e=Xl(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qg(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Og(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>qg(e)):[qg(n)]}function Bf(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Bg(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function zg(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function tn(n){if(n==null)throw new Error("ContentUnion is required");return Bf(n)?n:{role:"user",parts:Og(n)}}function zf(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=tn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=tn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>tn(t)):[tn(e)]}function In(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Bg(n)||zg(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(n)]}const e=[],t=[],s=Bf(n[0]);for(const o of n){const l=Bf(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(Bg(o)||zg(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:Og(t)}),e}function XS(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Hn).includes(t[0].toUpperCase())?t[0].toUpperCase():Hn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Hn).includes(s.toUpperCase())?s.toUpperCase():Hn.TYPE_UNSPECIFIED})}}function Kr(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&XS(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Hn).includes(h.toUpperCase())?h.toUpperCase():Hn.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Kr(h);else if(s.includes(c)){const y=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}y.push(Kr(p))}e[c]=y}else if(o.includes(c)){const y={};for(const[p,T]of Object.entries(h))y[p]=Kr(T);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Gf(n){return Kr(n)}function Ff(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Hf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function $r(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Kr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Kr(e.response));return n}function Qr(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function ZS(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function qi(n,e){if(typeof e!="string")throw new Error("name must be a string");return ZS(n,e,"cachedContents")}function Gg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ls(n){return Lf(n)}function WS(n){return n!=null&&typeof n=="object"&&"name"in n}function jS(n){return n!=null&&typeof n=="object"&&"video"in n}function ew(n){return n!=null&&typeof n=="object"&&"uri"in n}function Fg(n){var e;let t;if(WS(n)&&(t=n.name),!(ew(n)&&(t=n.uri,t===void 0))&&!(jS(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Hg(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Yg(n){for(const e of["models","tunedModels","publisherModels"])if(tw(n,e))return n[e];return[]}function tw(n,e){return n!==null&&typeof n=="object"&&e in n}function nw(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function iw(n,e={}){const t=[],s=new Set;for(const o of n){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=nw(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function Jg(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function sw(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Kg(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Xr(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function $g(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rw(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Uw(c))),m(e,["inlinedResponses"],l)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["inlinedEmbedContentResponses"],l)}return e}function ow(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&m(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function aw(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&m(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Zl(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&m(e,["state"],$g(o));const l=f(n,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const h=f(n,["metadata","updateTime"]);h!=null&&m(e,["updateTime"],h);const y=f(n,["metadata","model"]);y!=null&&m(e,["model"],y);const p=f(n,["metadata","output"]);return p!=null&&m(e,["dest"],rw(Kg(p))),e}function Yf(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["state"]);o!=null&&m(e,["state"],$g(o));const l=f(n,["error"]);l!=null&&m(e,["error"],l);const c=f(n,["createTime"]);c!=null&&m(e,["createTime"],c);const h=f(n,["startTime"]);h!=null&&m(e,["startTime"],h);const y=f(n,["endTime"]);y!=null&&m(e,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&m(e,["updateTime"],p);const T=f(n,["model"]);T!=null&&m(e,["model"],T);const v=f(n,["inputConfig"]);v!=null&&m(e,["src"],lw(v));const A=f(n,["outputConfig"]);return A!=null&&m(e,["dest"],ow(Kg(A))),e}function lw(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&m(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function uw(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&m(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>kw(n,c))),m(t,["requests","requests"],l)}return t}function cw(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&m(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function fw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function hw(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function dw(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function pw(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],mw(s));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&m(e,["urlContextMetadata"],c);const h=f(n,["avgLogprobs"]);h!=null&&m(e,["avgLogprobs"],h);const y=f(n,["groundingMetadata"]);y!=null&&m(e,["groundingMetadata"],y);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const T=f(n,["logprobsResult"]);T!=null&&m(e,["logprobsResult"],T);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(x=>x)),m(e,["safetyRatings"],A)}return e}function mw(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function Qg(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>Fw(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function gw(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&m(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function yw(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],aw(sw(o))),t}function Xg(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],uw(n,Jg(n,o)));const l=f(e,["config"]);return l!=null&&gw(l,t),t}function _w(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],ze(n,s));const o=f(e,["src"]);o!=null&&m(t,["inputConfig"],cw(Jg(n,o)));const l=f(e,["config"]);return l!=null&&yw(l,t),t}function Tw(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&m(e,["batch","displayName"],s),t}function Ew(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],Iw(n,o));const l=f(e,["config"]);return l!=null&&Tw(l,t),t}function vw(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function Aw(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function Sw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);return l!=null&&m(e,["error"],l),e}function ww(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);return l!=null&&m(e,["error"],l),e}function Cw(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=zf(n,s);Array.isArray(l)&&(l=l.map(c=>c)),m(t,["requests[]","request","content"],l)}const o=f(e,["config"]);return o!=null&&(m(t,["_self"],Rw(o,t)),bS(t,{"requests[].*":"requests[].request.*"})),t}function Rw(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Iw(n,e){const t={},s=f(e,["fileName"]);s!=null&&m(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],Cw(n,o)),t}function bw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function xw(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Qg(tn(o)));const l=f(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(s,["topP"],c);const h=f(e,["topK"]);h!=null&&m(s,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&m(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&m(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&m(s,["responseLogprobs"],v);const A=f(e,["logprobs"]);A!=null&&m(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&m(s,["presencePenalty"],x);const k=f(e,["frequencyPenalty"]);k!=null&&m(s,["frequencyPenalty"],k);const B=f(e,["seed"]);B!=null&&m(s,["seed"],B);const H=f(e,["responseMimeType"]);H!=null&&m(s,["responseMimeType"],H);const ne=f(e,["responseSchema"]);ne!=null&&m(s,["responseSchema"],Gf(ne));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&m(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let q=X;Array.isArray(q)&&(q=q.map(D=>Hw(D))),m(t,["safetySettings"],q)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let q=Qr(oe);Array.isArray(q)&&(q=q.map(D=>Yw($r(D)))),m(t,["tools"],q)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&m(t,["toolConfig"],he),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],qi(n,le));const M=f(e,["responseModalities"]);M!=null&&m(s,["responseModalities"],M);const I=f(e,["mediaResolution"]);I!=null&&m(s,["mediaResolution"],I);const b=f(e,["speechConfig"]);if(b!=null&&m(s,["speechConfig"],Ff(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&m(s,["thinkingConfig"],V);const P=f(e,["imageConfig"]);return P!=null&&m(s,["imageConfig"],P),s}function Mw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>pw(p))),m(e,["candidates"],y)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&m(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&m(e,["usageMetadata"],h),e}function Dw(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function Nw(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function Vw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Pw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function kw(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["request","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let h=In(o);Array.isArray(h)&&(h=h.map(y=>Qg(y))),m(t,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&m(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&m(t,["request","generationConfig"],xw(n,c,f(t,["request"],{}))),t}function Uw(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],Mw(t));const s=f(n,["error"]);return s!=null&&m(e,["error"],s),e}function Lw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function qw(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),t}function Ow(n){const e={},t=f(n,["config"]);return t!=null&&Lw(t,e),e}function Bw(n){const e={},t=f(n,["config"]);return t!=null&&qw(t,e),e}function zw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Zl(c))),m(e,["batchJobs"],l)}return e}function Gw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Yf(c))),m(e,["batchJobs"],l)}return e}function Fw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],fw(o));const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],bw(l));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function Hw(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&m(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function Yw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],Pw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],Vw(l));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(nr||(nr={}));class pa{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jw extends tr{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new pa(nr.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Xg(this.apiClient,e),s=t._url,o=me("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,y=h.requests,p=[];for(const T of y){const v=Object.assign({},T);if(v.systemInstruction){const A=v.systemInstruction;delete v.systemInstruction;const x=v.request;x.systemInstruction=A,v.request=x}p.push(v)}return h.requests=p,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=_w(this.apiClient,e);return h=me("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Yf(T))}else{const p=Xg(this.apiClient,e);return h=me("{model}:batchGenerateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Zl(T))}}async createEmbeddingsInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ew(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>Zl(y))}}async get(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=Nw(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Yf(T))}else{const p=Dw(this.apiClient,e);return h=me("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Zl(T))}}async cancel(e){var t,s,o,l;let c="",h={};if(this.apiClient.isVertexAI()){const y=dw(this.apiClient,e);c=me("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=hw(this.apiClient,e);c=me("batches/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=Bw(e);return h=me("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=Gw(T),A=new Vg;return Object.assign(A,v),A})}else{const p=Ow(e);return h=me("batches",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=zw(T),A=new Vg;return Object.assign(A,v),A})}}async delete(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=Aw(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>ww(T))}else{const p=vw(this.apiClient,e);return h=me("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>Sw(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Zg(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>pC(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function $w(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=In(c);Array.isArray(T)&&(T=T.map(v=>Zg(v))),m(e,["contents"],T)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&m(e,["systemInstruction"],Zg(tn(h)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(v=>mC(v))),m(e,["tools"],T)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&m(e,["toolConfig"],p),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Qw(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=f(n,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=In(c);Array.isArray(v)&&(v=v.map(A=>A)),m(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&m(e,["systemInstruction"],tn(h));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(A=>gC(A))),m(e,["tools"],v)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&m(e,["toolConfig"],p);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&m(e,["encryption_spec","kmsKeyName"],T),t}function Xw(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],Pg(n,s));const o=f(e,["config"]);return o!=null&&$w(o,t),t}function Zw(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],Pg(n,s));const o=f(e,["config"]);return o!=null&&Qw(o,t),t}function Ww(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],qi(n,s)),t}function jw(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],qi(n,s)),t}function eC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function tC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function nC(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function iC(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&m(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&m(e,["responseJsonSchema"],h),e}function sC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],qi(n,s)),t}function rC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],qi(n,s)),t}function oC(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function aC(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function lC(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function uC(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function cC(n){const e={},t=f(n,["config"]);return t!=null&&lC(t,e),e}function fC(n){const e={},t=f(n,["config"]);return t!=null&&uC(t,e),e}function hC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function dC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function pC(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],Kw(o));const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],nC(l));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function mC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],aC(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],oC(l));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}function gC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(A=>iC(A))),m(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&m(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&m(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&m(e,["urlContext"],y);const p=f(n,["computerUse"]);p!=null&&m(e,["computerUse"],p);const T=f(n,["codeExecution"]);return T!=null&&m(e,["codeExecution"],T),e}function yC(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function _C(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function TC(n,e){const t={},s=f(e,["name"]);s!=null&&m(t,["_url","name"],qi(n,s));const o=f(e,["config"]);return o!=null&&yC(o,t),t}function EC(n,e){const t={},s=f(e,["name"]);s!=null&&m(t,["_url","name"],qi(n,s));const o=f(e,["config"]);return o!=null&&_C(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vC extends tr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pa(nr.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=Zw(this.apiClient,e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=Xw(this.apiClient,e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async get(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=rC(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=sC(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async delete(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=jw(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=tC(T),A=new Dg;return Object.assign(A,v),A})}else{const p=Ww(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=eC(T),A=new Dg;return Object.assign(A,v),A})}}async update(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=EC(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=TC(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async listInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=fC(e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=dC(T),A=new Ng;return Object.assign(A,v),A})}else{const p=cC(e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=hC(T),A=new Ng;return Object.assign(A,v),A})}}}function Wg(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(n){return this instanceof lt?(this.v=n,this):new lt(n)}function Zr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(x){return function(k){return Promise.resolve(k).then(x,v)}}function h(x,k){s[x]&&(o[x]=function(B){return new Promise(function(H,ne){l.push([x,B,H,ne])>1||y(x,B)})},k&&(o[x]=k(o[x])))}function y(x,k){try{p(s[x](k))}catch(B){A(l[0][3],B)}}function p(x){x.value instanceof lt?Promise.resolve(x.value.v).then(T,v):A(l[0][2],x)}function T(x){y("next",x)}function v(x){y("throw",x)}function A(x,k){x(k),l.shift(),l.length&&y(l[0][0],l[0][1])}}function ma(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Wg=="function"?Wg(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(h,y){c=n[l](c),o(h,y,c.done,c.value)})}}function o(l,c,h,y){Promise.resolve(y).then(function(p){l({value:p,done:h})},c)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AC(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:jg(t)}function jg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function SC(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ey(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let l=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),l&&!jg(n[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class wC{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new CC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class CC{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),SC(l)}async sendMessage(e){var t;await this.sendPromise;const s=tn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,h;const y=await o,p=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,T=y.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let A=[];T!=null&&(A=(h=T.slice(v))!==null&&h!==void 0?h:[]);const x=p?[p]:[];this.recordHistory(s,x,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=tn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?ey(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return Zr(this,arguments,function*(){var c,h,y,p;const T=[];try{for(var v=!0,A=ma(e),x;x=yield lt(A.next()),c=x.done,!c;v=!0){p=x.value,v=!1;const k=p;if(AC(k)){const B=(o=(s=k.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&T.push(B)}yield yield lt(k)}}catch(k){h={error:k}}finally{try{!v&&!c&&(y=A.return)&&(yield lt(y.call(A)))}finally{if(h)throw h.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(l=>l.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...ey(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RC(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function IC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function bC(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],Fg(t)),e}function xC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function MC(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],Fg(t)),e}function DC(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function NC(n){const e={},t=f(n,["config"]);return t!=null&&DC(t,e),e}function VC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PC extends tr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pa(nr.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=NC(e);return l=me("files",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=VC(y),T=new YS;return Object.assign(T,p),T})}}async createInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=RC(e);return l=me("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>{const p=IC(y),T=new JS;return Object.assign(T,p),T})}}async get(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MC(e);return l=me("files/{file}",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>y)}}async delete(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bC(e);return l=me("files/{file}",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=xC(y),T=new KS;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jl(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function kC(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>XC(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function UC(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function LC(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&m(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&m(e,["responseJsonSchema"],h),e}function qC(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&m(e,["frequencyPenalty"],c);const h=f(n,["logprobs"]);h!=null&&m(e,["logprobs"],h);const y=f(n,["maxOutputTokens"]);y!=null&&m(e,["maxOutputTokens"],y);const p=f(n,["mediaResolution"]);p!=null&&m(e,["mediaResolution"],p);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const v=f(n,["responseJsonSchema"]);v!=null&&m(e,["responseJsonSchema"],v);const A=f(n,["responseLogprobs"]);A!=null&&m(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&m(e,["responseMimeType"],x);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const B=f(n,["responseSchema"]);B!=null&&m(e,["responseSchema"],B);const H=f(n,["routingConfig"]);H!=null&&m(e,["routingConfig"],H);const ne=f(n,["seed"]);ne!=null&&m(e,["seed"],ne);const ie=f(n,["speechConfig"]);ie!=null&&m(e,["speechConfig"],ty(ie));const X=f(n,["stopSequences"]);X!=null&&m(e,["stopSequences"],X);const oe=f(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const he=f(n,["thinkingConfig"]);he!=null&&m(e,["thinkingConfig"],he);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const M=f(n,["topP"]);return M!=null&&m(e,["topP"],M),e}function OC(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function BC(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zC(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","speechConfig"],Hf(v));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],kC(tn(k)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let le=Qr(B);Array.isArray(le)&&(le=le.map(M=>WC($r(M)))),m(e,["setup","tools"],le)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&m(e,["setup","sessionResumption"],ZC(H));const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&m(e,["setup","inputAudioTranscription"],ne);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&m(e,["setup","realtimeInputConfig"],X);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&m(e,["setup","proactivity"],he),t}function GC(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],qC(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","speechConfig"],ty(Hf(v)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],tn(k));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let le=Qr(B);Array.isArray(le)&&(le=le.map(M=>jC($r(M)))),m(e,["setup","tools"],le)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&m(e,["setup","sessionResumption"],H);const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&m(e,["setup","inputAudioTranscription"],ne);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&m(e,["setup","realtimeInputConfig"],X);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&m(e,["setup","proactivity"],he),t}function FC(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],zC(o,t)),t}function HC(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],GC(o,t)),t}function YC(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function JC(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["weightedPrompts"],s)}return e}function KC(n){const e={},t=f(n,["media"]);if(t!=null){let p=kg(t);Array.isArray(p)&&(p=p.map(T=>jl(T))),m(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&m(e,["audio"],jl(Lg(s)));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&m(e,["video"],jl(Ug(l)));const c=f(n,["text"]);c!=null&&m(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&m(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&m(e,["activityEnd"],y),e}function $C(n){const e={},t=f(n,["media"]);if(t!=null){let p=kg(t);Array.isArray(p)&&(p=p.map(T=>T)),m(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&m(e,["audio"],Lg(s));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=f(n,["video"]);l!=null&&m(e,["video"],Ug(l));const c=f(n,["text"]);c!=null&&m(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&m(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&m(e,["activityEnd"],y),e}function QC(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&m(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const l=f(n,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],eR(c));const h=f(n,["goAway"]);h!=null&&m(e,["goAway"],h);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&m(e,["sessionResumptionUpdate"],y),e}function XC(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],jl(o));const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],UC(l));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function ZC(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ty(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&m(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function WC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],BC(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],OC(l));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}function jC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(A=>LC(A))),m(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&m(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&m(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&m(e,["urlContext"],y);const p=f(n,["computerUse"]);p!=null&&m(e,["computerUse"],p);const T=f(n,["codeExecution"]);return T!=null&&m(e,["codeExecution"],T),e}function eR(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&m(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const h=f(n,["totalTokenCount"]);h!=null&&m(e,["totalTokenCount"],h);const y=f(n,["promptTokensDetails"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(k=>k)),m(e,["promptTokensDetails"],x)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(k=>k)),m(e,["cacheTokensDetails"],x)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let x=T;Array.isArray(x)&&(x=x.map(k=>k)),m(e,["responseTokensDetails"],x)}const v=f(n,["toolUsePromptTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(k=>k)),m(e,["toolUsePromptTokensDetails"],x)}const A=f(n,["trafficType"]);return A!=null&&m(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function nR(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],iR(s));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=f(n,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=f(n,["urlContextMetadata"]);c!=null&&m(e,["urlContextMetadata"],c);const h=f(n,["avgLogprobs"]);h!=null&&m(e,["avgLogprobs"],h);const y=f(n,["groundingMetadata"]);y!=null&&m(e,["groundingMetadata"],y);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const T=f(n,["logprobsResult"]);T!=null&&m(e,["logprobsResult"],T);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(x=>x)),m(e,["safetyRatings"],A)}return e}function iR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function sR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let l=In(o);Array.isArray(l)&&(l=l.map(c=>c)),m(t,["contents"],l)}return t}function rR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["tokensInfo"],o)}return e}function oR(n){const e={},t=f(n,["values"]);t!=null&&m(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&m(e,["statistics"],aR(s)),e}function aR(n){const e={},t=f(n,["truncated"]);t!=null&&m(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&m(e,["tokenCount"],s),e}function eu(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>hI(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function lR(n){const e={},t=f(n,["controlType"]);t!=null&&m(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&m(e,["computeControl"],s),e}function uR(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function cR(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],tn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>cy(h))),m(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],jR(l)),t}function fR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=In(o);Array.isArray(c)&&(c=c.map(h=>eu(h))),m(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&uR(l),t}function hR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=In(o);Array.isArray(c)&&(c=c.map(h=>h)),m(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&cR(l,t),t}function dR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&m(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function pR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&m(e,["totalTokens"],s),e}function mR(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function gR(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function yR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function _R(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function TR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&m(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const v=f(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&m(e,["parameters","includeSafetyAttributes"],v);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&m(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&m(e,["parameters","language"],x);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&m(e,["parameters","outputOptions","compressionQuality"],B);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&m(e,["parameters","addWatermark"],H);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&m(e,["labels"],ne);const ie=f(n,["editMode"]);e!==void 0&&ie!=null&&m(e,["parameters","editMode"],ie);const X=f(n,["baseSteps"]);return e!==void 0&&X!=null&&m(e,["parameters","editConfig","baseSteps"],X),t}function ER(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(y=>_I(y))),m(t,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&TR(c,t),t}function vR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>tu(l))),m(e,["generatedImages"],o)}return e}function AR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function SR(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&m(e,["parameters","autoTruncate"],h),t}function wR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let h=zf(n,o);Array.isArray(h)&&(h=h.map(y=>y)),m(t,["requests[]","content"],h)}const l=f(e,["config"]);l!=null&&AR(l,t);const c=f(e,["model"]);return c!==void 0&&m(t,["requests[]","model"],ze(n,c)),t}function CR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=zf(n,o);Array.isArray(c)&&(c=c.map(h=>h)),m(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&SR(l,t),t}function RR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function IR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>oR(c))),m(e,["embeddings"],l)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function bR(n){const e={},t=f(n,["endpoint"]);t!=null&&m(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&m(e,["deployedModelId"],s),e}function xR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function MR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const l=f(n,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&m(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&m(e,["responseJsonSchema"],h),e}function DR(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],eu(tn(o)));const l=f(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(s,["topP"],c);const h=f(e,["topK"]);h!=null&&m(s,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&m(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&m(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&m(s,["responseLogprobs"],v);const A=f(e,["logprobs"]);A!=null&&m(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&m(s,["presencePenalty"],x);const k=f(e,["frequencyPenalty"]);k!=null&&m(s,["frequencyPenalty"],k);const B=f(e,["seed"]);B!=null&&m(s,["seed"],B);const H=f(e,["responseMimeType"]);H!=null&&m(s,["responseMimeType"],H);const ne=f(e,["responseSchema"]);ne!=null&&m(s,["responseSchema"],Gf(ne));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&m(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let q=X;Array.isArray(q)&&(q=q.map(D=>TI(D))),m(t,["safetySettings"],q)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let q=Qr(oe);Array.isArray(q)&&(q=q.map(D=>CI($r(D)))),m(t,["tools"],q)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&m(t,["toolConfig"],he),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],qi(n,le));const M=f(e,["responseModalities"]);M!=null&&m(s,["responseModalities"],M);const I=f(e,["mediaResolution"]);I!=null&&m(s,["mediaResolution"],I);const b=f(e,["speechConfig"]);if(b!=null&&m(s,["speechConfig"],Ff(b)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&m(s,["thinkingConfig"],V);const P=f(e,["imageConfig"]);return P!=null&&m(s,["imageConfig"],P),s}function NR(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],tn(o));const l=f(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&m(s,["topP"],c);const h=f(e,["topK"]);h!=null&&m(s,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&m(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&m(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&m(s,["responseLogprobs"],v);const A=f(e,["logprobs"]);A!=null&&m(s,["logprobs"],A);const x=f(e,["presencePenalty"]);x!=null&&m(s,["presencePenalty"],x);const k=f(e,["frequencyPenalty"]);k!=null&&m(s,["frequencyPenalty"],k);const B=f(e,["seed"]);B!=null&&m(s,["seed"],B);const H=f(e,["responseMimeType"]);H!=null&&m(s,["responseMimeType"],H);const ne=f(e,["responseSchema"]);ne!=null&&m(s,["responseSchema"],Gf(ne));const ie=f(e,["responseJsonSchema"]);ie!=null&&m(s,["responseJsonSchema"],ie);const X=f(e,["routingConfig"]);X!=null&&m(s,["routingConfig"],X);const oe=f(e,["modelSelectionConfig"]);oe!=null&&m(s,["modelConfig"],oe);const he=f(e,["safetySettings"]);if(t!==void 0&&he!=null){let $=he;Array.isArray($)&&($=$.map(ae=>ae)),m(t,["safetySettings"],$)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let $=Qr(le);Array.isArray($)&&($=$.map(ae=>cy($r(ae)))),m(t,["tools"],$)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&m(t,["toolConfig"],M);const I=f(e,["labels"]);t!==void 0&&I!=null&&m(t,["labels"],I);const b=f(e,["cachedContent"]);t!==void 0&&b!=null&&m(t,["cachedContent"],qi(n,b));const V=f(e,["responseModalities"]);V!=null&&m(s,["responseModalities"],V);const P=f(e,["mediaResolution"]);P!=null&&m(s,["mediaResolution"],P);const q=f(e,["speechConfig"]);q!=null&&m(s,["speechConfig"],uy(Ff(q)));const D=f(e,["audioTimestamp"]);D!=null&&m(s,["audioTimestamp"],D);const st=f(e,["thinkingConfig"]);st!=null&&m(s,["thinkingConfig"],st);const gt=f(e,["imageConfig"]);return gt!=null&&m(s,["imageConfig"],gt),s}function ny(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=In(o);Array.isArray(c)&&(c=c.map(h=>eu(h))),m(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(t,["generationConfig"],DR(n,l,t)),t}function iy(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=In(o);Array.isArray(c)&&(c=c.map(h=>h)),m(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&m(t,["generationConfig"],NR(n,l,t)),t}function sy(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>nR(p))),m(e,["candidates"],y)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=f(n,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&m(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&m(e,["usageMetadata"],h),e}function ry(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["candidates"],p)}const o=f(n,["createTime"]);o!=null&&m(e,["createTime"],o);const l=f(n,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const h=f(n,["responseId"]);h!=null&&m(e,["responseId"],h);const y=f(n,["usageMetadata"]);return y!=null&&m(e,["usageMetadata"],y),e}function VR(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&m(e,["parameters","includeSafetyAttributes"],y);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&m(e,["parameters","includeRaiReason"],p);const T=f(n,["language"]);e!==void 0&&T!=null&&m(e,["parameters","language"],T);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","mimeType"],v);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&m(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(n,["imageSize"]);if(e!==void 0&&x!=null&&m(e,["parameters","sampleImageSize"],x),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function PR(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&m(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const v=f(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&m(e,["parameters","includeSafetyAttributes"],v);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&m(e,["parameters","includeRaiReason"],A);const x=f(n,["language"]);e!==void 0&&x!=null&&m(e,["parameters","language"],x);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&m(e,["parameters","outputOptions","compressionQuality"],B);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&m(e,["parameters","addWatermark"],H);const ne=f(n,["labels"]);e!==void 0&&ne!=null&&m(e,["labels"],ne);const ie=f(n,["imageSize"]);e!==void 0&&ie!=null&&m(e,["parameters","sampleImageSize"],ie);const X=f(n,["enhancePrompt"]);return e!==void 0&&X!=null&&m(e,["parameters","enhancePrompt"],X),t}function kR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&VR(l,t),t}function UR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["config"]);return l!=null&&PR(l,t),t}function LR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>QR(c))),m(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],ay(o)),e}function qR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>tu(c))),m(e,["generatedImages"],l)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],ly(o)),e}function OR(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&m(e,["parameters","negativePrompt"],y);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&m(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&m(e,["instances[0]","lastFrame"],nu(T));const v=f(n,["referenceImages"]);if(e!==void 0&&v!=null){let A=v;Array.isArray(A)&&(A=A.map(x=>qI(x))),m(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function BR(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const l=f(n,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const h=f(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&m(e,["parameters","aspectRatio"],y);const p=f(n,["resolution"]);e!==void 0&&p!=null&&m(e,["parameters","resolution"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const v=f(n,["pubsubTopic"]);e!==void 0&&v!=null&&m(e,["parameters","pubsubTopic"],v);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&m(e,["parameters","negativePrompt"],A);const x=f(n,["enhancePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","enhancePrompt"],x);const k=f(n,["generateAudio"]);e!==void 0&&k!=null&&m(e,["parameters","generateAudio"],k);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&m(e,["instances[0]","lastFrame"],Yn(B));const H=f(n,["referenceImages"]);if(e!==void 0&&H!=null){let X=H;Array.isArray(X)&&(X=X.map(oe=>OI(oe))),m(e,["instances[0]","referenceImages"],X)}const ne=f(n,["mask"]);e!==void 0&&ne!=null&&m(e,["instances[0]","mask"],LI(ne));const ie=f(n,["compressionQuality"]);return e!==void 0&&ie!=null&&m(e,["parameters","compressionQuality"],ie),t}function zR(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],YR(c)),e}function GR(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const l=f(n,["error"]);l!=null&&m(e,["error"],l);const c=f(n,["response"]);return c!=null&&m(e,["response"],JR(c)),e}function FR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&m(t,["instances[0]","image"],nu(l));const c=f(e,["video"]);c!=null&&m(t,["instances[0]","video"],fy(c));const h=f(e,["source"]);h!=null&&KR(h,t);const y=f(e,["config"]);return y!=null&&OR(y,t),t}function HR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const l=f(e,["image"]);l!=null&&m(t,["instances[0]","image"],Yn(l));const c=f(e,["video"]);c!=null&&m(t,["instances[0]","video"],hy(c));const h=f(e,["source"]);h!=null&&$R(h,t);const y=f(e,["config"]);return y!=null&&BR(y,t),t}function YR(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>ZR(c))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function JR(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>WR(c))),m(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function KR(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],nu(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],fy(l)),t}function $R(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Yn(o));const l=f(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],hy(l)),t}function QR(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],sI(t));const s=f(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],ay(o)),e}function tu(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],oy(t));const s=f(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&m(e,["safetyAttributes"],ly(o));const l=f(n,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function XR(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["mask"],oy(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["labels"],o)}return e}function ZR(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],kI(t)),e}function WR(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],UI(t)),e}function jR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const l=f(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const c=f(n,["frequencyPenalty"]);c!=null&&m(e,["frequencyPenalty"],c);const h=f(n,["logprobs"]);h!=null&&m(e,["logprobs"],h);const y=f(n,["maxOutputTokens"]);y!=null&&m(e,["maxOutputTokens"],y);const p=f(n,["mediaResolution"]);p!=null&&m(e,["mediaResolution"],p);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const v=f(n,["responseJsonSchema"]);v!=null&&m(e,["responseJsonSchema"],v);const A=f(n,["responseLogprobs"]);A!=null&&m(e,["responseLogprobs"],A);const x=f(n,["responseMimeType"]);x!=null&&m(e,["responseMimeType"],x);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const B=f(n,["responseSchema"]);B!=null&&m(e,["responseSchema"],B);const H=f(n,["routingConfig"]);H!=null&&m(e,["routingConfig"],H);const ne=f(n,["seed"]);ne!=null&&m(e,["seed"],ne);const ie=f(n,["speechConfig"]);ie!=null&&m(e,["speechConfig"],uy(ie));const X=f(n,["stopSequences"]);X!=null&&m(e,["stopSequences"],X);const oe=f(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const he=f(n,["thinkingConfig"]);he!=null&&m(e,["thinkingConfig"],he);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const M=f(n,["topP"]);return M!=null&&m(e,["topP"],M),e}function eI(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function tI(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function nI(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function iI(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function sI(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],ls(t));const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function oy(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["imageBytes"],ls(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function nu(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],ls(t));const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Yn(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&m(e,["bytesBase64Encoded"],ls(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function rI(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],Hg(n,h)),s}function oI(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],Hg(n,h)),s}function aI(n,e){const t={},s=f(e,["config"]);return s!=null&&rI(n,s,t),t}function lI(n,e){const t={},s=f(e,["config"]);return s!=null&&oI(n,s,t),t}function uI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=Yg(o);Array.isArray(l)&&(l=l.map(c=>Jf(c))),m(e,["models"],l)}return e}function cI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let l=Yg(o);Array.isArray(l)&&(l=l.map(c=>Kf(c))),m(e,["models"],l)}return e}function fI(n){const e={},t=f(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&m(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function Jf(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const l=f(n,["version"]);l!=null&&m(e,["version"],l);const c=f(n,["_self"]);c!=null&&m(e,["tunedModelInfo"],RI(c));const h=f(n,["inputTokenLimit"]);h!=null&&m(e,["inputTokenLimit"],h);const y=f(n,["outputTokenLimit"]);y!=null&&m(e,["outputTokenLimit"],y);const p=f(n,["supportedGenerationMethods"]);return p!=null&&m(e,["supportedActions"],p),e}function Kf(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const l=f(n,["versionId"]);l!=null&&m(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(A=>bR(A))),m(e,["endpoints"],v)}const h=f(n,["labels"]);h!=null&&m(e,["labels"],h);const y=f(n,["_self"]);y!=null&&m(e,["tunedModelInfo"],II(y));const p=f(n,["defaultCheckpointId"]);p!=null&&m(e,["defaultCheckpointId"],p);const T=f(n,["checkpoints"]);if(T!=null){let v=T;Array.isArray(v)&&(v=v.map(A=>A)),m(e,["checkpoints"],v)}return e}function hI(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],tR(o));const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],xR(l));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function dI(n){const e={},t=f(n,["productImage"]);return t!=null&&m(e,["image"],Yn(t)),e}function pI(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","editConfig","baseSteps"],o);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&m(e,["parameters","addWatermark"],p);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const v=f(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&m(e,["parameters","enhancePrompt"],A);const x=f(n,["labels"]);return e!==void 0&&x!=null&&m(e,["labels"],x),t}function mI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["source"]);o!=null&&yI(o,t);const l=f(e,["config"]);return l!=null&&pI(l,t),t}function gI(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>tu(o))),m(e,["generatedImages"],s)}return e}function yI(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Yn(o));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>dI(h))),m(e,["instances[0]","productImages"],c)}return t}function _I(n){const e={},t=f(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],Yn(t));const s=f(n,["referenceId"]);s!=null&&m(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const l=f(n,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],fI(l));const c=f(n,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],lR(c));const h=f(n,["styleImageConfig"]);h!=null&&m(e,["styleImageConfig"],h);const y=f(n,["subjectImageConfig"]);return y!=null&&m(e,["subjectImageConfig"],y),e}function ay(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function ly(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function TI(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&m(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function EI(n){const e={},t=f(n,["image"]);return t!=null&&m(e,["image"],Yn(t)),e}function vI(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&m(e,["parameters","binaryColorThreshold"],h);const y=f(n,["labels"]);return e!==void 0&&y!=null&&m(e,["labels"],y),t}function AI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["source"]);o!=null&&wI(o,t);const l=f(e,["config"]);return l!=null&&vI(l,t),t}function SI(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>XR(o))),m(e,["generatedMasks"],s)}return e}function wI(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Yn(o));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],EI(l)),t}function uy(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&m(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function CI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],iI(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],nI(l));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}function cy(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(A=>MR(A))),m(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&m(e,["googleSearch"],o);const l=f(n,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const c=f(n,["enterpriseWebSearch"]);c!=null&&m(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&m(e,["urlContext"],y);const p=f(n,["computerUse"]);p!=null&&m(e,["computerUse"],p);const T=f(n,["codeExecution"]);return T!=null&&m(e,["codeExecution"],T),e}function RI(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function II(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function bI(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),t}function xI(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),t}function MI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","name"],ze(n,s));const o=f(e,["config"]);return o!=null&&bI(o,t),t}function DI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&xI(o,t),t}function NI(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["includeRaiReason"]);e!==void 0&&o!=null&&m(e,["parameters","includeRaiReason"],o);const l=f(n,["outputMimeType"]);e!==void 0&&l!=null&&m(e,["parameters","outputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&m(e,["parameters","outputOptions","compressionQuality"],c);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=f(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const p=f(n,["labels"]);e!==void 0&&p!=null&&m(e,["labels"],p);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const v=f(n,["mode"]);return e!==void 0&&v!=null&&m(e,["parameters","mode"],v),t}function VI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["image"]);o!=null&&m(t,["instances[0]","image"],Yn(o));const l=f(e,["upscaleFactor"]);l!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&NI(c,t),t}function PI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>tu(l))),m(e,["generatedImages"],o)}return e}function kI(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],ls(s));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function UI(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],ls(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function LI(n){const e={},t=f(n,["image"]);t!=null&&m(e,["_self"],Yn(t));const s=f(n,["maskMode"]);return s!=null&&m(e,["maskMode"],s),e}function qI(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],nu(t));const s=f(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function OI(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],Yn(t));const s=f(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function fy(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&m(e,["encodedVideo"],ls(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function hy(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&m(e,["bytesBase64Encoded"],ls(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BI="Content-Type",zI="X-Server-Timeout",GI="User-Agent",$f="x-goog-api-client",FI="google-genai-sdk/1.25.0",HI="v1beta1",YI="v1beta",dy=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class JI{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:HI,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:YI,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))o.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&KI(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await py(o),new Of(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await py(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Zr(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:y}=yield lt(o.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(y,{stream:!0});try{const v=JSON.parse(p);if("error"in v){const A=JSON.parse(JSON.stringify(v.error)),x=A.status,k=A.code,B=`got status: ${x}. ${JSON.stringify(v)}`;if(k>=400&&k<600)throw new Wl({message:B,status:k})}}catch(v){if(v.name==="ApiError")throw v}c+=p;let T=c.match(dy);for(;T;){const v=T[1];try{const A=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield lt(new Of(A)),c=c.slice(T[0].length),T=c.match(dy)}catch(A){throw new Error(`exception parsing stream chunk ${v}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=FI+" "+this.clientOptions.userAgentExtra;return e[GI]=t,e[$f]=t,e[BI]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(zI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=h;const y=await this.fetchUploadUrl(o,t);return l.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:me("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function py(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Wl({message:o,status:t}):new Error(o)}}function KI(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const h=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const p=c[y],T=h[y];p&&typeof p=="object"&&!Array.isArray(p)&&T&&typeof T=="object"&&!Array.isArray(T)?h[y]=s(T,p):(T&&p&&typeof T!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof T}, New type: ${typeof p}. Overwriting.`),h[y]=p)}return h}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $I="mcp_used/unknown";let QI=!1;function my(n){for(const e of n)if(XI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return QI}function gy(n){var e;const t=(e=n[$f])!==null&&e!==void 0?e:"";n[$f]=(t+` ${$I}`).trimStart()}function XI(n){return n!==null&&typeof n=="object"&&n instanceof Qf}function ZI(n,e=100){return Zr(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield lt(n.listTools({cursor:s}));for(const c of l.tools)yield yield lt(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class Qf{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Qf(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const T of this.mcpClients)try{for(var h=!0,y=(t=void 0,ma(ZI(T))),p;p=await y.next(),e=p.done,!e;h=!0){o=p.value,h=!1;const v=o;c.push(v);const A=v.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=T}}catch(v){t={error:v}}finally{try{!h&&!e&&(s=y.return)&&await s.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),iw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WI(n,e,t){const s=new QS;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class jI{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=n1(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const T=new Promise(X=>{p=X}),v=e.callbacks,A=function(){p({})},x=this.apiClient,k={onopen:A,onmessage:X=>{WI(x,v.onmessage,X)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(X){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(X){}},B=this.webSocketFactory.create(y,t1(c),k);B.connect(),await T;const ie={setup:{model:ze(this.apiClient,e.model)}};return B.send(JSON.stringify(ie)),new e1(B,this.apiClient)}}class e1{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=JC(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=YC(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Jr.PLAY)}pause(){this.sendPlaybackControl(Jr.PAUSE)}stop(){this.sendPlaybackControl(Jr.STOP)}resetContext(){this.sendPlaybackControl(Jr.RESET_CONTEXT)}close(){this.conn.close()}}function t1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function n1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function s1(n,e,t){const s=new $S;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const l=JSON.parse(o);if(n.isVertexAI()){const c=QC(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class r1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new jI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let T;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&my(e.config.tools)&&gy(v);const A=u1(v);if(this.apiClient.isVertexAI())T=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A);else{const b=this.apiClient.getApiKey();let V="BidiGenerateContent",P="key";b!=null&&b.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",P="access_token"),T=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${V}?${P}=${b}`}let x=()=>{};const k=new Promise(b=>{x=b}),B=e.callbacks,H=function(){var b;(b=B==null?void 0:B.onopen)===null||b===void 0||b.call(B),x({})},ne=this.apiClient,ie={onopen:H,onmessage:b=>{s1(ne,B.onmessage,b)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(b){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(b){}},X=this.webSocketFactory.create(T,l1(A),ie);X.connect(),await k;let oe=ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const b=this.apiClient.getProject(),V=this.apiClient.getLocation();oe=`projects/${b}/locations/${V}/`+oe}let he={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$l.AUDIO]}:e.config.responseModalities=[$l.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],M=[];for(const b of le)if(this.isCallableTool(b)){const V=b;M.push(await V.tool())}else M.push(b);M.length>0&&(e.config.tools=M);const I={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=HC(this.apiClient,I):he=FC(this.apiClient,I),delete he.config,X.send(JSON.stringify(he)),new a1(X,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const o1={turnComplete:!0};class a1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=In(t.turns),e.isVertexAI()||(s=s.map(o=>eu(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(i1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},o1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:$C(e)}:t={realtimeInput:KC(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function l1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function u1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yy=10;function _y(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Wr(c)){o=!0;break}if(!o)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Wr(n){return"callTool"in n&&typeof n.callTool=="function"}function c1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Wr(o)))!==null&&s!==void 0?s:!1}function f1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Wr(o)))!==null&&s!==void 0?s:!1}function Ty(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h1 extends tr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,l,c,h;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!c1(t)||_y(t.config))return await this.generateContentInternal(y);if(f1(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,T;const v=In(y.contents),A=(l=(o=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:yy;let x=0;for(;x<A&&(p=await this.generateContentInternal(y),!(!p.functionCalls||p.functionCalls.length===0));){const k=p.candidates[0].content,B=[];for(const H of(h=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Wr(H)){const ie=await H.callTool(p.functionCalls);B.push(...ie)}x++,T={role:"user",parts:B},y.contents=In(y.contents),y.contents.push(k),y.contents.push(T),Ty(y.config)&&(v.push(k),v.push(T))}return Ty(y.config)&&(p.automaticFunctionCallingHistory=v),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),_y(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((o=y==null?void 0:y.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new pa(nr.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,l,c,h,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(h=t.source)===null||h===void 0?void 0:h.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>Wr(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&my(e.config.tools)){const y=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),gy(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var t,s,o;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Wr(c)){const h=c,y=await h.tool();for(const p of(o=y.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var t,s,o;const l=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:yy;let c=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(p,T,v){var A,x;return Zr(this,arguments,function*(){for(var k,B,H,ne;h<l;){c&&(h++,c=!1);const he=yield lt(p.processParamsMaybeAddMcpUsage(v)),le=yield lt(p.generateContentStreamInternal(he)),M=[],I=[];try{for(var ie=!0,X=(B=void 0,ma(le)),oe;oe=yield lt(X.next()),k=oe.done,!k;ie=!0){ne=oe.value,ie=!1;const b=ne;if(yield yield lt(b),b.candidates&&(!((A=b.candidates[0])===null||A===void 0)&&A.content)){I.push(b.candidates[0].content);for(const V of(x=b.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(h<l&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(V.functionCall.name)){const P=yield lt(T.get(V.functionCall.name).callTool([V.functionCall]));M.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(b){B={error:b}}finally{try{!ie&&!k&&(H=X.return)&&(yield lt(H.call(X)))}finally{if(B)throw B.error}}if(M.length>0){c=!0;const b=new da;b.candidates=[{content:{role:"user",parts:M}}],yield yield lt(b);const V=[];V.push(...I),V.push({role:"user",parts:M});const P=In(v.contents).concat(V);v.contents=P}else break}})})(this,y,e)}async generateContentInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=iy(this.apiClient,e);return h=me("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=ry(T),A=new da;return Object.assign(A,v),A})}else{const p=ny(this.apiClient,e);return h=me("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=sy(T),A=new da;return Object.assign(A,v),A})}}async generateContentStreamInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=iy(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(v){return Zr(this,arguments,function*(){var A,x,k,B;try{for(var H=!0,ne=ma(v),ie;ie=yield lt(ne.next()),A=ie.done,!A;H=!0){B=ie.value,H=!1;const X=B,oe=ry(yield lt(X.json()));oe.sdkHttpResponse={headers:X.headers};const he=new da;Object.assign(he,oe),yield yield lt(he)}}catch(X){x={error:X}}finally{try{!H&&!A&&(k=ne.return)&&(yield lt(k.call(ne)))}finally{if(x)throw x.error}}})})}else{const p=ny(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(v){return Zr(this,arguments,function*(){var A,x,k,B;try{for(var H=!0,ne=ma(v),ie;ie=yield lt(ne.next()),A=ie.done,!A;H=!0){B=ie.value,H=!1;const X=B,oe=sy(yield lt(X.json()));oe.sdkHttpResponse={headers:X.headers};const he=new da;Object.assign(he,oe),yield yield lt(he)}}catch(X){x={error:X}}finally{try{!H&&!A&&(k=ne.return)&&(yield lt(k.call(ne)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=CR(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=IR(T),A=new Cg;return Object.assign(A,v),A})}else{const p=wR(this.apiClient,e);return h=me("{model}:batchEmbedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=RR(T),A=new Cg;return Object.assign(A,v),A})}}async generateImagesInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=UR(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=qR(T),A=new Rg;return Object.assign(A,v),A})}else{const p=kR(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=LR(T),A=new Rg;return Object.assign(A,v),A})}}async editImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=ER(this.apiClient,e);return l=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=vR(y),T=new BS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=VI(this.apiClient,e);return l=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=PI(y),T=new zS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=mI(this.apiClient,e);return l=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>{const p=gI(y),T=new GS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=AI(this.apiClient,e);return l=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>{const p=SI(y),T=new FS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=tI(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Kf(T))}else{const p=eI(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Jf(T))}}async listInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=lI(this.apiClient,e);return h=me("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=cI(T),A=new Ig;return Object.assign(A,v),A})}else{const p=aI(this.apiClient,e);return h=me("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=uI(T),A=new Ig;return Object.assign(A,v),A})}}async update(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=DI(this.apiClient,e);return h=me("{model}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Kf(T))}else{const p=MI(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>Jf(T))}}async delete(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=gR(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=_R(T),A=new bg;return Object.assign(A,v),A})}else{const p=mR(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=yR(T),A=new bg;return Object.assign(A,v),A})}}async countTokens(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=hR(this.apiClient,e);return h=me("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=pR(T),A=new xg;return Object.assign(A,v),A})}else{const p=fR(this.apiClient,e);return h=me("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=dR(T),A=new xg;return Object.assign(A,v),A})}}async computeTokens(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=sR(this.apiClient,e);return l=me("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=rR(y),T=new HS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=HR(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>{const v=GR(T),A=new Ql;return Object.assign(A,v),A})}else{const p=FR(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c.then(T=>{const v=zR(T),A=new Ql;return Object.assign(A,v),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d1 extends tr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=LS(e);return h=me("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c}else{const p=US(e);return h=me("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=xS(e);return l=me("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function m1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>S1(l))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function g1(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&m(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&m(t,["uses"],c);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&m(t,["bidiGenerateContentSetup"],A1(n,h));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&m(t,["fieldMask"],y),s}function y1(n,e){const t={},s=f(e,["config"]);return s!=null&&m(t,["config"],g1(n,s,t)),t}function _1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function T1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function E1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function v1(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=f(n,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","speechConfig"],Hf(v));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","thinkingConfig"],A);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],m1(tn(k)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let le=Qr(B);Array.isArray(le)&&(le=le.map(M=>C1($r(M)))),m(e,["setup","tools"],le)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&m(e,["setup","sessionResumption"],w1(H));const ne=f(n,["inputAudioTranscription"]);e!==void 0&&ne!=null&&m(e,["setup","inputAudioTranscription"],ne);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&m(e,["setup","realtimeInputConfig"],X);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&m(e,["setup","proactivity"],he),t}function A1(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],v1(o,t)),t}function S1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],p1(o));const l=f(n,["fileData"]);l!=null&&m(e,["fileData"],_1(l));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function w1(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function C1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],E1(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],T1(l));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R1(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${t}.${l}`);e.push(...o)}else e.push(t)}return e.join(",")}function I1(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const l=R1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];o.length>0&&(h=o.map(p=>c.includes(p)?`generationConfig.${p}`:p));const y=[];l&&y.push(l),h.length>0&&y.push(...h),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class b1 extends tr{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=y1(this.apiClient,e);l=me("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const y=I1(h,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function M1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function D1(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&m(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&m(e,["tuningTask","hyperparameters","epochCount"],o);const l=f(n,["learningRateMultiplier"]);if(l!=null&&m(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&m(e,["tuningTask","hyperparameters","batchSize"],c);const h=f(n,["learningRate"]);if(e!==void 0&&h!=null&&m(e,["tuningTask","hyperparameters","learningRate"],h),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function N1(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec"],K1(s,t));const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&m(e,["tunedModelDisplayName"],o);const l=f(n,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const h=f(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const y=f(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const p=f(n,["adapterSize"]);if(e!==void 0&&p!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);return e!==void 0&&T!=null&&m(e,["labels"],T),t}function V1(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&m(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&m(e,["tuningTask","trainingData"],H1(o));const l=f(n,["config"]);return l!=null&&D1(l,e),e}function P1(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&m(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],Y1(o,e));const l=f(n,["config"]);return l!=null&&N1(l,e),e}function k1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function U1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function L1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),t}function q1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=f(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),t}function O1(n){const e={},t=f(n,["config"]);return t!=null&&L1(t,e),e}function B1(n){const e={},t=f(n,["config"]);return t!=null&&q1(t,e),e}function z1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Ey(c))),m(e,["tuningJobs"],l)}return e}function G1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Xf(c))),m(e,["tuningJobs"],l)}return e}function F1(n){const e={},t=f(n,["name"]);t!=null&&m(e,["model"],t);const s=f(n,["name"]);return s!=null&&m(e,["endpoint"],s),e}function H1(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["examples","examples"],s)}return e}function Y1(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Ey(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["state"]);o!=null&&m(e,["state"],Gg(o));const l=f(n,["createTime"]);l!=null&&m(e,["createTime"],l);const c=f(n,["tuningTask","startTime"]);c!=null&&m(e,["startTime"],c);const h=f(n,["tuningTask","completeTime"]);h!=null&&m(e,["endTime"],h);const y=f(n,["updateTime"]);y!=null&&m(e,["updateTime"],y);const p=f(n,["description"]);p!=null&&m(e,["description"],p);const T=f(n,["baseModel"]);T!=null&&m(e,["baseModel"],T);const v=f(n,["_self"]);v!=null&&m(e,["tunedModel"],F1(v));const A=f(n,["customBaseModel"]);A!=null&&m(e,["customBaseModel"],A);const x=f(n,["experiment"]);x!=null&&m(e,["experiment"],x);const k=f(n,["labels"]);k!=null&&m(e,["labels"],k);const B=f(n,["outputUri"]);B!=null&&m(e,["outputUri"],B);const H=f(n,["pipelineJob"]);H!=null&&m(e,["pipelineJob"],H);const ne=f(n,["serviceAccount"]);ne!=null&&m(e,["serviceAccount"],ne);const ie=f(n,["tunedModelDisplayName"]);ie!=null&&m(e,["tunedModelDisplayName"],ie);const X=f(n,["veoTuningSpec"]);return X!=null&&m(e,["veoTuningSpec"],X),e}function Xf(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["state"]);o!=null&&m(e,["state"],Gg(o));const l=f(n,["createTime"]);l!=null&&m(e,["createTime"],l);const c=f(n,["startTime"]);c!=null&&m(e,["startTime"],c);const h=f(n,["endTime"]);h!=null&&m(e,["endTime"],h);const y=f(n,["updateTime"]);y!=null&&m(e,["updateTime"],y);const p=f(n,["error"]);p!=null&&m(e,["error"],p);const T=f(n,["description"]);T!=null&&m(e,["description"],T);const v=f(n,["baseModel"]);v!=null&&m(e,["baseModel"],v);const A=f(n,["tunedModel"]);A!=null&&m(e,["tunedModel"],A);const x=f(n,["preTunedModel"]);x!=null&&m(e,["preTunedModel"],x);const k=f(n,["supervisedTuningSpec"]);k!=null&&m(e,["supervisedTuningSpec"],k);const B=f(n,["tuningDataStats"]);B!=null&&m(e,["tuningDataStats"],B);const H=f(n,["encryptionSpec"]);H!=null&&m(e,["encryptionSpec"],H);const ne=f(n,["partnerModelTuningSpec"]);ne!=null&&m(e,["partnerModelTuningSpec"],ne);const ie=f(n,["customBaseModel"]);ie!=null&&m(e,["customBaseModel"],ie);const X=f(n,["experiment"]);X!=null&&m(e,["experiment"],X);const oe=f(n,["labels"]);oe!=null&&m(e,["labels"],oe);const he=f(n,["outputUri"]);he!=null&&m(e,["outputUri"],he);const le=f(n,["pipelineJob"]);le!=null&&m(e,["pipelineJob"],le);const M=f(n,["serviceAccount"]);M!=null&&m(e,["serviceAccount"],M);const I=f(n,["tunedModelDisplayName"]);I!=null&&m(e,["tunedModelDisplayName"],I);const b=f(n,["veoTuningSpec"]);return b!=null&&m(e,["veoTuningSpec"],b),e}function J1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["metadata"]);o!=null&&m(e,["metadata"],o);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const c=f(n,["error"]);return c!=null&&m(e,["error"],c),e}function K1(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&m(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $1 extends tr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new pa(nr.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:qf.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=U1(e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>Xf(T))}else{const p=k1(e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>Ey(T))}}async listInternal(e){var t,s,o,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=B1(e);return h=me("tuningJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=G1(T),A=new Mg;return Object.assign(A,v),A})}else{const p=O1(e);return h=me("tunedModels",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=z1(T),A=new Mg;return Object.assign(A,v),A})}}async cancel(e){var t,s,o,l;let c="",h={};if(this.apiClient.isVertexAI()){const y=M1(e);c=me("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=x1(e);c=me("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const h=P1(e);return l=me("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>Xf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=V1(e);return l=me("tunedModels",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>J1(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q1{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const X1=1024*1024*8,Z1=3,W1=1e3,j1=2,Zf="x-goog-upload-status";async function eb(n,e,t){var s,o,l;let c=0,h=0,y=new Of(new Response),p="upload";for(c=n.size;h<c;){const v=Math.min(X1,c-h),A=n.slice(h,h+v);h+v>=c&&(p+=", finalize");let x=0,k=W1;for(;x<Z1&&(y=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(v)}}}),!(!((s=y==null?void 0:y.headers)===null||s===void 0)&&s[Zf]));)x++,await nb(k),k=k*j1;if(h+=v,((o=y==null?void 0:y.headers)===null||o===void 0?void 0:o[Zf])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const T=await(y==null?void 0:y.json());if(((l=y==null?void 0:y.headers)===null||l===void 0?void 0:l[Zf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return T.file}async function tb(n){return{size:n.size,type:n.type}}function nb(n){return new Promise(e=>setTimeout(e,n))}class ib{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eb(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tb(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sb{create(e,t,s){return new rb(e,t,s)}}class rb{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vy="x-goog-api-key";class ob{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(vy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ab="gl-node/";class lb{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=IS(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new ob(this.apiKey);this.apiClient=new JI({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:ab+"web",uploader:new ib,downloader:new Q1}),this.models=new h1(this.apiClient),this.live=new r1(this.apiClient,o,new sb),this.batches=new Jw(this.apiClient),this.chats=new wC(this.models,this.apiClient),this.caches=new vC(this.apiClient),this.files=new PC(this.apiClient),this.operations=new d1(this.apiClient),this.authTokens=new b1(this.apiClient),this.tunings=new $1(this.apiClient)}}const ub=()=>{};var Ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},cb=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],y=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},wy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,y=o+2<n.length,p=y?n[o+2]:0,T=l>>2,v=(l&3)<<4|h>>4;let A=(h&15)<<2|p>>6,x=p&63;y||(x=64,c||(A=64)),s.push(t[T],t[v],t[A],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Sy(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const p=o<n.length?t[n.charAt(o)]:64;++o;const v=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||p==null||v==null)throw new fb;const A=l<<2|h>>4;if(s.push(A),p!==64){const x=h<<4&240|p>>2;if(s.push(x),v!==64){const k=p<<6&192|v;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hb=function(n){const e=Sy(n);return wy.encodeByteArray(e,!0)},iu=function(n){return hb(n).replace(/\./g,"")},db=function(n){try{return wy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=()=>pb().__FIREBASE_DEFAULTS__,gb=()=>{if(typeof process>"u"||typeof Ay>"u")return;const n=Ay.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&db(n[1]);return e&&JSON.parse(e)},Wf=()=>{try{return ub()||mb()||gb()||yb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_b=n=>{var e,t;return(t=(e=Wf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Tb=n=>{const e=_b(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Cy=()=>{var n;return(n=Wf())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[iu(JSON.stringify(t)),iu(JSON.stringify(c)),""].join(".")}const ga={};function Sb(){const n={prod:[],emulator:[]};for(const e of Object.keys(ga))ga[e]?n.emulator.push(e):n.prod.push(e);return n}function wb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ry=!1;function Cb(n,e){if(typeof window>"u"||typeof document>"u"||!jf(window.location.host)||ga[n]===e||ga[n]||Ry)return;ga[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=Sb().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function h(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ry=!0,c()},A}function T(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function v(){const A=wb(s),x=t("text"),k=document.getElementById(x)||document.createElement("span"),B=t("learnmore"),H=document.getElementById(B)||document.createElement("a"),ne=t("preprendIcon"),ie=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;h(X),T(H,B);const oe=p();y(ie,ne),X.append(ie,k,H,oe),document.body.appendChild(X)}l?(k.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ib(){var e;const n=(e=Wf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bb(){return!Ib()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xb(){try{return typeof indexedDB=="object"}catch{return!1}}function Mb(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="FirebaseError";class jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Db,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iy.prototype.create)}}class Iy{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?Nb(l,s):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new jr(o,h,s)}}function Nb(n,e){return n.replace(Vb,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Vb=/\{\$([^}]+)}/g;function su(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(by(l)&&by(c)){if(!su(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function by(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(n){return n&&n._delegate?n._delegate:n}class ya{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Eb;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ub(e))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:kb(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kb(n){return n===ir?void 0:n}function Ub(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Pb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const qb={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Ob=Le.INFO,Bb={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},zb=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=Bb[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xy{constructor(e){this.name=e,this._logLevel=Ob,this._logHandler=zb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const Gb=(n,e)=>e.some(t=>n instanceof t);let My,Dy;function Fb(){return My||(My=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hb(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ny=new WeakMap,eh=new WeakMap,Vy=new WeakMap,th=new WeakMap,nh=new WeakMap;function Yb(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(us(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Ny.set(t,n)}).catch(()=>{}),nh.set(e,n),e}function Jb(n){if(eh.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});eh.set(n,e)}let ih={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return eh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Vy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Kb(n){ih=n(ih)}function $b(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(sh(this),e,...t);return Vy.set(s,e.sort?e.sort():[e]),us(s)}:Hb().includes(n)?function(...e){return n.apply(sh(this),e),us(Ny.get(this))}:function(...e){return us(n.apply(sh(this),e))}}function Qb(n){return typeof n=="function"?$b(n):(n instanceof IDBTransaction&&Jb(n),Gb(n,Fb())?new Proxy(n,ih):n)}function us(n){if(n instanceof IDBRequest)return Yb(n);if(th.has(n))return th.get(n);const e=Qb(n);return e!==n&&(th.set(n,e),nh.set(e,n)),e}const sh=n=>nh.get(n);function Xb(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=us(c);return s&&c.addEventListener("upgradeneeded",y=>{s(us(c.result),y.oldVersion,y.newVersion,us(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),h.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const Zb=["get","getKey","getAll","getAllKeys","count"],Wb=["put","add","delete","clear"],rh=new Map;function Py(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Wb.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Zb.includes(t)))return;const l=async function(c,...h){const y=this.transaction(c,o?"readwrite":"readonly");let p=y.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),o&&y.done]))[0]};return rh.set(e,l),l}Kb(n=>({...n,get:(e,t,s)=>Py(e,t)||n.get(e,t,s),has:(e,t)=>!!Py(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ex(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function ex(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oh="@firebase/app",ky="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new xy("@firebase/app"),tx="@firebase/app-compat",nx="@firebase/analytics-compat",ix="@firebase/analytics",sx="@firebase/app-check-compat",rx="@firebase/app-check",ox="@firebase/auth",ax="@firebase/auth-compat",lx="@firebase/database",ux="@firebase/data-connect",cx="@firebase/database-compat",fx="@firebase/functions",hx="@firebase/functions-compat",dx="@firebase/installations",px="@firebase/installations-compat",mx="@firebase/messaging",gx="@firebase/messaging-compat",yx="@firebase/performance",_x="@firebase/performance-compat",Tx="@firebase/remote-config",Ex="@firebase/remote-config-compat",vx="@firebase/storage",Ax="@firebase/storage-compat",Sx="@firebase/firestore",wx="@firebase/ai",Cx="@firebase/firestore-compat",Rx="firebase",Ix="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]",bx={[oh]:"fire-core",[tx]:"fire-core-compat",[ix]:"fire-analytics",[nx]:"fire-analytics-compat",[rx]:"fire-app-check",[sx]:"fire-app-check-compat",[ox]:"fire-auth",[ax]:"fire-auth-compat",[lx]:"fire-rtdb",[ux]:"fire-data-connect",[cx]:"fire-rtdb-compat",[fx]:"fire-fn",[hx]:"fire-fn-compat",[dx]:"fire-iid",[px]:"fire-iid-compat",[mx]:"fire-fcm",[gx]:"fire-fcm-compat",[yx]:"fire-perf",[_x]:"fire-perf-compat",[Tx]:"fire-rc",[Ex]:"fire-rc-compat",[vx]:"fire-gcs",[Ax]:"fire-gcs-compat",[Sx]:"fire-fst",[Cx]:"fire-fst-compat",[wx]:"fire-vertex","fire-js":"fire-js",[Rx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,xx=new Map,lh=new Map;function Uy(n,e){try{n.container.addComponent(e)}catch(t){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ou(n){const e=n.name;if(lh.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;lh.set(e,n);for(const t of ru.values())Uy(t,n);for(const t of xx.values())Uy(t,n);return!0}function Mx(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dx(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Iy("app","Firebase",Nx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ya("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=Ix;function Ly(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:ah,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(t||(t=Cy()),!t)throw cs.create("no-options");const l=ru.get(o);if(l){if(su(t,l.options)&&su(s,l.config))return l;throw cs.create("duplicate-app",{appName:o})}const c=new Lb(o);for(const y of lh.values())c.addComponent(y);const h=new Vx(t,s,c);return ru.set(o,h),h}function kx(n=ah){const e=ru.get(n);if(!e&&n===ah&&Cy())return Ly();if(!e)throw cs.create("no-app",{appName:n});return e}function to(n,e,t){let s=bx[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(c.join(" "));return}ou(new ya(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebase-heartbeat-database",Lx=1,_a="firebase-heartbeat-store";let uh=null;function qy(){return uh||(uh=Xb(Ux,Lx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_a)}catch(t){console.warn(t)}}}}).catch(n=>{throw cs.create("idb-open",{originalErrorMessage:n.message})})),uh}async function qx(n){try{const t=(await qy()).transaction(_a),s=await t.objectStore(_a).get(By(n));return await t.done,s}catch(e){if(e instanceof jr)Oi.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(t.message)}}}async function Oy(n,e){try{const s=(await qy()).transaction(_a,"readwrite");await s.objectStore(_a).put(e,By(n)),await s.done}catch(t){if(t instanceof jr)Oi.warn(t.message);else{const s=cs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Oi.warn(s.message)}}}function By(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=1024,Bx=30;class zx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fx(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=zy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>Bx){const c=Hx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Oi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zy(),{heartbeatsToSend:s,unsentEntries:o}=Gx(this._heartbeatsCache.heartbeats),l=iu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Oi.warn(t),""}}}function zy(){return new Date().toISOString().substring(0,10)}function Gx(n,e=Ox){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Gy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Gy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Fx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xb()?Mb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gy(n){return iu(JSON.stringify({version:2,heartbeats:n})).length}function Hx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(n){ou(new ya("platform-logger",e=>new jb(e),"PRIVATE")),ou(new ya("heartbeat",e=>new zx(e),"PRIVATE")),to(oh,ky,n),to(oh,ky,"esm2020"),to("fire-js","")}Yx("");var Jx="firebase",Kx="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */to(Jx,Kx,"app");var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fs,Hy;(function(){var n;/** @license

	 Copyright The Closure Library Authors.
	 SPDX-License-Identifier: Apache-2.0
	*/function e(M,I){function b(){}b.prototype=I.prototype,M.F=I.prototype,M.prototype=new b,M.prototype.constructor=M,M.D=function(V,P,q){for(var D=Array(arguments.length-2),st=2;st<arguments.length;st++)D[st-2]=arguments[st];return I.prototype[P].apply(V,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,I,b){b||(b=0);const V=Array(16);if(typeof I=="string")for(var P=0;P<16;++P)V[P]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(P=0;P<16;++P)V[P]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=M.g[0],b=M.g[1],P=M.g[2];let q=M.g[3],D;D=I+(q^b&(P^q))+V[0]+3614090360&4294967295,I=b+(D<<7&4294967295|D>>>25),D=q+(P^I&(b^P))+V[1]+3905402710&4294967295,q=I+(D<<12&4294967295|D>>>20),D=P+(b^q&(I^b))+V[2]+606105819&4294967295,P=q+(D<<17&4294967295|D>>>15),D=b+(I^P&(q^I))+V[3]+3250441966&4294967295,b=P+(D<<22&4294967295|D>>>10),D=I+(q^b&(P^q))+V[4]+4118548399&4294967295,I=b+(D<<7&4294967295|D>>>25),D=q+(P^I&(b^P))+V[5]+1200080426&4294967295,q=I+(D<<12&4294967295|D>>>20),D=P+(b^q&(I^b))+V[6]+2821735955&4294967295,P=q+(D<<17&4294967295|D>>>15),D=b+(I^P&(q^I))+V[7]+4249261313&4294967295,b=P+(D<<22&4294967295|D>>>10),D=I+(q^b&(P^q))+V[8]+1770035416&4294967295,I=b+(D<<7&4294967295|D>>>25),D=q+(P^I&(b^P))+V[9]+2336552879&4294967295,q=I+(D<<12&4294967295|D>>>20),D=P+(b^q&(I^b))+V[10]+4294925233&4294967295,P=q+(D<<17&4294967295|D>>>15),D=b+(I^P&(q^I))+V[11]+2304563134&4294967295,b=P+(D<<22&4294967295|D>>>10),D=I+(q^b&(P^q))+V[12]+1804603682&4294967295,I=b+(D<<7&4294967295|D>>>25),D=q+(P^I&(b^P))+V[13]+4254626195&4294967295,q=I+(D<<12&4294967295|D>>>20),D=P+(b^q&(I^b))+V[14]+2792965006&4294967295,P=q+(D<<17&4294967295|D>>>15),D=b+(I^P&(q^I))+V[15]+1236535329&4294967295,b=P+(D<<22&4294967295|D>>>10),D=I+(P^q&(b^P))+V[1]+4129170786&4294967295,I=b+(D<<5&4294967295|D>>>27),D=q+(b^P&(I^b))+V[6]+3225465664&4294967295,q=I+(D<<9&4294967295|D>>>23),D=P+(I^b&(q^I))+V[11]+643717713&4294967295,P=q+(D<<14&4294967295|D>>>18),D=b+(q^I&(P^q))+V[0]+3921069994&4294967295,b=P+(D<<20&4294967295|D>>>12),D=I+(P^q&(b^P))+V[5]+3593408605&4294967295,I=b+(D<<5&4294967295|D>>>27),D=q+(b^P&(I^b))+V[10]+38016083&4294967295,q=I+(D<<9&4294967295|D>>>23),D=P+(I^b&(q^I))+V[15]+3634488961&4294967295,P=q+(D<<14&4294967295|D>>>18),D=b+(q^I&(P^q))+V[4]+3889429448&4294967295,b=P+(D<<20&4294967295|D>>>12),D=I+(P^q&(b^P))+V[9]+568446438&4294967295,I=b+(D<<5&4294967295|D>>>27),D=q+(b^P&(I^b))+V[14]+3275163606&4294967295,q=I+(D<<9&4294967295|D>>>23),D=P+(I^b&(q^I))+V[3]+4107603335&4294967295,P=q+(D<<14&4294967295|D>>>18),D=b+(q^I&(P^q))+V[8]+1163531501&4294967295,b=P+(D<<20&4294967295|D>>>12),D=I+(P^q&(b^P))+V[13]+2850285829&4294967295,I=b+(D<<5&4294967295|D>>>27),D=q+(b^P&(I^b))+V[2]+4243563512&4294967295,q=I+(D<<9&4294967295|D>>>23),D=P+(I^b&(q^I))+V[7]+1735328473&4294967295,P=q+(D<<14&4294967295|D>>>18),D=b+(q^I&(P^q))+V[12]+2368359562&4294967295,b=P+(D<<20&4294967295|D>>>12),D=I+(b^P^q)+V[5]+4294588738&4294967295,I=b+(D<<4&4294967295|D>>>28),D=q+(I^b^P)+V[8]+2272392833&4294967295,q=I+(D<<11&4294967295|D>>>21),D=P+(q^I^b)+V[11]+1839030562&4294967295,P=q+(D<<16&4294967295|D>>>16),D=b+(P^q^I)+V[14]+4259657740&4294967295,b=P+(D<<23&4294967295|D>>>9),D=I+(b^P^q)+V[1]+2763975236&4294967295,I=b+(D<<4&4294967295|D>>>28),D=q+(I^b^P)+V[4]+1272893353&4294967295,q=I+(D<<11&4294967295|D>>>21),D=P+(q^I^b)+V[7]+4139469664&4294967295,P=q+(D<<16&4294967295|D>>>16),D=b+(P^q^I)+V[10]+3200236656&4294967295,b=P+(D<<23&4294967295|D>>>9),D=I+(b^P^q)+V[13]+681279174&4294967295,I=b+(D<<4&4294967295|D>>>28),D=q+(I^b^P)+V[0]+3936430074&4294967295,q=I+(D<<11&4294967295|D>>>21),D=P+(q^I^b)+V[3]+3572445317&4294967295,P=q+(D<<16&4294967295|D>>>16),D=b+(P^q^I)+V[6]+76029189&4294967295,b=P+(D<<23&4294967295|D>>>9),D=I+(b^P^q)+V[9]+3654602809&4294967295,I=b+(D<<4&4294967295|D>>>28),D=q+(I^b^P)+V[12]+3873151461&4294967295,q=I+(D<<11&4294967295|D>>>21),D=P+(q^I^b)+V[15]+530742520&4294967295,P=q+(D<<16&4294967295|D>>>16),D=b+(P^q^I)+V[2]+3299628645&4294967295,b=P+(D<<23&4294967295|D>>>9),D=I+(P^(b|~q))+V[0]+4096336452&4294967295,I=b+(D<<6&4294967295|D>>>26),D=q+(b^(I|~P))+V[7]+1126891415&4294967295,q=I+(D<<10&4294967295|D>>>22),D=P+(I^(q|~b))+V[14]+2878612391&4294967295,P=q+(D<<15&4294967295|D>>>17),D=b+(q^(P|~I))+V[5]+4237533241&4294967295,b=P+(D<<21&4294967295|D>>>11),D=I+(P^(b|~q))+V[12]+1700485571&4294967295,I=b+(D<<6&4294967295|D>>>26),D=q+(b^(I|~P))+V[3]+2399980690&4294967295,q=I+(D<<10&4294967295|D>>>22),D=P+(I^(q|~b))+V[10]+4293915773&4294967295,P=q+(D<<15&4294967295|D>>>17),D=b+(q^(P|~I))+V[1]+2240044497&4294967295,b=P+(D<<21&4294967295|D>>>11),D=I+(P^(b|~q))+V[8]+1873313359&4294967295,I=b+(D<<6&4294967295|D>>>26),D=q+(b^(I|~P))+V[15]+4264355552&4294967295,q=I+(D<<10&4294967295|D>>>22),D=P+(I^(q|~b))+V[6]+2734768916&4294967295,P=q+(D<<15&4294967295|D>>>17),D=b+(q^(P|~I))+V[13]+1309151649&4294967295,b=P+(D<<21&4294967295|D>>>11),D=I+(P^(b|~q))+V[4]+4149444226&4294967295,I=b+(D<<6&4294967295|D>>>26),D=q+(b^(I|~P))+V[11]+3174756917&4294967295,q=I+(D<<10&4294967295|D>>>22),D=P+(I^(q|~b))+V[2]+718787259&4294967295,P=q+(D<<15&4294967295|D>>>17),D=b+(q^(P|~I))+V[9]+3951481745&4294967295,M.g[0]=M.g[0]+I&4294967295,M.g[1]=M.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+P&4294967295,M.g[3]=M.g[3]+q&4294967295}s.prototype.v=function(M,I){I===void 0&&(I=M.length);const b=I-this.blockSize,V=this.C;let P=this.h,q=0;for(;q<I;){if(P==0)for(;q<=b;)o(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<I;)if(V[P++]=M.charCodeAt(q++),P==this.blockSize){o(this,V),P=0;break}}else for(;q<I;)if(V[P++]=M[q++],P==this.blockSize){o(this,V),P=0;break}}this.h=P,this.o+=I},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var I=1;I<M.length-8;++I)M[I]=0;I=this.o*8;for(var b=M.length-8;b<M.length;++b)M[b]=I&255,I/=256;for(this.v(M),M=Array(16),I=0,b=0;b<4;++b)for(let V=0;V<32;V+=8)M[I++]=this.g[b]>>>V&255;return M};function l(M,I){var b=h;return Object.prototype.hasOwnProperty.call(b,M)?b[M]:b[M]=I(M)}function c(M,I){this.h=I;const b=[];let V=!0;for(let P=M.length-1;P>=0;P--){const q=M[P]|0;V&&q==I||(b[P]=q,V=!1)}this.g=b}var h={};function y(M){return-128<=M&&M<128?l(M,function(I){return new c([I|0],I<0?-1:0)}):new c([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return v;if(M<0)return H(p(-M));const I=[];let b=1;for(let V=0;M>=b;V++)I[V]=M/b|0,b*=4294967296;return new c(I,0)}function T(M,I){if(M.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(M.charAt(0)=="-")return H(T(M.substring(1),I));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=p(Math.pow(I,8));let V=v;for(let q=0;q<M.length;q+=8){var P=Math.min(8,M.length-q);const D=parseInt(M.substring(q,q+P),I);P<8?(P=p(Math.pow(I,P)),V=V.j(P).add(p(D))):(V=V.j(b),V=V.add(p(D)))}return V}var v=y(0),A=y(1),x=y(16777216);n=c.prototype,n.m=function(){if(B(this))return-H(this).m();let M=0,I=1;for(let b=0;b<this.g.length;b++){const V=this.i(b);M+=(V>=0?V:4294967296+V)*I,I*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(B(this))return"-"+H(this).toString(M);const I=p(Math.pow(M,6));var b=this;let V="";for(;;){const P=oe(b,I).g;b=ne(b,P.j(I));let q=((b.g.length>0?b.g[0]:b.h)>>>0).toString(M);if(b=P,k(b))return q+V;for(;q.length<6;)q="0"+q;V=q+V}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let I=0;I<M.g.length;I++)if(M.g[I]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=ne(this,M),B(M)?-1:k(M)?0:1};function H(M){const I=M.g.length,b=[];for(let V=0;V<I;V++)b[V]=~M.g[V];return new c(b,~M.h).add(A)}n.abs=function(){return B(this)?H(this):this},n.add=function(M){const I=Math.max(this.g.length,M.g.length),b=[];let V=0;for(let P=0;P<=I;P++){let q=V+(this.i(P)&65535)+(M.i(P)&65535),D=(q>>>16)+(this.i(P)>>>16)+(M.i(P)>>>16);V=D>>>16,q&=65535,D&=65535,b[P]=D<<16|q}return new c(b,b[b.length-1]&-2147483648?-1:0)};function ne(M,I){return M.add(H(I))}n.j=function(M){if(k(this)||k(M))return v;if(B(this))return B(M)?H(this).j(H(M)):H(H(this).j(M));if(B(M))return H(this.j(H(M)));if(this.l(x)<0&&M.l(x)<0)return p(this.m()*M.m());const I=this.g.length+M.g.length,b=[];for(var V=0;V<2*I;V++)b[V]=0;for(V=0;V<this.g.length;V++)for(let P=0;P<M.g.length;P++){const q=this.i(V)>>>16,D=this.i(V)&65535,st=M.i(P)>>>16,gt=M.i(P)&65535;b[2*V+2*P]+=D*gt,ie(b,2*V+2*P),b[2*V+2*P+1]+=q*gt,ie(b,2*V+2*P+1),b[2*V+2*P+1]+=D*st,ie(b,2*V+2*P+1),b[2*V+2*P+2]+=q*st,ie(b,2*V+2*P+2)}for(M=0;M<I;M++)b[M]=b[2*M+1]<<16|b[2*M];for(M=I;M<2*I;M++)b[M]=0;return new c(b,0)};function ie(M,I){for(;(M[I]&65535)!=M[I];)M[I+1]+=M[I]>>>16,M[I]&=65535,I++}function X(M,I){this.g=M,this.h=I}function oe(M,I){if(k(I))throw Error("division by zero");if(k(M))return new X(v,v);if(B(M))return I=oe(H(M),I),new X(H(I.g),H(I.h));if(B(I))return I=oe(M,H(I)),new X(H(I.g),I.h);if(M.g.length>30){if(B(M)||B(I))throw Error("slowDivide_ only works with positive integers.");for(var b=A,V=I;V.l(M)<=0;)b=he(b),V=he(V);var P=le(b,1),q=le(V,1);for(V=le(V,2),b=le(b,2);!k(V);){var D=q.add(V);D.l(M)<=0&&(P=P.add(b),q=D),V=le(V,1),b=le(b,1)}return I=ne(M,P.j(I)),new X(P,I)}for(P=v;M.l(I)>=0;){for(b=Math.max(1,Math.floor(M.m()/I.m())),V=Math.ceil(Math.log(b)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),q=p(b),D=q.j(I);B(D)||D.l(M)>0;)b-=V,q=p(b),D=q.j(I);k(q)&&(q=A),P=P.add(q),M=ne(M,D)}return new X(P,M)}n.B=function(M){return oe(this,M).h},n.and=function(M){const I=Math.max(this.g.length,M.g.length),b=[];for(let V=0;V<I;V++)b[V]=this.i(V)&M.i(V);return new c(b,this.h&M.h)},n.or=function(M){const I=Math.max(this.g.length,M.g.length),b=[];for(let V=0;V<I;V++)b[V]=this.i(V)|M.i(V);return new c(b,this.h|M.h)},n.xor=function(M){const I=Math.max(this.g.length,M.g.length),b=[];for(let V=0;V<I;V++)b[V]=this.i(V)^M.i(V);return new c(b,this.h^M.h)};function he(M){const I=M.g.length+1,b=[];for(let V=0;V<I;V++)b[V]=M.i(V)<<1|M.i(V-1)>>>31;return new c(b,M.h)}function le(M,I){const b=I>>5;I%=32;const V=M.g.length-b,P=[];for(let q=0;q<V;q++)P[q]=I>0?M.i(q+b)>>>I|M.i(q+b+1)<<32-I:M.i(q+b);return new c(P,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Hy=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=T,fs=c}).apply(typeof Fy<"u"?Fy:typeof self<"u"?self:typeof window<"u"?window:{});var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yy,Ta,Jy,lu,ch,Ky,$y,Qy;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof au=="object"&&au];for(var E=0;E<d.length;++E){var w=d[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function o(d,E){if(E)e:{var w=s;d=d.split(".");for(var R=0;R<d.length-1;R++){var z=d[R];if(!(z in w))break e;w=w[z]}d=d[d.length-1],R=w[d],E=E(R),E!=R&&E!=null&&e(w,d,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(E){var w=[],R;for(R in E)Object.prototype.hasOwnProperty.call(E,R)&&w.push([R,E[R]]);return w}});/** @license

	 Copyright The Closure Library Authors.
	 SPDX-License-Identifier: Apache-2.0
	*/var l=l||{},c=this||self;function h(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function y(d,E,w){return d.call.apply(d.bind,arguments)}function p(d,E,w){return p=y,p.apply(null,arguments)}function T(d,E){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function v(d,E){function w(){}w.prototype=E.prototype,d.Z=E.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(R,z,J){for(var re=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)re[Re-2]=arguments[Re];return E.prototype[z].apply(R,re)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function x(d){const E=d.length;if(E>0){const w=Array(E);for(let R=0;R<E;R++)w[R]=d[R];return w}return[]}function k(d,E){for(let R=1;R<arguments.length;R++){const z=arguments[R];var w=typeof z;if(w=w!="object"?w:z?Array.isArray(z)?"array":w:"null",w=="array"||w=="object"&&typeof z.length=="number"){w=d.length||0;const J=z.length||0;d.length=w+J;for(let re=0;re<J;re++)d[w+re]=z[re]}else d.push(z)}}class B{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function H(d){c.setTimeout(()=>{throw d},0)}function ne(){var d=M;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class ie{constructor(){this.h=this.g=null}add(E,w){const R=X.get();R.set(E,w),this.h?this.h.next=R:this.g=R,this.h=R}}var X=new B(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let he,le=!1,M=new ie,I=()=>{const d=Promise.resolve(void 0);he=()=>{d.then(b)}};function b(){for(var d;d=ne();){try{d.h.call(d.g)}catch(w){H(w)}var E=X;E.j(d),E.h<100&&(E.h++,d.next=E.g,E.g=d)}le=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};c.addEventListener("test",w,E),c.removeEventListener("test",w,E)}catch{}return d})();function D(d){return/^[\s\xa0]*$/.test(d)}function st(d,E){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,E)}v(st,P),st.prototype.init=function(d,E){const w=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget,E||(w=="mouseover"?E=d.fromElement:w=="mouseout"&&(E=d.toElement)),this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&st.Z.h.call(this)},st.prototype.h=function(){st.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),$=0;function ae(d,E,w,R,z){this.listener=d,this.proxy=null,this.src=E,this.type=w,this.capture=!!R,this.ha=z,this.key=++$,this.da=this.fa=!1}function Te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Be(d,E,w){for(const R in d)E.call(w,d[R],R,d)}function Qe(d,E){for(const w in d)E.call(void 0,d[w],w,d)}function L(d){const E={};for(const w in d)E[w]=d[w];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(d,E){let w,R;for(let z=1;z<arguments.length;z++){R=arguments[z];for(w in R)d[w]=R[w];for(let J=0;J<ee.length;J++)w=ee[J],Object.prototype.hasOwnProperty.call(R,w)&&(d[w]=R[w])}}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,E,w,R,z){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const re=be(d,E,R,z);return re>-1?(E=d[re],w||(E.fa=!1)):(E=new ae(E,this.src,J,!!R,z),E.fa=w,d.push(E)),E};function Ae(d,E){const w=E.type;if(w in d.g){var R=d.g[w],z=Array.prototype.indexOf.call(R,E,void 0),J;(J=z>=0)&&Array.prototype.splice.call(R,z,1),J&&(Te(E),d.g[w].length==0&&(delete d.g[w],d.h--))}}function be(d,E,w,R){for(let z=0;z<d.length;++z){const J=d[z];if(!J.da&&J.listener==E&&J.capture==!!w&&J.ha==R)return z}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Lt={};function ht(d,E,w,R,z){if(Array.isArray(E)){for(let J=0;J<E.length;J++)ht(d,E[J],w,R,z);return null}return w=Ja(w),d&&d[gt]?d.J(E,w,h(R)?!!R.capture:!1,z):mr(d,E,w,!1,R,z)}function mr(d,E,w,R,z,J){if(!E)throw Error("Invalid event type");const re=h(z)?!!z.capture:!!z;let Re=gr(d);if(Re||(d[Oe]=Re=new de(d)),w=Re.add(E,w,R,re,J),w.proxy)return w;if(R=vo(),w.proxy=R,R.src=d,R.listener=w,d.addEventListener)q||(z=re),z===void 0&&(z=!1),d.addEventListener(E.toString(),R,z);else if(d.attachEvent)d.attachEvent(gi(E.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function vo(){function d(w){return E.call(d.src,d.listener,w)}const E=Ha;return d}function Ao(d,E,w,R,z){if(Array.isArray(E))for(var J=0;J<E.length;J++)Ao(d,E[J],w,R,z);else R=h(R)?!!R.capture:!!R,w=Ja(w),d&&d[gt]?(d=d.i,J=String(E).toString(),J in d.g&&(E=d.g[J],w=be(E,w,R,z),w>-1&&(Te(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete d.g[J],d.h--)))):d&&(d=gr(d))&&(E=d.g[E.toString()],d=-1,E&&(d=be(E,w,R,z)),(w=d>-1?E[d]:null)&&So(w))}function So(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[gt])Ae(E.i,d);else{var w=d.type,R=d.proxy;E.removeEventListener?E.removeEventListener(w,R,d.capture):E.detachEvent?E.detachEvent(gi(w),R):E.addListener&&E.removeListener&&E.removeListener(R),(w=gr(E))?(Ae(w,d),w.h==0&&(w.src=null,E[Oe]=null)):Te(d)}}}function gi(d){return d in Lt?Lt[d]:Lt[d]="on"+d}function Ha(d,E){if(d.da)d=!0;else{E=new st(E,this);const w=d.listener,R=d.ha||d.src;d.fa&&So(d),d=w.call(R,E)}return d}function gr(d){return d=d[Oe],d instanceof de?d:null}var Ya="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ja(d){return typeof d=="function"?d:(d[Ya]||(d[Ya]=function(E){return d.handleEvent(E)}),d[Ya])}function It(){V.call(this),this.i=new de(this),this.M=this,this.G=null}v(It,V),It.prototype[gt]=!0,It.prototype.removeEventListener=function(d,E,w,R){Ao(this,d,E,w,R)};function qt(d,E){var w,R=d.G;if(R)for(w=[];R;R=R.G)w.push(R);if(d=d.M,R=E.type||E,typeof E=="string")E=new P(E,d);else if(E instanceof P)E.target=E.target||d;else{var z=E;E=new P(R,d),ue(E,z)}z=!0;let J,re;if(w)for(re=w.length-1;re>=0;re--)J=E.g=w[re],z=vs(J,R,!0,E)&&z;if(J=E.g=d,z=vs(J,R,!0,E)&&z,z=vs(J,R,!1,E)&&z,w)for(re=0;re<w.length;re++)J=E.g=w[re],z=vs(J,R,!1,E)&&z}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var d=this.i;for(const E in d.g){const w=d.g[E];for(let R=0;R<w.length;R++)Te(w[R]);delete d.g[E],d.h--}}this.G=null},It.prototype.J=function(d,E,w,R){return this.i.add(String(d),E,!1,w,R)},It.prototype.K=function(d,E,w,R){return this.i.add(String(d),E,!0,w,R)};function vs(d,E,w,R){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();let z=!0;for(let J=0;J<E.length;++J){const re=E[J];if(re&&!re.da&&re.capture==w){const Re=re.listener,vt=re.ha||re.src;re.fa&&Ae(d.i,re),z=Re.call(vt,R)!==!1&&z}}return z&&!R.defaultPrevented}function wd(d,E){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(d,E||0)}function ju(d){d.g=wd(()=>{d.g=null,d.i&&(d.i=!1,ju(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class an extends V{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(d){V.call(this),this.h=d,this.g={}}v(yr,V);var Ka=[];function $a(d){Be(d.g,function(E,w){this.g.hasOwnProperty(w)&&So(E)},d),d.g={}}yr.prototype.N=function(){yr.Z.N.call(this),$a(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var As=c.JSON.stringify,Cd=c.JSON.parse,ec=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function tc(){}function nc(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){P.call(this,"d")}v($t,P);function Mn(){P.call(this,"c")}v(Mn,P);var Et={},ic=null;function wo(){return ic=ic||new It}Et.Ia="serverreachability";function sc(d){P.call(this,Et.Ia,d)}v(sc,P);function yi(d){const E=wo();qt(E,new sc(E))}Et.STAT_EVENT="statevent";function _r(d,E){P.call(this,Et.STAT_EVENT,d),this.stat=E}v(_r,P);function bt(d){const E=wo();qt(E,new _r(E,d))}Et.Ja="timingevent";function _i(d,E){P.call(this,Et.Ja,d),this.size=E}v(_i,P);function Ti(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},E)}function Zn(){this.g=!0}Zn.prototype.ua=function(){this.g=!1};function Rd(d,E,w,R,z,J){d.info(function(){if(d.g)if(J){var re="",Re=J.split("&");for(let Ye=0;Ye<Re.length;Ye++){var vt=Re[Ye].split("=");if(vt.length>1){const dt=vt[0];vt=vt[1];const Pn=dt.split("_");re=Pn.length>=2&&Pn[1]=="type"?re+(dt+"="+vt+"&"):re+(dt+"=redacted&")}}}else re=null;else re=J;return"XMLHTTP REQ ("+R+") [attempt "+z+"]: "+E+`
`+w+`
`+re})}function rc(d,E,w,R,z,J,re){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+z+"]: "+E+`
`+w+`
`+J+" "+re})}function Ei(d,E,w,R){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+Id(d,w)+(R?" "+R:"")})}function Tr(d,E){d.info(function(){return"TIMEOUT: "+E})}Zn.prototype.info=function(){};function Id(d,E){if(!d.g)return E;if(!E)return null;try{const J=JSON.parse(E);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var w=J[d];if(!(w.length<2)){var R=w[1];if(Array.isArray(R)&&!(R.length<1)){var z=R[0];if(z!="noop"&&z!="stop"&&z!="close")for(let re=1;re<R.length;re++)R[re]=""}}}}return As(J)}catch{return E}}var Er={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xa;function vr(){}v(vr,tc),vr.prototype.g=function(){return new XMLHttpRequest},Xa=new vr;function Gi(d){return encodeURIComponent(String(d))}function oc(d){var E=1;d=d.split(":");const w=[];for(;E>0&&d.length;)w.push(d.shift()),E--;return d.length&&w.push(d.join(":")),w}function Wn(d,E,w,R){this.j=d,this.i=E,this.l=w,this.S=R||1,this.V=new yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new jn}function jn(){this.i=null,this.g="",this.h=!1}var xt={},Gt={};function vi(d,E,w){d.M=1,d.A=Ar(Dt(E)),d.u=w,d.R=!0,Co(d,null)}function Co(d,E){d.F=Date.now(),Ai(d),d.B=Dt(d.A);var w=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),xo(w.i,"t",R),d.C=0,w=d.j.L,d.h=new jn,d.g=vc(d.j,w?E:null,!d.u),d.P>0&&(d.O=new an(p(d.Y,d,d.g),d.P)),E=d.V,w=d.g,R=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(Ka[0]=z.toString()),z=Ka);for(let J=0;J<z.length;J++){const re=ht(w,z[J],R||E.handleEvent,!1,E.h||E);if(!re)break;E.g[re.key]=re}E=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,E)):(d.v="GET",d.g.ea(d.B,d.v,null,E)),yi(),Rd(d.i,d.v,d.B,d.l,d.S,d.u)}Wn.prototype.ba=function(d){d=d.target;const E=this.O;E&&ni(d)==3?E.j():this.Y(d)},Wn.prototype.Y=function(d){try{if(d==this.g)e:{const Re=ni(this.g),vt=this.g.ya(),Ye=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Re!=4||vt==7||(vt==8||Ye<=0?yi(3):yi(2)),Si(this);var E=this.g.ca();this.X=E;var w=bd(this);if(this.o=E==200,rc(this.i,this.v,this.B,this.l,this.S,Re,E),this.o){if(this.U&&!this.L){t:{if(this.g){var R,z=this.g;if((R=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var J=R;break t}}J=null}if(d=J)Ei(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,d);else{this.o=!1,this.m=3,bt(12),_n(this),Dn(this);break e}}if(this.R){d=!0;let dt;for(;!this.K&&this.C<w.length;)if(dt=lc(this,w),dt==Gt){Re==4&&(this.m=4,bt(14),d=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==xt){this.m=4,bt(15),Ei(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Ei(this.i,this.l,dt,null),wi(this,dt);if(ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||w.length!=0||this.h.h||(this.m=1,bt(16),d=!1),this.o=this.o&&d,!d)Ei(this.i,this.l,w,"[Invalid Chunked Response]"),_n(this),Dn(this);else if(w.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),fl(re),re.P=!0,bt(11))}}else Ei(this.i,this.l,w,null),wi(this,w);Re==4&&_n(this),this.o&&!this.K&&(Re==4?yc(this.j,this):(this.o=!1,Ai(this)))}else Hi(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),_n(this),Dn(this)}}}catch{}finally{}};function bd(d){if(!ac(d))return d.g.la();const E=Qt(d.g);if(E==="")return"";let w="";const R=E.length,z=ni(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return _n(d),Dn(d),"";d.h.i=new c.TextDecoder}for(let J=0;J<R;J++)d.h.h=!0,w+=d.h.i.decode(E[J],{stream:!(z&&J==R-1)});return E.length=0,d.h.g+=w,d.C=0,d.h.g}function ac(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function lc(d,E){var w=d.C,R=E.indexOf(`
`,w);return R==-1?Gt:(w=Number(E.substring(w,R)),isNaN(w)?xt:(R+=1,R+w>E.length?Gt:(E=E.slice(R,R+w),d.C=R+w,E)))}Wn.prototype.cancel=function(){this.K=!0,_n(this)};function Ai(d){d.T=Date.now()+d.H,Ro(d,d.H)}function Ro(d,E){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ti(p(d.aa,d),E)}function Si(d){d.D&&(c.clearTimeout(d.D),d.D=null)}Wn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Tr(this.i,this.B),this.M!=2&&(yi(),bt(17)),_n(this),this.m=2,Dn(this)):Ro(this,this.T-d)};function Dn(d){d.j.I==0||d.K||yc(d.j,d)}function _n(d){Si(d);var E=d.O;E&&typeof E.dispose=="function"&&E.dispose(),d.O=null,$a(d.V),d.g&&(E=d.g,d.g=null,E.abort(),E.dispose())}function wi(d,E){try{var w=d.j;if(w.I!=0&&(w.g==d||Ri(w.h,d))){if(!d.L&&Ri(w.h,d)&&w.I==3){try{var R=w.Ba.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var z=R;if(z[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Po(w),Ms(w);else break e;xr(w),bt(18)}}else w.xa=z[1],0<w.xa-w.K&&z[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ti(p(w.Va,w),6e3));Ci(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ni(w,11)}else if((d.L||w.g==d)&&Po(w),!D(E))for(z=w.Ba.g.parse(E),E=0;E<z.length;E++){let Ye=z[E];const dt=Ye[0];if(!(dt<=w.K))if(w.K=dt,Ye=Ye[1],w.I==2)if(Ye[0]=="c"){w.M=Ye[1],w.ba=Ye[2];const Pn=Ye[3];Pn!=null&&(w.ka=Pn,w.j.info("VER="+w.ka));const Vi=Ye[4];Vi!=null&&(w.za=Vi,w.j.info("SVER="+w.za));const ii=Ye[5];ii!=null&&typeof ii=="number"&&ii>0&&(R=1.5*ii,w.O=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const si=d.g;if(si){const Mr=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var J=R.h;J.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ja(J,J.h),J.h=null))}if(R.G){const ko=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;ko&&(R.wa=ko,Xe(R.J,R.G,ko))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),R=w;var re=d;if(R.na=Ec(R,R.L?R.ba:null,R.W),re.L){el(R.h,re);var Re=re,vt=R.O;vt&&(Re.H=vt),Re.D&&(Si(Re),Ai(Re)),R.g=re}else mc(R);w.i.length>0&&Di(w)}else Ye[0]!="stop"&&Ye[0]!="close"||Ni(w,7);else w.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Ni(w,7):ul(w):Ye[0]!="noop"&&w.l&&w.l.qa(Ye),w.A=0)}}yi(4)}catch{}}var Mt=class{constructor(d,E){this.g=d,this.map=E}};function Za(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ci(d){return d.h?1:d.g?d.g.size:0}function Ri(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function ja(d,E){d.g?d.g.add(E):d.h=E}function el(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}Za.prototype.cancel=function(){if(this.i=tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function tl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const w of d.g.values())E=E.concat(w.G);return E}return x(d.i)}var uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Io(d,E){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const R=d[w].indexOf("=");let z,J=null;R>=0?(z=d[w].substring(0,R),J=d[w].substring(R+1)):z=d[w],E(z,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Tn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;d instanceof Tn?(this.l=d.l,Ft(this,d.j),this.o=d.o,this.g=d.g,Ss(this,d.u),this.h=d.h,nl(this,dc(d.i)),this.m=d.m):d&&(E=String(d).match(uc))?(this.l=!1,Ft(this,E[1]||"",!0),this.o=Ii(E[2]||""),this.g=Ii(E[3]||"",!0),Ss(this,E[4]),this.h=Ii(E[5]||"",!0),nl(this,E[6]||"",!0),this.m=Ii(E[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}Tn.prototype.toString=function(){const d=[];var E=this.j;E&&d.push(Sr(E,bo,!0),":");var w=this.g;return(w||E=="file")&&(d.push("//"),(E=this.o)&&d.push(Sr(E,bo,!0),"@"),d.push(Gi(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(Sr(w,w.charAt(0)=="/"?il:cc,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",Sr(w,fc)),d.join("")},Tn.prototype.resolve=function(d){const E=Dt(this);let w=!!d.j;w?Ft(E,d.j):w=!!d.o,w?E.o=d.o:w=!!d.g,w?E.g=d.g:w=d.u!=null;var R=d.h;if(w)Ss(E,d.u);else if(w=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var z=E.h.lastIndexOf("/");z!=-1&&(R=E.h.slice(0,z+1)+R)}if(z=R,z==".."||z==".")R="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){R=z.lastIndexOf("/",0)==0,z=z.split("/");const J=[];for(let re=0;re<z.length;){const Re=z[re++];Re=="."?R&&re==z.length&&J.push(""):Re==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&re==z.length&&J.push("")):(J.push(Re),R=!0)}R=J.join("/")}else R=z}return w?E.h=R:w=d.i.toString()!=="",w?nl(E,dc(d.i)):w=!!d.m,w&&(E.m=d.m),E};function Dt(d){return new Tn(d)}function Ft(d,E,w){d.j=w?Ii(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function Ss(d,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);d.u=E}else d.u=null}function nl(d,E,w){E instanceof Cs?(d.i=E,Mo(d.i,d.l)):(w||(E=Sr(E,ws)),d.i=new Cs(E,d.l))}function Xe(d,E,w){d.i.set(E,w)}function Ar(d){return Xe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ii(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Sr(d,E,w){return typeof d=="string"?(d=encodeURI(d).replace(E,fn),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function fn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var bo=/[#\/\?@]/g,cc=/[#\?:]/g,il=/[#\?]/g,ws=/[#\?@]/g,fc=/#/g;function Cs(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function hn(d){d.g||(d.g=new Map,d.h=0,d.i&&Io(d.i,function(E,w){d.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=Cs.prototype,n.add=function(d,E){hn(this),this.i=null,d=Rs(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(E),this.h+=1,this};function hc(d,E){hn(d),E=Rs(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function sl(d,E){return hn(d),E=Rs(d,E),d.g.has(E)}n.forEach=function(d,E){hn(this),this.g.forEach(function(w,R){w.forEach(function(z){d.call(E,z,R,this)},this)},this)};function rl(d,E){hn(d);let w=[];if(typeof E=="string")sl(d,E)&&(w=w.concat(d.g.get(Rs(d,E))));else for(d=Array.from(d.g.values()),E=0;E<d.length;E++)w=w.concat(d[E]);return w}n.set=function(d,E){return hn(this),this.i=null,d=Rs(this,d),sl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},n.get=function(d,E){return d?(d=rl(this,d),d.length>0?String(d[0]):E):E};function xo(d,E,w){hc(d,E),w.length>0&&(d.i=null,d.g.set(Rs(d,E),x(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(let R=0;R<E.length;R++){var w=E[R];const z=Gi(w);w=rl(this,w);for(let J=0;J<w.length;J++){let re=z;w[J]!==""&&(re+="="+Gi(w[J])),d.push(re)}}return this.i=d.join("&")};function dc(d){const E=new Cs;return E.i=d.i,d.g&&(E.g=new Map(d.g),E.h=d.h),E}function Rs(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function Mo(d,E){E&&!d.j&&(hn(d),d.i=null,d.g.forEach(function(w,R){const z=R.toLowerCase();R!=z&&(hc(this,R),xo(this,z,w))},d)),d.j=E}function ei(d,E){const w=new Zn;if(c.Image){const R=new Image;R.onload=T(Nn,w,"TestLoadImage: loaded",!0,E,R),R.onerror=T(Nn,w,"TestLoadImage: error",!1,E,R),R.onabort=T(Nn,w,"TestLoadImage: abort",!1,E,R),R.ontimeout=T(Nn,w,"TestLoadImage: timeout",!1,E,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else E(!1)}function ol(d,E){const w=new Zn,R=new AbortController,z=setTimeout(()=>{R.abort(),Nn(w,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:R.signal}).then(J=>{clearTimeout(z),J.ok?Nn(w,"TestPingServer: ok",!0,E):Nn(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(z),Nn(w,"TestPingServer: error",!1,E)})}function Nn(d,E,w,R,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),R(w)}catch{}}function Is(){this.g=new ec}function bi(d){this.i=d.Sb||null,this.h=d.ab||!1}v(bi,tc),bi.prototype.g=function(){return new wr(this.i,this.h)};function wr(d,E){It.call(this),this.H=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(wr,It),n=wr.prototype,n.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=E,this.readyState=1,ti(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(E.body=d),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Do(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Do(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?bs(this):ti(this),this.readyState==3&&Do(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,bs(this))},n.Na=function(d){this.g&&(this.response=d,bs(this))},n.ga=function(){this.g&&bs(this)};function bs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ti(d)}n.setRequestHeader=function(d,E){this.A.append(d,E)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=E.next();return d.join(`\r
`)};function ti(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Vn(d){let E="";return Be(d,function(w,R){E+=R,E+=":",E+=w,E+=`\r
`}),E}function Cr(d,E,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=Vn(w),typeof d=="string"?w!=null&&Gi(w):Xe(d,E,w))}function je(d){It.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(je,It);var xi=/^https?$/i,al=["POST","PUT"];n=je.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,E,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xa.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch(J){Rr(this,J);return}if(d=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var z in R)w.set(z,R[z]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())w.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),z=c.FormData&&d instanceof c.FormData,!(Array.prototype.indexOf.call(al,E,void 0)>=0)||R||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,re]of w)this.g.setRequestHeader(J,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Rr(this,J)}};function Rr(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.o=5,ll(d),Fi(d)}function ll(d){d.A||(d.A=!0,qt(d,"complete"),qt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,qt(this,"complete"),qt(this,"abort"),Fi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ir(this):this.Xa())},n.Xa=function(){Ir(this)};function Ir(d){if(d.h&&typeof l<"u"){if(d.v&&ni(d)==4)setTimeout(d.Ca.bind(d),0);else if(qt(d,"readystatechange"),ni(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var R;if(R=J===0){let re=String(d.D).match(uc)[1]||null;!re&&c.self&&c.self.location&&(re=c.self.location.protocol.slice(0,-1)),R=!xi.test(re?re.toLowerCase():"")}w=R}if(w)qt(d,"complete"),qt(d,"success");else{d.o=6;try{var z=ni(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",ll(d)}}finally{Fi(d)}}}}function Fi(d,E){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,E||qt(d,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ni(d){return d.g?d.g.readyState:0}n.ca=function(){try{return ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),Cd(E)}};function Qt(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(d){const E={};d=(d.g&&ni(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(D(d[R]))continue;var w=oc(d[R]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=E[z]||[];E[z]=J,J.push(w)}Qe(E,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(d,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||E}function xs(d){this.za=0,this.i=[],this.j=new Zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mi("baseRetryDelayMs",5e3,d),this.Za=Mi("retryDelaySeedMs",1e4,d),this.Ta=Mi("forwardChannelMaxRetries",2,d),this.va=Mi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Za(d&&d.concurrentRequestLimit),this.Ba=new Is,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xs.prototype,n.ka=8,n.I=1,n.connect=function(d,E,w,R){bt(0),this.W=d,this.H=E||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.J=Ec(this,null,this.W),Di(this)};function ul(d){if(No(d),d.I==3){var E=d.V++,w=Dt(d.J);if(Xe(w,"SID",d.M),Xe(w,"RID",E),Xe(w,"TYPE","terminate"),br(d,w),E=new Wn(d,d.j,E),E.M=2,E.A=Ar(Dt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=E.A,w=!0),w||(E.g=vc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ai(E)}Tc(d)}function Ms(d){d.g&&(fl(d),d.g.cancel(),d.g=null)}function No(d){Ms(d),d.v&&(c.clearTimeout(d.v),d.v=null),Po(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&c.clearTimeout(d.m),d.m=null)}function Di(d){if(!Wa(d.h)&&!d.m){d.m=!0;var E=d.Ea;he||I(),le||(he(),le=!0),M.add(E,d),d.D=0}}function Vo(d,E){return Ci(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=E.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ti(p(d.Ea,d,E),_c(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new Wn(this,this.j,d);let J=this.o;if(this.U&&(J?(J=L(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(z.J=J,J=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=pc(this,z,E),w=Dt(this.J),Xe(w,"RID",d),Xe(w,"CVER",22),this.G&&Xe(w,"X-HTTP-Session-Id",this.G),br(this,w),J&&(this.R?E="headers="+Gi(Vn(J))+"&"+E:this.u&&Cr(w,this.u,J)),ja(this.h,z),this.Ra&&Xe(w,"TYPE","init"),this.S?(Xe(w,"$req",E),Xe(w,"SID","null"),z.U=!0,vi(z,w,null)):vi(z,w,E),this.I=2}}else this.I==3&&(d?cl(this,d):this.i.length==0||Wa(this.h)||cl(this))};function cl(d,E){var w;E?w=E.l:w=d.V++;const R=Dt(d.J);Xe(R,"SID",d.M),Xe(R,"RID",w),Xe(R,"AID",d.K),br(d,R),d.u&&d.o&&Cr(R,d.u,d.o),w=new Wn(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),E&&(d.i=E.G.concat(d.i)),E=pc(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ja(d.h,w),vi(w,R,E)}function br(d,E){d.H&&Be(d.H,function(w,R){Xe(E,R,w)}),d.l&&Be({},function(w,R){Xe(E,R,w)})}function pc(d,E,w){w=Math.min(d.i.length,w);const R=d.l?p(d.l.Ka,d.l,d):null;e:{var z=d.i;let Re=-1;for(;;){const vt=["count="+w];Re==-1?w>0?(Re=z[0].g,vt.push("ofs="+Re)):Re=0:vt.push("ofs="+Re);let Ye=!0;for(let dt=0;dt<w;dt++){var J=z[dt].g;const Pn=z[dt].map;if(J-=Re,J<0)Re=Math.max(0,z[dt].g-100),Ye=!1;else try{J="req"+J+"_"||"";try{var re=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Vi,ii]of re){let si=ii;h(ii)&&(si=As(ii)),vt.push(J+Vi+"="+encodeURIComponent(si))}}catch(Vi){throw vt.push(J+"type="+encodeURIComponent("_badmap")),Vi}}catch{R&&R(Pn)}}if(Ye){re=vt.join("&");break e}}re=void 0}return d=d.i.splice(0,w),E.G=d,re}function mc(d){if(!d.g&&!d.v){d.Y=1;var E=d.Da;he||I(),le||(he(),le=!0),M.add(E,d),d.A=0}}function xr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ti(p(d.Da,d),_c(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ti(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Ms(this),gc(this))};function fl(d){d.B!=null&&(c.clearTimeout(d.B),d.B=null)}function gc(d){d.g=new Wn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var E=Dt(d.na);Xe(E,"RID","rpc"),Xe(E,"SID",d.M),Xe(E,"AID",d.K),Xe(E,"CI",d.F?"0":"1"),!d.F&&d.ia&&Xe(E,"TO",d.ia),Xe(E,"TYPE","xmlhttp"),br(d,E),d.u&&d.o&&Cr(E,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Ar(Dt(E)),w.u=null,w.R=!0,Co(w,d)}n.Va=function(){this.C!=null&&(this.C=null,Ms(this),xr(this),bt(19))};function Po(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function yc(d,E){var w=null;if(d.g==E){Po(d),fl(d),d.g=null;var R=2}else if(Ri(d.h,E))w=E.G,el(d.h,E),R=1;else return;if(d.I!=0){if(E.o)if(R==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var z=d.D;R=wo(),qt(R,new _i(R,w)),Di(d)}else mc(d);else if(z=E.m,z==3||z==0&&E.X>0||!(R==1&&Vo(d,E)||R==2&&xr(d)))switch(w&&w.length>0&&(E=d.h,E.i=E.i.concat(w)),z){case 1:Ni(d,5);break;case 4:Ni(d,10);break;case 3:Ni(d,6);break;default:Ni(d,2)}}}function _c(d,E){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*E}function Ni(d,E){if(d.j.info("Error code "+E),E==2){var w=p(d.bb,d),R=d.Ua;const z=!R;R=new Tn(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(R,"https"),Ar(R),z?ei(R.toString(),w):ol(R.toString(),w)}else bt(2);d.I=0,d.l&&d.l.pa(E),Tc(d),No(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Tc(d){if(d.I=0,d.ja=[],d.l){const E=tl(d.h);(E.length!=0||d.i.length!=0)&&(k(d.ja,E),k(d.ja,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.oa()}}function Ec(d,E,w){var R=w instanceof Tn?Dt(w):new Tn(w);if(R.g!="")E&&(R.g=E+"."+R.g),Ss(R,R.u);else{var z=c.location;R=z.protocol,E=E?E+"."+z.hostname:z.hostname,z=+z.port;const J=new Tn(null);R&&Ft(J,R),E&&(J.g=E),z&&Ss(J,z),w&&(J.h=w),R=J}return w=d.G,E=d.wa,w&&E&&Xe(R,w,E),Xe(R,"VER",d.ka),br(d,R),R}function vc(d,E,w){if(E&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Aa&&!d.ma?new je(new bi({ab:w})):new je(d.ma),E.Fa(d.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ac(){}n=Ac.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ds(){}Ds.prototype.g=function(d,E){return new ln(d,E)};function ln(d,E){It.call(this),this.g=new xs(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(d?d["X-WebChannel-Client-Profile"]=E.sa:d={"X-WebChannel-Client-Profile":E.sa}),this.g.U=d,(d=E&&E.Qb)&&!D(d)&&(this.g.u=d),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new Yi(this)}v(ln,It),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){ul(this.g)},ln.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=As(d),d=w);E.i.push(new Mt(E.Ya++,d)),E.I==3&&Di(E)},ln.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,ln.Z.N.call(this)};function Sc(d){$t.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const w in E){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}v(Sc,$t);function wc(){Mn.call(this),this.status=1}v(wc,Mn);function Yi(d){this.g=d}v(Yi,Ac),Yi.prototype.ra=function(){qt(this.g,"a")},Yi.prototype.qa=function(d){qt(this.g,new Sc(d))},Yi.prototype.pa=function(d){qt(this.g,new wc)},Yi.prototype.oa=function(){qt(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Qy=function(){return new Ds},$y=function(){return wo()},Ky=Et,ch={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,lu=Er,Qa.COMPLETE="complete",Jy=Qa,nc.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",It.prototype.listen=It.prototype.J,Ta=nc,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,Yy=je}).apply(typeof au<"u"?au:typeof self<"u"?self:typeof window<"u"?window:{});const Xy="@firebase/firestore",Zy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new xy("@firebase/firestore");function io(){return sr.logLevel}function fe(n,...e){if(sr.logLevel<=Le.DEBUG){const t=e.map(fh);sr.debug(`Firestore (${no}): ${n}`,...t)}}function Bi(n,...e){if(sr.logLevel<=Le.ERROR){const t=e.map(fh);sr.error(`Firestore (${no}): ${n}`,...t)}}function so(n,...e){if(sr.logLevel<=Le.WARN){const t=e.map(fh);sr.warn(`Firestore (${no}): ${n}`,...t)}}function fh(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Wy(n,s,t)}function Wy(n,e,t){let s=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Bi(s),new Error(s)}function Ke(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||Wy(e,o,s)}function Ce(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $x{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class Qx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Xx{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let l=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},h=y=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>h(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?h(y):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new jy(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Zx{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Wx{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Zx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class e_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new e_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new e_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=eM(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ne(n,e){return n<e?-1:n>e?1:0}function dh(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return ph(o)===ph(l)?Ne(o,l):ph(o)?1:-1}return Ne(n.length,e.length)}const tM=55296,nM=57343;function ph(n){const e=n.charCodeAt(0);return e>=tM&&e<=nM}function ro(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="__name__";class li{constructor(e,t,s){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ve(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=li.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const s=li.isNumericId(e),o=li.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?li.extractNumericId(e).compare(li.extractNumericId(t)):dh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fs.fromString(e.substring(4,e.length-2))}}class ot extends li{construct(e,t,s){return new ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(j.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const iM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends li{construct(e,t,s){return new Yt(e,t,s)}static isValidIdentifier(e){return iM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t_}static keyField(){return new Yt([t_])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ce(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ce(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(s+=h,o++):(l(),o++)}if(l(),c)throw new ce(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ot.fromString(e))}static fromName(e){return new ye(ot.fromString(e).popFirst(5))}static empty(){return new ye(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(n,e,t){if(!t)throw new ce(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sM(n,e,t,s){if(e===!0&&s===!0)throw new ce(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function i_(n){if(!ye.isDocumentKey(n))throw new ce(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function s_(n){if(ye.isDocumentKey(n))throw new ce(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function r_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function uu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function Ea(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uu(n);throw new ce(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function va(n,e){if(!r_(n))throw new ce(j.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ce(j.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=-62135596800,a_=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*a_);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<o_)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a_}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(va(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:wt("string",ut._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new ut(0,0))}static max(){return new Se(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=-1;function rM(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new ds(o,ye.empty(),e)}function oM(n){return new ds(n.readTime,n.key,Aa)}class ds{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ds(Se.min(),ye.empty(),Aa)}static max(){return new ds(Se.max(),ye.empty(),Aa)}}function aM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(n){if(n.code!==j.FAILED_PRECONDITION||n.message!==lM)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,s)=>{t(e)}))}static reject(e){return new te(((t,s)=>{s(e)}))}static waitFor(e){return new te(((t,s)=>{let o=0,l=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++l,c&&l===o&&t()}),(y=>s(y)))})),c=!0,l===o&&t()}))}static or(e){let t=te.resolve(!1);for(const s of e)t=t.next((o=>o?te.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new te(((s,o)=>{const l=e.length,c=new Array(l);let h=0;for(let y=0;y<l;y++){const p=y;t(e[p]).next((T=>{c[p]=T,++h,h===l&&s(c)}),(T=>o(T)))}}))}static doWhile(e,t){return new te(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function cM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ao(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=-1;function fu(n){return n==null}function hu(n){return n===0&&1/n==-1/0}function fM(n){return typeof n=="number"&&Number.isInteger(n)&&!hu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="";function hM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=u_(e)),e=dM(n.get(t),e);return u_(e)}function dM(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case l_:t+="";break;default:t+=l}}return t}function u_(n){return n+l_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function f_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=l??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Jt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1,Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h_(this.data.getIterator())}getIteratorFrom(e){return new h_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class h_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Jn([])}unionWith(e){let t=new Ut(Yt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new d_("Invalid base64 string: "+l):l}})(e);return new Kt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const pM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=pM.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ms(n){return typeof n=="string"?Kt.fromBase64String(n):Kt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="server_timestamp",m_="__type__",g_="__previous_value__",y_="__local_write_time__";function gh(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[m_])==null?void 0:s.stringValue)===p_}function pu(n){const e=n.mapValue.fields[g_];return gh(e)?pu(e):e}function Sa(n){const e=ps(n.mapValue.fields[y_].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t,s,o,l,c,h,y,p,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=T}}const mu="(default)";class wa{constructor(e,t){this.projectId=e,this.database=t||mu}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database===mu}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="__type__",gM="__max__",gu={mapValue:{}},T_="__vector__",yu="value";function gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gh(n)?4:_M(n)?9007199254740991:yM(n)?10:11:ve(28295,{value:n})}function ui(n,e){if(n===e)return!0;const t=gs(n);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sa(n).isEqual(Sa(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=ps(o.timestampValue),h=ps(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return ms(o.bytesValue).isEqual(ms(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Tt(o.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Tt(o.integerValue)===Tt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Tt(o.doubleValue),h=Tt(l.doubleValue);return c===h?hu(c)===hu(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return ro(n.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(c_(c)!==c_(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(h[y]===void 0||!ui(c[y],h[y])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Ca(n,e){return(n.values||[]).find((t=>ui(t,e)))!==void 0}function lo(n,e){if(n===e)return 0;const t=gs(n),s=gs(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=Tt(l.integerValue||l.doubleValue),y=Tt(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1})(n,e);case 3:return E_(n.timestampValue,e.timestampValue);case 4:return E_(Sa(n),Sa(e));case 5:return dh(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=ms(l),y=ms(c);return h.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),y=c.split("/");for(let p=0;p<h.length&&p<y.length;p++){const T=Ne(h[p],y[p]);if(T!==0)return T}return Ne(h.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ne(Tt(l.latitude),Tt(c.latitude));return h!==0?h:Ne(Tt(l.longitude),Tt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return v_(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,x,k,B;const h=l.fields||{},y=c.fields||{},p=(A=h[yu])==null?void 0:A.arrayValue,T=(x=y[yu])==null?void 0:x.arrayValue,v=Ne(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((B=T==null?void 0:T.values)==null?void 0:B.length)||0);return v!==0?v:v_(p,T)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===gu.mapValue&&c===gu.mapValue)return 0;if(l===gu.mapValue)return 1;if(c===gu.mapValue)return-1;const h=l.fields||{},y=Object.keys(h),p=c.fields||{},T=Object.keys(p);y.sort(),T.sort();for(let v=0;v<y.length&&v<T.length;++v){const A=dh(y[v],T[v]);if(A!==0)return A;const x=lo(h[y[v]],p[T[v]]);if(x!==0)return x}return Ne(y.length,T.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function E_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=ps(n),s=ps(e),o=Ne(t.seconds,s.seconds);return o!==0?o:Ne(t.nanos,s.nanos)}function v_(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=lo(t[o],s[o]);if(l)return l}return Ne(t.length,s.length)}function uo(n){return yh(n)}function yh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ps(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ms(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=yh(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${yh(t.fields[c])}`;return o+"}"})(n.mapValue):ve(61005,{value:n})}function _u(n){switch(gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pu(n);return e?16+_u(e):16;case 5:return 2*n.stringValue.length;case 6:return ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+_u(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return rr(s.fields,((l,c)=>{o+=l.length+_u(c)})),o})(n.mapValue);default:throw ve(13486,{value:n})}}function A_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _h(n){return!!n&&"integerValue"in n}function Th(n){return!!n&&"arrayValue"in n}function S_(n){return!!n&&"nullValue"in n}function w_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tu(n){return!!n&&"mapValue"in n}function yM(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[__])==null?void 0:s.stringValue)===T_}function Ra(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return rr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ra(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ra(n.arrayValue.values[t]);return e}return{...n}}function _M(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Tu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(t)}setAll(e){let t=Yt.emptyPath(),s={},o=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,s,o),s={},o=[],t=h.popLast()}c?s[h.lastSegment()]=Ra(c):o.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Tu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Tu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){rr(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new bn(Ra(this.value))}}function C_(n){const e=[];return rr(n.fields,((t,s)=>{const o=new Yt([t]);if(Tu(s)){const l=C_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,o,l,c,h){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new sn(e,0,Se.min(),Se.min(),Se.min(),bn.empty(),0)}static newFoundDocument(e,t,s,o){return new sn(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Se.min(),Se.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Se.min(),Se.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t){this.position=e,this.inclusive=t}}function R_(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(c.referenceValue),t.key):s=lo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function I_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ui(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t="asc"){this.field=e,this.dir=t}}function TM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{}class Ct extends b_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new vM(e,t,s):t==="array-contains"?new wM(e,s):t==="in"?new CM(e,s):t==="not-in"?new RM(e,s):t==="array-contains-any"?new IM(e,s):new Ct(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new AM(e,s):new SM(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(lo(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kn extends b_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Kn(e,t)}matches(e){return x_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function x_(n){return n.op==="and"}function M_(n){return EM(n)&&x_(n)}function EM(n){for(const e of n.filters)if(e instanceof Kn)return!1;return!0}function Eh(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+uo(n.value);if(M_(n))return n.filters.map((e=>Eh(e))).join(",");{const e=n.filters.map((t=>Eh(t))).join(",");return`${n.op}(${e})`}}function D_(n,e){return n instanceof Ct?(function(s,o){return o instanceof Ct&&s.op===o.op&&s.field.isEqual(o.field)&&ui(s.value,o.value)})(n,e):n instanceof Kn?(function(s,o){return o instanceof Kn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,h)=>l&&D_(c,o.filters[h])),!0):!1})(n,e):void ve(19439)}function N_(n){return n instanceof Ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${uo(t.value)}`})(n):n instanceof Kn?(function(t){return t.op.toString()+" {"+t.getFilters().map(N_).join(" ,")+"}"})(n):"Filter"}class vM extends Ct{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class AM extends Ct{constructor(e,t){super(e,"in",t),this.keys=V_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SM extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=V_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function V_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ye.fromName(s.referenceValue)))}class wM extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Th(t)&&Ca(t.arrayValue,this.value)}}class CM extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ca(this.value.arrayValue,t)}}class RM extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ca(this.value.arrayValue,t)}}class IM extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Th(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ca(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,t=null,s=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function P_(n,e=null,t=[],s=[],o=null,l=null,c=null){return new bM(n,e,t,s,o,l,c)}function vh(n){const e=Ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Eh(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),fu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>uo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>uo(s))).join(",")),e.Te=t}return e.Te}function Ah(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!D_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!I_(n.startAt,e.startAt)&&I_(n.endAt,e.endAt)}function Sh(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t=null,s=[],o=[],l=null,c="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xM(n,e,t,s,o,l,c,h){return new co(n,e,t,s,o,l,c,h)}function k_(n){return new co(n)}function U_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function L_(n){return n.collectionGroup!==null}function ba(n){const e=Ce(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ut(Yt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ia(l,s))})),t.has(Yt.keyField().canonicalString())||e.Ie.push(new Ia(Yt.keyField(),s))}return e.Ie}function ci(n){const e=Ce(n);return e.Ee||(e.Ee=MM(e,ba(n))),e.Ee}function MM(n,e){if(n.limitType==="F")return P_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ia(o.field,l)}));const t=n.endAt?new Eu(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Eu(n.startAt.position,n.startAt.inclusive):null;return P_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function wh(n,e){const t=n.filters.concat([e]);return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ch(n,e,t){return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vu(n,e){return Ah(ci(n),ci(e))&&n.limitType===e.limitType}function q_(n){return`${vh(ci(n))}|lt:${n.limitType}`}function fo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>N_(o))).join(", ")}]`),fu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>uo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>uo(o))).join(",")),`Target(${s})`})(ci(n))}; limitType=${n.limitType})`}function Au(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of ba(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,h,y){const p=R_(c,h,y);return c.inclusive?p<=0:p<0})(s.startAt,ba(s),o)||s.endAt&&!(function(c,h,y){const p=R_(c,h,y);return c.inclusive?p>=0:p>0})(s.endAt,ba(s),o))})(n,e)}function DM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function O_(n){return(e,t)=>{let s=!1;for(const o of ba(n)){const l=NM(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function NM(n,e,t){const s=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,c,h){const y=c.data.field(l),p=h.data.field(l);return y!==null&&p!==null?lo(y,p):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){rr(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return f_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new mt(ye.comparator);function zi(){return VM}const B_=new mt(ye.comparator);function xa(...n){let e=B_;for(const t of n)e=e.insert(t.key,t);return e}function z_(n){let e=B_;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ar(){return Ma()}function G_(){return Ma()}function Ma(){return new or((n=>n.toString()),((n,e)=>n.isEqual(e)))}const PM=new mt(ye.comparator),kM=new Ut(ye.comparator);function Ve(...n){let e=kM;for(const t of n)e=e.add(t);return e}const UM=new Ut(Ne);function LM(){return UM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function F_(n){return{integerValue:""+n}}function qM(n,e){return fM(e)?F_(e):Rh(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this._=void 0}}function OM(n,e,t){return n instanceof wu?(function(o,l){const c={fields:{[m_]:{stringValue:p_},[y_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&gh(l)&&(l=pu(l)),l&&(c.fields[g_]=l),{mapValue:c}})(t,e):n instanceof Da?Y_(n,e):n instanceof Na?J_(n,e):(function(o,l){const c=H_(o,l),h=K_(c)+K_(o.Ae);return _h(c)&&_h(o.Ae)?F_(h):Rh(o.serializer,h)})(n,e)}function BM(n,e,t){return n instanceof Da?Y_(n,e):n instanceof Na?J_(n,e):t}function H_(n,e){return n instanceof Cu?(function(s){return _h(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class wu extends Su{}class Da extends Su{constructor(e){super(),this.elements=e}}function Y_(n,e){const t=$_(e);for(const s of n.elements)t.some((o=>ui(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Na extends Su{constructor(e){super(),this.elements=e}}function J_(n,e){let t=$_(e);for(const s of n.elements)t=t.filter((o=>!ui(o,s)));return{arrayValue:{values:t}}}class Cu extends Su{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function K_(n){return Tt(n.integerValue||n.doubleValue)}function $_(n){return Th(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function zM(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Da&&o instanceof Da||s instanceof Na&&o instanceof Na?ro(s.elements,o.elements,ui):s instanceof Cu&&o instanceof Cu?ui(s.Ae,o.Ae):s instanceof wu&&o instanceof wu})(n.transform,e.transform)}class GM{constructor(e,t){this.version=e,this.transformResults=t}}class fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ru(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Iu{}function Q_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ih(n.key,fi.none()):new Pa(n.key,n.data,fi.none());{const t=n.data,s=bn.empty();let o=new Ut(Yt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new lr(n.key,s,new Jn(o.toArray()),fi.none())}}function FM(n,e,t){n instanceof Pa?(function(o,l,c){const h=o.value.clone(),y=W_(o.fieldTransforms,l,c.transformResults);h.setAll(y),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof lr?(function(o,l,c){if(!Ru(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=W_(o.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(Z_(o)),y.setAll(h),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Va(n,e,t,s){return n instanceof Pa?(function(l,c,h,y){if(!Ru(l.precondition,c))return h;const p=l.value.clone(),T=j_(l.fieldTransforms,y,c);return p.setAll(T),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof lr?(function(l,c,h,y){if(!Ru(l.precondition,c))return h;const p=j_(l.fieldTransforms,y,c),T=c.data;return T.setAll(Z_(l)),T.setAll(p),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,s):(function(l,c,h){return Ru(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function HM(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=H_(s.transform,o||null);l!=null&&(t===null&&(t=bn.empty()),t.set(s.field,l))}return t||null}function X_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ro(s,o,((l,c)=>zM(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pa extends Iu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class lr extends Iu{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Z_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function W_(n,e,t){const s=new Map;Ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);s.set(l.field,BM(c,h,t[o]))}return s}function j_(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,OM(l,c,e))}return s}class Ih extends Iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YM extends Iu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&FM(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Va(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Va(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=G_();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const y=Q_(c,h);y!==null&&s.set(o.key,y),c.isValidDocument()||c.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,((t,s)=>X_(t,s)))&&ro(this.baseMutations,e.baseMutations,((t,s)=>X_(t,s)))}}class bh{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return PM})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new bh(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,qe;function QM(n){switch(n){case j.OK:return ve(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function eT(n){if(n===void 0)return Bi("GRPC error has no .code"),j.UNKNOWN;switch(n){case Rt.OK:return j.OK;case Rt.CANCELLED:return j.CANCELLED;case Rt.UNKNOWN:return j.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return j.INTERNAL;case Rt.UNAVAILABLE:return j.UNAVAILABLE;case Rt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Rt.NOT_FOUND:return j.NOT_FOUND;case Rt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Rt.ABORTED:return j.ABORTED;case Rt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Rt.DATA_LOSS:return j.DATA_LOSS;default:return ve(39323,{code:n})}}(qe=Rt||(Rt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=new fs([4294967295,4294967295],0);function tT(n){const e=XM().encode(n),t=new Hy;return t.update(e),new Uint8Array(t.digest())}function nT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new fs([t,s],0),new fs([o,l],0)]}class xh{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ka(`Invalid padding: ${t}`);if(s<0)throw new ka(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ka(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ka(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(fs.fromNumber(s)));return o.compare(ZM)===1&&(o=new fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=tT(e),[s,o]=nT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new xh(l,o,t);return s.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=tT(e),[s,o]=nT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ua.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new bu(Se.min(),o,new mt(Ne),zi(),Ve())}}class Ua{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ua(s,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class iT{constructor(e,t){this.targetId=e,this.Ce=t}}class sT{constructor(e,t,s=Kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class rT{constructor(){this.ve=0,this.Fe=oT(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),s=Ve();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ve(38017,{changeType:l})}})),new Ua(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=oT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WM{constructor(e){this.Ge=e,this.ze=new Map,this.je=zi(),this.Je=Mu(),this.He=Mu(),this.Ye=new mt(Ne)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Sh(l))if(s===0){const c=new ye(l.path);this.et(t,c,sn.newNoDocument(c,Se.min()))}else Ke(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const h=this.ut(e),y=h?this.ct(h,e,c):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=ms(s).toUint8Array()}catch(y){if(y instanceof d_)return so("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{h=new xh(c,o,l)}catch(y){return so(y instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&Sh(h.target)){const y=new ye(h.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,sn.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ve();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new bu(e,t,this.Ye,this.je,s);return this.je=zi(),this.Je=Mu(),this.He=Mu(),this.Ye=new mt(Ne),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new rT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ut(Ne),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ut(Ne),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mu(){return new mt(ye.comparator)}function oT(){return new mt(ye.comparator)}const jM={asc:"ASCENDING",desc:"DESCENDING"},eD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tD={and:"AND",or:"OR"};class nD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mh(n,e){return n.useProto3Json||fu(e)?e:{value:e}}function Du(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iD(n,e){return Du(n,e.toTimestamp())}function hi(n){return Ke(!!n,49232),Se.fromTimestamp((function(t){const s=ps(t);return new ut(s.seconds,s.nanos)})(n))}function Dh(n,e){return Nh(n,e).canonicalString()}function Nh(n,e){const t=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lT(n){const e=ot.fromString(n);return Ke(pT(e),10190,{key:e.toString()}),e}function Vh(n,e){return Dh(n.databaseId,e.path)}function Ph(n,e){const t=lT(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(cT(t))}function uT(n,e){return Dh(n.databaseId,e)}function sD(n){const e=lT(n);return e.length===4?ot.emptyPath():cT(e)}function kh(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cT(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fT(n,e,t){return{name:Vh(n,e),fields:t.value.mapValue.fields}}function rD(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ve(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(p,T){return p.useProto3Json?(Ke(T===void 0||typeof T=="string",58123),Kt.fromBase64String(T||"")):(Ke(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Kt.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(p){const T=p.code===void 0?j.UNKNOWN:eT(p.code);return new ce(T,p.message||"")})(c);t=new sT(s,o,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ph(n,s.document.name),l=hi(s.document.updateTime),c=s.document.createTime?hi(s.document.createTime):Se.min(),h=new bn({mapValue:{fields:s.document.fields}}),y=sn.newFoundDocument(o,l,c,h),p=s.targetIds||[],T=s.removedTargetIds||[];t=new xu(p,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ph(n,s.document),l=s.readTime?hi(s.readTime):Se.min(),c=sn.newNoDocument(o,l),h=s.removedTargetIds||[];t=new xu([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ph(n,s.document),l=s.removedTargetIds||[];t=new xu([],l,o,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new $M(o,l),h=s.targetId;t=new iT(h,c)}}return t}function oD(n,e){let t;if(e instanceof Pa)t={update:fT(n,e.key,e.value)};else if(e instanceof Ih)t={delete:Vh(n,e.key)};else if(e instanceof lr)t={update:fT(n,e.key,e.data),updateMask:mD(e.fieldMask)};else{if(!(e instanceof YM))return ve(16599,{Vt:e.type});t={verify:Vh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const h=c.transform;if(h instanceof wu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Da)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Na)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Cu)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw ve(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:iD(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(n,e.precondition)),t}function aD(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?hi(o.updateTime):hi(l);return c.isEqual(Se.min())&&(c=hi(l)),new GM(c,o.transformResults||[])})(t,e)))):[]}function lD(n,e){return{documents:[uT(n,e.path)]}}function uD(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=uT(n,o);const l=(function(p){if(p.length!==0)return dT(Kn.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((T=>(function(A){return{field:ho(A.field),direction:hD(A.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Mh(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function cD(n){let e=sD(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(v){const A=hT(v);return A instanceof Kn&&M_(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((A=>(function(k){return new Ia(po(k.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(A)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let A;return A=typeof v=="object"?v.value:v,fu(A)?null:A})(t.limit));let y=null;t.startAt&&(y=(function(v){const A=!!v.before,x=v.values||[];return new Eu(x,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const A=!v.before,x=v.values||[];return new Eu(x,A)})(t.endAt)),xM(e,o,c,l,h,"F",y,p)}function fD(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=po(t.unaryFilter.field);return Ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=po(t.unaryFilter.field);return Ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=po(t.unaryFilter.field);return Ct.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=po(t.unaryFilter.field);return Ct.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ct.create(po(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Kn.create(t.compositeFilter.filters.map((s=>hT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function hD(n){return jM[n]}function dD(n){return eD[n]}function pD(n){return tD[n]}function ho(n){return{fieldPath:n.canonicalString()}}function po(n){return Yt.fromServerFormat(n.fieldPath)}function dT(n){return n instanceof Ct?(function(t){if(t.op==="=="){if(w_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(S_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(w_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(S_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:dD(t.op),value:t.value}}})(n):n instanceof Kn?(function(t){const s=t.getFilters().map((o=>dT(o)));return s.length===1?s[0]:{compositeFilter:{op:pD(t.op),filters:s}}})(n):ve(54877,{filter:n})}function mD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,s,o,l=Se.min(),c=Se.min(),h=Kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=y}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.yt=e}}function yD(n){const e=cD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.Cn=new TD}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(ds.min())}updateCollectionGroup(e,t,s){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class TD{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ut(ot.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ut(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gT=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(gT,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new mo(0)}static cr(){return new mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="LruGarbageCollector",ED=1048576;function _T([n,e],[t,s]){const o=Ne(n,t);return o===0?Ne(e,s):o}class vD{constructor(e){this.Ir=e,this.buffer=new Ut(_T),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();_T(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AD{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(yT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ao(t)?fe(yT,"Ignoring IndexedDB error during garbage collection: ",t):await oo(t)}await this.Vr(3e5)}))}}class SD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(cu.ce);const s=new vD(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(mT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,h,y,p;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,c=Date.now(),this.nthSequenceNumber(e,o)))).next((v=>(s=v,h=Date.now(),this.removeTargets(e,s,t)))).next((v=>(l=v,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(p=Date.now(),io()<=Le.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(y-h)+`ms
	Removed ${v} documents in `+(p-y)+`ms
Total Duration: ${p-T}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:v}))))}}function wD(n,e){return new SD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.changes=new or((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?te.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Va(s.mutation,o,Jn.empty(),ut.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ve()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ve()){const o=ar();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=xa();return l.forEach(((h,y)=>{c=c.insert(h,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=ar();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ve())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,s,o){let l=zi();const c=Ma(),h=(function(){return Ma()})();return t.forEach(((y,p)=>{const T=s.get(p.key);o.has(p.key)&&(T===void 0||T.mutation instanceof lr)?l=l.insert(p.key,p):T!==void 0?(c.set(p.key,T.mutation.getFieldMask()),Va(T.mutation,p,T.mutation.getFieldMask(),ut.now())):c.set(p.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((p,T)=>c.set(p,T))),t.forEach(((p,T)=>h.set(p,new RD(T,c.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=Ma();let o=new mt(((c,h)=>c-h)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let T=s.get(y)||Jn.empty();T=h.applyToLocalView(p,T),s.set(y,T);const v=(o.get(h.batchId)||Ve()).add(y);o=o.insert(h.batchId,v)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),p=y.key,T=y.value,v=G_();T.forEach((A=>{if(!l.has(A)){const x=Q_(t.get(A),s.get(A));x!==null&&v.set(A,x),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return te.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):L_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):te.resolve(ar());let h=Aa,y=l;return c.next((p=>te.forEach(p,((T,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),l.get(T)?te.resolve():this.remoteDocumentCache.getEntry(e,T).next((A=>{y=y.insert(T,A)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,y,p,Ve()))).next((T=>({batchId:h,changes:z_(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=xa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=xa();return this.indexManager.getCollectionParents(e,l).next((h=>te.forEach(h,(y=>{const p=(function(v,A){return new co(A,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((T=>{T.forEach(((v,A)=>{c=c.insert(v,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((y,p)=>{const T=p.getKey();c.get(T)===null&&(c=c.insert(T,sn.newInvalidDocument(T)))}));let h=xa();return c.forEach(((y,p)=>{const T=l.get(y);T!==void 0&&Va(T.mutation,p,Jn.empty(),ut.now()),Au(t,p)&&(h=h.insert(y,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hi(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:yD(o.bundledQuery),readTime:hi(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.overlays=new mt(ye.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ar();return te.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(e,t,s){const o=ar(),l=t.length+1,c=new ye(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const y=h.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&y.largestBatchId>s&&o.set(y.getKey(),y)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new mt(((p,T)=>p-T));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let T=l.get(p.largestBatchId);T===null&&(T=ar(),l=l.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const h=ar(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,T)=>h.set(p,T))),!(h.size()>=o)););return te.resolve(h)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new KM(t,s));let l=this.qr.get(t);l===void 0&&(l=Ve(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this.Qr=new Ut(Bt.$r),this.Ur=new Ut(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Bt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Bt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new ot([])),s=new Bt(t,e),o=new Bt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new ot([])),s=new Bt(t,e),o=new Bt(t,e+1);let l=Ve();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Bt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Ne(e.Yr,t.Yr)}static Kr(e,t){return Ne(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Bt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new JM(l,t,s,o);this.mutationQueue.push(c);for(const h of o)this.Zr=this.Zr.add(new Bt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?mh:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const h=this.Xr(c.Yr);l.push(h)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ut(Ne);return t.forEach((o=>{const l=new Bt(o,0),c=new Bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{s=s.add(h.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const c=new Bt(new ye(l),0);let h=new Ut(Ne);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(h=h.add(y.Yr)),!0)}),c),te.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(t.mutations,(o=>{const l=new Bt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Bt(t,0),o=this.Zr.firstAfterOrEqual(s);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.ri=e,this.docs=(function(){return new mt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return te.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=zi();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():sn.newInvalidDocument(o))})),te.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=zi();const c=t.path,h=new ye(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:p,value:{document:T}}=y.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||aM(oM(T),s)<=0||(o.has(T.key)||Au(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,s,o){ve(9500)}ii(e,t){return te.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new VD(this)}getSize(e){return te.resolve(this.size)}}class VD extends CD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.persistence=e,this.si=new or((t=>vh(t)),Ah),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Uh,this.targetCount=0,this.ai=mo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),te.waitFor(l).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return te.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),te.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return te.resolve(s)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t){this.ui={},this.overlays={},this.ci=new cu(0),this.li=!1,this.li=!0,this.hi=new MD,this.referenceDelegate=e(this),this.Pi=new PD(this),this.indexManager=new _D,this.remoteDocumentCache=(function(o){return new ND(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new gD(t),this.Ii=new bD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new DD(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const o=new kD(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class kD extends uM{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Ri=new Uh,this.Vi=null}static mi(e){return new Lh(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),te.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Nu{constructor(e,t){this.persistence=e,this.pi=new or((s=>hM(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=wD(this,t)}static mi(e,t){return new Nu(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?te.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((h=>{h||(s++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_u(e.data.value)),t}br(e,t,s){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new qh(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bb()?8:cM(Rb())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new UD;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(io()<=Le.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(io()<=Le.DEBUG&&fe("QueryEngine","Query:",fo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(io()<=Le.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(t))):te.resolve())}ys(e,t){if(U_(t))return te.resolve(null);let s=ci(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ch(t,null,"F"),s=ci(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ve(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,s).next((y=>{const p=this.Ds(t,h);return this.Cs(t,p,c,y.readTime)?this.ys(e,Ch(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,s,o){return U_(t)||o.isEqual(Se.min())?te.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?te.resolve(null):(io()<=Le.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(t)),this.vs(e,c,t,rM(o,Aa)).next((h=>h)))}))}Ds(e,t){let s=new Ut(O_(e));return t.forEach(((o,l)=>{Au(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return io()<=Le.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",fo(t)),this.ps.getDocumentsMatchingQuery(e,t,ds.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="LocalStore",qD=3e8;class OD{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new mt(Ne),this.xs=new or((l=>vh(l)),Ah),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ID(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function BD(n,e,t,s){return new OD(n,e,t,s)}async function ET(n,e){const t=Ce(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],h=[];let y=Ve();for(const p of o){c.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}for(const p of l){h.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(s,y).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:h})))}))}))}function zD(n,e){const t=Ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,y,p,T){const v=p.batch,A=v.keys();let x=te.resolve();return A.forEach((k=>{x=x.next((()=>T.getEntry(y,k))).next((B=>{const H=p.docVersions.get(k);Ke(H!==null,48541),B.version.compareTo(H)<0&&(v.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),T.addEntry(B)))}))})),x.next((()=>h.mutationQueue.removeMutationBatch(y,v)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let y=Ve();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(y=y.add(h.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function vT(n){const e=Ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function GD(n,e){const t=Ce(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const h=[];e.targetChanges.forEach(((T,v)=>{const A=o.get(v);if(!A)return;h.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,v))));let x=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(Kt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(T.resumeToken,s)),o=o.insert(v,x),(function(B,H,ne){return B.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=qD?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(A,x,T)&&h.push(t.Pi.updateTargetData(l,x))}));let y=zi(),p=Ve();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),h.push(FD(l,c,e.documentUpdates).next((T=>{y=T.ks,p=T.qs}))),!s.isEqual(Se.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((v=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(T)}return te.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,p))).next((()=>y))})).then((l=>(t.Ms=o,l)))}function FD(n,e,t){let s=Ve(),o=Ve();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=zi();return t.forEach(((h,y)=>{const p=l.get(h);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(h)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(h,y.readTime),c=c.insert(h,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),c=c.insert(h,y)):fe(Oh,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",y.version)})),{ks:c,qs:o}}))}function HD(n,e){const t=Ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=mh),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function YD(n,e){const t=Ce(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,te.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new ys(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Bh(n,e,t){const s=Ce(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ao(c))throw c;fe(Oh,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function AT(n,e,t){const s=Ce(n);let o=Se.min(),l=Ve();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,p,T){const v=Ce(y),A=v.xs.get(T);return A!==void 0?te.resolve(v.Ms.get(A)):v.Pi.getTargetData(p,T)})(s,c,ci(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,h.targetId).next((y=>{l=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?l:Ve()))).next((h=>(JD(s,DM(e),h),{documents:h,Qs:l})))))}function JD(n,e,t){let s=n.Os.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class ST{constructor(){this.activeTargetIds=LM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KD{constructor(){this.Mo=new ST,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ST,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="ConnectivityMonitor";class CT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(wT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(wT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu=null;function zh(){return Vu===null?Vu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vu++,"0x"+Vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="RestConnection",QD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===mu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=zh(),h=this.zo(e,t.toUriEncodedString());fe(Gh,`Sending RPC '${e}' ${c}:`,h,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,l);const{host:p}=new URL(h),T=jf(p);return this.Jo(e,h,y,s,T).then((v=>(fe(Gh,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw so(Gh,`RPC '${e}' ${c} failed with error: `,v,"url: ",h,"request:",s),v}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+no})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=QD[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class WD extends XD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=zh();return new Promise(((h,y)=>{const p=new Yy;p.setWithCredentials(!0),p.listenOnce(Jy.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case lu.NO_ERROR:const v=p.getResponseJson();fe(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),h(v);break;case lu.TIMEOUT:fe(rn,`RPC '${e}' ${c} timed out`),y(new ce(j.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:const A=p.getStatus();if(fe(rn,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x==null?void 0:x.error;if(k&&k.status&&k.message){const B=(function(ne){const ie=ne.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(ie)>=0?ie:j.UNKNOWN})(k.status);y(new ce(B,k.message))}else y(new ce(j.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new ce(j.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{fe(rn,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(o);fe(rn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",T,s,15)}))}T_(e,t,s){const o=zh(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Qy(),h=$y(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const T=l.join("");fe(rn,`Creating RPC '${e}' stream ${o}: ${T}`,y);const v=c.createWebChannel(T,y);this.I_(v);let A=!1,x=!1;const k=new ZD({Yo:H=>{x?fe(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(A||(fe(rn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),A=!0),fe(rn,`RPC '${e}' stream ${o} sending:`,H),v.send(H))},Zo:()=>v.close()}),B=(H,ne,ie)=>{H.listen(ne,(X=>{try{ie(X)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return B(v,Ta.EventType.OPEN,(()=>{x||(fe(rn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),B(v,Ta.EventType.CLOSE,(()=>{x||(x=!0,fe(rn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(v))})),B(v,Ta.EventType.ERROR,(H=>{x||(x=!0,so(rn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),k.a_(new ce(j.UNAVAILABLE,"The operation could not be completed")))})),B(v,Ta.EventType.MESSAGE,(H=>{var ne;if(!x){const ie=H.data[0];Ke(!!ie,16349);const X=ie,oe=(X==null?void 0:X.error)||((ne=X[0])==null?void 0:ne.error);if(oe){fe(rn,`RPC '${e}' stream ${o} received error:`,oe);const he=oe.status;let le=(function(b){const V=Rt[b];if(V!==void 0)return eT(V)})(he),M=oe.message;le===void 0&&(le=j.INTERNAL,M="Unknown error status: "+he+" with message "+oe.message),x=!0,k.a_(new ce(le,M)),v.close()}else fe(rn,`RPC '${e}' stream ${o} received:`,ie),k.u_(ie)}})),B(h,Ky.STAT_EVENT,(H=>{H.stat===ch.PROXY?fe(rn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===ch.NOPROXY&&fe(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){return new nD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="PersistentStream";class bT{constructor(e,t,s,o,l,c,h,y){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Bi(t.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce(j.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(IT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(IT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jD extends bT{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rD(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?hi(c.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=kh(this.serializer),t.addTarget=(function(l,c){let h;const y=c.target;if(h=Sh(y)?{documents:lD(l,y)}:{query:uD(l,y).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=aT(l,c.resumeToken);const p=Mh(l,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Se.min())>0){h.readTime=Du(l,c.snapshotVersion.toTimestamp());const p=Mh(l,c.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const s=fD(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=kh(this.serializer),t.removeTarget=e,this.q_(t)}}class eN extends bT{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aD(e.writeResults,e.commitTime),s=hi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=kh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>oD(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{}class nN extends tN{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Nh(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(j.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Nh(t,s),o,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(j.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bi(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="RemoteStore";class sN{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{cr(this)&&(fe(ur,"Restarting streams for network reachability change."),await(async function(y){const p=Ce(y);p.Ea.add(4),await La(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ku(p)})(this))}))})),this.Ra=new iN(s,o)}}async function ku(n){if(cr(n))for(const e of n.da)await e(!0)}async function La(n){for(const e of n.da)await e(!1)}function xT(n,e){const t=Ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kh(t)?Jh(t):go(t).O_()&&Yh(t,e))}function Hh(n,e){const t=Ce(n),s=go(t);t.Ia.delete(e),s.O_()&&MT(t,e),t.Ia.size===0&&(s.O_()?s.L_():cr(t)&&t.Ra.set("Unknown"))}function Yh(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}go(n).Y_(e)}function MT(n,e){n.Va.Ue(e),go(n).Z_(e)}function Jh(n){n.Va=new WM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),go(n).start(),n.Ra.ua()}function Kh(n){return cr(n)&&!go(n).x_()&&n.Ia.size>0}function cr(n){return Ce(n).Ea.size===0}function DT(n){n.Va=void 0}async function rN(n){n.Ra.set("Online")}async function oN(n){n.Ia.forEach(((e,t)=>{Yh(n,e)}))}async function aN(n,e){DT(n),Kh(n)?(n.Ra.ha(e),Jh(n)):n.Ra.set("Unknown")}async function lN(n,e,t){if(n.Ra.set("Online"),e instanceof sT&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const h of l.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ia.delete(h),o.Va.removeTarget(h))})(n,e)}catch(s){fe(ur,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Uu(n,s)}else if(e instanceof xu?n.Va.Ze(e):e instanceof iT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const s=await vT(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const T=l.Ia.get(p);T&&l.Ia.set(p,T.withResumeToken(y.resumeToken,c))}})),h.targetMismatches.forEach(((y,p)=>{const T=l.Ia.get(y);if(!T)return;l.Ia.set(y,T.withResumeToken(Kt.EMPTY_BYTE_STRING,T.snapshotVersion)),MT(l,y);const v=new ys(T.target,y,p,T.sequenceNumber);Yh(l,v)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){fe(ur,"Failed to raise snapshot:",s),await Uu(n,s)}}async function Uu(n,e,t){if(!ao(e))throw e;n.Ea.add(1),await La(n),n.Ra.set("Offline"),t||(t=()=>vT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(ur,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ku(n)}))}function NT(n,e){return e().catch((t=>Uu(n,t,e)))}async function Lu(n){const e=Ce(n),t=_s(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mh;for(;uN(e);)try{const o=await HD(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,cN(e,o)}catch(o){await Uu(e,o)}VT(e)&&PT(e)}function uN(n){return cr(n)&&n.Ta.length<10}function cN(n,e){n.Ta.push(e);const t=_s(n);t.O_()&&t.X_&&t.ea(e.mutations)}function VT(n){return cr(n)&&!_s(n).x_()&&n.Ta.length>0}function PT(n){_s(n).start()}async function fN(n){_s(n).ra()}async function hN(n){const e=_s(n);for(const t of n.Ta)e.ea(t.mutations)}async function dN(n,e,t){const s=n.Ta.shift(),o=bh.from(s,e,t);await NT(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Lu(n)}async function pN(n,e){e&&_s(n).X_&&await(async function(s,o){if((function(c){return QM(c)&&c!==j.ABORTED})(o.code)){const l=s.Ta.shift();_s(s).B_(),await NT(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Lu(s)}})(n,e),VT(n)&&PT(n)}async function kT(n,e){const t=Ce(n);t.asyncQueue.verifyOperationInProgress(),fe(ur,"RemoteStore received new credentials");const s=cr(t);t.Ea.add(3),await La(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ku(t)}async function mN(n,e){const t=Ce(n);e?(t.Ea.delete(2),await ku(t)):e||(t.Ea.add(2),await La(t),t.Ra.set("Unknown"))}function go(n){return n.ma||(n.ma=(function(t,s,o){const l=Ce(t);return l.sa(),new jD(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:rN.bind(null,n),t_:oN.bind(null,n),r_:aN.bind(null,n),H_:lN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Kh(n)?Jh(n):n.Ra.set("Unknown")):(await n.ma.stop(),DT(n))}))),n.ma}function _s(n){return n.fa||(n.fa=(function(t,s,o){const l=Ce(t);return l.sa(),new eN(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:fN.bind(null,n),r_:pN.bind(null,n),ta:hN.bind(null,n),na:dN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Lu(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(ur,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,h=new $h(e,t,c,o,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qh(n,e){if(Bi("AsyncQueue",`${e}: ${n}`),ao(n))return new ce(j.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=xa(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new yo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.ga=new mt(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class _o{constructor(e,t,s,o,l,c,h,y,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new _o(e,t,yo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yN{constructor(){this.queries=LT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ce(t),l=o.queries;o.queries=LT(),l.forEach(((c,h)=>{for(const y of h.Sa)y.onError(s)}))})(this,new ce(j.ABORTED,"Firestore shutting down"))}}function LT(){return new or((n=>q_(n)),vu)}async function _N(n,e){const t=Ce(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new gN,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Qh(c,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Xh(t)}async function TN(n,e){const t=Ce(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function EN(n,e){const t=Ce(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(o)&&(s=!0);c.wa=o}}s&&Xh(t)}function vN(n,e,t){const s=Ce(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Xh(n){n.Ca.forEach((e=>{e.next()}))}var Zh,qT;(qT=Zh||(Zh={})).Ma="default",qT.Cache="cache";class AN{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new _o(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.key=e}}class BT{constructor(e){this.key=e}}class SN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=O_(e),this.tu=new yo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new UT,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,v)=>{const A=o.get(T),x=Au(this.query,v)?v:null,k=!!A&&this.mutatedKeys.has(A.key),B=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let H=!1;A&&x?A.data.isEqual(x.data)?k!==B&&(s.track({type:3,doc:x}),H=!0):this.su(A,x)||(s.track({type:2,doc:x}),H=!0,(y&&this.eu(x,y)>0||p&&this.eu(x,p)<0)&&(h=!0)):!A&&x?(s.track({type:0,doc:x}),H=!0):A&&!x&&(s.track({type:1,doc:A}),H=!0,(y||p)&&(h=!0)),H&&(x?(c=c.add(x),l=B?l.add(T):l.delete(T)):(c=c.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),l=l.delete(T.key),s.track({type:1,doc:T})}return{tu:c,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,v)=>(function(x,k){const B=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:H})}};return B(x)-B(k)})(T.type,v.type)||this.eu(T.doc,v.doc))),this.ou(s),o=o??!1;const h=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,c.length!==0||p?{snapshot:new _o(this.query,e.tu,l,c,e.mutatedKeys,y===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new UT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new BT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new OT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wh="SyncEngine";class wN{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class CN{constructor(e){this.key=e,this.hu=!1}}class RN{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new or((h=>q_(h)),vu),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ye.comparator),this.Au=new Map,this.Ru=new Uh,this.Vu={},this.mu=new Map,this.fu=mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IN(n,e,t=!0){const s=$T(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await zT(s,e,t,!0),o}async function bN(n,e){const t=$T(n);await zT(t,e,!0,!1)}async function zT(n,e,t,s){const o=await YD(n.localStore,ci(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await xN(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&xT(n.remoteStore,o),h}async function xN(n,e,t,s,o){n.pu=(v,A,x)=>(async function(B,H,ne,ie){let X=H.view.ru(ne);X.Cs&&(X=await AT(B.localStore,H.query,!1).then((({documents:M})=>H.view.ru(M,X))));const oe=ie&&ie.targetChanges.get(H.targetId),he=ie&&ie.targetMismatches.get(H.targetId)!=null,le=H.view.applyChanges(X,B.isPrimaryClient,oe,he);return KT(B,H.targetId,le.au),le.snapshot})(n,v,A,x);const l=await AT(n.localStore,e,!0),c=new SN(e,l.Qs),h=c.ru(l.documents),y=Ua.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),p=c.applyChanges(h,n.isPrimaryClient,y);KT(n,t,p.au);const T=new wN(e,t,c);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function MN(n,e,t){const s=Ce(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!vu(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Bh(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Hh(s.remoteStore,o.targetId),jh(s,o.targetId)})).catch(oo)):(jh(s,o.targetId),await Bh(s.localStore,o.targetId,!0))}async function DN(n,e){const t=Ce(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Hh(t.remoteStore,s.targetId))}async function NN(n,e,t){const s=ON(n);try{const o=await(function(c,h){const y=Ce(c),p=ut.now(),T=h.reduce(((x,k)=>x.add(k.key)),Ve());let v,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let k=zi(),B=Ve();return y.Ns.getEntries(x,T).next((H=>{k=H,k.forEach(((ne,ie)=>{ie.isValidDocument()||(B=B.add(ne))}))})).next((()=>y.localDocuments.getOverlayedDocuments(x,k))).next((H=>{v=H;const ne=[];for(const ie of h){const X=HM(ie,v.get(ie.key).overlayedDocument);X!=null&&ne.push(new lr(ie.key,X,C_(X.value.mapValue),fi.exists(!0)))}return y.mutationQueue.addMutationBatch(x,p,ne,h)})).next((H=>{A=H;const ne=H.applyToLocalDocumentSet(v,B);return y.documentOverlayCache.saveOverlays(x,H.batchId,ne)}))})).then((()=>({batchId:A.batchId,changes:z_(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,h,y){let p=c.Vu[c.currentUser.toKey()];p||(p=new mt(Ne)),p=p.insert(h,y),c.Vu[c.currentUser.toKey()]=p})(s,o.batchId,t),await qa(s,o.changes),await Lu(s.remoteStore)}catch(o){const l=Qh(o,"Failed to persist write");t.reject(l)}}async function GT(n,e){const t=Ce(n);try{const s=await GD(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Ke(c.hu,14607):o.removedDocuments.size>0&&(Ke(c.hu,42227),c.hu=!1))})),await qa(t,s,e)}catch(s){await oo(s)}}function FT(n,e,t){const s=Ce(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const y=Ce(c);y.onlineState=h;let p=!1;y.queries.forEach(((T,v)=>{for(const A of v.Sa)A.va(h)&&(p=!0)})),p&&Xh(y)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function VN(n,e,t){const s=Ce(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new mt(ye.comparator);c=c.insert(l,sn.newNoDocument(l,Se.min()));const h=Ve().add(l),y=new bu(Se.min(),new Map,new mt(Ne),c,h);await GT(s,y),s.du=s.du.remove(l),s.Au.delete(e),ed(s)}else await Bh(s.localStore,e,!1).then((()=>jh(s,e,t))).catch(oo)}async function PN(n,e){const t=Ce(n),s=e.batch.batchId;try{const o=await zD(t.localStore,e);YT(t,s,null),HT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await qa(t,o)}catch(o){await oo(o)}}async function kN(n,e,t){const s=Ce(n);try{const o=await(function(c,h){const y=Ce(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let T;return y.mutationQueue.lookupMutationBatch(p,h).next((v=>(Ke(v!==null,37113),T=v.keys(),y.mutationQueue.removeMutationBatch(p,v)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,T,h))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T))).next((()=>y.localDocuments.getDocuments(p,T)))}))})(s.localStore,e);YT(s,e,t),HT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await qa(s,o)}catch(o){await oo(o)}}function HT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function YT(n,e,t){const s=Ce(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function jh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||JT(n,s)}))}function JT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Hh(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ed(n))}function KT(n,e,t){for(const s of t)s instanceof OT?(n.Ru.addReference(s.key,e),UN(n,s)):s instanceof BT?(fe(Wh,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||JT(n,s.key)):ve(19791,{wu:s})}function UN(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(fe(Wh,"New document in limbo: "+t),n.Eu.add(s),ed(n))}function ed(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(ot.fromString(e)),s=n.fu.next();n.Au.set(s,new CN(t)),n.du=n.du.insert(t,s),xT(n.remoteStore,new ys(ci(k_(t.path)),s,"TargetPurposeLimboResolution",cu.ce))}}async function qa(n,e,t){const s=Ce(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,y)=>{c.push(s.pu(y,e,t).then((p=>{var T;if((p||t)&&s.isPrimaryClient){const v=p?!p.fromCache:(T=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(y.targetId,v?"current":"not-current")}if(p){o.push(p);const v=qh.As(y.targetId,p);l.push(v)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(y,p){const T=Ce(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>te.forEach(p,(A=>te.forEach(A.Es,(x=>T.persistence.referenceDelegate.addReference(v,A.targetId,x))).next((()=>te.forEach(A.ds,(x=>T.persistence.referenceDelegate.removeReference(v,A.targetId,x)))))))))}catch(v){if(!ao(v))throw v;fe(Oh,"Failed to update sequence numbers: "+v)}for(const v of p){const A=v.targetId;if(!v.fromCache){const x=T.Ms.get(A),k=x.snapshotVersion,B=x.withLastLimboFreeSnapshotVersion(k);T.Ms=T.Ms.insert(A,B)}}})(s.localStore,l))}async function LN(n,e){const t=Ce(n);if(!t.currentUser.isEqual(e)){fe(Wh,"User change. New user:",e.toKey());const s=await ET(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((y=>{y.reject(new ce(j.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await qa(t,s.Ls)}}function qN(n,e){const t=Ce(n),s=t.Au.get(e);if(s&&s.hu)return Ve().add(s.key);{let o=Ve();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const h=t.Tu.get(c);o=o.unionWith(h.view.nu)}return o}}function $T(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VN.bind(null,e),e.Pu.H_=EN.bind(null,e.eventManager),e.Pu.yu=vN.bind(null,e.eventManager),e}function ON(n){const e=Ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kN.bind(null,e),e}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BD(this.persistence,new LD,e.initialUser,this.serializer)}Cu(e){return new TT(Lh.mi,this.serializer)}Du(e){return new KD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class BN extends qu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Nu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new AD(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new TT((s=>Nu.mi(s,t)),this.serializer)}}class td{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>FT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=LN.bind(null,this.syncEngine),await mN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yN})()}createDatastore(e){const t=Pu(e.databaseInfo.databaseId),s=(function(l){return new WD(l)})(e.databaseInfo);return(function(l,c,h,y){return new nN(l,c,h,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,h){return new sN(s,o,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>FT(this.syncEngine,t,0)),(function(){return CT.v()?new CT:new $D})())}createSyncEngine(e,t){return(function(o,l,c,h,y,p,T){const v=new RN(o,l,c,h,y,p);return T&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ce(o);fe(ur,"RemoteStore shutting down."),l.Ea.add(5),await La(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}td.provider={build:()=>new td};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="FirestoreClient";class GN{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=hh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{fe(Ts,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(fe(Ts,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Qh(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function nd(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ts,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await ET(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function QT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await FN(n);fe(Ts,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>kT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>kT(e.remoteStore,o))),n._onlineComponents=e}async function FN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ts,"Using user provided OfflineComponentProvider");try{await nd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===j.FAILED_PRECONDITION||o.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;so("Error using user provided cache. Falling back to memory cache: "+t),await nd(n,new qu)}}else fe(Ts,"Using default OfflineComponentProvider"),await nd(n,new BN(void 0));return n._offlineComponents}async function XT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ts,"Using user provided OnlineComponentProvider"),await QT(n,n._uninitializedComponentsProvider._online)):(fe(Ts,"Using default OnlineComponentProvider"),await QT(n,new td))),n._onlineComponents}function HN(n){return XT(n).then((e=>e.syncEngine))}async function YN(n){const e=await XT(n),t=e.eventManager;return t.onListen=IN.bind(null,e.syncEngine),t.onUnlisten=MN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DN.bind(null,e.syncEngine),t}function JN(n,e,t={}){const s=new hs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,y,p){const T=new zN({next:A=>{T.Nu(),c.enqueueAndForget((()=>TN(l,v))),A.fromCache&&y.source==="server"?p.reject(new ce(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),v=new AN(h,T,{includeMetadataChanges:!0,qa:!0});return _N(l,v)})(await YN(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firestore.googleapis.com",eE=!0;class tE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jT,this.ssl=eE}else this.host=e.host,this.ssl=e.ssl??eE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ED)throw new ce(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new $x;switch(s.type){case"firstParty":return new Wx(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=WT.get(t);s&&(fe("ComponentProvider","Removing Datastore"),WT.delete(t),s.terminate())})(this),Promise.resolve()}}function KN(n,e,t,s={}){var p;n=Ea(n,Ou);const o=jf(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;o&&(vb(`https://${h}`),Cb("Firestore",!0)),l.host!==jT&&l.host!==h&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:h,ssl:o,emulatorOptions:s};if(!su(y,c)&&(n._setSettings(y),s.mockUserToken)){let T,v;if(typeof s.mockUserToken=="string")T=s.mockUserToken,v=nn.MOCK_USER;else{T=Ab(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ce(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(A)}n._authCredentials=new Qx(new jy(T,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fr(this.firestore,e,this._query)}}class zt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(va(t,zt._jsonSchema))return new zt(e,s||null,new ye(ot.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:wt("string",zt._jsonSchemaVersion),referencePath:wt("string")};class Es extends fr{constructor(e,t,s){super(e,t,k_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new ye(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function $N(n,e,...t){if(n=eo(n),n_("collection","path",e),n instanceof Ou){const s=ot.fromString(e,...t);return s_(s),new Es(n,null,s)}{if(!(n instanceof zt||n instanceof Es))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return s_(s),new Es(n.firestore,null,s)}}function nE(n,e,...t){if(n=eo(n),arguments.length===1&&(e=hh.newId()),n_("doc","path",e),n instanceof Ou){const s=ot.fromString(e,...t);return i_(s),new zt(n,null,new ye(s))}{if(!(n instanceof zt||n instanceof Es))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return i_(s),new zt(n.firestore,n instanceof Es?n.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="AsyncQueue";class sE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RT(this,"async_queue_retry"),this._c=()=>{const s=Fh();s&&fe(iE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Fh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ao(e))throw e;fe(iE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Bi("INTERNAL UNHANDLED ERROR: ",rE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=$h.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ve(47125,{Pc:rE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Bu extends Ou{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new sE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sE(e),this._firestoreClient=void 0,await e}}}function QN(n,e){const t=typeof n=="object"?n:kx(),s=typeof n=="string"?n:mu,o=Mx(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=Tb("firestore");l&&KN(o,...l)}return o}function oE(n){if(n._terminated)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||XN(n),n._firestoreClient}function XN(n){var s,o,l;const e=n._freezeSettings(),t=(function(h,y,p,T){return new mM(h,y,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,ZT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new GN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const y=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xn(Kt.fromBase64String(e))}catch(t){throw new ce(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xn(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(va(e,xn._jsonSchema))return xn.fromBase64String(e.bytes)}}xn._jsonSchemaVersion="firestore/bytes/1.0",xn._jsonSchema={type:wt("string",xn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(va(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:wt("string",di._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(va(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pi(e.vectorValues);throw new ce(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:wt("string",pi._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=/^__.*__$/;class WN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pa(e,this.data,t,this.fieldTransforms)}}function lE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:n})}}class sd{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lE(this.Ac)&&ZN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Pu(e)}Cc(e,t,s,o=!1){return new sd({Ac:e,methodName:t,Dc:s,path:Yt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uE(n){const e=n._freezeSettings(),t=Pu(n._databaseId);return new jN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function e2(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);hE("Data must be an object, but it was:",c,s);const h=cE(s,c);let y,p;if(l.merge)y=new Jn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const T=[];for(const v of l.mergeFields){const A=n2(e,v,t);if(!c.contains(A))throw new ce(j.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);s2(T,A)||T.push(A)}y=new Jn(T),p=c.fieldTransforms.filter((v=>y.covers(v.field)))}else y=null,p=c.fieldTransforms;return new WN(new bn(h),y,p)}function t2(n,e,t,s=!1){return rd(t,n.Cc(s?4:3,e))}function rd(n,e){if(fE(n=eo(n)))return hE("Unsupported field value:",e,n),cE(n,e);if(n instanceof aE)return(function(s,o){if(!lE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const h of s){let y=rd(h,o.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=eo(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return qM(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ut.fromDate(s);return{timestampValue:Du(o.serializer,l)}}if(s instanceof ut){const l=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Du(o.serializer,l)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof xn)return{bytesValue:aT(o.serializer,s._byteString)};if(s instanceof zt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Dh(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof pi)return(function(c,h){return{mapValue:{fields:{[__]:{stringValue:T_},[yu]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return Rh(h.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${uu(s)}`)})(n,e)}function cE(n,e){const t={};return f_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rr(n,((s,o)=>{const l=rd(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function fE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof di||n instanceof xn||n instanceof zt||n instanceof aE||n instanceof pi)}function hE(n,e,t){if(!fE(t)||!r_(t)){const s=uu(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function n2(n,e,t){if((e=eo(e))instanceof id)return e._internalPath;if(typeof e=="string")return dE(n,e);throw zu("Field path arguments must be of type string or ",n,!1,void 0,t)}const i2=new RegExp("[~\\*/\\[\\]]");function dE(n,e,t){if(e.search(i2)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new id(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zu(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${s}`),c&&(y+=` in document ${o}`),y+=")"),new ce(j.INVALID_ARGUMENT,h+n+y)}function s2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(od("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r2 extends pE{data(){return super.data()}}function od(n,e){return typeof e=="string"?dE(n,e):e instanceof id?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ad{}class mE extends ad{}function gE(n,e,...t){let s=[];e instanceof ad&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((y=>y instanceof ud)).length,h=l.filter((y=>y instanceof ld)).length;if(c>1||c>0&&h>0)throw new ce(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class ld extends mE{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ld(e,t,s)}_apply(e){const t=this._parse(e);return EE(e._query,t),new fr(e.firestore,e.converter,wh(e._query,t))}_parse(e){const t=uE(e.firestore);return(function(l,c,h,y,p,T,v){let A;if(p.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ce(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){TE(v,T);const k=[];for(const B of v)k.push(_E(y,l,B));A={arrayValue:{values:k}}}else A=_E(y,l,v)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||TE(v,T),A=t2(h,c,v,T==="in"||T==="not-in");return Ct.create(p,T,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ud extends ad{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ud(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Kn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const h=l.getFlattenedFilters();for(const y of h)EE(c,y),c=wh(c,y)})(e._query,t),new fr(e.firestore,e.converter,wh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cd extends mE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cd(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ce(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ia(l,c)})(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new co(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function yE(n,e="asc"){const t=e,s=od("orderBy",n);return cd._create(s,t)}function _E(n,e,t){if(typeof(t=eo(t))=="string"){if(t==="")throw new ce(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L_(e)&&t.indexOf("/")!==-1)throw new ce(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ot.fromString(t));if(!ye.isDocumentKey(s))throw new ce(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return A_(n,new ye(s))}if(t instanceof zt)return A_(n,t._key);throw new ce(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uu(t)}.`)}function TE(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(n,e){const t=(function(o,l){for(const c of o)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class a2{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return rr(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[yu].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Tt(c.doubleValue)));return new pi(t)}convertGeoPoint(e){return new di(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=pu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Sa(e));default:return null}}convertTimestamp(e){const t=ps(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ot.fromString(e);Ke(pT(s),9688,{name:e});const o=new wa(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||Bi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Gu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class To extends pE{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(od("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=To._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:wt("string",To._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Fu extends To{data(e={}){return super.data(e)}}class Eo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Gu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Fu(this._firestore,this._userDataWriter,s.key,s,new Gu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const y=new Fu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Gu(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const y=new Fu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Gu(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,T=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),T=c.indexOf(h.doc.key)),{type:u2(h.type),doc:y,oldIndex:p,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:wt("string",Eo._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class c2 extends a2{constructor(e){super(),this.firestore=e}convertBytes(e){return new xn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function vE(n){n=Ea(n,fr);const e=Ea(n.firestore,Bu),t=oE(e),s=new c2(e);return o2(n._query),JN(t,n._query).then((o=>new Eo(e,s,n,o)))}function f2(n){return AE(Ea(n.firestore,Bu),[new Ih(n._key,fi.none())])}function h2(n,e){const t=Ea(n.firestore,Bu),s=nE(n),o=l2(n.converter,e);return AE(t,[e2(uE(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,fi.exists(!1))]).then((()=>s))}function AE(n,e){return(function(s,o){const l=new hs;return s.asyncQueue.enqueueAndForget((async()=>NN(await HN(s),o,l))),l.promise})(oE(n),e)}(function(e,t=!0){(function(o){no=o})(Px),ou(new ya("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),h=new Bu(new Xx(s.getProvider("auth-internal")),new jx(c,s.getProvider("app-check-internal")),(function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ce(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(p.options.projectId,T)})(c,o),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),to(Xy,Zy,e),to(Xy,Zy,"esm2020")})();const SE={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyD0yavRTchwhwA97F6lr_9BYkLoXMksLSw",VITE_FIREBASE_APP_ID:"1:360675539401:web:12fa60fc2e4e8ac7a0d018",VITE_FIREBASE_AUTH_DOMAIN:"help-bot-55e76.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"360675539401",VITE_FIREBASE_PROJECT_ID:"help-bot-55e76",VITE_FIREBASE_STORAGE_BUCKET:"help-bot-55e76.firebasestorage.app",VITE_GEMINI_API_KEY:"AIzaSyCQjq9iI6AKP5VYaJ-iQOkQlWGQgh5lbmI"};var wE={};const d2=typeof{url:Fn&&Fn.tagName.toUpperCase()==="SCRIPT"&&Fn.src||new URL("chatbot.js",document.baseURI).href}<"u"&&SE?SE:typeof process<"u"&&wE?wE:{};function hr(...n){for(const e of n){const t=d2[e];if(typeof t=="string"&&t.length>0)return t}}const CE=()=>{var t;const n=hr("VITE_GEMINI_API_KEY","REACT_APP_GEMINI_API_KEY","API_KEY"),e=(t=window.HELP_CHAT_CONFIG)==null?void 0:t.GEMINI_API_KEY;return n||e||null},RE=()=>{var s;const e={...{apiKey:hr("VITE_FIREBASE_API_KEY","REACT_APP_FIREBASE_API_KEY","FIREBASE_API_KEY"),authDomain:hr("VITE_FIREBASE_AUTH_DOMAIN","REACT_APP_FIREBASE_AUTH_DOMAIN","FIREBASE_AUTH_DOMAIN"),projectId:hr("VITE_FIREBASE_PROJECT_ID","REACT_APP_FIREBASE_PROJECT_ID","FIREBASE_PROJECT_ID"),storageBucket:hr("VITE_FIREBASE_STORAGE_BUCKET","REACT_APP_FIREBASE_STORAGE_BUCKET","FIREBASE_STORAGE_BUCKET"),messagingSenderId:hr("VITE_FIREBASE_MESSAGING_SENDER_ID","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","FIREBASE_MESSAGING_SENDER_ID"),appId:hr("VITE_FIREBASE_APP_ID","REACT_APP_FIREBASE_APP_ID","FIREBASE_APP_ID")},...((s=window.HELP_CHAT_CONFIG)==null?void 0:s.FIREBASE)??{}},t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];for(const o of t){const l=e[o];if(!l||typeof l!="string"||l.length===0)return null}return e},p2=()=>!!CE()&&!!RE();let fd=null,hd=null;const m2=()=>{if(fd)return;const n=RE();if(!n)throw new Error("Firebase config is not set. Please check your environment variables.");fd=Ly(n),hd=QN(fd)},IE=()=>(hd||m2(),hd),dd=()=>$N(IE(),"knowledgeBase"),g2=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=t,s.readAsText(n)}),y2=async n=>{const e=dd();for(const t of n){const s=await g2(t);await h2(e,{fileName:t.name,content:s,uploadedAt:new Date})}},_2=async()=>{const n=dd(),e=gE(n,yE("fileName")),t=await vE(e);return t.empty?null:t.docs.map(o=>{const l=o.data();return`--- START OF FILE: ${l.fileName} ---

${l.content}

--- END OF FILE: ${l.fileName} ---`}).join(`

`)},T2=async()=>{const n=dd(),e=gE(n,yE("fileName"));return(await vE(e)).docs.map(s=>{const o=s.data();return{id:s.id,fileName:o.fileName}})},E2=async n=>{const e=nE(IE(),"knowledgeBase",n);await f2(e)};let Hu=null;const v2=()=>{if(Hu)return Hu;const n=CE();if(!n)throw new Error("Gemini API Key is not set. Please check your environment variables.");return Hu=new lb({apiKey:n}),Hu},A2=async n=>{try{const e=await _2();if(!e)return{error:"죄송합니다, 아직 지식 베이스가 준비되지 않았어요. 관리자가 관련 정보를 업로드해야 합니다."};const t="gemini-2.5-flash",s=v2(),o=`당신은 '생활백서봇'이며, 사용자를 돕는 것을 좋아하는 친절한 안내원입니다.

**가장 중요한 목표:** 사용자의 질문에 대해 주어진 "지식 베이스" 내용만을 사용하여 답변해야 합니다.

**매우 중요:** 당신의 전체 출력은 아래 스키마를 엄격하게 따르는 단일 JSON 객체여야 합니다. 절대로 JSON 형식을 벗어나거나, 불필요한 설명을 추가하지 마세요.

\`\`\`json
{
  "answer": "지식 베이스에만 기반한 핵심 답변. 이 부분은 반드시 마크다운 형식을 사용하고, 끝에 출처를 포함해야 합니다.",
  "closing": "추가 질문을 유도하는 짧고 친절한 마무리 인사."
}
\`\`\`

**각 필드별 콘텐츠 규칙:**

1.  **\`answer\` 필드 (핵심 답변):**
    *   **어조:** 항상 친구에게 말하듯 친절하고, 대화하며, 존중하는 어조('해요체')를 사용하세요.
    *   **정보 제한:** **오직** "지식 베이스"에 있는 정보만 사용하세요. 절대로 외부 지식을 사용하거나 답변을 지어내면 안 됩니다.
    *   **마크다운 서식 규칙 (매우 중요):**
        *   **목록:** 목록 항목을 나열할 때는, 각 항목이 **별도의 줄에 표시**되어야 합니다. 각 항목은 \`* \` (별표와 공백)으로 시작해야 합니다.
        *   **줄바꿈:** 목록 앞과 뒤에는 항상 빈 줄(\`\\n\`)을 넣어 단락과 구분해주세요.
        *   **올바른 예시:** "주요 절차는 다음과 같습니다.\\n\\n* 첫 번째 단계: 서류 제출\\n* 두 번째 단계: 서류 검토\\n* 세 번째 단계: 최종 승인"
        *   **잘못된 예시:** "주요 절차는 다음과 같습니다. * 첫 번째 단계 * 두 번째 단계"
        *   **굵은 글씨:** 중요한 키워드는 \`**굵은 글씨**\`로 강조해주세요.
    *   **출처 표기 규칙 (매우 중요):**
        *   답변의 맨 마지막 줄에는 **반드시** 출처를 한 줄로 표기해야 합니다.
        *   출처의 파일명에서는 **반드시** \`.md\` 확장자를 **제거**해야 합니다.
        *   **형식:** \\n\`(출처: [파일명], [섹션 제목] 섹션)\`
        *   **올바른 예시:** \\n\`(출처: 서울아레나 위임전결규정, 2.5. 법인카드 정산 섹션)\`
        *   **잘못된 예시:** \`(출처: 서울아레나 위임전결규정.md, 2.5. 법인카드 정산 섹션)\`
    *   **모르는 질문:** 만약 질문에 대한 정보가 지식 베이스에 없다면, 이 필드에는 **정확히 다음 문장만** 포함해야 합니다: "죄송하지만, 그 내용에 대해서는 제가 아는 정보가 없네요."

2.  **\`closing\` 필드 (마무리 인사):**
    *   대화를 마무리하고 추가 질문을 유도하는 짧은 문장이어야 합니다.
    *   **모르는 질문에 답했을 경우:** "다른 질문이 있으시면 언제든지 말씀해주세요!" 와 같이 자연스럽게 연결되는 문장을 사용하세요.
    *   **일반적인 경우 예시:** "더 궁금한 점이 있으시면 언제든지 다시 물어봐 주세요!", "도움이 되셨나요? 다른 질문도 편하게 해주세요."

당신의 응답은 반드시 이 두 가지 명확한 부분으로 나뉘어 JSON 구조 안에 담겨야 합니다. 절대로 내용을 합치지 마세요.`,l=`
---
지식 베이스:
${e}
---
사용자 질문: "${n}"`,c=await s.models.generateContent({model:t,contents:l,config:{systemInstruction:o,temperature:.2,topP:.8,topK:10,responseMimeType:"application/json",responseSchema:{type:Hn.OBJECT,properties:{answer:{type:Hn.STRING,description:"지식 베이스를 기반으로 한 핵심 답변. 마크다운 형식을 사용하고, 반드시 출처를 포함해야 합니다."},closing:{type:Hn.STRING,description:'답변을 마무리하며 추가 질문을 유도하는 짧은 인사말. (예: "더 궁금한 점이 있으시면 언제든지 다시 물어봐 주세요!")'}},required:["answer","closing"]}}});try{const h=c.text.trim();return JSON.parse(h)}catch(h){return console.error("Failed to parse JSON response:",c.text,h),{error:"죄송합니다. 답변의 형식이 올바르지 않아 표시할 수 없어요."}}}catch(e){return console.error("Error generating content with Gemini:",e),{error:"죄송합니다. 답변을 생성하는 중 오류가 발생했어요. 잠시 후 다시 시도해주세요."}}},S2=()=>{const[n,e]=at.useState([{id:"init",text:"안녕하세요. 궁금한 점은 뭐든 말씀해주세요.",sender:"bot"}]),[t,s]=at.useState(""),[o,l]=at.useState(!1),c=y=>{s(y.target.value)},h=at.useCallback(async y=>{if(y.preventDefault(),!t.trim()||o)return;const p={id:Date.now().toString(),text:t,sender:"user"};e(v=>[...v,p]);const T=t;s(""),l(!0);try{const v=await A2(T);if("error"in v){const B={id:`${Date.now()}-error`,text:v.error,sender:"bot"};e(H=>[...H,B]);return}const{answer:A,closing:x}=v,k={id:`${Date.now()}-answer`,text:A,sender:"bot"};e(B=>[...B,k]),setTimeout(()=>{const B={id:`${Date.now()}-closing`,text:x,sender:"bot"};e(H=>[...H,B])},800)}catch(v){console.error("Error in chat submission process:",v);const A={id:`${Date.now()}-error-critical`,text:"죄송합니다. 알 수 없는 오류가 발생했어요.",sender:"bot"};e(x=>[...x,A])}finally{l(!1)}},[t,o]);return{messages:n,userInput:t,isLoading:o,handleInputChange:c,handleSubmit:h}},w2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"cw-h-6 cw-w-6 cw-flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),C2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"cw-h-6 cw-w-6 cw-flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),R2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"cw-h-5 cw-w-5 cw-flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:se.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),I2=()=>se.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"cw-h-6 cw-w-6 cw-flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),b2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"cw-h-5 cw-w-5 cw-flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});function pd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var dr=pd();function bE(n){dr=n}var Oa={exec:()=>null};function He(n,e=""){let t=typeof n=="string"?n:n.source,s={replace:(o,l)=>{let c=typeof l=="string"?l:l.source;return c=c.replace(on.caret,"$1"),t=t.replace(o,c),s},getRegex:()=>new RegExp(t,e)};return s}var on={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},x2=/^(?:[ \t]*(?:\n|$))+/,M2=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,D2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ba=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,N2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,md=/(?:[*+-]|\d{1,9}[.)])/,xE=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ME=He(xE).replace(/bull/g,md).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),V2=He(xE).replace(/bull/g,md).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),gd=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,P2=/^[^\n]+/,yd=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,k2=He(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",yd).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),U2=He(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,md).getRegex(),Yu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_d=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,L2=He("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",_d).replace("tag",Yu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),DE=He(gd).replace("hr",Ba).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yu).getRegex(),q2=He(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",DE).getRegex(),Td={blockquote:q2,code:M2,def:k2,fences:D2,heading:N2,hr:Ba,html:L2,lheading:ME,list:U2,newline:x2,paragraph:DE,table:Oa,text:P2},NE=He("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ba).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yu).getRegex(),O2={...Td,lheading:V2,table:NE,paragraph:He(gd).replace("hr",Ba).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",NE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yu).getRegex()},B2={...Td,html:He(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_d).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Oa,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:He(gd).replace("hr",Ba).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ME).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},z2=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,G2=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,VE=/^( {2,}|\\)\n(?!\s*$)/,F2=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ju=/[\p{P}\p{S}]/u,Ed=/[\s\p{P}\p{S}]/u,PE=/[^\s\p{P}\p{S}]/u,H2=He(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ed).getRegex(),kE=/(?!~)[\p{P}\p{S}]/u,Y2=/(?!~)[\s\p{P}\p{S}]/u,J2=/(?:[^\s\p{P}\p{S}]|~)/u,K2=/\[(?:[^\[\]`]|`[^`]*?`)*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,UE=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$2=He(UE,"u").replace(/punct/g,Ju).getRegex(),Q2=He(UE,"u").replace(/punct/g,kE).getRegex(),LE="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",X2=He(LE,"gu").replace(/notPunctSpace/g,PE).replace(/punctSpace/g,Ed).replace(/punct/g,Ju).getRegex(),Z2=He(LE,"gu").replace(/notPunctSpace/g,J2).replace(/punctSpace/g,Y2).replace(/punct/g,kE).getRegex(),W2=He("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,PE).replace(/punctSpace/g,Ed).replace(/punct/g,Ju).getRegex(),j2=He(/\\(punct)/,"gu").replace(/punct/g,Ju).getRegex(),eV=He(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),tV=He(_d).replace("(?:-->|$)","-->").getRegex(),nV=He("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",tV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ku=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,iV=He(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ku).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qE=He(/^!?\[(label)\]\[(ref)\]/).replace("label",Ku).replace("ref",yd).getRegex(),OE=He(/^!?\[(ref)\](?:\[\])?/).replace("ref",yd).getRegex(),sV=He("reflink|nolink(?!\\()","g").replace("reflink",qE).replace("nolink",OE).getRegex(),BE=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,vd={_backpedal:Oa,anyPunctuation:j2,autolink:eV,blockSkip:K2,br:VE,code:G2,del:Oa,emStrongLDelim:$2,emStrongRDelimAst:X2,emStrongRDelimUnd:W2,escape:z2,link:iV,nolink:OE,punctuation:H2,reflink:qE,reflinkSearch:sV,tag:nV,text:F2,url:Oa},rV={...vd,link:He(/^!?\[(label)\]\((.*?)\)/).replace("label",Ku).getRegex(),reflink:He(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ku).getRegex()},Ad={...vd,emStrongRDelimAst:Z2,emStrongLDelim:Q2,url:He(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",BE).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:He(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",BE).getRegex()},oV={...Ad,br:He(VE).replace("{2,}","*").getRegex(),text:He(Ad.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},$u={normal:Td,gfm:O2,pedantic:B2},za={normal:vd,gfm:Ad,breaks:oV,pedantic:rV},aV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zE=n=>aV[n];function mi(n,e){if(e){if(on.escapeTest.test(n))return n.replace(on.escapeReplace,zE)}else if(on.escapeTestNoEncode.test(n))return n.replace(on.escapeReplaceNoEncode,zE);return n}function GE(n){try{n=encodeURI(n).replace(on.percentDecode,"%")}catch{return null}return n}function FE(n,e){var l;let t=n.replace(on.findPipe,(c,h,y)=>{let p=!1,T=h;for(;--T>=0&&y[T]==="\\";)p=!p;return p?"|":" |"}),s=t.split(on.splitPipe),o=0;if(s[0].trim()||s.shift(),s.length>0&&!((l=s.at(-1))!=null&&l.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;o<s.length;o++)s[o]=s[o].trim().replace(on.slashPipe,"|");return s}function Ga(n,e,t){let s=n.length;if(s===0)return"";let o=0;for(;o<s&&n.charAt(s-o-1)===e;)o++;return n.slice(0,s-o)}function lV(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function HE(n,e,t,s,o){let l=e.href,c=e.title||null,h=n[1].replace(o.other.outputLinkReplace,"$1");s.state.inLink=!0;let y={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:l,title:c,text:h,tokens:s.inlineTokens(h)};return s.state.inLink=!1,y}function uV(n,e,t){let s=n.match(t.other.indentCodeCompensation);if(s===null)return e;let o=s[1];return e.split(`
`).map(l=>{let c=l.match(t.other.beginningSpace);if(c===null)return l;let[h]=c;return h.length>=o.length?l.slice(o.length):l}).join(`
`)}var Qu=class{constructor(n){it(this,"options");it(this,"rules");it(this,"lexer");this.options=n||dr}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Ga(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],s=uV(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=Ga(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Ga(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=Ga(e[0],`
`).split(`
`),s="",o="",l=[];for(;t.length>0;){let c=!1,h=[],y;for(y=0;y<t.length;y++)if(this.rules.other.blockquoteStart.test(t[y]))h.push(t[y]),c=!0;else if(!c)h.push(t[y]);else break;t=t.slice(y);let p=h.join(`
`),T=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${p}`:p,o=o?`${o}
${T}`:T;let v=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(T,l,!0),this.lexer.state.top=v,t.length===0)break;let A=l.at(-1);if((A==null?void 0:A.type)==="code")break;if((A==null?void 0:A.type)==="blockquote"){let x=A,k=x.raw+`
`+t.join(`
`),B=this.blockquote(k);l[l.length-1]=B,s=s.substring(0,s.length-x.raw.length)+B.raw,o=o.substring(0,o.length-x.text.length)+B.text;break}else if((A==null?void 0:A.type)==="list"){let x=A,k=x.raw+`
`+t.join(`
`),B=this.list(k);l[l.length-1]=B,s=s.substring(0,s.length-A.raw.length)+B.raw,o=o.substring(0,o.length-x.raw.length)+B.raw,t=k.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:l,text:o}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),s=t.length>1,o={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let l=this.rules.other.listItemRegex(t),c=!1;for(;n;){let y=!1,p="",T="";if(!(e=l.exec(n))||this.rules.block.hr.test(n))break;p=e[0],n=n.substring(p.length);let v=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,ne=>" ".repeat(3*ne.length)),A=n.split(`
`,1)[0],x=!v.trim(),k=0;if(this.options.pedantic?(k=2,T=v.trimStart()):x?k=e[1].length+1:(k=e[2].search(this.rules.other.nonSpaceChar),k=k>4?1:k,T=v.slice(k),k+=e[1].length),x&&this.rules.other.blankLine.test(A)&&(p+=A+`
`,n=n.substring(A.length+1),y=!0),!y){let ne=this.rules.other.nextBulletRegex(k),ie=this.rules.other.hrRegex(k),X=this.rules.other.fencesBeginRegex(k),oe=this.rules.other.headingBeginRegex(k),he=this.rules.other.htmlBeginRegex(k);for(;n;){let le=n.split(`
`,1)[0],M;if(A=le,this.options.pedantic?(A=A.replace(this.rules.other.listReplaceNesting,"  "),M=A):M=A.replace(this.rules.other.tabCharGlobal,"    "),X.test(A)||oe.test(A)||he.test(A)||ne.test(A)||ie.test(A))break;if(M.search(this.rules.other.nonSpaceChar)>=k||!A.trim())T+=`
`+M.slice(k);else{if(x||v.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||X.test(v)||oe.test(v)||ie.test(v))break;T+=`
`+A}!x&&!A.trim()&&(x=!0),p+=le+`
`,n=n.substring(le.length+1),v=M.slice(k)}}o.loose||(c?o.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(c=!0));let B=null,H;this.options.gfm&&(B=this.rules.other.listIsTask.exec(T),B&&(H=B[0]!=="[ ] ",T=T.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:p,task:!!B,checked:H,loose:!1,text:T,tokens:[]}),o.raw+=p}let h=o.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let y=0;y<o.items.length;y++)if(this.lexer.state.top=!1,o.items[y].tokens=this.lexer.blockTokens(o.items[y].text,[]),!o.loose){let p=o.items[y].tokens.filter(v=>v.type==="space"),T=p.length>0&&p.some(v=>this.rules.other.anyLine.test(v.raw));o.loose=T}if(o.loose)for(let y=0;y<o.items.length;y++)o.items[y].loose=!0;return o}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:o}}}table(n){var c;let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=FE(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let h of s)this.rules.other.tableAlignRight.test(h)?l.align.push("right"):this.rules.other.tableAlignCenter.test(h)?l.align.push("center"):this.rules.other.tableAlignLeft.test(h)?l.align.push("left"):l.align.push(null);for(let h=0;h<t.length;h++)l.header.push({text:t[h],tokens:this.lexer.inline(t[h]),header:!0,align:l.align[h]});for(let h of o)l.rows.push(FE(h,l.header.length).map((y,p)=>({text:y,tokens:this.lexer.inline(y),header:!1,align:l.align[p]})));return l}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let l=Ga(t.slice(0,-1),"\\");if((t.length-l.length)%2===0)return}else{let l=lV(e[2],"()");if(l===-2)return;if(l>-1){let c=(e[0].indexOf("!")===0?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,c).trim(),e[3]=""}}let s=e[2],o="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(s);l&&(s=l[1],o=l[3])}else o=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),HE(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=e[s.toLowerCase()];if(!o){let l=t[0].charAt(0);return{type:"text",raw:l,text:l}}return HE(t,o,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let o=[...s[0]].length-1,l,c,h=o,y=0,p=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,e=e.slice(-1*n.length+o);(s=p.exec(e))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(c=[...l].length,s[3]||s[4]){h+=c;continue}else if((s[5]||s[6])&&o%3&&!((o+c)%3)){y+=c;continue}if(h-=c,h>0)continue;c=Math.min(c,c+h+y);let T=[...s[0]][0].length,v=n.slice(0,o+s.index+T+c);if(Math.min(o,c)%2){let x=v.slice(1,-1);return{type:"em",raw:v,text:x,tokens:this.lexer.inlineTokens(x)}}let A=v.slice(2,-2);return{type:"strong",raw:v,text:A,tokens:this.lexer.inlineTokens(A)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),o=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&o&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(n){var t;let e;if(e=this.rules.inline.url.exec(n)){let s,o;if(e[2]==="@")s=e[0],o="mailto:"+s;else{let l;do l=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(l!==e[0]);s=e[0],e[1]==="www."?o="http://"+e[0]:o=e[0]}return{type:"link",raw:e[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},$n=class Am{constructor(e){it(this,"tokens");it(this,"options");it(this,"state");it(this,"tokenizer");it(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||dr,this.options.tokenizer=this.options.tokenizer||new Qu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:on,block:$u.normal,inline:za.normal};this.options.pedantic?(t.block=$u.pedantic,t.inline=za.pedantic):this.options.gfm&&(t.block=$u.gfm,this.options.breaks?t.inline=za.breaks:t.inline=za.gfm),this.tokenizer.rules=t}static get rules(){return{block:$u,inline:za}}static lex(e,t){return new Am(t).lex(e)}static lexInline(e,t){return new Am(t).inlineTokens(e)}lex(e){e=e.replace(on.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var o,l,c;for(this.options.pedantic&&(e=e.replace(on.tabCharGlobal,"    ").replace(on.spaceLine,""));e;){let h;if((l=(o=this.options.extensions)==null?void 0:o.block)!=null&&l.some(p=>(h=p.call({lexer:this},e,t))?(e=e.substring(h.raw.length),t.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);let p=t.at(-1);h.raw.length===1&&p!==void 0?p.raw+=`
`:t.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);let p=t.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.text,this.inlineQueue.at(-1).src=p.text):t.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);let p=t.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title},t.push(h));continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),t.push(h);continue}let y=e;if((c=this.options.extensions)!=null&&c.startBlock){let p=1/0,T=e.slice(1),v;this.options.extensions.startBlock.forEach(A=>{v=A.call({lexer:this},T),typeof v=="number"&&v>=0&&(p=Math.min(p,v))}),p<1/0&&p>=0&&(y=e.substring(0,p+1))}if(this.state.top&&(h=this.tokenizer.paragraph(y))){let p=t.at(-1);s&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):t.push(h),s=y.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);let p=t.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):t.push(h);continue}if(e){let p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var h,y,p,T,v;let s=e,o=null;if(this.tokens.links){let A=Object.keys(this.tokens.links);if(A.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)A.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,o.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(o=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=((y=(h=this.options.hooks)==null?void 0:h.emStrongMask)==null?void 0:y.call({lexer:this},s))??s;let l=!1,c="";for(;e;){l||(c=""),l=!1;let A;if((T=(p=this.options.extensions)==null?void 0:p.inline)!=null&&T.some(k=>(A=k.call({lexer:this},e,t))?(e=e.substring(A.raw.length),t.push(A),!0):!1))continue;if(A=this.tokenizer.escape(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.tag(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.link(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(A.raw.length);let k=t.at(-1);A.type==="text"&&(k==null?void 0:k.type)==="text"?(k.raw+=A.raw,k.text+=A.text):t.push(A);continue}if(A=this.tokenizer.emStrong(e,s,c)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.codespan(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.br(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.del(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.autolink(e)){e=e.substring(A.raw.length),t.push(A);continue}if(!this.state.inLink&&(A=this.tokenizer.url(e))){e=e.substring(A.raw.length),t.push(A);continue}let x=e;if((v=this.options.extensions)!=null&&v.startInline){let k=1/0,B=e.slice(1),H;this.options.extensions.startInline.forEach(ne=>{H=ne.call({lexer:this},B),typeof H=="number"&&H>=0&&(k=Math.min(k,H))}),k<1/0&&k>=0&&(x=e.substring(0,k+1))}if(A=this.tokenizer.inlineText(x)){e=e.substring(A.raw.length),A.raw.slice(-1)!=="_"&&(c=A.raw.slice(-1)),l=!0;let k=t.at(-1);(k==null?void 0:k.type)==="text"?(k.raw+=A.raw,k.text+=A.text):t.push(A);continue}if(e){let k="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(k);break}else throw new Error(k)}}return t}},Xu=class{constructor(n){it(this,"options");it(this,"parser");this.options=n||dr}space(n){return""}code({text:n,lang:e,escaped:t}){var l;let s=(l=(e||"").match(on.notSpaceStart))==null?void 0:l[0],o=n.replace(on.endingNewline,"")+`
`;return s?'<pre><code class="language-'+mi(s)+'">'+(t?o:mi(o,!0))+`</code></pre>
`:"<pre><code>"+(t?o:mi(o,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,s="";for(let c=0;c<n.items.length;c++){let h=n.items[c];s+=this.listitem(h)}let o=e?"ol":"ul",l=e&&t!==1?' start="'+t+'"':"";return"<"+o+l+`>
`+s+"</"+o+`>
`}listitem(n){var t;let e="";if(n.task){let s=this.checkbox({checked:!!n.checked});n.loose?((t=n.tokens[0])==null?void 0:t.type)==="paragraph"?(n.tokens[0].text=s+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=s+" "+mi(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):e+=s+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let o=0;o<n.header.length;o++)t+=this.tablecell(n.header[o]);e+=this.tablerow({text:t});let s="";for(let o=0;o<n.rows.length;o++){let l=n.rows[o];t="";for(let c=0;c<l.length;c++)t+=this.tablecell(l[c]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${mi(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let s=this.parser.parseInline(t),o=GE(n);if(o===null)return s;n=o;let l='<a href="'+n+'"';return e&&(l+=' title="'+mi(e)+'"'),l+=">"+s+"</a>",l}image({href:n,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let o=GE(n);if(o===null)return mi(t);n=o;let l=`<img src="${n}" alt="${t}"`;return e&&(l+=` title="${mi(e)}"`),l+=">",l}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:mi(n.text)}},Sd=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},Qn=class Sm{constructor(e){it(this,"options");it(this,"renderer");it(this,"textRenderer");this.options=e||dr,this.options.renderer=this.options.renderer||new Xu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Sd}static parse(e,t){return new Sm(t).parse(e)}static parseInline(e,t){return new Sm(t).parseInline(e)}parse(e,t=!0){var o,l;let s="";for(let c=0;c<e.length;c++){let h=e[c];if((l=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&l[h.type]){let p=h,T=this.options.extensions.renderers[p.type].call({parser:this},p);if(T!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(p.type)){s+=T||"";continue}}let y=h;switch(y.type){case"space":{s+=this.renderer.space(y);continue}case"hr":{s+=this.renderer.hr(y);continue}case"heading":{s+=this.renderer.heading(y);continue}case"code":{s+=this.renderer.code(y);continue}case"table":{s+=this.renderer.table(y);continue}case"blockquote":{s+=this.renderer.blockquote(y);continue}case"list":{s+=this.renderer.list(y);continue}case"html":{s+=this.renderer.html(y);continue}case"def":{s+=this.renderer.def(y);continue}case"paragraph":{s+=this.renderer.paragraph(y);continue}case"text":{let p=y,T=this.renderer.text(p);for(;c+1<e.length&&e[c+1].type==="text";)p=e[++c],T+=`
`+this.renderer.text(p);t?s+=this.renderer.paragraph({type:"paragraph",raw:T,text:T,tokens:[{type:"text",raw:T,text:T,escaped:!0}]}):s+=T;continue}default:{let p='Token with "'+y.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return s}parseInline(e,t=this.renderer){var o,l;let s="";for(let c=0;c<e.length;c++){let h=e[c];if((l=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&l[h.type]){let p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){s+=p||"";continue}}let y=h;switch(y.type){case"escape":{s+=t.text(y);break}case"html":{s+=t.html(y);break}case"link":{s+=t.link(y);break}case"image":{s+=t.image(y);break}case"strong":{s+=t.strong(y);break}case"em":{s+=t.em(y);break}case"codespan":{s+=t.codespan(y);break}case"br":{s+=t.br(y);break}case"del":{s+=t.del(y);break}case"text":{s+=t.text(y);break}default:{let p='Token with "'+y.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return s}},Fa=(Wu=class{constructor(n){it(this,"options");it(this,"block");this.options=n||dr}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?$n.lex:$n.lexInline}provideParser(){return this.block?Qn.parse:Qn.parseInline}},it(Wu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),it(Wu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Wu),cV=class{constructor(...n){it(this,"defaults",pd());it(this,"options",this.setOptions);it(this,"parse",this.parseMarkdown(!0));it(this,"parseInline",this.parseMarkdown(!1));it(this,"Parser",Qn);it(this,"Renderer",Xu);it(this,"TextRenderer",Sd);it(this,"Lexer",$n);it(this,"Tokenizer",Qu);it(this,"Hooks",Fa);this.use(...n)}walkTokens(n,e){var s,o;let t=[];for(let l of n)switch(t=t.concat(e.call(this,l)),l.type){case"table":{let c=l;for(let h of c.header)t=t.concat(this.walkTokens(h.tokens,e));for(let h of c.rows)for(let y of h)t=t.concat(this.walkTokens(y.tokens,e));break}case"list":{let c=l;t=t.concat(this.walkTokens(c.items,e));break}default:{let c=l;(o=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&o[c.type]?this.defaults.extensions.childTokens[c.type].forEach(h=>{let y=c[h].flat(1/0);t=t.concat(this.walkTokens(y,e))}):c.tokens&&(t=t.concat(this.walkTokens(c.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let l=e.renderers[o.name];l?e.renderers[o.name]=function(...c){let h=o.renderer.apply(this,c);return h===!1&&(h=l.apply(this,c)),h}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=e[o.level];l?l.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),s.extensions=e),t.renderer){let o=this.defaults.renderer||new Xu(this.defaults);for(let l in t.renderer){if(!(l in o))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let c=l,h=t.renderer[c],y=o[c];o[c]=(...p)=>{let T=h.apply(o,p);return T===!1&&(T=y.apply(o,p)),T||""}}s.renderer=o}if(t.tokenizer){let o=this.defaults.tokenizer||new Qu(this.defaults);for(let l in t.tokenizer){if(!(l in o))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let c=l,h=t.tokenizer[c],y=o[c];o[c]=(...p)=>{let T=h.apply(o,p);return T===!1&&(T=y.apply(o,p)),T}}s.tokenizer=o}if(t.hooks){let o=this.defaults.hooks||new Fa;for(let l in t.hooks){if(!(l in o))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let c=l,h=t.hooks[c],y=o[c];Fa.passThroughHooks.has(l)?o[c]=p=>{if(this.defaults.async&&Fa.passThroughHooksRespectAsync.has(l))return(async()=>{let v=await h.call(o,p);return y.call(o,v)})();let T=h.call(o,p);return y.call(o,T)}:o[c]=(...p)=>{if(this.defaults.async)return(async()=>{let v=await h.apply(o,p);return v===!1&&(v=await y.apply(o,p)),v})();let T=h.apply(o,p);return T===!1&&(T=y.apply(o,p)),T}}s.hooks=o}if(t.walkTokens){let o=this.defaults.walkTokens,l=t.walkTokens;s.walkTokens=function(c){let h=[];return h.push(l.call(this,c)),o&&(h=h.concat(o.call(this,c))),h}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return $n.lex(n,e??this.defaults)}parser(n,e){return Qn.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let s={...t},o={...this.defaults,...s},l=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=n),o.async)return(async()=>{let c=o.hooks?await o.hooks.preprocess(e):e,h=await(o.hooks?await o.hooks.provideLexer():n?$n.lex:$n.lexInline)(c,o),y=o.hooks?await o.hooks.processAllTokens(h):h;o.walkTokens&&await Promise.all(this.walkTokens(y,o.walkTokens));let p=await(o.hooks?await o.hooks.provideParser():n?Qn.parse:Qn.parseInline)(y,o);return o.hooks?await o.hooks.postprocess(p):p})().catch(l);try{o.hooks&&(e=o.hooks.preprocess(e));let c=(o.hooks?o.hooks.provideLexer():n?$n.lex:$n.lexInline)(e,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let h=(o.hooks?o.hooks.provideParser():n?Qn.parse:Qn.parseInline)(c,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(c){return l(c)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+mi(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},pr=new cV;function $e(n,e){return pr.parse(n,e)}$e.options=$e.setOptions=function(n){return pr.setOptions(n),$e.defaults=pr.defaults,bE($e.defaults),$e},$e.getDefaults=pd,$e.defaults=dr,$e.use=function(...n){return pr.use(...n),$e.defaults=pr.defaults,bE($e.defaults),$e},$e.walkTokens=function(n,e){return pr.walkTokens(n,e)},$e.parseInline=pr.parseInline,$e.Parser=Qn,$e.parser=Qn.parse,$e.Renderer=Xu,$e.TextRenderer=Sd,$e.Lexer=$n,$e.lexer=$n.lex,$e.Tokenizer=Qu,$e.Hooks=Fa,$e.parse=$e,$e.options,$e.setOptions,$e.use,$e.walkTokens,$e.parseInline,Qn.parse,$n.lex;const Zu=()=>se.jsxs("div",{className:"cw-typing-indicator",role:"status","aria-label":"Loading...",children:[se.jsx("span",{className:"cw-typing-dot"}),se.jsx("span",{className:"cw-typing-dot"}),se.jsx("span",{className:"cw-typing-dot"})]}),fV=()=>{const{messages:n,userInput:e,isLoading:t,handleInputChange:s,handleSubmit:o}=S2(),l=at.useRef(null),c=at.useRef(null),h=()=>{var y;(y=l.current)==null||y.scrollIntoView({behavior:"smooth"})};return at.useEffect(()=>{h()},[n,t]),at.useEffect(()=>{var p;window.matchMedia("(max-width: 768px)").matches||(p=c.current)==null||p.focus({preventScroll:!0})},[]),se.jsxs("div",{className:"cw-h-full cw-flex cw-flex-col cw-bg-gray-50",children:[se.jsxs("div",{className:"cw-flex-1 cw-p-4 cw-overflow-y-auto cw-space-y-4",children:[n.map(y=>se.jsx("div",{className:`cw-flex ${y.sender==="user"?"cw-justify-end":"cw-justify-start"}`,children:se.jsx("div",{className:`cw-max-w-[80%] cw-p-3 cw-rounded-2xl ${y.sender==="user"?"cw-bg-primary cw-text-black cw-rounded-br-none":"cw-bg-gray-200 cw-text-black cw-rounded-bl-none"}`,children:y.sender==="user"?se.jsx("p",{className:"cw-text-sm cw-break-words cw-m-0",children:y.text}):se.jsx("div",{className:"cw-text-sm cw-break-words cw-bot-message",dangerouslySetInnerHTML:{__html:$e.parse(y.text)}})})},y.id)),t&&se.jsx("div",{className:"cw-flex cw-justify-start",children:se.jsx("div",{className:"cw-max-w-[80%] cw-p-3 cw-rounded-2xl cw-bg-gray-200 cw-text-black cw-rounded-bl-none cw-inline-flex",children:se.jsx(Zu,{})})}),se.jsx("div",{ref:l})]}),se.jsx("div",{className:"cw-p-4 cw-border-t cw-border-gray-200 cw-bg-white",children:se.jsxs("form",{onSubmit:o,className:"cw-flex cw-items-center cw-space-x-2",children:[se.jsx("input",{ref:c,type:"text",value:e,onChange:s,placeholder:"Ask a question...",className:"cw-flex-1 cw-w-full cw-px-4 cw-py-2 cw-border cw-border-gray-300 cw-rounded-full cw-focus:outline-none cw-focus:ring-2 cw-focus:ring-primary cw-transition",disabled:t}),se.jsx("button",{type:"submit",disabled:t||e.trim()==="",className:"cw-bg-primary cw-text-black cw-p-3 cw-rounded-full cw-hover:bg-primary-dark cw-disabled:bg-gray-200 cw-disabled:text-gray-500 cw-disabled:cursor-not-allowed cw-transition-colors cw-focus:outline-none cw-focus:ring-2 cw-focus:ring-primary","aria-label":"Send message",children:se.jsx(R2,{})})]})})]})},hV=({onAuthSuccess:n})=>{const[e,t]=at.useState(""),[s,o]=at.useState(!1),[l,c]=at.useState(""),[h,y]=at.useState([]),[p,T]=at.useState(!1),[v,A]=at.useState(""),[x,k]=at.useState([]),[B,H]=at.useState(!0),[ne,ie]=at.useState(null),X=at.useCallback(async()=>{H(!0);try{const I=await T2();k(I)}catch(I){console.error("Failed to fetch knowledge files:",I),A("기존 파일을 불러오지 못했습니다.")}finally{H(!1)}},[]);at.useEffect(()=>{s&&X()},[s,X]);const oe=I=>{I.preventDefault(),e==="adminarena"?(o(!0),c("")):c("비밀번호가 올바르지 않습니다.")},he=I=>{if(I.target.files){const b=Array.from(I.target.files),V=b.filter(P=>P.type==="text/markdown"||P.name.endsWith(".md"));V.length!==b.length?A("마크다운(.md)이 아닌 파일은 제외되었습니다."):A(""),y(V)}},le=at.useCallback(async()=>{if(h.length===0){A("먼저 파일을 선택해주세요.");return}T(!0),A(`파일 ${h.length}개를 업로드 중입니다...`);try{await y2(h),A("지식 베이스가 성공적으로 업데이트되었습니다!"),y([]),await X()}catch(I){console.error("Upload failed:",I),A("업로드에 실패했습니다. 콘솔을 확인해주세요.")}finally{T(!1)}},[h,X]),M=at.useCallback(async I=>{if(window.confirm(`'${I.fileName}' 파일을 정말 삭제하시겠습니까?`)){ie(I.id);try{await E2(I.id),A(`'${I.fileName}' 파일이 삭제되었습니다.`),k(b=>b.filter(V=>V.id!==I.id))}catch(b){console.error("Delete failed:",b),A(`'${I.fileName}' 파일 삭제에 실패했습니다.`)}finally{ie(null)}}},[]);return s?se.jsxs("div",{className:"cw-h-full cw-flex cw-flex-col cw-bg-gray-50",children:[se.jsxs("div",{className:"cw-p-4 cw-space-y-4",children:[se.jsx("h3",{className:"cw-text-sm cw-font-bold cw-text-gray-800",children:"지식 베이스 업데이트"}),se.jsx("div",{children:se.jsxs("label",{htmlFor:"file-upload",className:"cw-w-full cw-flex cw-flex-col cw-items-center cw-px-4 cw-py-4 cw-bg-white cw-text-primary-dark cw-rounded-lg cw-shadow-md cw-tracking-wide cw-uppercase cw-border cw-border-primary cw-cursor-pointer cw-hover:bg-primary cw-hover:text-black",children:[se.jsx("span",{className:"cw-text-sm cw-leading-normal",children:h.length>0?`${h.length}개 파일 선택됨`:".md 파일 선택"}),se.jsx("input",{id:"file-upload",type:"file",accept:".md,text/markdown",className:"cw-hidden",onChange:he,multiple:!0})]})}),se.jsx("button",{onClick:le,disabled:h.length===0||p,className:"cw-w-full cw-bg-primary cw-text-black cw-font-bold cw-py-2 cw-px-4 cw-rounded-lg cw-hover:bg-primary-dark cw-transition cw-duration-300 cw-disabled:bg-gray-400 cw-disabled:cursor-not-allowed cw-flex cw-items-center cw-justify-center cw-text-sm",children:p?se.jsx(Zu,{}):`파일 ${h.length}개 업로드`}),v&&se.jsx("p",{className:"cw-text-gray-600 cw-text-sm cw-text-center",children:v})]}),se.jsxs("div",{className:"cw-flex-1 cw-p-4 cw-border-t cw-border-gray-200 cw-overflow-y-auto",children:[se.jsx("h4",{className:"cw-text-sm cw-font-bold cw-text-gray-700 cw-mb-2",children:"업로드된 파일"}),B?se.jsx("div",{className:"cw-flex cw-justify-center",children:se.jsx(Zu,{})}):x.length>0?se.jsx("ul",{className:"cw-space-y-2",children:x.map(I=>se.jsxs("li",{className:"cw-flex cw-items-center cw-justify-between cw-bg-white cw-p-2 cw-rounded-lg cw-shadow-sm",children:[se.jsx("span",{className:"cw-text-gray-800 cw-truncate cw-pr-2 cw-text-sm",children:I.fileName}),se.jsx("button",{onClick:()=>M(I),disabled:ne===I.id,className:"cw-text-red-500 cw-hover:text-red-700 cw-disabled:text-gray-400 cw-p-1 cw-rounded-full",children:ne===I.id?se.jsx(Zu,{}):se.jsx(b2,{})})]},I.id))}):se.jsx("p",{className:"cw-text-gray-500 cw-text-center cw-text-sm",children:"업로드된 지식 파일이 없습니다."})]})]}):se.jsx("div",{className:"cw-p-6 cw-h-full cw-flex cw-flex-col cw-items-center cw-justify-center cw-bg-gray-50",children:se.jsxs("form",{onSubmit:oe,className:"cw-w-full cw-max-w-sm",children:[se.jsx("h3",{className:"cw-text-sm cw-font-bold cw-mb-4 cw-text-center cw-text-gray-800",children:"관리자 로그인"}),se.jsx("p",{className:"cw-text-center cw-text-gray-500 cw-mb-6 cw-text-sm",children:"지식 베이스를 관리하려면 비밀번호를 입력하세요."}),se.jsx("div",{className:"cw-mb-4",children:se.jsx("input",{type:"password",value:e,onChange:I=>t(I.target.value),placeholder:"비밀번호",className:"cw-w-full cw-px-4 cw-py-2 cw-border cw-border-gray-300 cw-rounded-lg cw-focus:outline-none cw-focus:ring-2 cw-focus:ring-primary cw-text-sm"})}),se.jsx("button",{type:"submit",className:"cw-w-full cw-bg-primary cw-text-black cw-font-bold cw-py-2 cw-px-4 cw-rounded-lg cw-hover:bg-primary-dark cw-transition cw-duration-300 cw-text-sm",children:"로그인"}),l&&se.jsx("p",{className:"cw-text-red-500 cw-text-sm cw-mt-4 cw-text-center",children:l})]})})},dV=()=>{const[n,e]=at.useState(!1),[t,s]=at.useState("chat"),o=()=>{e(!n),n&&s("chat")};at.useEffect(()=>{const h=y=>{y.key==="Escape"&&(e(!1),s("chat"))};return n&&window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[n]);const l=t==="chat"?"생활백서봇":"관리자 페이지",c=n?"cw-animate-slide-in-up":"cw-animate-slide-out-down";return se.jsxs(se.Fragment,{children:[se.jsx("div",{className:"cw-widget-container cw-fixed cw-bottom-5 cw-right-5 cw-z-50",children:se.jsx("button",{onClick:o,className:`cw-bg-white cw-text-black cw-rounded-full cw-p-4 cw-shadow-lg cw-hover:bg-primary cw-focus:outline-none cw-focus:ring-2 cw-focus:ring-primary cw-focus:ring-opacity-50 cw-transition-transform cw-transform cw-hover:scale-110 ${n?"cw-opacity-0 cw-scale-0":"cw-opacity-100 cw-scale-100"} cw-inline-flex cw-items-center cw-justify-center`,style:{animationFillMode:"forwards"},"aria-label":n?"Close chat":"Open chat",children:se.jsx(w2,{})})}),n&&se.jsxs("div",{className:`cw-widget-container cw-fixed cw-bottom-5 cw-right-5 cw-z-40 cw-w-[90vw] cw-max-w-md cw-h-[70vh] cw-max-h-[600px] cw-flex cw-flex-col cw-bg-white cw-rounded-2xl cw-shadow-2xl cw-border cw-border-custom-gray ${c} cw-overflow-hidden`,children:[se.jsxs("header",{className:"cw-flex cw-items-center cw-justify-between cw-px-4 cw-py-3 cw-bg-primary cw-text-black cw-rounded-t-2xl cw-shadow-md",children:[se.jsx("h2",{className:"cw-text-lg cw-font-semibold cw-m-0",children:l}),se.jsxs("div",{className:"cw-flex cw-items-center cw-space-x-2",children:[se.jsx("button",{onClick:()=>s(t==="chat"?"adminLogin":"chat"),className:"cw-p-1 cw-rounded-full cw-hover:bg-primary-dark cw-focus:outline-none cw-focus:ring-2 cw-focus:ring-white cw-inline-flex cw-items-center cw-justify-center","aria-label":"Toggle Admin Panel",title:"Admin Panel",children:se.jsx(I2,{})}),se.jsx("button",{onClick:o,className:"cw-p-1 cw-rounded-full cw-hover:bg-primary-dark cw-focus:outline-none cw-focus:ring-2 cw-focus:ring-white cw-inline-flex cw-items-center cw-justify-center","aria-label":"Close",children:se.jsx(C2,{})})]})]}),se.jsxs("div",{className:"cw-flex-1 cw-min-h-0",children:[t==="chat"&&se.jsx(fV,{}),t==="adminLogin"&&se.jsx(hV,{onAuthSuccess:()=>s("chat")})]})]})]})};function pV(){return p2()?se.jsx(se.Fragment,{children:se.jsx(dV,{})}):se.jsxs("div",{style:{position:"fixed",top:"20px",left:"20px",backgroundColor:"#fef2f2",padding:"20px",borderRadius:"8px",border:"1px solid #fecaca",zIndex:1e3},children:[se.jsx("h1",{style:{color:"#991b1b",fontSize:"18px",fontWeight:"bold"},children:"Chatbot Configuration Error"}),se.jsx("p",{style:{color:"#4b5563",marginTop:"8px"},children:"Please contact the site administrator."})]})}const YE=document.getElementById("chatbot-root");if(!YE)throw new Error("Could not find root element to mount to");SS.createRoot(YE).render(se.jsx(mS.StrictMode,{children:se.jsx(pV,{})}))})();
