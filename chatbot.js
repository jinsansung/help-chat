var FP=Object.defineProperty;var YP=(qi,li,as)=>li in qi?FP(qi,li,{enumerable:!0,configurable:!0,writable:!0,value:as}):qi[li]=as;var it=(qi,li,as)=>YP(qi,typeof li!="symbol"?li+"":li,as);(function(){"use strict";var Wu;var qi=typeof document<"u"?document.currentScript:null;function li(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var as={exports:{}},fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function cS(){if(Sm)return fl;Sm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,a){var c=null;if(a!==void 0&&(c=""+a),o.key!==void 0&&(c=""+o.key),"key"in o){a={};for(var h in o)h!=="key"&&(a[h]=o[h])}else a=o;return o=a.ref,{$$typeof:n,type:s,key:c,ref:o!==void 0?o:null,props:a}}return fl.Fragment=e,fl.jsx=t,fl.jsxs=t,fl}var Cm;function fS(){return Cm||(Cm=1,as.exports=cS()),as.exports}var se=fS(),bf={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function hS(){if(Rm)return Ce;Rm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),A=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=A&&L[A]||L["@@iterator"],typeof L=="function"?L:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,F={};function ee(L,te,ue){this.props=L,this.context=te,this.refs=F,this.updater=ue||V}ee.prototype.isReactComponent={},ee.prototype.setState=function(L,te){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,te,"setState")},ee.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ie(){}ie.prototype=ee.prototype;function X(L,te,ue){this.props=L,this.context=te,this.refs=F,this.updater=ue||V}var oe=X.prototype=new ie;oe.constructor=X,B(oe,ee.prototype),oe.isPureReactComponent=!0;var he=Array.isArray;function ae(){}var D={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function M(L,te,ue){var de=ue.ref;return{$$typeof:n,type:L,key:te,ref:de!==void 0?de:null,props:ue}}function P(L,te){return M(L.type,te,L.props)}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function q(L){var te={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ue){return te[ue]})}var N=/\/+/g;function st(L,te){return typeof L=="object"&&L!==null&&L.key!=null?q(""+L.key):te.toString(36)}function gt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ae,ae):(L.status="pending",L.then(function(te){L.status==="pending"&&(L.status="fulfilled",L.value=te)},function(te){L.status==="pending"&&(L.status="rejected",L.reason=te)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function $(L,te,ue,de,Ae){var Me=typeof L;(Me==="undefined"||Me==="boolean")&&(L=null);var Oe=!1;if(L===null)Oe=!0;else switch(Me){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(L.$$typeof){case n:case e:Oe=!0;break;case T:return Oe=L._init,$(Oe(L._payload),te,ue,de,Ae)}}if(Oe)return Ae=Ae(L),Oe=de===""?"."+st(L,0):de,he(Ae)?(ue="",Oe!=null&&(ue=Oe.replace(N,"$&/")+"/"),$(Ae,te,ue,"",function(mr){return mr})):Ae!=null&&(k(Ae)&&(Ae=P(Ae,ue+(Ae.key==null||L&&L.key===Ae.key?"":(""+Ae.key).replace(N,"$&/")+"/")+Oe)),te.push(Ae)),1;Oe=0;var Lt=de===""?".":de+":";if(he(L))for(var ht=0;ht<L.length;ht++)de=L[ht],Me=Lt+st(de,ht),Oe+=$(de,te,ue,Me,Ae);else if(ht=b(L),typeof ht=="function")for(L=ht.call(L),ht=0;!(de=L.next()).done;)de=de.value,Me=Lt+st(de,ht++),Oe+=$(de,te,ue,Me,Ae);else if(Me==="object"){if(typeof L.then=="function")return $(gt(L),te,ue,de,Ae);throw te=String(L),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function le(L,te,ue){if(L==null)return L;var de=[],Ae=0;return $(L,de,"","",function(Me){return te.call(ue,Me,Ae++)}),de}function Te(L){if(L._status===-1){var te=L._result;te=te(),te.then(function(ue){(L._status===0||L._status===-1)&&(L._status=1,L._result=ue)},function(ue){(L._status===0||L._status===-1)&&(L._status=2,L._result=ue)}),L._status===-1&&(L._status=0,L._result=te)}if(L._status===1)return L._result.default;throw L._result}var Be=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Qe={map:le,forEach:function(L,te,ue){le(L,function(){te.apply(this,arguments)},ue)},count:function(L){var te=0;return le(L,function(){te++}),te},toArray:function(L){return le(L,function(te){return te})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ce.Activity=v,Ce.Children=Qe,Ce.Component=ee,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=X,Ce.StrictMode=s,Ce.Suspense=y,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},Ce.cache=function(L){return function(){return L.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(L,te,ue){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=B({},L.props),Ae=L.key;if(te!=null)for(Me in te.key!==void 0&&(Ae=""+te.key),te)!w.call(te,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&te.ref===void 0||(de[Me]=te[Me]);var Me=arguments.length-2;if(Me===1)de.children=ue;else if(1<Me){for(var Oe=Array(Me),Lt=0;Lt<Me;Lt++)Oe[Lt]=arguments[Lt+2];de.children=Oe}return M(L.type,Ae,de)},Ce.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Ce.createElement=function(L,te,ue){var de,Ae={},Me=null;if(te!=null)for(de in te.key!==void 0&&(Me=""+te.key),te)w.call(te,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ae[de]=te[de]);var Oe=arguments.length-2;if(Oe===1)Ae.children=ue;else if(1<Oe){for(var Lt=Array(Oe),ht=0;ht<Oe;ht++)Lt[ht]=arguments[ht+2];Ae.children=Lt}if(L&&L.defaultProps)for(de in Oe=L.defaultProps,Oe)Ae[de]===void 0&&(Ae[de]=Oe[de]);return M(L,Me,Ae)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(L){return{$$typeof:h,render:L}},Ce.isValidElement=k,Ce.lazy=function(L){return{$$typeof:T,_payload:{_status:-1,_result:L},_init:Te}},Ce.memo=function(L,te){return{$$typeof:p,type:L,compare:te===void 0?null:te}},Ce.startTransition=function(L){var te=D.T,ue={};D.T=ue;try{var de=L(),Ae=D.S;Ae!==null&&Ae(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ae,Be)}catch(Me){Be(Me)}finally{te!==null&&ue.types!==null&&(te.types=ue.types),D.T=te}},Ce.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ce.use=function(L){return D.H.use(L)},Ce.useActionState=function(L,te,ue){return D.H.useActionState(L,te,ue)},Ce.useCallback=function(L,te){return D.H.useCallback(L,te)},Ce.useContext=function(L){return D.H.useContext(L)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(L,te){return D.H.useDeferredValue(L,te)},Ce.useEffect=function(L,te){return D.H.useEffect(L,te)},Ce.useEffectEvent=function(L){return D.H.useEffectEvent(L)},Ce.useId=function(){return D.H.useId()},Ce.useImperativeHandle=function(L,te,ue){return D.H.useImperativeHandle(L,te,ue)},Ce.useInsertionEffect=function(L,te){return D.H.useInsertionEffect(L,te)},Ce.useLayoutEffect=function(L,te){return D.H.useLayoutEffect(L,te)},Ce.useMemo=function(L,te){return D.H.useMemo(L,te)},Ce.useOptimistic=function(L,te){return D.H.useOptimistic(L,te)},Ce.useReducer=function(L,te,ue){return D.H.useReducer(L,te,ue)},Ce.useRef=function(L){return D.H.useRef(L)},Ce.useState=function(L){return D.H.useState(L)},Ce.useSyncExternalStore=function(L,te,ue){return D.H.useSyncExternalStore(L,te,ue)},Ce.useTransition=function(){return D.H.useTransition()},Ce.version="19.2.0",Ce}var Im;function Df(){return Im||(Im=1,bf.exports=hS()),bf.exports}var lt=Df();const dS=li(lt);var Nf={exports:{}},hl={},xf={exports:{}},Vf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function pS(){return wm||(wm=1,(function(n){function e($,le){var Te=$.length;$.push(le);e:for(;0<Te;){var Be=Te-1>>>1,Qe=$[Be];if(0<o(Qe,le))$[Be]=le,$[Te]=Qe,Te=Be;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var le=$[0],Te=$.pop();if(Te!==le){$[0]=Te;e:for(var Be=0,Qe=$.length,L=Qe>>>1;Be<L;){var te=2*(Be+1)-1,ue=$[te],de=te+1,Ae=$[de];if(0>o(ue,Te))de<Qe&&0>o(Ae,ue)?($[Be]=Ae,$[de]=Te,Be=de):($[Be]=ue,$[te]=Te,Be=te);else if(de<Qe&&0>o(Ae,Te))$[Be]=Ae,$[de]=Te,Be=de;else break e}}return le}function o($,le){var Te=$.sortIndex-le.sortIndex;return Te!==0?Te:$.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var y=[],p=[],T=1,v=null,A=3,b=!1,V=!1,B=!1,F=!1,ee=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function oe($){for(var le=t(p);le!==null;){if(le.callback===null)s(p);else if(le.startTime<=$)s(p),le.sortIndex=le.expirationTime,e(y,le);else break;le=t(p)}}function he($){if(B=!1,oe($),!V)if(t(y)!==null)V=!0,ae||(ae=!0,q());else{var le=t(p);le!==null&&gt(he,le.startTime-$)}}var ae=!1,D=-1,w=5,M=-1;function P(){return F?!0:!(n.unstable_now()-M<w)}function k(){if(F=!1,ae){var $=n.unstable_now();M=$;var le=!0;try{e:{V=!1,B&&(B=!1,ie(D),D=-1),b=!0;var Te=A;try{t:{for(oe($),v=t(y);v!==null&&!(v.expirationTime>$&&P());){var Be=v.callback;if(typeof Be=="function"){v.callback=null,A=v.priorityLevel;var Qe=Be(v.expirationTime<=$);if($=n.unstable_now(),typeof Qe=="function"){v.callback=Qe,oe($),le=!0;break t}v===t(y)&&s(y),oe($)}else s(y);v=t(y)}if(v!==null)le=!0;else{var L=t(p);L!==null&&gt(he,L.startTime-$),le=!1}}break e}finally{v=null,A=Te,b=!1}le=void 0}}finally{le?q():ae=!1}}}var q;if(typeof X=="function")q=function(){X(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,st=N.port2;N.port1.onmessage=k,q=function(){st.postMessage(null)}}else q=function(){ee(k,0)};function gt($,le){D=ee(function(){$(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function($){switch(A){case 1:case 2:case 3:var le=3;break;default:le=A}var Te=A;A=le;try{return $()}finally{A=Te}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Te=A;A=$;try{return le()}finally{A=Te}},n.unstable_scheduleCallback=function($,le,Te){var Be=n.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Be+Te:Be):Te=Be,$){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Te+Qe,$={id:T++,callback:le,priorityLevel:$,startTime:Te,expirationTime:Qe,sortIndex:-1},Te>Be?($.sortIndex=Te,e(p,$),t(y)===null&&$===t(p)&&(B?(ie(D),D=-1):B=!0,gt(he,Te-Be))):($.sortIndex=Qe,e(y,$),V||b||(V=!0,ae||(ae=!0,q()))),$},n.unstable_shouldYield=P,n.unstable_wrapCallback=function($){var le=A;return function(){var Te=A;A=le;try{return $.apply(this,arguments)}finally{A=Te}}}})(Vf)),Vf}var Mm;function mS(){return Mm||(Mm=1,xf.exports=pS()),xf.exports}var Pf={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function gS(){if(bm)return en;bm=1;var n=Df();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(y,p,T){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:y,containerInfo:p,implementation:T}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(y,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(y,p,null,T)},en.flushSync=function(y){var p=c.T,T=s.p;try{if(c.T=null,s.p=2,y)return y()}finally{c.T=p,s.p=T,s.d.f()}},en.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(y,p))},en.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},en.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var T=p.as,v=h(T,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?s.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:A,fetchPriority:b}):T==="script"&&s.d.X(y,{crossOrigin:v,integrity:A,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=h(p.as,p.crossOrigin);s.d.M(y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(y)},en.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,v=h(T,p.crossOrigin);s.d.L(y,T,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(y,p){if(typeof y=="string")if(p){var T=h(p.as,p.crossOrigin);s.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(y)},en.requestFormReset=function(y){s.d.r(y)},en.unstable_batchedUpdates=function(y,p){return y(p)},en.useFormState=function(y,p,T){return c.H.useFormState(y,p,T)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.0",en}var Dm;function yS(){if(Dm)return Pf.exports;Dm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pf.exports=gS(),Pf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function _S(){if(Nm)return hl;Nm=1;var n=mS(),e=Df(),t=yS();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function y(i){if(a(i)!==i)throw Error(s(188))}function p(i){var r=i.alternate;if(!r){if(r=a(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,u=r;;){var g=l.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===l)return y(g),i;if(_===u)return y(g),r;_=_.sibling}throw Error(s(188))}if(l.return!==u.return)l=g,u=_;else{for(var S=!1,R=g.child;R;){if(R===l){S=!0,l=g,u=_;break}if(R===u){S=!0,u=g,l=_;break}R=R.sibling}if(!S){for(R=_.child;R;){if(R===l){S=!0,l=_,u=g;break}if(R===u){S=!0,u=_,l=g;break}R=R.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function T(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=T(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),X=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function st(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case ee:return"Profiler";case F:return"StrictMode";case he:return"Suspense";case ae:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case V:return"Portal";case X:return i.displayName||"Context";case ie:return(i._context.displayName||"Context")+".Consumer";case oe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:st(i.type)||"Memo";case w:r=i._payload,i=i._init;try{return st(i(r))}catch{}}return null}var gt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Be=[],Qe=-1;function L(i){return{current:i}}function te(i){0>Qe||(i.current=Be[Qe],Be[Qe]=null,Qe--)}function ue(i,r){Qe++,Be[Qe]=i.current,i.current=r}var de=L(null),Ae=L(null),Me=L(null),Oe=L(null);function Lt(i,r){switch(ue(Me,r),ue(Ae,i),ue(de,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?VA(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=VA(r),i=PA(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(de),ue(de,i)}function ht(){te(de),te(Ae),te(Me)}function mr(i){i.memoizedState!==null&&ue(Oe,i);var r=de.current,l=PA(r,i.type);r!==l&&(ue(Ae,i),ue(de,l))}function vo(i){Ae.current===i&&(te(de),te(Ae)),Oe.current===i&&(te(Oe),Fa._currentValue=Te)}var Ao,So;function gi(i){if(Ao===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Ao=r&&r[1]||"",So=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ao+i+So}var Fl=!1;function gr(i,r){if(!i||Fl)return"";Fl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var Y=K}Reflect.construct(i,[],W)}else{try{W.call()}catch(K){Y=K}i.call(W.prototype)}}else{try{throw Error()}catch(K){Y=K}(W=i())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],R=_[1];if(S&&R){var x=S.split(`
`),H=R.split(`
`);for(g=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;g<H.length&&!H[g].includes("DetermineComponentFrameRoot");)g++;if(u===x.length||g===H.length)for(u=x.length-1,g=H.length-1;1<=u&&0<=g&&x[u]!==H[g];)g--;for(;1<=u&&0<=g;u--,g--)if(x[u]!==H[g]){if(u!==1||g!==1)do if(u--,g--,0>g||x[u]!==H[g]){var Q=`
`+x[u].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=u&&0<=g);break}}}finally{Fl=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?gi(l):""}function Yl(i,r){switch(i.tag){case 26:case 27:case 5:return gi(i.type);case 16:return gi("Lazy");case 13:return i.child!==r&&r!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return gr(i.type,!1);case 11:return gr(i.type.render,!1);case 1:return gr(i.type,!0);case 31:return gi("Activity");default:return""}}function Jl(i){try{var r="",l=null;do r+=Yl(i,l),l=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var wt=Object.prototype.hasOwnProperty,qt=n.unstable_scheduleCallback,As=n.unstable_cancelCallback,Sd=n.unstable_shouldYield,ju=n.unstable_requestPaint,ln=n.unstable_now,yr=n.unstable_getCurrentPriorityLevel,Kl=n.unstable_ImmediatePriority,$l=n.unstable_UserBlockingPriority,Ss=n.unstable_NormalPriority,Cd=n.unstable_LowPriority,ec=n.unstable_IdlePriority,tc=n.log,nc=n.unstable_setDisableYieldValue,Qn=null,$t=null;function Dn(i){if(typeof tc=="function"&&nc(i),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Qn,i)}catch{}}var Et=Math.clz32?Math.clz32:sc,ic=Math.log,Co=Math.LN2;function sc(i){return i>>>=0,i===0?32:31-(ic(i)/Co|0)|0}var yi=256,_r=262144,Mt=4194304;function _i(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ti(i,r,l){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var R=u&134217727;return R!==0?(u=R&~_,u!==0?g=_i(u):(S&=R,S!==0?g=_i(S):l||(l=R&~i,l!==0&&(g=_i(l))))):(R=u&~_,R!==0?g=_i(R):S!==0?g=_i(S):l||(l=u&~i,l!==0&&(g=_i(l)))),g===0?0:r!==0&&r!==g&&(r&_)===0&&(_=g&-g,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:g}function Xn(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Rd(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rc(){var i=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),i}function Ei(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function Tr(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Id(i,r,l,u,g,_){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,x=i.expirationTimes,H=i.hiddenUpdates;for(l=S&~l;0<l;){var Q=31-Et(l),W=1<<Q;R[Q]=0,x[Q]=-1;var Y=H[Q];if(Y!==null)for(H[Q]=null,Q=0;Q<Y.length;Q++){var K=Y[Q];K!==null&&(K.lane&=-536870913)}l&=~W}u!==0&&Er(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~r))}function Er(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Et(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|l&261930}function Ql(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var u=31-Et(l),g=1<<u;g&r|i[u]&r&&(i[u]|=r),l&=~g}}function Xl(i,r){var l=r&-r;return l=(l&42)!==0?1:vr(l),(l&(i.suspendedLanes|r))!==0?0:l}function vr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function oc(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:iS(i.type))}function Zn(i,r){var l=le.p;try{return le.p=i,r()}finally{le.p=l}}var Wn=Math.random().toString(36).slice(2),bt="__reactFiber$"+Wn,Gt="__reactProps$"+Wn,vi="__reactContainer$"+Wn,Ro="__reactEvents$"+Wn,wd="__reactListeners$"+Wn,lc="__reactHandles$"+Wn,ac="__reactResources$"+Wn,Ai="__reactMarker$"+Wn;function Io(i){delete i[bt],delete i[Gt],delete i[Ro],delete i[wd],delete i[lc]}function Si(i){var r=i[bt];if(r)return r;for(var l=i.parentNode;l;){if(r=l[vi]||l[bt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=zA(i);i!==null;){if(l=i[bt])return l;i=zA(i)}return r}i=l,l=i.parentNode}return null}function Nn(i){if(i=i[bt]||i[vi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function _n(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Ci(i){var r=i[ac];return r||(r=i[ac]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Dt(i){i[Ai]=!0}var Zl=new Set,Wl={};function Ri(i,r){Ii(i,r),Ii(i+"Capture",r)}function Ii(i,r){for(Wl[i]=r,i=0;i<r.length;i++)Zl.add(r[i])}var jl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ea={},ta={};function uc(i){return wt.call(ta,i)?!0:wt.call(ea,i)?!1:jl.test(i)?ta[i]=!0:(ea[i]=!0,!1)}function wo(i,r,l){if(uc(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Tn(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function Nt(i,r,l,u){if(u===null)i.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+u)}}function Ht(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Cs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function na(i,r,l){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(S){l=""+S,_.call(this,S)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Xe(i){if(!i._valueTracker){var r=Cs(i)?"checked":"value";i._valueTracker=na(i,r,""+i[r])}}function Ar(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return i&&(u=Cs(i)?i.checked?"true":"false":i.value),i=u,i!==l?(r.setValue(i),!0):!1}function wi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sr=/[\n"\\]/g;function fn(i){return i.replace(Sr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Mo(i,r,l,u,g,_,S,R){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Ht(r)):i.value!==""+Ht(r)&&(i.value=""+Ht(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?ia(i,S,Ht(r)):l!=null?ia(i,S,Ht(l)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Ht(R):i.removeAttribute("name")}function cc(i,r,l,u,g,_,S,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){Xe(i);return}l=l!=null?""+Ht(l):"",r=r!=null?""+Ht(r):l,R||r===i.value||(i.value=r),i.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=R?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Xe(i)}function ia(i,r,l){r==="number"&&wi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Rs(i,r,l,u){if(i=i.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=r.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&u&&(i[l].defaultSelected=!0)}else{for(l=""+Ht(l),r=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function fc(i,r,l){if(r!=null&&(r=""+Ht(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+Ht(l):""}function Is(i,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(s(92));if(gt(u)){if(1<u.length)throw Error(s(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=Ht(r),i.defaultValue=l,u=i.textContent,u===l&&u!==""&&u!==null&&(i.value=u),Xe(i)}function hn(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sa(i,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,l):typeof l!="number"||l===0||hc.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function ra(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&l[g]!==u&&sa(i,g,u)}else for(var _ in r)r.hasOwnProperty(_)&&sa(i,_,r[_])}function bo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ws=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(i){return ws.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function jn(){}var oa=null;function xn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ms=null,Mi=null;function Cr(i){var r=Nn(i);if(r&&(i=r.stateNode)){var l=i[Gt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Mo(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+fn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==i&&u.form===i.form){var g=u[Gt]||null;if(!g)throw Error(s(90));Mo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===i.form&&Ar(u)}break e;case"textarea":fc(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Rs(i,!!l.multiple,r,!1)}}}var No=!1;function bs(i,r,l){if(No)return i(r,l);No=!0;try{var u=i(r);return u}finally{if(No=!1,(Ms!==null||Mi!==null)&&(lf(),Ms&&(r=Ms,i=Mi,Mi=Ms=null,Cr(r),i)))for(r=0;r<i.length;r++)Cr(i[r])}}function ei(i,r){var l=i.stateNode;if(l===null)return null;var u=l[Gt]||null;if(u===null)return null;l=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rr=!1;if(Vn)try{var je={};Object.defineProperty(je,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{Rr=!1}var bi=null,la=null,Ir=null;function aa(){if(Ir)return Ir;var i,r=la,l=r.length,u,g="value"in bi?bi.value:bi.textContent,_=g.length;for(i=0;i<l&&r[i]===g[i];i++);var S=l-i;for(u=1;u<=S&&r[l-u]===g[_-u];u++);return Ir=g.slice(i,1<u?1-u:void 0)}function wr(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Fi(){return!0}function ti(){return!1}function Qt(i){function r(l,u,g,_,S){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Fi:ti,this.isPropagationStopped=ti,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),r}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=Qt(Yi),Ds=v({},Yi,{view:0,detail:0}),ua=Qt(Ds),Ns,xo,Ni,Vo=v({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ni&&(Ni&&i.type==="mousemove"?(Ns=i.screenX-Ni.screenX,xo=i.screenY-Ni.screenY):xo=Ns=0,Ni=i),Ns)},movementY:function(i){return"movementY"in i?i.movementY:xo}}),ca=Qt(Vo),Mr=v({},Vo,{dataTransfer:0}),pc=Qt(Mr),mc=v({},Ds,{relatedTarget:0}),br=Qt(mc),fa=v({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=Qt(fa),Po=v({},Yi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),yc=Qt(Po),_c=v({},Yi,{data:0}),xi=Qt(_c),Tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ac(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=vc[i])?!!r[i]:!1}function xs(){return Ac}var an=v({},Ds,{key:function(i){if(i.key){var r=Tc[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=wr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ec[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(i){return i.type==="keypress"?wr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Sc=Qt(an),Cc=v({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=Qt(Cc),d=v({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),E=Qt(d),C=v({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=Qt(C),z=v({},Vo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Qt(z),re=v({},Yi,{newState:0,oldState:0}),Ie=Qt(re),vt=[9,13,27,32],Ye=Vn&&"CompositionEvent"in window,dt=null;Vn&&"documentMode"in document&&(dt=document.documentMode);var Pn=Vn&&"TextEvent"in window&&!dt,Vi=Vn&&(!Ye||dt&&8<dt&&11>=dt),ni=" ",ii=!1;function Dr(i,r){switch(i){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ko(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Uo=!1;function pV(i,r){switch(i){case"compositionend":return ko(r);case"keypress":return r.which!==32?null:(ii=!0,ni);case"textInput":return i=r.data,i===ni&&ii?null:i;default:return null}}function mV(i,r){if(Uo)return i==="compositionend"||!Ye&&Dr(i,r)?(i=aa(),Ir=la=bi=null,Uo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vi&&r.locale!=="ko"?null:r.data;default:return null}}var gV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FE(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!gV[i.type]:r==="textarea"}function YE(i,r,l,u){Ms?Mi?Mi.push(u):Mi=[u]:Ms=u,r=pf(r,"onChange"),0<r.length&&(l=new Di("onChange","change",null,l,u),i.push({event:l,listeners:r}))}var ha=null,da=null;function yV(i){wA(i,0)}function Rc(i){var r=_n(i);if(Ar(r))return i}function JE(i,r){if(i==="change")return r}var KE=!1;if(Vn){var Md;if(Vn){var bd="oninput"in document;if(!bd){var $E=document.createElement("div");$E.setAttribute("oninput","return;"),bd=typeof $E.oninput=="function"}Md=bd}else Md=!1;KE=Md&&(!document.documentMode||9<document.documentMode)}function QE(){ha&&(ha.detachEvent("onpropertychange",XE),da=ha=null)}function XE(i){if(i.propertyName==="value"&&Rc(da)){var r=[];YE(r,da,i,xn(i)),bs(yV,r)}}function _V(i,r,l){i==="focusin"?(QE(),ha=r,da=l,ha.attachEvent("onpropertychange",XE)):i==="focusout"&&QE()}function TV(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Rc(da)}function EV(i,r){if(i==="click")return Rc(r)}function vV(i,r){if(i==="input"||i==="change")return Rc(r)}function AV(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var En=typeof Object.is=="function"?Object.is:AV;function pa(i,r){if(En(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!wt.call(r,g)||!En(i[g],r[g]))return!1}return!0}function ZE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function WE(i,r){var l=ZE(i);i=0;for(var u;l;){if(l.nodeType===3){if(u=i+l.textContent.length,i<=r&&u>=r)return{node:l,offset:r-i};i=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ZE(l)}}function jE(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?jE(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function ev(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=wi(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=wi(i.document)}return r}function Dd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var SV=Vn&&"documentMode"in document&&11>=document.documentMode,Lo=null,Nd=null,ma=null,xd=!1;function tv(i,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;xd||Lo==null||Lo!==wi(u)||(u=Lo,"selectionStart"in u&&Dd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ma&&pa(ma,u)||(ma=u,u=pf(Nd,"onSelect"),0<u.length&&(r=new Di("onSelect","select",null,r,l),i.push({event:r,listeners:u}),r.target=Lo)))}function Nr(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var qo={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},Vd={},nv={};Vn&&(nv=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function xr(i){if(Vd[i])return Vd[i];if(!qo[i])return i;var r=qo[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in nv)return Vd[i]=r[l];return i}var iv=xr("animationend"),sv=xr("animationiteration"),rv=xr("animationstart"),CV=xr("transitionrun"),RV=xr("transitionstart"),IV=xr("transitioncancel"),ov=xr("transitionend"),lv=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function si(i,r){lv.set(i,r),Ri(r,[i])}var Ic=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},kn=[],Oo=0,kd=0;function wc(){for(var i=Oo,r=kd=Oo=0;r<i;){var l=kn[r];kn[r++]=null;var u=kn[r];kn[r++]=null;var g=kn[r];kn[r++]=null;var _=kn[r];if(kn[r++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}_!==0&&av(l,g,_)}}function Mc(i,r,l,u){kn[Oo++]=i,kn[Oo++]=r,kn[Oo++]=l,kn[Oo++]=u,kd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Ud(i,r,l,u){return Mc(i,r,l,u),bc(i)}function Vr(i,r){return Mc(i,null,null,r),bc(i)}function av(i,r,l){i.lanes|=l;var u=i.alternate;u!==null&&(u.lanes|=l);for(var g=!1,_=i.return;_!==null;)_.childLanes|=l,u=_.alternate,u!==null&&(u.childLanes|=l),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&r!==null&&(g=31-Et(l),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[r]:u.push(r),r.lane=l|536870912),_):null}function bc(i){if(50<La)throw La=0,Yp=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Bo={};function wV(i,r,l,u){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(i,r,l,u){return new wV(i,r,l,u)}function Ld(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ki(i,r){var l=i.alternate;return l===null?(l=vn(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function uv(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Dc(i,r,l,u,g,_){var S=0;if(u=i,typeof i=="function")Ld(i)&&(S=1);else if(typeof i=="string")S=xP(i,l,de.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=vn(31,l,r,g),i.elementType=M,i.lanes=_,i;case B:return Pr(l.children,g,_,r);case F:S=8,g|=24;break;case ee:return i=vn(12,l,r,g|2),i.elementType=ee,i.lanes=_,i;case he:return i=vn(13,l,r,g),i.elementType=he,i.lanes=_,i;case ae:return i=vn(19,l,r,g),i.elementType=ae,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case X:S=10;break e;case ie:S=9;break e;case oe:S=11;break e;case D:S=14;break e;case w:S=16,u=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=vn(S,l,r,g),r.elementType=i,r.type=u,r.lanes=_,r}function Pr(i,r,l,u){return i=vn(7,i,u,r),i.lanes=l,i}function qd(i,r,l){return i=vn(6,i,null,r),i.lanes=l,i}function cv(i){var r=vn(18,null,null,0);return r.stateNode=i,r}function Od(i,r,l){return r=vn(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var fv=new WeakMap;function Un(i,r){if(typeof i=="object"&&i!==null){var l=fv.get(i);return l!==void 0?l:(r={value:i,source:r,stack:Jl(r)},fv.set(i,r),r)}return{value:i,source:r,stack:Jl(r)}}var zo=[],Go=0,Nc=null,ga=0,Ln=[],qn=0,Vs=null,Pi=1,ki="";function $i(i,r){zo[Go++]=ga,zo[Go++]=Nc,Nc=i,ga=r}function hv(i,r,l){Ln[qn++]=Pi,Ln[qn++]=ki,Ln[qn++]=Vs,Vs=i;var u=Pi;i=ki;var g=32-Et(u)-1;u&=~(1<<g),l+=1;var _=32-Et(r)+g;if(30<_){var S=g-g%5;_=(u&(1<<S)-1).toString(32),u>>=S,g-=S,Pi=1<<32-Et(r)+g|l<<g|u,ki=_+i}else Pi=1<<_|l<<g|u,ki=i}function Bd(i){i.return!==null&&($i(i,1),hv(i,1,0))}function zd(i){for(;i===Nc;)Nc=zo[--Go],zo[Go]=null,ga=zo[--Go],zo[Go]=null;for(;i===Vs;)Vs=Ln[--qn],Ln[qn]=null,ki=Ln[--qn],Ln[qn]=null,Pi=Ln[--qn],Ln[qn]=null}function dv(i,r){Ln[qn++]=Pi,Ln[qn++]=ki,Ln[qn++]=Vs,Pi=r.id,ki=r.overflow,Vs=i}var Xt=null,ct=null,Ue=!1,Ps=null,On=!1,Gd=Error(s(519));function ks(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ya(Un(r,i)),Gd}function pv(i){var r=i.stateNode,l=i.type,u=i.memoizedProps;switch(r[bt]=i,r[Gt]=u,l){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(l=0;l<Oa.length;l++)Ne(Oa[l],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Ne("invalid",r),cc(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ne("invalid",r);break;case"textarea":Ne("invalid",r),Is(r,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||NA(r.textContent,l)?(u.popover!=null&&(Ne("beforetoggle",r),Ne("toggle",r)),u.onScroll!=null&&Ne("scroll",r),u.onScrollEnd!=null&&Ne("scrollend",r),u.onClick!=null&&(r.onclick=jn),r=!0):r=!1,r||ks(i,!0)}function mv(i){for(Xt=i.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Xt=Xt.return}}function Ho(i){if(i!==Xt)return!1;if(!Ue)return mv(i),Ue=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||om(i.type,i.memoizedProps)),l=!l),l&&ct&&ks(i),mv(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=BA(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ct=BA(i)}else r===27?(r=ct,Qs(i.type)?(i=fm,fm=null,ct=i):ct=r):ct=Xt?zn(i.stateNode.nextSibling):null;return!0}function kr(){ct=Xt=null,Ue=!1}function Hd(){var i=Ps;return i!==null&&(gn===null?gn=i:gn.push.apply(gn,i),Ps=null),i}function ya(i){Ps===null?Ps=[i]:Ps.push(i)}var Fd=L(null),Ur=null,Qi=null;function Us(i,r,l){ue(Fd,r._currentValue),r._currentValue=l}function Xi(i){i._currentValue=Fd.current,te(Fd)}function Yd(i,r,l){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===l)break;i=i.return}}function Jd(i,r,l,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var S=g.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=g;for(var x=0;x<r.length;x++)if(R.context===r[x]){_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),Yd(_.return,l,i),u||(S=null);break e}_=R.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(s(341));S.lanes|=l,_=S.alternate,_!==null&&(_.lanes|=l),Yd(S,l,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function Fo(i,r,l,u){i=null;for(var g=r,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var R=g.type;En(g.pendingProps.value,S.value)||(i!==null?i.push(R):i=[R])}}else if(g===Oe.current){if(S=g.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Fa):i=[Fa])}g=g.return}i!==null&&Jd(r,i,l,u),r.flags|=262144}function xc(i){for(i=i.firstContext;i!==null;){if(!En(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Lr(i){Ur=i,Qi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Zt(i){return gv(Ur,i)}function Vc(i,r){return Ur===null&&Lr(i),gv(i,r)}function gv(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Qi===null){if(i===null)throw Error(s(308));Qi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Qi=Qi.next=r;return l}var MV=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},bV=n.unstable_scheduleCallback,DV=n.unstable_NormalPriority,xt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kd(){return{controller:new MV,data:new Map,refCount:0}}function _a(i){i.refCount--,i.refCount===0&&bV(DV,function(){i.controller.abort()})}var Ta=null,$d=0,Yo=0,Jo=null;function NV(i,r){if(Ta===null){var l=Ta=[];$d=0,Yo=Zp(),Jo={status:"pending",value:void 0,then:function(u){l.push(u)}}}return $d++,r.then(yv,yv),r}function yv(){if(--$d===0&&Ta!==null){Jo!==null&&(Jo.status="fulfilled");var i=Ta;Ta=null,Yo=0,Jo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function xV(i,r){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var _v=$.S;$.S=function(i,r){tA=ln(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&NV(i,r),_v!==null&&_v(i,r)};var qr=L(null);function Qd(){var i=qr.current;return i!==null?i:rt.pooledCache}function Pc(i,r){r===null?ue(qr,qr.current):ue(qr,r.pool)}function Tv(){var i=Qd();return i===null?null:{parent:xt._currentValue,pool:i}}var Ko=Error(s(460)),Xd=Error(s(474)),kc=Error(s(542)),Uc={then:function(){}};function Ev(i){return i=i.status,i==="fulfilled"||i==="rejected"}function vv(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(jn,jn),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Sv(i),i;default:if(typeof r.status=="string")r.then(jn,jn);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Sv(i),i}throw Br=r,Ko}}function Or(i){try{var r=i._init;return r(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Br=l,Ko):l}}var Br=null;function Av(){if(Br===null)throw Error(s(459));var i=Br;return Br=null,i}function Sv(i){if(i===Ko||i===kc)throw Error(s(483))}var $o=null,Ea=0;function Lc(i){var r=Ea;return Ea+=1,$o===null&&($o=[]),vv($o,i,r)}function va(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function qc(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Cv(i){function r(O,U){if(i){var G=O.deletions;G===null?(O.deletions=[U],O.flags|=16):G.push(U)}}function l(O,U){if(!i)return null;for(;U!==null;)r(O,U),U=U.sibling;return null}function u(O){for(var U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function g(O,U){return O=Ki(O,U),O.index=0,O.sibling=null,O}function _(O,U,G){return O.index=G,i?(G=O.alternate,G!==null?(G=G.index,G<U?(O.flags|=67108866,U):G):(O.flags|=67108866,U)):(O.flags|=1048576,U)}function S(O){return i&&O.alternate===null&&(O.flags|=67108866),O}function R(O,U,G,Z){return U===null||U.tag!==6?(U=qd(G,O.mode,Z),U.return=O,U):(U=g(U,G),U.return=O,U)}function x(O,U,G,Z){var _e=G.type;return _e===B?Q(O,U,G.props.children,Z,G.key):U!==null&&(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Or(_e)===U.type)?(U=g(U,G.props),va(U,G),U.return=O,U):(U=Dc(G.type,G.key,G.props,null,O.mode,Z),va(U,G),U.return=O,U)}function H(O,U,G,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=Od(G,O.mode,Z),U.return=O,U):(U=g(U,G.children||[]),U.return=O,U)}function Q(O,U,G,Z,_e){return U===null||U.tag!==7?(U=Pr(G,O.mode,Z,_e),U.return=O,U):(U=g(U,G),U.return=O,U)}function W(O,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=qd(""+U,O.mode,G),U.return=O,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return G=Dc(U.type,U.key,U.props,null,O.mode,G),va(G,U),G.return=O,G;case V:return U=Od(U,O.mode,G),U.return=O,U;case w:return U=Or(U),W(O,U,G)}if(gt(U)||q(U))return U=Pr(U,O.mode,G,null),U.return=O,U;if(typeof U.then=="function")return W(O,Lc(U),G);if(U.$$typeof===X)return W(O,Vc(O,U),G);qc(O,U)}return null}function Y(O,U,G,Z){var _e=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:R(O,U,""+G,Z);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return G.key===_e?x(O,U,G,Z):null;case V:return G.key===_e?H(O,U,G,Z):null;case w:return G=Or(G),Y(O,U,G,Z)}if(gt(G)||q(G))return _e!==null?null:Q(O,U,G,Z,null);if(typeof G.then=="function")return Y(O,U,Lc(G),Z);if(G.$$typeof===X)return Y(O,U,Vc(O,G),Z);qc(O,G)}return null}function K(O,U,G,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return O=O.get(G)||null,R(U,O,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return O=O.get(Z.key===null?G:Z.key)||null,x(U,O,Z,_e);case V:return O=O.get(Z.key===null?G:Z.key)||null,H(U,O,Z,_e);case w:return Z=Or(Z),K(O,U,G,Z,_e)}if(gt(Z)||q(Z))return O=O.get(G)||null,Q(U,O,Z,_e,null);if(typeof Z.then=="function")return K(O,U,G,Lc(Z),_e);if(Z.$$typeof===X)return K(O,U,G,Vc(U,Z),_e);qc(U,Z)}return null}function pe(O,U,G,Z){for(var _e=null,Ge=null,ge=U,be=U=0,ke=null;ge!==null&&be<G.length;be++){ge.index>be?(ke=ge,ge=null):ke=ge.sibling;var He=Y(O,ge,G[be],Z);if(He===null){ge===null&&(ge=ke);break}i&&ge&&He.alternate===null&&r(O,ge),U=_(He,U,be),Ge===null?_e=He:Ge.sibling=He,Ge=He,ge=ke}if(be===G.length)return l(O,ge),Ue&&$i(O,be),_e;if(ge===null){for(;be<G.length;be++)ge=W(O,G[be],Z),ge!==null&&(U=_(ge,U,be),Ge===null?_e=ge:Ge.sibling=ge,Ge=ge);return Ue&&$i(O,be),_e}for(ge=u(ge);be<G.length;be++)ke=K(ge,O,be,G[be],Z),ke!==null&&(i&&ke.alternate!==null&&ge.delete(ke.key===null?be:ke.key),U=_(ke,U,be),Ge===null?_e=ke:Ge.sibling=ke,Ge=ke);return i&&ge.forEach(function(er){return r(O,er)}),Ue&&$i(O,be),_e}function Ee(O,U,G,Z){if(G==null)throw Error(s(151));for(var _e=null,Ge=null,ge=U,be=U=0,ke=null,He=G.next();ge!==null&&!He.done;be++,He=G.next()){ge.index>be?(ke=ge,ge=null):ke=ge.sibling;var er=Y(O,ge,He.value,Z);if(er===null){ge===null&&(ge=ke);break}i&&ge&&er.alternate===null&&r(O,ge),U=_(er,U,be),Ge===null?_e=er:Ge.sibling=er,Ge=er,ge=ke}if(He.done)return l(O,ge),Ue&&$i(O,be),_e;if(ge===null){for(;!He.done;be++,He=G.next())He=W(O,He.value,Z),He!==null&&(U=_(He,U,be),Ge===null?_e=He:Ge.sibling=He,Ge=He);return Ue&&$i(O,be),_e}for(ge=u(ge);!He.done;be++,He=G.next())He=K(ge,O,be,He.value,Z),He!==null&&(i&&He.alternate!==null&&ge.delete(He.key===null?be:He.key),U=_(He,U,be),Ge===null?_e=He:Ge.sibling=He,Ge=He);return i&&ge.forEach(function(HP){return r(O,HP)}),Ue&&$i(O,be),_e}function nt(O,U,G,Z){if(typeof G=="object"&&G!==null&&G.type===B&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case b:e:{for(var _e=G.key;U!==null;){if(U.key===_e){if(_e=G.type,_e===B){if(U.tag===7){l(O,U.sibling),Z=g(U,G.props.children),Z.return=O,O=Z;break e}}else if(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===w&&Or(_e)===U.type){l(O,U.sibling),Z=g(U,G.props),va(Z,G),Z.return=O,O=Z;break e}l(O,U);break}else r(O,U);U=U.sibling}G.type===B?(Z=Pr(G.props.children,O.mode,Z,G.key),Z.return=O,O=Z):(Z=Dc(G.type,G.key,G.props,null,O.mode,Z),va(Z,G),Z.return=O,O=Z)}return S(O);case V:e:{for(_e=G.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){l(O,U.sibling),Z=g(U,G.children||[]),Z.return=O,O=Z;break e}else{l(O,U);break}else r(O,U);U=U.sibling}Z=Od(G,O.mode,Z),Z.return=O,O=Z}return S(O);case w:return G=Or(G),nt(O,U,G,Z)}if(gt(G))return pe(O,U,G,Z);if(q(G)){if(_e=q(G),typeof _e!="function")throw Error(s(150));return G=_e.call(G),Ee(O,U,G,Z)}if(typeof G.then=="function")return nt(O,U,Lc(G),Z);if(G.$$typeof===X)return nt(O,U,Vc(O,G),Z);qc(O,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(l(O,U.sibling),Z=g(U,G),Z.return=O,O=Z):(l(O,U),Z=qd(G,O.mode,Z),Z.return=O,O=Z),S(O)):l(O,U)}return function(O,U,G,Z){try{Ea=0;var _e=nt(O,U,G,Z);return $o=null,_e}catch(ge){if(ge===Ko||ge===kc)throw ge;var Ge=vn(29,ge,null,O.mode);return Ge.lanes=Z,Ge.return=O,Ge}finally{}}}var zr=Cv(!0),Rv=Cv(!1),Ls=!1;function Zd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wd(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function qs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Os(i,r,l){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=bc(i),av(i,null,l),r}return Mc(i,u,r,l),bc(i)}function Aa(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,l|=u,r.lanes=l,Ql(i,l)}}function jd(i,r){var l=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?g=_=S:_=_.next=S,l=l.next}while(l!==null);_===null?g=_=r:_=_.next=r}else g=_=r;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var ep=!1;function Sa(){if(ep){var i=Jo;if(i!==null)throw i}}function Ca(i,r,l,u){ep=!1;var g=i.updateQueue;Ls=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var x=R,H=x.next;x.next=null,S===null?_=H:S.next=H,S=x;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,R=Q.lastBaseUpdate,R!==S&&(R===null?Q.firstBaseUpdate=H:R.next=H,Q.lastBaseUpdate=x))}if(_!==null){var W=g.baseState;S=0,Q=H=x=null,R=_;do{var Y=R.lane&-536870913,K=Y!==R.lane;if(K?(Pe&Y)===Y:(u&Y)===Y){Y!==0&&Y===Yo&&(ep=!0),Q!==null&&(Q=Q.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var pe=i,Ee=R;Y=r;var nt=l;switch(Ee.tag){case 1:if(pe=Ee.payload,typeof pe=="function"){W=pe.call(nt,W,Y);break e}W=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ee.payload,Y=typeof pe=="function"?pe.call(nt,W,Y):pe,Y==null)break e;W=v({},W,Y);break e;case 2:Ls=!0}}Y=R.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Q===null?(H=Q=K,x=W):Q=Q.next=K,S|=Y;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;K=R,R=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);Q===null&&(x=W),g.baseState=x,g.firstBaseUpdate=H,g.lastBaseUpdate=Q,_===null&&(g.shared.lanes=0),Fs|=S,i.lanes=S,i.memoizedState=W}}function Iv(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function wv(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Iv(l[i],r)}var Qo=L(null),Oc=L(0);function Mv(i,r){i=rs,ue(Oc,i),ue(Qo,r),rs=i|r.baseLanes}function tp(){ue(Oc,rs),ue(Qo,Qo.current)}function np(){rs=Oc.current,te(Qo),te(Oc)}var An=L(null),Bn=null;function Bs(i){var r=i.alternate;ue(At,At.current&1),ue(An,i),Bn===null&&(r===null||Qo.current!==null||r.memoizedState!==null)&&(Bn=i)}function ip(i){ue(At,At.current),ue(An,i),Bn===null&&(Bn=i)}function bv(i){i.tag===22?(ue(At,At.current),ue(An,i),Bn===null&&(Bn=i)):zs()}function zs(){ue(At,At.current),ue(An,An.current)}function Sn(i){te(An),Bn===i&&(Bn=null),te(At)}var At=L(0);function Bc(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||um(l)||cm(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Zi=0,we=null,et=null,Vt=null,zc=!1,Xo=!1,Gr=!1,Gc=0,Ra=0,Zo=null,VV=0;function yt(){throw Error(s(321))}function sp(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!En(i[l],r[l]))return!1;return!0}function rp(i,r,l,u,g,_){return Zi=_,we=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=i===null||i.memoizedState===null?h0:Ep,Gr=!1,_=l(u,g),Gr=!1,Xo&&(_=Nv(r,l,u,g)),Dv(i),_}function Dv(i){$.H=Ma;var r=et!==null&&et.next!==null;if(Zi=0,Vt=et=we=null,zc=!1,Ra=0,Zo=null,r)throw Error(s(300));i===null||Pt||(i=i.dependencies,i!==null&&xc(i)&&(Pt=!0))}function Nv(i,r,l,u){we=i;var g=0;do{if(Xo&&(Zo=null),Ra=0,Xo=!1,25<=g)throw Error(s(301));if(g+=1,Vt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=d0,_=r(l,u)}while(Xo);return _}function PV(){var i=$.H,r=i.useState()[0];return r=typeof r.then=="function"?Ia(r):r,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(we.flags|=1024),r}function op(){var i=Gc!==0;return Gc=0,i}function lp(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function ap(i){if(zc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}zc=!1}Zi=0,Vt=et=we=null,Xo=!1,Ra=Gc=0,Zo=null}function un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?we.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function St(){if(et===null){var i=we.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var r=Vt===null?we.memoizedState:Vt.next;if(r!==null)Vt=r,et=i;else{if(i===null)throw we.alternate===null?Error(s(467)):Error(s(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Vt===null?we.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function Hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ia(i){var r=Ra;return Ra+=1,Zo===null&&(Zo=[]),i=vv(Zo,i,r),r=we,(Vt===null?r.memoizedState:Vt.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?h0:Ep),i}function Fc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ia(i);if(i.$$typeof===X)return Zt(i)}throw Error(s(438,String(i)))}function up(i){var r=null,l=we.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Hc(),we.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),u=0;u<i;u++)l[u]=P;return r.index++,l}function Wi(i,r){return typeof r=="function"?r(i):r}function Yc(i){var r=St();return cp(r,et,i)}function cp(i,r,l){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=l;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}r.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{r=g.next;var R=S=null,x=null,H=r,Q=!1;do{var W=H.lane&-536870913;if(W!==H.lane?(Pe&W)===W:(Zi&W)===W){var Y=H.revertLane;if(Y===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),W===Yo&&(Q=!0);else if((Zi&Y)===Y){H=H.next,Y===Yo&&(Q=!0);continue}else W={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},x===null?(R=x=W,S=_):x=x.next=W,we.lanes|=Y,Fs|=Y;W=H.action,Gr&&l(_,W),_=H.hasEagerState?H.eagerState:l(_,W)}else Y={lane:W,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},x===null?(R=x=Y,S=_):x=x.next=Y,we.lanes|=W,Fs|=W;H=H.next}while(H!==null&&H!==r);if(x===null?S=_:x.next=R,!En(_,i.memoizedState)&&(Pt=!0,Q&&(l=Jo,l!==null)))throw l;i.memoizedState=_,i.baseState=S,i.baseQueue=x,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function fp(i){var r=St(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var u=l.dispatch,g=l.pending,_=r.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do _=i(_,S.action),S=S.next;while(S!==g);En(_,r.memoizedState)||(Pt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,u]}function xv(i,r,l){var u=we,g=St(),_=Ue;if(_){if(l===void 0)throw Error(s(407));l=l()}else l=r();var S=!En((et||g).memoizedState,l);if(S&&(g.memoizedState=l,Pt=!0),g=g.queue,pp(kv.bind(null,u,g,i),[i]),g.getSnapshot!==r||S||Vt!==null&&Vt.memoizedState.tag&1){if(u.flags|=2048,Wo(9,{destroy:void 0},Pv.bind(null,u,g,l,r),null),rt===null)throw Error(s(349));_||(Zi&127)!==0||Vv(u,r,l)}return l}function Vv(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=we.updateQueue,r===null?(r=Hc(),we.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Pv(i,r,l,u){r.value=l,r.getSnapshot=u,Uv(r)&&Lv(i)}function kv(i,r,l){return l(function(){Uv(r)&&Lv(i)})}function Uv(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!En(i,l)}catch{return!0}}function Lv(i){var r=Vr(i,2);r!==null&&yn(r,i,2)}function hp(i){var r=un();if(typeof i=="function"){var l=i;if(i=l(),Gr){Dn(!0);try{l()}finally{Dn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:i},r}function qv(i,r,l,u){return i.baseState=l,cp(i,et,typeof u=="function"?u:Wi)}function kV(i,r,l,u,g){if($c(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};$.T!==null?l(!0):_.isTransition=!1,u(_),l=r.pending,l===null?(_.next=r.pending=_,Ov(r,_)):(_.next=l.next,r.pending=l.next=_)}}function Ov(i,r){var l=r.action,u=r.payload,g=i.state;if(r.isTransition){var _=$.T,S={};$.T=S;try{var R=l(g,u),x=$.S;x!==null&&x(S,R),Bv(i,r,R)}catch(H){dp(i,r,H)}finally{_!==null&&S.types!==null&&(_.types=S.types),$.T=_}}else try{_=l(g,u),Bv(i,r,_)}catch(H){dp(i,r,H)}}function Bv(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){zv(i,r,u)},function(u){return dp(i,r,u)}):zv(i,r,l)}function zv(i,r,l){r.status="fulfilled",r.value=l,Gv(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Ov(i,l)))}function dp(i,r,l){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,Gv(r),r=r.next;while(r!==u)}i.action=null}function Gv(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Hv(i,r){return r}function Fv(i,r){if(Ue){var l=rt.formState;if(l!==null){e:{var u=we;if(Ue){if(ct){t:{for(var g=ct,_=On;g.nodeType!==8;){if(!_){g=null;break t}if(g=zn(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){ct=zn(g.nextSibling),u=g.data==="F!";break e}}ks(u)}u=!1}u&&(r=l[0])}}return l=un(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hv,lastRenderedState:r},l.queue=u,l=u0.bind(null,we,u),u.dispatch=l,u=hp(!1),_=Tp.bind(null,we,!1,u.queue),u=un(),g={state:r,dispatch:null,action:i,pending:null},u.queue=g,l=kV.bind(null,we,g,_,l),g.dispatch=l,u.memoizedState=i,[r,l,!1]}function Yv(i){var r=St();return Jv(r,et,i)}function Jv(i,r,l){if(r=cp(i,r,Hv)[0],i=Yc(Wi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Ia(r)}catch(S){throw S===Ko?kc:S}else u=r;r=St();var g=r.queue,_=g.dispatch;return l!==r.memoizedState&&(we.flags|=2048,Wo(9,{destroy:void 0},UV.bind(null,g,l),null)),[u,_,i]}function UV(i,r){i.action=r}function Kv(i){var r=St(),l=et;if(l!==null)return Jv(r,l,i);St(),r=r.memoizedState,l=St();var u=l.queue.dispatch;return l.memoizedState=i,[r,u,!1]}function Wo(i,r,l,u){return i={tag:i,create:l,deps:u,inst:r,next:null},r=we.updateQueue,r===null&&(r=Hc(),we.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(u=l.next,l.next=i,i.next=u,r.lastEffect=i),i}function $v(){return St().memoizedState}function Jc(i,r,l,u){var g=un();we.flags|=i,g.memoizedState=Wo(1|r,{destroy:void 0},l,u===void 0?null:u)}function Kc(i,r,l,u){var g=St();u=u===void 0?null:u;var _=g.memoizedState.inst;et!==null&&u!==null&&sp(u,et.memoizedState.deps)?g.memoizedState=Wo(r,_,l,u):(we.flags|=i,g.memoizedState=Wo(1|r,_,l,u))}function Qv(i,r){Jc(8390656,8,i,r)}function pp(i,r){Kc(2048,8,i,r)}function LV(i){we.flags|=4;var r=we.updateQueue;if(r===null)r=Hc(),we.updateQueue=r,r.events=[i];else{var l=r.events;l===null?r.events=[i]:l.push(i)}}function Xv(i){var r=St().memoizedState;return LV({ref:r,nextImpl:i}),function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Zv(i,r){return Kc(4,2,i,r)}function Wv(i,r){return Kc(4,4,i,r)}function jv(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function e0(i,r,l){l=l!=null?l.concat([i]):null,Kc(4,4,jv.bind(null,r,i),l)}function mp(){}function t0(i,r){var l=St();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&sp(r,u[1])?u[0]:(l.memoizedState=[i,r],i)}function n0(i,r){var l=St();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&sp(r,u[1]))return u[0];if(u=i(),Gr){Dn(!0);try{i()}finally{Dn(!1)}}return l.memoizedState=[u,r],u}function gp(i,r,l){return l===void 0||(Zi&1073741824)!==0&&(Pe&261930)===0?i.memoizedState=r:(i.memoizedState=l,i=iA(),we.lanes|=i,Fs|=i,l)}function i0(i,r,l,u){return En(l,r)?l:Qo.current!==null?(i=gp(i,l,u),En(i,r)||(Pt=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Pe&261930)===0?(Pt=!0,i.memoizedState=l):(i=iA(),we.lanes|=i,Fs|=i,r)}function s0(i,r,l,u,g){var _=le.p;le.p=_!==0&&8>_?_:8;var S=$.T,R={};$.T=R,Tp(i,!1,r,l);try{var x=g(),H=$.S;if(H!==null&&H(R,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Q=xV(x,u);wa(i,r,Q,In(i))}else wa(i,r,u,In(i))}catch(W){wa(i,r,{then:function(){},status:"rejected",reason:W},In())}finally{le.p=_,S!==null&&R.types!==null&&(S.types=R.types),$.T=S}}function qV(){}function yp(i,r,l,u){if(i.tag!==5)throw Error(s(476));var g=r0(i).queue;s0(i,g,r,Te,l===null?qV:function(){return o0(i),l(u)})}function r0(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:Te},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function o0(i){var r=r0(i);r.next===null&&(r=i.alternate.memoizedState),wa(i,r.next.queue,{},In())}function _p(){return Zt(Fa)}function l0(){return St().memoizedState}function a0(){return St().memoizedState}function OV(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=In();i=qs(l);var u=Os(r,i,l);u!==null&&(yn(u,r,l),Aa(u,r,l)),r={cache:Kd()},i.payload=r;return}r=r.return}}function BV(i,r,l){var u=In();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},$c(i)?c0(r,l):(l=Ud(i,r,l,u),l!==null&&(yn(l,i,u),f0(l,r,u)))}function u0(i,r,l){var u=In();wa(i,r,l,u)}function wa(i,r,l,u){var g={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if($c(i))c0(r,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var S=r.lastRenderedState,R=_(S,l);if(g.hasEagerState=!0,g.eagerState=R,En(R,S))return Mc(i,r,g,0),rt===null&&wc(),!1}catch{}finally{}if(l=Ud(i,r,g,u),l!==null)return yn(l,i,u),f0(l,r,u),!0}return!1}function Tp(i,r,l,u){if(u={lane:2,revertLane:Zp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},$c(i)){if(r)throw Error(s(479))}else r=Ud(i,l,u,2),r!==null&&yn(r,i,2)}function $c(i){var r=i.alternate;return i===we||r!==null&&r===we}function c0(i,r){Xo=zc=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function f0(i,r,l){if((l&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,l|=u,r.lanes=l,Ql(i,l)}}var Ma={readContext:Zt,use:Fc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Ma.useEffectEvent=yt;var h0={readContext:Zt,use:Fc,useCallback:function(i,r){return un().memoizedState=[i,r===void 0?null:r],i},useContext:Zt,useEffect:Qv,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Jc(4194308,4,jv.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Jc(4194308,4,i,r)},useInsertionEffect:function(i,r){Jc(4,2,i,r)},useMemo:function(i,r){var l=un();r=r===void 0?null:r;var u=i();if(Gr){Dn(!0);try{i()}finally{Dn(!1)}}return l.memoizedState=[u,r],u},useReducer:function(i,r,l){var u=un();if(l!==void 0){var g=l(r);if(Gr){Dn(!0);try{l(r)}finally{Dn(!1)}}}else g=r;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=BV.bind(null,we,i),[u.memoizedState,i]},useRef:function(i){var r=un();return i={current:i},r.memoizedState=i},useState:function(i){i=hp(i);var r=i.queue,l=u0.bind(null,we,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:mp,useDeferredValue:function(i,r){var l=un();return gp(l,i,r)},useTransition:function(){var i=hp(!1);return i=s0.bind(null,we,i.queue,!0,!1),un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var u=we,g=un();if(Ue){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),rt===null)throw Error(s(349));(Pe&127)!==0||Vv(u,r,l)}g.memoizedState=l;var _={value:l,getSnapshot:r};return g.queue=_,Qv(kv.bind(null,u,_,i),[i]),u.flags|=2048,Wo(9,{destroy:void 0},Pv.bind(null,u,_,l,r),null),l},useId:function(){var i=un(),r=rt.identifierPrefix;if(Ue){var l=ki,u=Pi;l=(u&~(1<<32-Et(u)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Gc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=VV++,r="_"+r+"r_"+l.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:_p,useFormState:Fv,useActionState:Fv,useOptimistic:function(i){var r=un();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Tp.bind(null,we,!0,l),l.dispatch=r,[i,r]},useMemoCache:up,useCacheRefresh:function(){return un().memoizedState=OV.bind(null,we)},useEffectEvent:function(i){var r=un(),l={impl:i};return r.memoizedState=l,function(){if((Je&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Ep={readContext:Zt,use:Fc,useCallback:t0,useContext:Zt,useEffect:pp,useImperativeHandle:e0,useInsertionEffect:Zv,useLayoutEffect:Wv,useMemo:n0,useReducer:Yc,useRef:$v,useState:function(){return Yc(Wi)},useDebugValue:mp,useDeferredValue:function(i,r){var l=St();return i0(l,et.memoizedState,i,r)},useTransition:function(){var i=Yc(Wi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:Ia(i),r]},useSyncExternalStore:xv,useId:l0,useHostTransitionStatus:_p,useFormState:Yv,useActionState:Yv,useOptimistic:function(i,r){var l=St();return qv(l,et,i,r)},useMemoCache:up,useCacheRefresh:a0};Ep.useEffectEvent=Xv;var d0={readContext:Zt,use:Fc,useCallback:t0,useContext:Zt,useEffect:pp,useImperativeHandle:e0,useInsertionEffect:Zv,useLayoutEffect:Wv,useMemo:n0,useReducer:fp,useRef:$v,useState:function(){return fp(Wi)},useDebugValue:mp,useDeferredValue:function(i,r){var l=St();return et===null?gp(l,i,r):i0(l,et.memoizedState,i,r)},useTransition:function(){var i=fp(Wi)[0],r=St().memoizedState;return[typeof i=="boolean"?i:Ia(i),r]},useSyncExternalStore:xv,useId:l0,useHostTransitionStatus:_p,useFormState:Kv,useActionState:Kv,useOptimistic:function(i,r){var l=St();return et!==null?qv(l,et,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:up,useCacheRefresh:a0};d0.useEffectEvent=Xv;function vp(i,r,l,u){r=i.memoizedState,l=l(u,r),l=l==null?r:v({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Ap={enqueueSetState:function(i,r,l){i=i._reactInternals;var u=In(),g=qs(u);g.payload=r,l!=null&&(g.callback=l),r=Os(i,g,u),r!==null&&(yn(r,i,u),Aa(r,i,u))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var u=In(),g=qs(u);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Os(i,g,u),r!==null&&(yn(r,i,u),Aa(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=In(),u=qs(l);u.tag=2,r!=null&&(u.callback=r),r=Os(i,u,l),r!==null&&(yn(r,i,l),Aa(r,i,l))}};function p0(i,r,l,u,g,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,S):r.prototype&&r.prototype.isPureReactComponent?!pa(l,u)||!pa(g,_):!0}function m0(i,r,l,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==i&&Ap.enqueueReplaceState(r,r.state,null)}function Hr(i,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(i=i.defaultProps){l===r&&(l=v({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}function g0(i){Ic(i)}function y0(i){console.error(i)}function _0(i){Ic(i)}function Qc(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function T0(i,r,l){try{var u=i.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Sp(i,r,l){return l=qs(l),l.tag=3,l.payload={element:null},l.callback=function(){Qc(i,r)},l}function E0(i){return i=qs(i),i.tag=3,i}function v0(i,r,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){T0(r,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){T0(r,l,u),typeof g!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function zV(i,r,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&Fo(r,l,g,!0),l=An.current,l!==null){switch(l.tag){case 31:case 13:return Bn===null?af():l.alternate===null&&_t===0&&(_t=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Uc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),$p(i,u,g)),!1;case 22:return l.flags|=65536,u===Uc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),$p(i,u,g)),!1}throw Error(s(435,l.tag))}return $p(i,u,g),af(),!1}if(Ue)return r=An.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==Gd&&(i=Error(s(422),{cause:u}),ya(Un(i,l)))):(u!==Gd&&(r=Error(s(423),{cause:u}),ya(Un(r,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Un(u,l),g=Sp(i.stateNode,u,g),jd(i,g),_t!==4&&(_t=2)),!1;var _=Error(s(520),{cause:u});if(_=Un(_,l),Ua===null?Ua=[_]:Ua.push(_),_t!==4&&(_t=2),r===null)return!0;u=Un(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Sp(l.stateNode,u,i),jd(l,i),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return l.flags|=65536,g&=-g,l.lanes|=g,g=E0(g),v0(g,i,l,u),jd(l,g),!1}l=l.return}while(l!==null);return!1}var Cp=Error(s(461)),Pt=!1;function Wt(i,r,l,u){r.child=i===null?Rv(r,null,l,u):zr(r,i.child,l,u)}function A0(i,r,l,u,g){l=l.render;var _=r.ref;if("ref"in u){var S={};for(var R in u)R!=="ref"&&(S[R]=u[R])}else S=u;return Lr(r),u=rp(i,r,l,S,_,g),R=op(),i!==null&&!Pt?(lp(i,r,g),ji(i,r,g)):(Ue&&R&&Bd(r),r.flags|=1,Wt(i,r,u,g),r.child)}function S0(i,r,l,u,g){if(i===null){var _=l.type;return typeof _=="function"&&!Ld(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,C0(i,r,_,u,g)):(i=Dc(l.type,null,u,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!xp(i,g)){var S=_.memoizedProps;if(l=l.compare,l=l!==null?l:pa,l(S,u)&&i.ref===r.ref)return ji(i,r,g)}return r.flags|=1,i=Ki(_,u),i.ref=r.ref,i.return=r,r.child=i}function C0(i,r,l,u,g){if(i!==null){var _=i.memoizedProps;if(pa(_,u)&&i.ref===r.ref)if(Pt=!1,r.pendingProps=u=_,xp(i,g))(i.flags&131072)!==0&&(Pt=!0);else return r.lanes=i.lanes,ji(i,r,g)}return Rp(i,r,l,u,g)}function R0(i,r,l,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,i!==null){for(u=r.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,r.child=null;return I0(i,r,_,l,u)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Pc(r,_!==null?_.cachePool:null),_!==null?Mv(r,_):tp(),bv(r);else return u=r.lanes=536870912,I0(i,r,_!==null?_.baseLanes|l:l,l,u)}else _!==null?(Pc(r,_.cachePool),Mv(r,_),zs(),r.memoizedState=null):(i!==null&&Pc(r,null),tp(),zs());return Wt(i,r,g,l),r.child}function ba(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function I0(i,r,l,u,g){var _=Qd();return _=_===null?null:{parent:xt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},i!==null&&Pc(r,null),tp(),bv(r),i!==null&&Fo(i,r,u,!0),r.childLanes=g,null}function Xc(i,r){return r=Wc({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function w0(i,r,l){return zr(r,i.child,null,l),i=Xc(r,r.pendingProps),i.flags|=2,Sn(r),r.memoizedState=null,i}function GV(i,r,l){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ue){if(u.mode==="hidden")return i=Xc(r,u),r.lanes=536870912,ba(null,i);if(ip(r),(i=ct)?(i=OA(i,On),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=cv(i),l.return=r,r.child=l,Xt=r,ct=null)):i=null,i===null)throw ks(r);return r.lanes=536870912,null}return Xc(r,u)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(ip(r),g)if(r.flags&256)r.flags&=-257,r=w0(i,r,l);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(Pt||Fo(i,r,l,!1),g=(l&i.childLanes)!==0,Pt||g){if(u=rt,u!==null&&(S=Xl(u,l),S!==0&&S!==_.retryLane))throw _.retryLane=S,Vr(i,S),yn(u,i,S),Cp;af(),r=w0(i,r,l)}else i=_.treeContext,ct=zn(S.nextSibling),Xt=r,Ue=!0,Ps=null,On=!1,i!==null&&dv(r,i),r=Xc(r,u),r.flags|=4096;return r}return i=Ki(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Zc(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function Rp(i,r,l,u,g){return Lr(r),l=rp(i,r,l,u,void 0,g),u=op(),i!==null&&!Pt?(lp(i,r,g),ji(i,r,g)):(Ue&&u&&Bd(r),r.flags|=1,Wt(i,r,l,g),r.child)}function M0(i,r,l,u,g,_){return Lr(r),r.updateQueue=null,l=Nv(r,u,l,g),Dv(i),u=op(),i!==null&&!Pt?(lp(i,r,_),ji(i,r,_)):(Ue&&u&&Bd(r),r.flags|=1,Wt(i,r,l,_),r.child)}function b0(i,r,l,u,g){if(Lr(r),r.stateNode===null){var _=Bo,S=l.contextType;typeof S=="object"&&S!==null&&(_=Zt(S)),_=new l(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ap,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},Zd(r),S=l.contextType,_.context=typeof S=="object"&&S!==null?Zt(S):Bo,_.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(vp(r,l,S,u),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&Ap.enqueueReplaceState(_,_.state,null),Ca(r,u,_,g),Sa(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var R=r.memoizedProps,x=Hr(l,R);_.props=x;var H=_.context,Q=l.contextType;S=Bo,typeof Q=="object"&&Q!==null&&(S=Zt(Q));var W=l.getDerivedStateFromProps;Q=typeof W=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||H!==S)&&m0(r,_,u,S),Ls=!1;var Y=r.memoizedState;_.state=Y,Ca(r,u,_,g),Sa(),H=r.memoizedState,R||Y!==H||Ls?(typeof W=="function"&&(vp(r,l,W,u),H=r.memoizedState),(x=Ls||p0(r,l,x,u,Y,H,S))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=H),_.props=u,_.state=H,_.context=S,u=x):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Wd(i,r),S=r.memoizedProps,Q=Hr(l,S),_.props=Q,W=r.pendingProps,Y=_.context,H=l.contextType,x=Bo,typeof H=="object"&&H!==null&&(x=Zt(H)),R=l.getDerivedStateFromProps,(H=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==W||Y!==x)&&m0(r,_,u,x),Ls=!1,Y=r.memoizedState,_.state=Y,Ca(r,u,_,g),Sa();var K=r.memoizedState;S!==W||Y!==K||Ls||i!==null&&i.dependencies!==null&&xc(i.dependencies)?(typeof R=="function"&&(vp(r,l,R,u),K=r.memoizedState),(Q=Ls||p0(r,l,Q,u,Y,K,x)||i!==null&&i.dependencies!==null&&xc(i.dependencies))?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,K,x),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,K,x)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=K),_.props=u,_.state=K,_.context=x,u=Q):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,Zc(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=zr(r,i.child,null,g),r.child=zr(r,null,l,g)):Wt(i,r,l,g),r.memoizedState=_.state,i=r.child):i=ji(i,r,g),i}function D0(i,r,l,u){return kr(),r.flags|=256,Wt(i,r,l,u),r.child}var Ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wp(i){return{baseLanes:i,cachePool:Tv()}}function Mp(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=Rn),i}function N0(i,r,l){var u=r.pendingProps,g=!1,_=(r.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(At.current&2)!==0),S&&(g=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ue){if(g?Bs(r):zs(),(i=ct)?(i=OA(i,On),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Vs!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},l=cv(i),l.return=r,r.child=l,Xt=r,ct=null)):i=null,i===null)throw ks(r);return cm(i)?r.lanes=32:r.lanes=536870912,null}var R=u.children;return u=u.fallback,g?(zs(),g=r.mode,R=Wc({mode:"hidden",children:R},g),u=Pr(u,g,l,null),R.return=r,u.return=r,R.sibling=u,r.child=R,u=r.child,u.memoizedState=wp(l),u.childLanes=Mp(i,S,l),r.memoizedState=Ip,ba(null,u)):(Bs(r),bp(r,R))}var x=i.memoizedState;if(x!==null&&(R=x.dehydrated,R!==null)){if(_)r.flags&256?(Bs(r),r.flags&=-257,r=Dp(i,r,l)):r.memoizedState!==null?(zs(),r.child=i.child,r.flags|=128,r=null):(zs(),R=u.fallback,g=r.mode,u=Wc({mode:"visible",children:u.children},g),R=Pr(R,g,l,null),R.flags|=2,u.return=r,R.return=r,u.sibling=R,r.child=u,zr(r,i.child,null,l),u=r.child,u.memoizedState=wp(l),u.childLanes=Mp(i,S,l),r.memoizedState=Ip,r=ba(null,u));else if(Bs(r),cm(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var H=S.dgst;S=H,u=Error(s(419)),u.stack="",u.digest=S,ya({value:u,source:null,stack:null}),r=Dp(i,r,l)}else if(Pt||Fo(i,r,l,!1),S=(l&i.childLanes)!==0,Pt||S){if(S=rt,S!==null&&(u=Xl(S,l),u!==0&&u!==x.retryLane))throw x.retryLane=u,Vr(i,u),yn(S,i,u),Cp;um(R)||af(),r=Dp(i,r,l)}else um(R)?(r.flags|=192,r.child=i.child,r=null):(i=x.treeContext,ct=zn(R.nextSibling),Xt=r,Ue=!0,Ps=null,On=!1,i!==null&&dv(r,i),r=bp(r,u.children),r.flags|=4096);return r}return g?(zs(),R=u.fallback,g=r.mode,x=i.child,H=x.sibling,u=Ki(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,H!==null?R=Ki(H,R):(R=Pr(R,g,l,null),R.flags|=2),R.return=r,u.return=r,u.sibling=R,r.child=u,ba(null,u),u=r.child,R=i.child.memoizedState,R===null?R=wp(l):(g=R.cachePool,g!==null?(x=xt._currentValue,g=g.parent!==x?{parent:x,pool:x}:g):g=Tv(),R={baseLanes:R.baseLanes|l,cachePool:g}),u.memoizedState=R,u.childLanes=Mp(i,S,l),r.memoizedState=Ip,ba(i.child,u)):(Bs(r),l=i.child,i=l.sibling,l=Ki(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=l,r.memoizedState=null,l)}function bp(i,r){return r=Wc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Wc(i,r){return i=vn(22,i,null,r),i.lanes=0,i}function Dp(i,r,l){return zr(r,i.child,null,l),i=bp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function x0(i,r,l){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Yd(i.return,r,l)}function Np(i,r,l,u,g,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g,treeForkCount:_}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=l,S.tailMode=g,S.treeForkCount=_)}function V0(i,r,l){var u=r.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var S=At.current,R=(S&2)!==0;if(R?(S=S&1|2,r.flags|=128):S&=1,ue(At,S),Wt(i,r,u,l),u=Ue?ga:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&x0(i,l,r);else if(i.tag===19)x0(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(l=r.child,g=null;l!==null;)i=l.alternate,i!==null&&Bc(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Np(r,!1,g,l,_,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&Bc(i)===null){r.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Np(r,!0,l,null,_,u);break;case"together":Np(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function ji(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),Fs|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(Fo(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=Ki(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=Ki(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function xp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&xc(i)))}function HV(i,r,l){switch(r.tag){case 3:Lt(r,r.stateNode.containerInfo),Us(r,xt,i.memoizedState.cache),kr();break;case 27:case 5:mr(r);break;case 4:Lt(r,r.stateNode.containerInfo);break;case 10:Us(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ip(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Bs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?N0(i,r,l):(Bs(r),i=ji(i,r,l),i!==null?i.sibling:null);Bs(r);break;case 19:var g=(i.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||(Fo(i,r,l,!1),u=(l&r.childLanes)!==0),g){if(u)return V0(i,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(At,At.current),u)break;return null;case 22:return r.lanes=0,R0(i,r,l,r.pendingProps);case 24:Us(r,xt,i.memoizedState.cache)}return ji(i,r,l)}function P0(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Pt=!0;else{if(!xp(i,l)&&(r.flags&128)===0)return Pt=!1,HV(i,r,l);Pt=(i.flags&131072)!==0}else Pt=!1,Ue&&(r.flags&1048576)!==0&&hv(r,ga,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Or(r.elementType),r.type=i,typeof i=="function")Ld(i)?(u=Hr(i,u),r.tag=1,r=b0(null,r,i,u,l)):(r.tag=0,r=Rp(null,r,i,u,l));else{if(i!=null){var g=i.$$typeof;if(g===oe){r.tag=11,r=A0(null,r,i,u,l);break e}else if(g===D){r.tag=14,r=S0(null,r,i,u,l);break e}}throw r=st(i)||i,Error(s(306,r,""))}}return r;case 0:return Rp(i,r,r.type,r.pendingProps,l);case 1:return u=r.type,g=Hr(u,r.pendingProps),b0(i,r,u,g,l);case 3:e:{if(Lt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;g=_.element,Wd(i,r),Ca(r,u,null,l);var S=r.memoizedState;if(u=S.cache,Us(r,xt,u),u!==_.cache&&Jd(r,[xt],l,!0),Sa(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=D0(i,r,u,l);break e}else if(u!==g){g=Un(Error(s(424)),r),ya(g),r=D0(i,r,u,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ct=zn(i.firstChild),Xt=r,Ue=!0,Ps=null,On=!0,l=Rv(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(kr(),u===g){r=ji(i,r,l);break e}Wt(i,r,u,l)}r=r.child}return r;case 26:return Zc(i,r),i===null?(l=YA(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ue||(l=r.type,i=r.pendingProps,u=mf(Me.current).createElement(l),u[bt]=r,u[Gt]=i,jt(u,l,i),Dt(u),r.stateNode=u):r.memoizedState=YA(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return mr(r),i===null&&Ue&&(u=r.stateNode=GA(r.type,r.pendingProps,Me.current),Xt=r,On=!0,g=ct,Qs(r.type)?(fm=g,ct=zn(u.firstChild)):ct=g),Wt(i,r,r.pendingProps.children,l),Zc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ue&&((g=u=ct)&&(u=TP(u,r.type,r.pendingProps,On),u!==null?(r.stateNode=u,Xt=r,ct=zn(u.firstChild),On=!1,g=!0):g=!1),g||ks(r)),mr(r),g=r.type,_=r.pendingProps,S=i!==null?i.memoizedProps:null,u=_.children,om(g,_)?u=null:S!==null&&om(g,S)&&(r.flags|=32),r.memoizedState!==null&&(g=rp(i,r,PV,null,null,l),Fa._currentValue=g),Zc(i,r),Wt(i,r,u,l),r.child;case 6:return i===null&&Ue&&((i=l=ct)&&(l=EP(l,r.pendingProps,On),l!==null?(r.stateNode=l,Xt=r,ct=null,i=!0):i=!1),i||ks(r)),null;case 13:return N0(i,r,l);case 4:return Lt(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=zr(r,null,u,l):Wt(i,r,u,l),r.child;case 11:return A0(i,r,r.type,r.pendingProps,l);case 7:return Wt(i,r,r.pendingProps,l),r.child;case 8:return Wt(i,r,r.pendingProps.children,l),r.child;case 12:return Wt(i,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,Us(r,r.type,u.value),Wt(i,r,u.children,l),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,Lr(r),g=Zt(g),u=u(g),r.flags|=1,Wt(i,r,u,l),r.child;case 14:return S0(i,r,r.type,r.pendingProps,l);case 15:return C0(i,r,r.type,r.pendingProps,l);case 19:return V0(i,r,l);case 31:return GV(i,r,l);case 22:return R0(i,r,l,r.pendingProps);case 24:return Lr(r),u=Zt(xt),i===null?(g=Qd(),g===null&&(g=rt,_=Kd(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=l),g=_),r.memoizedState={parent:u,cache:g},Zd(r),Us(r,xt,g)):((i.lanes&l)!==0&&(Wd(i,r),Ca(r,null,null,l),Sa()),g=i.memoizedState,_=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Us(r,xt,u)):(u=_.cache,Us(r,xt,u),u!==g.cache&&Jd(r,[xt],l,!0))),Wt(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function es(i){i.flags|=4}function Vp(i,r,l,u,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(lA())i.flags|=8192;else throw Br=Uc,Xd}else i.flags&=-16777217}function k0(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!XA(r))if(lA())i.flags|=8192;else throw Br=Uc,Xd}function jc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?rc():536870912,i.lanes|=r,nl|=r)}function Da(i,r){if(!Ue)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ft(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,u=0;if(r)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=l,r}function FV(i,r,l){var u=r.pendingProps;switch(zd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return l=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Xi(xt),ht(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Ho(r)?es(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Hd())),ft(r),null;case 26:var g=r.type,_=r.memoizedState;return i===null?(es(r),_!==null?(ft(r),k0(r,_)):(ft(r),Vp(r,g,null,u,l))):_?_!==i.memoizedState?(es(r),ft(r),k0(r,_)):(ft(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&es(r),ft(r),Vp(r,g,i,u,l)),null;case 27:if(vo(r),l=Me.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&es(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ft(r),null}i=de.current,Ho(r)?pv(r):(i=GA(g,u,l),r.stateNode=i,es(r))}return ft(r),null;case 5:if(vo(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&es(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ft(r),null}if(_=de.current,Ho(r))pv(r);else{var S=mf(Me.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}_[bt]=r,_[Gt]=u;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=_;e:switch(jt(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&es(r)}}return ft(r),Vp(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,l),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&es(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=Me.current,Ho(r)){if(i=r.stateNode,l=r.memoizedProps,u=null,g=Xt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[bt]=r,i=!!(i.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||NA(i.nodeValue,l)),i||ks(r,!0)}else i=mf(i).createTextNode(u),i[bt]=r,r.stateNode=i}return ft(r),null;case 31:if(l=r.memoizedState,i===null||i.memoizedState!==null){if(u=Ho(r),l!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[bt]=r}else kr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),i=!1}else l=Hd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return r.flags&256?(Sn(r),r):(Sn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ft(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Ho(r),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[bt]=r}else kr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),g=!1}else g=Hd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Sn(r),r):(Sn(r),null)}return Sn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=u!==null,i=i!==null&&i.memoizedState!==null,l&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),l!==i&&l&&(r.child.flags|=8192),jc(r,r.updateQueue),ft(r),null);case 4:return ht(),i===null&&tm(r.stateNode.containerInfo),ft(r),null;case 10:return Xi(r.type),ft(r),null;case 19:if(te(At),u=r.memoizedState,u===null)return ft(r),null;if(g=(r.flags&128)!==0,_=u.rendering,_===null)if(g)Da(u,!1);else{if(_t!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=Bc(i),_!==null){for(r.flags|=128,Da(u,!1),i=_.updateQueue,r.updateQueue=i,jc(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)uv(l,i),l=l.sibling;return ue(At,At.current&1|2),Ue&&$i(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&ln()>rf&&(r.flags|=128,g=!0,Da(u,!1),r.lanes=4194304)}else{if(!g)if(i=Bc(_),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,jc(r,i),Da(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ue)return ft(r),null}else 2*ln()-u.renderingStartTime>rf&&l!==536870912&&(r.flags|=128,g=!0,Da(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=ln(),i.sibling=null,l=At.current,ue(At,g?l&1|2:l&1),Ue&&$i(r,u.treeForkCount),i):(ft(r),null);case 22:case 23:return Sn(r),np(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),l=r.updateQueue,l!==null&&jc(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),i!==null&&te(qr),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Xi(xt),ft(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function YV(i,r){switch(zd(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Xi(xt),ht(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return vo(r),null;case 31:if(r.memoizedState!==null){if(Sn(r),r.alternate===null)throw Error(s(340));kr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Sn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));kr()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return te(At),null;case 4:return ht(),null;case 10:return Xi(r.type),null;case 22:case 23:return Sn(r),np(),i!==null&&te(qr),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Xi(xt),null;case 25:return null;default:return null}}function U0(i,r){switch(zd(r),r.tag){case 3:Xi(xt),ht();break;case 26:case 27:case 5:vo(r);break;case 4:ht();break;case 31:r.memoizedState!==null&&Sn(r);break;case 13:Sn(r);break;case 19:te(At);break;case 10:Xi(r.type);break;case 22:case 23:Sn(r),np(),i!==null&&te(qr);break;case 24:Xi(xt)}}function Na(i,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&i)===i){u=void 0;var _=l.create,S=l.inst;u=_(),S.destroy=u}l=l.next}while(l!==g)}}catch(R){We(r,r.return,R)}}function Gs(i,r,l){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var S=u.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,g=r;var x=l,H=R;try{H()}catch(Q){We(g,x,Q)}}}u=u.next}while(u!==_)}}catch(Q){We(r,r.return,Q)}}function L0(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{wv(r,l)}catch(u){We(i,i.return,u)}}}function q0(i,r,l){l.props=Hr(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(u){We(i,r,u)}}function xa(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof l=="function"?i.refCleanup=l(u):l.current=u}}catch(g){We(i,r,g)}}function Ui(i,r){var l=i.ref,u=i.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){We(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){We(i,r,g)}else l.current=null}function O0(i){var r=i.type,l=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){We(i,i.return,g)}}function Pp(i,r,l){try{var u=i.stateNode;dP(u,i.type,l,r),u[Gt]=r}catch(g){We(i,i.return,g)}}function B0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Qs(i.type)||i.tag===4}function kp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||B0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Qs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Up(i,r,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=jn));else if(u!==4&&(u===27&&Qs(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(Up(i,r,l),i=i.sibling;i!==null;)Up(i,r,l),i=i.sibling}function ef(i,r,l){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(u!==4&&(u===27&&Qs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(ef(i,r,l),i=i.sibling;i!==null;)ef(i,r,l),i=i.sibling}function z0(i){var r=i.stateNode,l=i.memoizedProps;try{for(var u=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);jt(r,u,l),r[bt]=i,r[Gt]=l}catch(_){We(i,i.return,_)}}var ts=!1,kt=!1,Lp=!1,G0=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function JV(i,r){if(i=i.containerInfo,sm=Af,i=ev(i),Dd(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var S=0,R=-1,x=-1,H=0,Q=0,W=i,Y=null;t:for(;;){for(var K;W!==l||g!==0&&W.nodeType!==3||(R=S+g),W!==_||u!==0&&W.nodeType!==3||(x=S+u),W.nodeType===3&&(S+=W.nodeValue.length),(K=W.firstChild)!==null;)Y=W,W=K;for(;;){if(W===i)break t;if(Y===l&&++H===g&&(R=S),Y===_&&++Q===u&&(x=S),(K=W.nextSibling)!==null)break;W=Y,Y=W.parentNode}W=K}l=R===-1||x===-1?null:{start:R,end:x}}else l=null}l=l||{start:0,end:0}}else l=null;for(rm={focusedElem:i,selectionRange:l},Af=!1,Ft=r;Ft!==null;)if(r=Ft,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Ft=i;else for(;Ft!==null;){switch(r=Ft,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)g=i[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,l=r,g=_.memoizedProps,_=_.memoizedState,u=l.stateNode;try{var pe=Hr(l.type,g);i=u.getSnapshotBeforeUpdate(pe,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ee){We(l,l.return,Ee)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)am(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":am(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Ft=i;break}Ft=r.return}}function H0(i,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:is(i,l),u&4&&Na(5,l);break;case 1:if(is(i,l),u&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(S){We(l,l.return,S)}else{var g=Hr(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){We(l,l.return,S)}}u&64&&L0(l),u&512&&xa(l,l.return);break;case 3:if(is(i,l),u&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{wv(i,r)}catch(S){We(l,l.return,S)}}break;case 27:r===null&&u&4&&z0(l);case 26:case 5:is(i,l),r===null&&u&4&&O0(l),u&512&&xa(l,l.return);break;case 12:is(i,l);break;case 31:is(i,l),u&4&&J0(i,l);break;case 13:is(i,l),u&4&&K0(i,l),u&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=tP.bind(null,l),vP(i,l))));break;case 22:if(u=l.memoizedState!==null||ts,!u){r=r!==null&&r.memoizedState!==null||kt,g=ts;var _=kt;ts=u,(kt=r)&&!_?ss(i,l,(l.subtreeFlags&8772)!==0):is(i,l),ts=g,kt=_}break;case 30:break;default:is(i,l)}}function F0(i){var r=i.alternate;r!==null&&(i.alternate=null,F0(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Io(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pt=null,dn=!1;function ns(i,r,l){for(l=l.child;l!==null;)Y0(i,r,l),l=l.sibling}function Y0(i,r,l){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Qn,l)}catch{}switch(l.tag){case 26:kt||Ui(l,r),ns(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kt||Ui(l,r);var u=pt,g=dn;Qs(l.type)&&(pt=l.stateNode,dn=!1),ns(i,r,l),za(l.stateNode),pt=u,dn=g;break;case 5:kt||Ui(l,r);case 6:if(u=pt,g=dn,pt=null,ns(i,r,l),pt=u,dn=g,pt!==null)if(dn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(_){We(l,r,_)}else try{pt.removeChild(l.stateNode)}catch(_){We(l,r,_)}break;case 18:pt!==null&&(dn?(i=pt,LA(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),cl(i)):LA(pt,l.stateNode));break;case 4:u=pt,g=dn,pt=l.stateNode.containerInfo,dn=!0,ns(i,r,l),pt=u,dn=g;break;case 0:case 11:case 14:case 15:Gs(2,l,r),kt||Gs(4,l,r),ns(i,r,l);break;case 1:kt||(Ui(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&q0(l,r,u)),ns(i,r,l);break;case 21:ns(i,r,l);break;case 22:kt=(u=kt)||l.memoizedState!==null,ns(i,r,l),kt=u;break;default:ns(i,r,l)}}function J0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{cl(i)}catch(l){We(r,r.return,l)}}}function K0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{cl(i)}catch(l){We(r,r.return,l)}}function KV(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new G0),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new G0),r;default:throw Error(s(435,i.tag))}}function tf(i,r){var l=KV(i);r.forEach(function(u){if(!l.has(u)){l.add(u);var g=nP.bind(null,i,u);u.then(g,g)}})}function pn(i,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],_=i,S=r,R=S;e:for(;R!==null;){switch(R.tag){case 27:if(Qs(R.type)){pt=R.stateNode,dn=!1;break e}break;case 5:pt=R.stateNode,dn=!1;break e;case 3:case 4:pt=R.stateNode.containerInfo,dn=!0;break e}R=R.return}if(pt===null)throw Error(s(160));Y0(_,S,g),pt=null,dn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)$0(r,i),r=r.sibling}var ri=null;function $0(i,r){var l=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:pn(r,i),mn(i),u&4&&(Gs(3,i,i.return),Na(3,i),Gs(5,i,i.return));break;case 1:pn(r,i),mn(i),u&512&&(kt||l===null||Ui(l,l.return)),u&64&&ts&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=ri;if(pn(r,i),mn(i),u&512&&(kt||l===null||Ui(l,l.return)),u&4){var _=l!==null?l.memoizedState:null;if(u=i.memoizedState,l===null)if(u===null)if(i.stateNode===null){e:{u=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Ai]||_[bt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),jt(_,u,l),_[bt]=i,Dt(_),u=_;break e;case"link":var S=$A("link","href",g).get(u+(l.href||""));if(S){for(var R=0;R<S.length;R++)if(_=S[R],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(R,1);break t}}_=g.createElement(u),jt(_,u,l),g.head.appendChild(_);break;case"meta":if(S=$A("meta","content",g).get(u+(l.content||""))){for(R=0;R<S.length;R++)if(_=S[R],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(R,1);break t}}_=g.createElement(u),jt(_,u,l),g.head.appendChild(_);break;default:throw Error(s(468,u))}_[bt]=i,Dt(_),u=_}i.stateNode=u}else QA(g,i.type,i.stateNode);else i.stateNode=KA(g,u,i.memoizedProps);else _!==u?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,u===null?QA(g,i.type,i.stateNode):KA(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Pp(i,i.memoizedProps,l.memoizedProps)}break;case 27:pn(r,i),mn(i),u&512&&(kt||l===null||Ui(l,l.return)),l!==null&&u&4&&Pp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(pn(r,i),mn(i),u&512&&(kt||l===null||Ui(l,l.return)),i.flags&32){g=i.stateNode;try{hn(g,"")}catch(pe){We(i,i.return,pe)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,Pp(i,g,l!==null?l.memoizedProps:g)),u&1024&&(Lp=!0);break;case 6:if(pn(r,i),mn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,l=i.stateNode;try{l.nodeValue=u}catch(pe){We(i,i.return,pe)}}break;case 3:if(_f=null,g=ri,ri=gf(r.containerInfo),pn(r,i),ri=g,mn(i),u&4&&l!==null&&l.memoizedState.isDehydrated)try{cl(r.containerInfo)}catch(pe){We(i,i.return,pe)}Lp&&(Lp=!1,Q0(i));break;case 4:u=ri,ri=gf(i.stateNode.containerInfo),pn(r,i),mn(i),ri=u;break;case 12:pn(r,i),mn(i);break;case 31:pn(r,i),mn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tf(i,u)));break;case 13:pn(r,i),mn(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sf=ln()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tf(i,u)));break;case 22:g=i.memoizedState!==null;var x=l!==null&&l.memoizedState!==null,H=ts,Q=kt;if(ts=H||g,kt=Q||x,pn(r,i),kt=Q,ts=H,mn(i),u&8192)e:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||x||ts||kt||Fr(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){x=l=r;try{if(_=x.stateNode,g)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=x.stateNode;var W=x.memoizedProps.style,Y=W!=null&&W.hasOwnProperty("display")?W.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(pe){We(x,x.return,pe)}}}else if(r.tag===6){if(l===null){x=r;try{x.stateNode.nodeValue=g?"":x.memoizedProps}catch(pe){We(x,x.return,pe)}}}else if(r.tag===18){if(l===null){x=r;try{var K=x.stateNode;g?qA(K,!0):qA(x.stateNode,!1)}catch(pe){We(x,x.return,pe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,tf(i,l))));break;case 19:pn(r,i),mn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,tf(i,u)));break;case 30:break;case 21:break;default:pn(r,i),mn(i)}}function mn(i){var r=i.flags;if(r&2){try{for(var l,u=i.return;u!==null;){if(B0(u)){l=u;break}u=u.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,_=kp(i);ef(i,_,g);break;case 5:var S=l.stateNode;l.flags&32&&(hn(S,""),l.flags&=-33);var R=kp(i);ef(i,R,S);break;case 3:case 4:var x=l.stateNode.containerInfo,H=kp(i);Up(i,H,x);break;default:throw Error(s(161))}}catch(Q){We(i,i.return,Q)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Q0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Q0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function is(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)H0(i,r.alternate,r),r=r.sibling}function Fr(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Gs(4,r,r.return),Fr(r);break;case 1:Ui(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&q0(r,r.return,l),Fr(r);break;case 27:za(r.stateNode);case 26:case 5:Ui(r,r.return),Fr(r);break;case 22:r.memoizedState===null&&Fr(r);break;case 30:Fr(r);break;default:Fr(r)}i=i.sibling}}function ss(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=i,_=r,S=_.flags;switch(_.tag){case 0:case 11:case 15:ss(g,_,l),Na(4,_);break;case 1:if(ss(g,_,l),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(H){We(u,u.return,H)}if(u=_,g=u.updateQueue,g!==null){var R=u.stateNode;try{var x=g.shared.hiddenCallbacks;if(x!==null)for(g.shared.hiddenCallbacks=null,g=0;g<x.length;g++)Iv(x[g],R)}catch(H){We(u,u.return,H)}}l&&S&64&&L0(_),xa(_,_.return);break;case 27:z0(_);case 26:case 5:ss(g,_,l),l&&u===null&&S&4&&O0(_),xa(_,_.return);break;case 12:ss(g,_,l);break;case 31:ss(g,_,l),l&&S&4&&J0(g,_);break;case 13:ss(g,_,l),l&&S&4&&K0(g,_);break;case 22:_.memoizedState===null&&ss(g,_,l),xa(_,_.return);break;case 30:break;default:ss(g,_,l)}r=r.sibling}}function qp(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&_a(l))}function Op(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_a(i))}function oi(i,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)X0(i,r,l,u),r=r.sibling}function X0(i,r,l,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:oi(i,r,l,u),g&2048&&Na(9,r);break;case 1:oi(i,r,l,u);break;case 3:oi(i,r,l,u),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_a(i)));break;case 12:if(g&2048){oi(i,r,l,u),i=r.stateNode;try{var _=r.memoizedProps,S=_.id,R=_.onPostCommit;typeof R=="function"&&R(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(x){We(r,r.return,x)}}else oi(i,r,l,u);break;case 31:oi(i,r,l,u);break;case 13:oi(i,r,l,u);break;case 23:break;case 22:_=r.stateNode,S=r.alternate,r.memoizedState!==null?_._visibility&2?oi(i,r,l,u):Va(i,r):_._visibility&2?oi(i,r,l,u):(_._visibility|=2,jo(i,r,l,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&qp(S,r);break;case 24:oi(i,r,l,u),g&2048&&Op(r.alternate,r);break;default:oi(i,r,l,u)}}function jo(i,r,l,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,S=r,R=l,x=u,H=S.flags;switch(S.tag){case 0:case 11:case 15:jo(_,S,R,x,g),Na(8,S);break;case 23:break;case 22:var Q=S.stateNode;S.memoizedState!==null?Q._visibility&2?jo(_,S,R,x,g):Va(_,S):(Q._visibility|=2,jo(_,S,R,x,g)),g&&H&2048&&qp(S.alternate,S);break;case 24:jo(_,S,R,x,g),g&&H&2048&&Op(S.alternate,S);break;default:jo(_,S,R,x,g)}r=r.sibling}}function Va(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,u=r,g=u.flags;switch(u.tag){case 22:Va(l,u),g&2048&&qp(u.alternate,u);break;case 24:Va(l,u),g&2048&&Op(u.alternate,u);break;default:Va(l,u)}r=r.sibling}}var Pa=8192;function el(i,r,l){if(i.subtreeFlags&Pa)for(i=i.child;i!==null;)Z0(i,r,l),i=i.sibling}function Z0(i,r,l){switch(i.tag){case 26:el(i,r,l),i.flags&Pa&&i.memoizedState!==null&&VP(l,ri,i.memoizedState,i.memoizedProps);break;case 5:el(i,r,l);break;case 3:case 4:var u=ri;ri=gf(i.stateNode.containerInfo),el(i,r,l),ri=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Pa,Pa=16777216,el(i,r,l),Pa=u):el(i,r,l));break;default:el(i,r,l)}}function W0(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function ka(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];Ft=u,eA(u,i)}W0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)j0(i),i=i.sibling}function j0(i){switch(i.tag){case 0:case 11:case 15:ka(i),i.flags&2048&&Gs(9,i,i.return);break;case 3:ka(i);break;case 12:ka(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,nf(i)):ka(i);break;default:ka(i)}}function nf(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];Ft=u,eA(u,i)}W0(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Gs(8,r,r.return),nf(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,nf(r));break;default:nf(r)}i=i.sibling}}function eA(i,r){for(;Ft!==null;){var l=Ft;switch(l.tag){case 0:case 11:case 15:Gs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:_a(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Ft=u;else e:for(l=i;Ft!==null;){u=Ft;var g=u.sibling,_=u.return;if(F0(u),u===l){Ft=null;break e}if(g!==null){g.return=_,Ft=g;break e}Ft=_}}}var $V={getCacheForType:function(i){var r=Zt(xt),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l},cacheSignal:function(){return Zt(xt).controller.signal}},QV=typeof WeakMap=="function"?WeakMap:Map,Je=0,rt=null,De=null,Pe=0,Ze=0,Cn=null,Hs=!1,tl=!1,Bp=!1,rs=0,_t=0,Fs=0,Yr=0,zp=0,Rn=0,nl=0,Ua=null,gn=null,Gp=!1,sf=0,tA=0,rf=1/0,of=null,Ys=null,Ot=0,Js=null,il=null,os=0,Hp=0,Fp=null,nA=null,La=0,Yp=null;function In(){return(Je&2)!==0&&Pe!==0?Pe&-Pe:$.T!==null?Zp():oc()}function iA(){if(Rn===0)if((Pe&536870912)===0||Ue){var i=_r;_r<<=1,(_r&3932160)===0&&(_r=262144),Rn=i}else Rn=536870912;return i=An.current,i!==null&&(i.flags|=32),Rn}function yn(i,r,l){(i===rt&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)&&(sl(i,0),Ks(i,Pe,Rn,!1)),Tr(i,l),((Je&2)===0||i!==rt)&&(i===rt&&((Je&2)===0&&(Yr|=l),_t===4&&Ks(i,Pe,Rn,!1)),Li(i))}function sA(i,r,l){if((Je&6)!==0)throw Error(s(327));var u=!l&&(r&127)===0&&(r&i.expiredLanes)===0||Xn(i,r),g=u?WV(i,r):Kp(i,r,!0),_=u;do{if(g===0){tl&&!u&&Ks(i,r,0,!1);break}else{if(l=i.current.alternate,_&&!XV(l)){g=Kp(i,r,!1),_=!1;continue}if(g===2){if(_=r,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var R=i;g=Ua;var x=R.current.memoizedState.isDehydrated;if(x&&(sl(R,S).flags|=256),S=Kp(R,S,!1),S!==2){if(Bp&&!x){R.errorRecoveryDisabledLanes|=_,Yr|=_,g=4;break e}_=gn,gn=g,_!==null&&(gn===null?gn=_:gn.push.apply(gn,_))}g=S}if(_=!1,g!==2)continue}}if(g===1){sl(i,0),Ks(i,r,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ks(u,r,Rn,!Hs);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=sf+300-ln(),10<g)){if(Ks(u,r,Rn,!Hs),Ti(u,0,!0)!==0)break e;os=r,u.timeoutHandle=kA(rA.bind(null,u,l,gn,of,Gp,r,Rn,Yr,nl,Hs,_,"Throttled",-0,0),g);break e}rA(u,l,gn,of,Gp,r,Rn,Yr,nl,Hs,_,null,-0,0)}}break}while(!0);Li(i)}function rA(i,r,l,u,g,_,S,R,x,H,Q,W,Y,K){if(i.timeoutHandle=-1,W=r.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jn},Z0(r,_,W);var pe=(_&62914560)===_?sf-ln():(_&4194048)===_?tA-ln():0;if(pe=PP(W,pe),pe!==null){os=_,i.cancelPendingCommit=pe(dA.bind(null,i,r,_,l,u,g,S,R,x,Q,W,null,Y,K)),Ks(i,_,S,!H);return}}dA(i,r,_,l,u,g,S,R,x)}function XV(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],_=g.getSnapshot;g=g.value;try{if(!En(_(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ks(i,r,l,u){r&=~zp,r&=~Yr,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var g=r;0<g;){var _=31-Et(g),S=1<<_;u[_]=-1,g&=~S}l!==0&&Er(i,l,r)}function lf(){return(Je&6)===0?(qa(0),!1):!0}function Jp(){if(De!==null){if(Ze===0)var i=De.return;else i=De,Qi=Ur=null,ap(i),$o=null,Ea=0,i=De;for(;i!==null;)U0(i.alternate,i),i=i.return;De=null}}function sl(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,gP(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),os=0,Jp(),rt=i,De=l=Ki(i.current,null),Pe=r,Ze=0,Cn=null,Hs=!1,tl=Xn(i,r),Bp=!1,nl=Rn=zp=Yr=Fs=_t=0,gn=Ua=null,Gp=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var g=31-Et(u),_=1<<g;r|=i[g],u&=~_}return rs=r,wc(),l}function oA(i,r){we=null,$.H=Ma,r===Ko||r===kc?(r=Av(),Ze=3):r===Xd?(r=Av(),Ze=4):Ze=r===Cp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Cn=r,De===null&&(_t=1,Qc(i,Un(r,i.current)))}function lA(){var i=An.current;return i===null?!0:(Pe&4194048)===Pe?Bn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?i===Bn:!1}function aA(){var i=$.H;return $.H=Ma,i===null?Ma:i}function uA(){var i=$.A;return $.A=$V,i}function af(){_t=4,Hs||(Pe&4194048)!==Pe&&An.current!==null||(tl=!0),(Fs&134217727)===0&&(Yr&134217727)===0||rt===null||Ks(rt,Pe,Rn,!1)}function Kp(i,r,l){var u=Je;Je|=2;var g=aA(),_=uA();(rt!==i||Pe!==r)&&(of=null,sl(i,r)),r=!1;var S=_t;e:do try{if(Ze!==0&&De!==null){var R=De,x=Cn;switch(Ze){case 8:Jp(),S=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(r=!0);var H=Ze;if(Ze=0,Cn=null,rl(i,R,x,H),l&&tl){S=0;break e}break;default:H=Ze,Ze=0,Cn=null,rl(i,R,x,H)}}ZV(),S=_t;break}catch(Q){oA(i,Q)}while(!0);return r&&i.shellSuspendCounter++,Qi=Ur=null,Je=u,$.H=g,$.A=_,De===null&&(rt=null,Pe=0,wc()),S}function ZV(){for(;De!==null;)cA(De)}function WV(i,r){var l=Je;Je|=2;var u=aA(),g=uA();rt!==i||Pe!==r?(of=null,rf=ln()+500,sl(i,r)):tl=Xn(i,r);e:do try{if(Ze!==0&&De!==null){r=De;var _=Cn;t:switch(Ze){case 1:Ze=0,Cn=null,rl(i,r,_,1);break;case 2:case 9:if(Ev(_)){Ze=0,Cn=null,fA(r);break}r=function(){Ze!==2&&Ze!==9||rt!==i||(Ze=7),Li(i)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Ev(_)?(Ze=0,Cn=null,fA(r)):(Ze=0,Cn=null,rl(i,r,_,7));break;case 5:var S=null;switch(De.tag){case 26:S=De.memoizedState;case 5:case 27:var R=De;if(S?XA(S):R.stateNode.complete){Ze=0,Cn=null;var x=R.sibling;if(x!==null)De=x;else{var H=R.return;H!==null?(De=H,uf(H)):De=null}break t}}Ze=0,Cn=null,rl(i,r,_,5);break;case 6:Ze=0,Cn=null,rl(i,r,_,6);break;case 8:Jp(),_t=6;break e;default:throw Error(s(462))}}jV();break}catch(Q){oA(i,Q)}while(!0);return Qi=Ur=null,$.H=u,$.A=g,Je=l,De!==null?0:(rt=null,Pe=0,wc(),_t)}function jV(){for(;De!==null&&!Sd();)cA(De)}function cA(i){var r=P0(i.alternate,i,rs);i.memoizedProps=i.pendingProps,r===null?uf(i):De=r}function fA(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=M0(l,r,r.pendingProps,r.type,void 0,Pe);break;case 11:r=M0(l,r,r.pendingProps,r.type.render,r.ref,Pe);break;case 5:ap(r);default:U0(l,r),r=De=uv(r,rs),r=P0(l,r,rs)}i.memoizedProps=i.pendingProps,r===null?uf(i):De=r}function rl(i,r,l,u){Qi=Ur=null,ap(r),$o=null,Ea=0;var g=r.return;try{if(zV(i,g,r,l,Pe)){_t=1,Qc(i,Un(l,i.current)),De=null;return}}catch(_){if(g!==null)throw De=g,_;_t=1,Qc(i,Un(l,i.current)),De=null;return}r.flags&32768?(Ue||u===1?i=!0:tl||(Pe&536870912)!==0?i=!1:(Hs=i=!0,(u===2||u===9||u===3||u===6)&&(u=An.current,u!==null&&u.tag===13&&(u.flags|=16384))),hA(r,i)):uf(r)}function uf(i){var r=i;do{if((r.flags&32768)!==0){hA(r,Hs);return}i=r.return;var l=FV(r.alternate,r,rs);if(l!==null){De=l;return}if(r=r.sibling,r!==null){De=r;return}De=r=i}while(r!==null);_t===0&&(_t=5)}function hA(i,r){do{var l=YV(i.alternate,i);if(l!==null){l.flags&=32767,De=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){De=i;return}De=i=l}while(i!==null);_t=6,De=null}function dA(i,r,l,u,g,_,S,R,x){i.cancelPendingCommit=null;do cf();while(Ot!==0);if((Je&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=kd,Id(i,l,_,S,R,x),i===rt&&(De=rt=null,Pe=0),il=r,Js=i,os=l,Hp=_,Fp=g,nA=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,iP(Ss,function(){return _A(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,g=le.p,le.p=2,S=Je,Je|=4;try{JV(i,r,l)}finally{Je=S,le.p=g,$.T=u}}Ot=1,pA(),mA(),gA()}}function pA(){if(Ot===1){Ot=0;var i=Js,r=il,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var u=le.p;le.p=2;var g=Je;Je|=4;try{$0(r,i);var _=rm,S=ev(i.containerInfo),R=_.focusedElem,x=_.selectionRange;if(S!==R&&R&&R.ownerDocument&&jE(R.ownerDocument.documentElement,R)){if(x!==null&&Dd(R)){var H=x.start,Q=x.end;if(Q===void 0&&(Q=H),"selectionStart"in R)R.selectionStart=H,R.selectionEnd=Math.min(Q,R.value.length);else{var W=R.ownerDocument||document,Y=W&&W.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),pe=R.textContent.length,Ee=Math.min(x.start,pe),nt=x.end===void 0?Ee:Math.min(x.end,pe);!K.extend&&Ee>nt&&(S=nt,nt=Ee,Ee=S);var O=WE(R,Ee),U=WE(R,nt);if(O&&U&&(K.rangeCount!==1||K.anchorNode!==O.node||K.anchorOffset!==O.offset||K.focusNode!==U.node||K.focusOffset!==U.offset)){var G=W.createRange();G.setStart(O.node,O.offset),K.removeAllRanges(),Ee>nt?(K.addRange(G),K.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),K.addRange(G))}}}}for(W=[],K=R;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<W.length;R++){var Z=W[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Af=!!sm,rm=sm=null}finally{Je=g,le.p=u,$.T=l}}i.current=r,Ot=2}}function mA(){if(Ot===2){Ot=0;var i=Js,r=il,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var u=le.p;le.p=2;var g=Je;Je|=4;try{H0(i,r.alternate,r)}finally{Je=g,le.p=u,$.T=l}}Ot=3}}function gA(){if(Ot===4||Ot===3){Ot=0,ju();var i=Js,r=il,l=os,u=nA;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ot=5:(Ot=0,il=Js=null,yA(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ys=null),Hi(l),r=r.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Qn,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=$.T,g=le.p,le.p=2,$.T=null;try{for(var _=i.onRecoverableError,S=0;S<u.length;S++){var R=u[S];_(R.value,{componentStack:R.stack})}}finally{$.T=r,le.p=g}}(os&3)!==0&&cf(),Li(i),g=i.pendingLanes,(l&261930)!==0&&(g&42)!==0?i===Yp?La++:(La=0,Yp=i):La=0,qa(0)}}function yA(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,_a(r)))}function cf(){return pA(),mA(),gA(),_A()}function _A(){if(Ot!==5)return!1;var i=Js,r=Hp;Hp=0;var l=Hi(os),u=$.T,g=le.p;try{le.p=32>l?32:l,$.T=null,l=Fp,Fp=null;var _=Js,S=os;if(Ot=0,il=Js=null,os=0,(Je&6)!==0)throw Error(s(331));var R=Je;if(Je|=4,j0(_.current),X0(_,_.current,S,l),Je=R,qa(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Qn,_)}catch{}return!0}finally{le.p=g,$.T=u,yA(i,r)}}function TA(i,r,l){r=Un(l,r),r=Sp(i.stateNode,r,2),i=Os(i,r,2),i!==null&&(Tr(i,2),Li(i))}function We(i,r,l){if(i.tag===3)TA(i,i,l);else for(;r!==null;){if(r.tag===3){TA(r,i,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ys===null||!Ys.has(u))){i=Un(l,i),l=E0(2),u=Os(r,l,2),u!==null&&(v0(l,u,r,i),Tr(u,2),Li(u));break}}r=r.return}}function $p(i,r,l){var u=i.pingCache;if(u===null){u=i.pingCache=new QV;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(l)||(Bp=!0,g.add(l),i=eP.bind(null,i,r,l),r.then(i,i))}function eP(i,r,l){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,rt===i&&(Pe&l)===l&&(_t===4||_t===3&&(Pe&62914560)===Pe&&300>ln()-sf?(Je&2)===0&&sl(i,0):zp|=l,nl===Pe&&(nl=0)),Li(i)}function EA(i,r){r===0&&(r=rc()),i=Vr(i,r),i!==null&&(Tr(i,r),Li(i))}function tP(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),EA(i,l)}function nP(i,r){var l=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),EA(i,l)}function iP(i,r){return qt(i,r)}var ff=null,ol=null,Qp=!1,hf=!1,Xp=!1,$s=0;function Li(i){i!==ol&&i.next===null&&(ol===null?ff=ol=i:ol=ol.next=i),hf=!0,Qp||(Qp=!0,rP())}function qa(i,r){if(!Xp&&hf){Xp=!0;do for(var l=!1,u=ff;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var S=u.suspendedLanes,R=u.pingedLanes;_=(1<<31-Et(42|i)+1)-1,_&=g&~(S&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,CA(u,_))}else _=Pe,_=Ti(u,u===rt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Xn(u,_)||(l=!0,CA(u,_));u=u.next}while(l);Xp=!1}}function sP(){vA()}function vA(){hf=Qp=!1;var i=0;$s!==0&&mP()&&(i=$s);for(var r=ln(),l=null,u=ff;u!==null;){var g=u.next,_=AA(u,r);_===0?(u.next=null,l===null?ff=g:l.next=g,g===null&&(ol=l)):(l=u,(i!==0||(_&3)!==0)&&(hf=!0)),u=g}Ot!==0&&Ot!==5||qa(i),$s!==0&&($s=0)}function AA(i,r){for(var l=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-Et(_),R=1<<S,x=g[S];x===-1?((R&l)===0||(R&u)!==0)&&(g[S]=Rd(R,r)):x<=r&&(i.expiredLanes|=R),_&=~R}if(r=rt,l=Pe,l=Ti(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,l===0||i===r&&(Ze===2||Ze===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&As(u),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Xn(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(u!==null&&As(u),Hi(l)){case 2:case 8:l=$l;break;case 32:l=Ss;break;case 268435456:l=ec;break;default:l=Ss}return u=SA.bind(null,i),l=qt(l,u),i.callbackPriority=r,i.callbackNode=l,r}return u!==null&&u!==null&&As(u),i.callbackPriority=2,i.callbackNode=null,2}function SA(i,r){if(Ot!==0&&Ot!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(cf()&&i.callbackNode!==l)return null;var u=Pe;return u=Ti(i,i===rt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(sA(i,u,r),AA(i,ln()),i.callbackNode!=null&&i.callbackNode===l?SA.bind(null,i):null)}function CA(i,r){if(cf())return null;sA(i,r,!0)}function rP(){yP(function(){(Je&6)!==0?qt(Kl,sP):vA()})}function Zp(){if($s===0){var i=Yo;i===0&&(i=yi,yi<<=1,(yi&261888)===0&&(yi=256)),$s=i}return $s}function RA(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Do(""+i)}function IA(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function oP(i,r,l,u,g){if(r==="submit"&&l&&l.stateNode===g){var _=RA((g[Gt]||null).action),S=u.submitter;S&&(r=(r=S[Gt]||null)?RA(r.formAction):S.getAttribute("formAction"),r!==null&&(_=r,S=null));var R=new Di("action","action",null,u,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($s!==0){var x=S?IA(g,S):new FormData(g);yp(l,{pending:!0,data:x,method:g.method,action:_},null,x)}}else typeof _=="function"&&(R.preventDefault(),x=S?IA(g,S):new FormData(g),yp(l,{pending:!0,data:x,method:g.method,action:_},_,x))},currentTarget:g}]})}}for(var Wp=0;Wp<Pd.length;Wp++){var jp=Pd[Wp],lP=jp.toLowerCase(),aP=jp[0].toUpperCase()+jp.slice(1);si(lP,"on"+aP)}si(iv,"onAnimationEnd"),si(sv,"onAnimationIteration"),si(rv,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(CV,"onTransitionRun"),si(RV,"onTransitionStart"),si(IV,"onTransitionCancel"),si(ov,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oa));function wA(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var u=i[l],g=u.event;u=u.listeners;e:{var _=void 0;if(r)for(var S=u.length-1;0<=S;S--){var R=u[S],x=R.instance,H=R.currentTarget;if(R=R.listener,x!==_&&g.isPropagationStopped())break e;_=R,g.currentTarget=H;try{_(g)}catch(Q){Ic(Q)}g.currentTarget=null,_=x}else for(S=0;S<u.length;S++){if(R=u[S],x=R.instance,H=R.currentTarget,R=R.listener,x!==_&&g.isPropagationStopped())break e;_=R,g.currentTarget=H;try{_(g)}catch(Q){Ic(Q)}g.currentTarget=null,_=x}}}}function Ne(i,r){var l=r[Ro];l===void 0&&(l=r[Ro]=new Set);var u=i+"__bubble";l.has(u)||(MA(r,i,2,!1),l.add(u))}function em(i,r,l){var u=0;r&&(u|=4),MA(l,i,u,r)}var df="_reactListening"+Math.random().toString(36).slice(2);function tm(i){if(!i[df]){i[df]=!0,Zl.forEach(function(l){l!=="selectionchange"&&(uP.has(l)||em(l,!1,i),em(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[df]||(r[df]=!0,em("selectionchange",!1,r))}}function MA(i,r,l,u){switch(iS(r)){case 2:var g=LP;break;case 8:g=qP;break;default:g=gm}l=g.bind(null,r,l,i),g=void 0,!Rr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(r,l,{capture:!0,passive:g}):i.addEventListener(r,l,!0):g!==void 0?i.addEventListener(r,l,{passive:g}):i.addEventListener(r,l,!1)}function nm(i,r,l,u,g){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var R=u.stateNode.containerInfo;if(R===g)break;if(S===4)for(S=u.return;S!==null;){var x=S.tag;if((x===3||x===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;R!==null;){if(S=Si(R),S===null)return;if(x=S.tag,x===5||x===6||x===26||x===27){u=_=S;continue e}R=R.parentNode}}u=u.return}bs(function(){var H=_,Q=xn(l),W=[];e:{var Y=lv.get(i);if(Y!==void 0){var K=Di,pe=i;switch(i){case"keypress":if(wr(l)===0)break e;case"keydown":case"keyup":K=Sc;break;case"focusin":pe="focus",K=br;break;case"focusout":pe="blur",K=br;break;case"beforeblur":case"afterblur":K=br;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=E;break;case iv:case sv:case rv:K=gc;break;case ov:K=I;break;case"scroll":case"scrollend":K=ua;break;case"wheel":K=J;break;case"copy":case"cut":case"paste":K=yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ji;break;case"toggle":case"beforetoggle":K=Ie}var Ee=(r&4)!==0,nt=!Ee&&(i==="scroll"||i==="scrollend"),O=Ee?Y!==null?Y+"Capture":null:Y;Ee=[];for(var U=H,G;U!==null;){var Z=U;if(G=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||G===null||O===null||(Z=ei(U,O),Z!=null&&Ee.push(Ba(U,Z,G))),nt)break;U=U.return}0<Ee.length&&(Y=new K(Y,pe,null,l,Q),W.push({event:Y,listeners:Ee}))}}if((r&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&l!==oa&&(pe=l.relatedTarget||l.fromElement)&&(Si(pe)||pe[vi]))break e;if((K||Y)&&(Y=Q.window===Q?Q:(Y=Q.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(pe=l.relatedTarget||l.toElement,K=H,pe=pe?Si(pe):null,pe!==null&&(nt=a(pe),Ee=pe.tag,pe!==nt||Ee!==5&&Ee!==27&&Ee!==6)&&(pe=null)):(K=null,pe=H),K!==pe)){if(Ee=ca,Z="onMouseLeave",O="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=Ji,Z="onPointerLeave",O="onPointerEnter",U="pointer"),nt=K==null?Y:_n(K),G=pe==null?Y:_n(pe),Y=new Ee(Z,U+"leave",K,l,Q),Y.target=nt,Y.relatedTarget=G,Z=null,Si(Q)===H&&(Ee=new Ee(O,U+"enter",pe,l,Q),Ee.target=G,Ee.relatedTarget=nt,Z=Ee),nt=Z,K&&pe)t:{for(Ee=cP,O=K,U=pe,G=0,Z=O;Z;Z=Ee(Z))G++;Z=0;for(var _e=U;_e;_e=Ee(_e))Z++;for(;0<G-Z;)O=Ee(O),G--;for(;0<Z-G;)U=Ee(U),Z--;for(;G--;){if(O===U||U!==null&&O===U.alternate){Ee=O;break t}O=Ee(O),U=Ee(U)}Ee=null}else Ee=null;K!==null&&bA(W,Y,K,Ee,!1),pe!==null&&nt!==null&&bA(W,nt,pe,Ee,!0)}}e:{if(Y=H?_n(H):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var Ge=JE;else if(FE(Y))if(KE)Ge=vV;else{Ge=TV;var ge=_V}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?H&&bo(H.elementType)&&(Ge=JE):Ge=EV;if(Ge&&(Ge=Ge(i,H))){YE(W,Ge,l,Q);break e}ge&&ge(i,Y,H),i==="focusout"&&H&&Y.type==="number"&&H.memoizedProps.value!=null&&ia(Y,"number",Y.value)}switch(ge=H?_n(H):window,i){case"focusin":(FE(ge)||ge.contentEditable==="true")&&(Lo=ge,Nd=H,ma=null);break;case"focusout":ma=Nd=Lo=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,tv(W,l,Q);break;case"selectionchange":if(SV)break;case"keydown":case"keyup":tv(W,l,Q)}var be;if(Ye)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Uo?Dr(i,l)&&(ke="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(Vi&&l.locale!=="ko"&&(Uo||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Uo&&(be=aa()):(bi=Q,la="value"in bi?bi.value:bi.textContent,Uo=!0)),ge=pf(H,ke),0<ge.length&&(ke=new xi(ke,i,null,l,Q),W.push({event:ke,listeners:ge}),be?ke.data=be:(be=ko(l),be!==null&&(ke.data=be)))),(be=Pn?pV(i,l):mV(i,l))&&(ke=pf(H,"onBeforeInput"),0<ke.length&&(ge=new xi("onBeforeInput","beforeinput",null,l,Q),W.push({event:ge,listeners:ke}),ge.data=be)),oP(W,i,H,l,Q)}wA(W,r)})}function Ba(i,r,l){return{instance:i,listener:r,currentTarget:l}}function pf(i,r){for(var l=r+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=ei(i,l),g!=null&&u.unshift(Ba(i,g,_)),g=ei(i,r),g!=null&&u.push(Ba(i,g,_))),i.tag===3)return u;i=i.return}return[]}function cP(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function bA(i,r,l,u,g){for(var _=r._reactName,S=[];l!==null&&l!==u;){var R=l,x=R.alternate,H=R.stateNode;if(R=R.tag,x!==null&&x===u)break;R!==5&&R!==26&&R!==27||H===null||(x=H,g?(H=ei(l,_),H!=null&&S.unshift(Ba(l,H,x))):g||(H=ei(l,_),H!=null&&S.push(Ba(l,H,x)))),l=l.return}S.length!==0&&i.push({event:r,listeners:S})}var fP=/\r\n?/g,hP=/\u0000|\uFFFD/g;function DA(i){return(typeof i=="string"?i:""+i).replace(fP,`
`).replace(hP,"")}function NA(i,r){return r=DA(r),DA(i)===r}function tt(i,r,l,u,g,_){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||hn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&hn(i,""+u);break;case"className":Tn(i,"class",u);break;case"tabIndex":Tn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(i,l,u);break;case"style":ra(i,u,_);break;case"data":if(r!=="object"){Tn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=Do(""+u),i.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&tt(i,r,"name",g.name,g,null),tt(i,r,"formEncType",g.formEncType,g,null),tt(i,r,"formMethod",g.formMethod,g,null),tt(i,r,"formTarget",g.formTarget,g,null)):(tt(i,r,"encType",g.encType,g,null),tt(i,r,"method",g.method,g,null),tt(i,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(l);break}u=Do(""+u),i.setAttribute(l,u);break;case"onClick":u!=null&&(i.onclick=jn);break;case"onScroll":u!=null&&Ne("scroll",i);break;case"onScrollEnd":u!=null&&Ne("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}l=Do(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""+u):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":u===!0?i.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(l,u):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(l,u):i.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(l):i.setAttribute(l,u);break;case"popover":Ne("beforetoggle",i),Ne("toggle",i),wo(i,"popover",u);break;case"xlinkActuate":Nt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":wo(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=dc.get(l)||l,wo(i,l,u))}}function im(i,r,l,u,g,_){switch(l){case"style":ra(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof u=="string"?hn(i,u):(typeof u=="number"||typeof u=="bigint")&&hn(i,""+u);break;case"onScroll":u!=null&&Ne("scroll",i);break;case"onScrollEnd":u!=null&&Ne("scrollend",i);break;case"onClick":u!=null&&(i.onclick=jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),_=i[Gt]||null,_=_!=null?_[l]:null,typeof _=="function"&&i.removeEventListener(r,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,u,g);break e}l in i?i[l]=u:u===!0?i.setAttribute(l,""):wo(i,l,u)}}}function jt(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",i),Ne("load",i);var u=!1,g=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var S=l[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,_,S,l,null)}}g&&tt(i,r,"srcSet",l.srcSet,l,null),u&&tt(i,r,"src",l.src,l,null);return;case"input":Ne("invalid",i);var R=_=S=g=null,x=null,H=null;for(u in l)if(l.hasOwnProperty(u)){var Q=l[u];if(Q!=null)switch(u){case"name":g=Q;break;case"type":S=Q;break;case"checked":x=Q;break;case"defaultChecked":H=Q;break;case"value":_=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:tt(i,r,u,Q,l,null)}}cc(i,_,R,x,H,S,g,!1);return;case"select":Ne("invalid",i),u=S=_=null;for(g in l)if(l.hasOwnProperty(g)&&(R=l[g],R!=null))switch(g){case"value":_=R;break;case"defaultValue":S=R;break;case"multiple":u=R;default:tt(i,r,g,R,l,null)}r=_,l=S,i.multiple=!!u,r!=null?Rs(i,!!u,r,!1):l!=null&&Rs(i,!!u,l,!0);return;case"textarea":Ne("invalid",i),_=g=u=null;for(S in l)if(l.hasOwnProperty(S)&&(R=l[S],R!=null))switch(S){case"value":u=R;break;case"defaultValue":g=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:tt(i,r,S,R,l,null)}Is(i,u,g,_);return;case"option":for(x in l)if(l.hasOwnProperty(x)&&(u=l[x],u!=null))switch(x){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(i,r,x,u,l,null)}return;case"dialog":Ne("beforetoggle",i),Ne("toggle",i),Ne("cancel",i),Ne("close",i);break;case"iframe":case"object":Ne("load",i);break;case"video":case"audio":for(u=0;u<Oa.length;u++)Ne(Oa[u],i);break;case"image":Ne("error",i),Ne("load",i);break;case"details":Ne("toggle",i);break;case"embed":case"source":case"link":Ne("error",i),Ne("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in l)if(l.hasOwnProperty(H)&&(u=l[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(i,r,H,u,l,null)}return;default:if(bo(r)){for(Q in l)l.hasOwnProperty(Q)&&(u=l[Q],u!==void 0&&im(i,r,Q,u,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(u=l[R],u!=null&&tt(i,r,R,u,l,null))}function dP(i,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,S=null,R=null,x=null,H=null,Q=null;for(K in l){var W=l[K];if(l.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":x=W;default:u.hasOwnProperty(K)||tt(i,r,K,null,u,W)}}for(var Y in u){var K=u[Y];if(W=l[Y],u.hasOwnProperty(Y)&&(K!=null||W!=null))switch(Y){case"type":_=K;break;case"name":g=K;break;case"checked":H=K;break;case"defaultChecked":Q=K;break;case"value":S=K;break;case"defaultValue":R=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==W&&tt(i,r,Y,K,u,W)}}Mo(i,S,R,x,H,Q,_,g);return;case"select":K=S=R=Y=null;for(_ in l)if(x=l[_],l.hasOwnProperty(_)&&x!=null)switch(_){case"value":break;case"multiple":K=x;default:u.hasOwnProperty(_)||tt(i,r,_,null,u,x)}for(g in u)if(_=u[g],x=l[g],u.hasOwnProperty(g)&&(_!=null||x!=null))switch(g){case"value":Y=_;break;case"defaultValue":R=_;break;case"multiple":S=_;default:_!==x&&tt(i,r,g,_,u,x)}r=R,l=S,u=K,Y!=null?Rs(i,!!l,Y,!1):!!u!=!!l&&(r!=null?Rs(i,!!l,r,!0):Rs(i,!!l,l?[]:"",!1));return;case"textarea":K=Y=null;for(R in l)if(g=l[R],l.hasOwnProperty(R)&&g!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:tt(i,r,R,null,u,g)}for(S in u)if(g=u[S],_=l[S],u.hasOwnProperty(S)&&(g!=null||_!=null))switch(S){case"value":Y=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==_&&tt(i,r,S,g,u,_)}fc(i,Y,K);return;case"option":for(var pe in l)if(Y=l[pe],l.hasOwnProperty(pe)&&Y!=null&&!u.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:tt(i,r,pe,null,u,Y)}for(x in u)if(Y=u[x],K=l[x],u.hasOwnProperty(x)&&Y!==K&&(Y!=null||K!=null))switch(x){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:tt(i,r,x,Y,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in l)Y=l[Ee],l.hasOwnProperty(Ee)&&Y!=null&&!u.hasOwnProperty(Ee)&&tt(i,r,Ee,null,u,Y);for(H in u)if(Y=u[H],K=l[H],u.hasOwnProperty(H)&&Y!==K&&(Y!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:tt(i,r,H,Y,u,K)}return;default:if(bo(r)){for(var nt in l)Y=l[nt],l.hasOwnProperty(nt)&&Y!==void 0&&!u.hasOwnProperty(nt)&&im(i,r,nt,void 0,u,Y);for(Q in u)Y=u[Q],K=l[Q],!u.hasOwnProperty(Q)||Y===K||Y===void 0&&K===void 0||im(i,r,Q,Y,u,K);return}}for(var O in l)Y=l[O],l.hasOwnProperty(O)&&Y!=null&&!u.hasOwnProperty(O)&&tt(i,r,O,null,u,Y);for(W in u)Y=u[W],K=l[W],!u.hasOwnProperty(W)||Y===K||Y==null&&K==null||tt(i,r,W,Y,u,K)}function xA(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pP(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var g=l[u],_=g.transferSize,S=g.initiatorType,R=g.duration;if(_&&R&&xA(S)){for(S=0,R=g.responseEnd,u+=1;u<l.length;u++){var x=l[u],H=x.startTime;if(H>R)break;var Q=x.transferSize,W=x.initiatorType;Q&&xA(W)&&(x=x.responseEnd,S+=Q*(x<R?1:(R-H)/(x-H)))}if(--u,r+=8*(_+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var sm=null,rm=null;function mf(i){return i.nodeType===9?i:i.ownerDocument}function VA(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PA(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function om(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var lm=null;function mP(){var i=window.event;return i&&i.type==="popstate"?i===lm?!1:(lm=i,!0):(lm=null,!1)}var kA=typeof setTimeout=="function"?setTimeout:void 0,gP=typeof clearTimeout=="function"?clearTimeout:void 0,UA=typeof Promise=="function"?Promise:void 0,yP=typeof queueMicrotask=="function"?queueMicrotask:typeof UA<"u"?function(i){return UA.resolve(null).then(i).catch(_P)}:kA;function _P(i){setTimeout(function(){throw i})}function Qs(i){return i==="head"}function LA(i,r){var l=r,u=0;do{var g=l.nextSibling;if(i.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(u===0){i.removeChild(g),cl(r);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")za(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,za(l);for(var _=l.firstChild;_;){var S=_.nextSibling,R=_.nodeName;_[Ai]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=S}}else l==="body"&&za(i.ownerDocument.body);l=g}while(l);cl(r)}function qA(i,r){var l=i;i=0;do{var u=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=u}while(l)}function am(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":am(l),Io(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function TP(i,r,l,u){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ai])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=zn(i.nextSibling),i===null)break}return null}function EP(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=zn(i.nextSibling),i===null))return null;return i}function OA(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=zn(i.nextSibling),i===null))return null;return i}function um(i){return i.data==="$?"||i.data==="$~"}function cm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function vP(i,r){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||l.readyState!=="loading")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function zn(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var fm=null;function BA(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(r===0)return zn(i.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}i=i.nextSibling}return null}function zA(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return i;r--}else l!=="/$"&&l!=="/&"||r++}i=i.previousSibling}return null}function GA(i,r,l){switch(r=mf(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function za(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Io(i)}var Gn=new Map,HA=new Set;function gf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ls=le.d;le.d={f:AP,r:SP,D:CP,C:RP,L:IP,m:wP,X:bP,S:MP,M:DP};function AP(){var i=ls.f(),r=lf();return i||r}function SP(i){var r=Nn(i);r!==null&&r.tag===5&&r.type==="form"?o0(r):ls.r(i)}var ll=typeof document>"u"?null:document;function FA(i,r,l){var u=ll;if(u&&typeof r=="string"&&r){var g=fn(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),HA.has(g)||(HA.add(g),i={rel:i,crossOrigin:l,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),jt(r,"link",i),Dt(r),u.head.appendChild(r)))}}function CP(i){ls.D(i),FA("dns-prefetch",i,null)}function RP(i,r){ls.C(i,r),FA("preconnect",i,r)}function IP(i,r,l){ls.L(i,r,l);var u=ll;if(u&&i&&r){var g='link[rel="preload"][as="'+fn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+fn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+fn(l.imageSizes)+'"]')):g+='[href="'+fn(i)+'"]';var _=g;switch(r){case"style":_=al(i);break;case"script":_=ul(i)}Gn.has(_)||(i=v({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),Gn.set(_,i),u.querySelector(g)!==null||r==="style"&&u.querySelector(Ga(_))||r==="script"&&u.querySelector(Ha(_))||(r=u.createElement("link"),jt(r,"link",i),Dt(r),u.head.appendChild(r)))}}function wP(i,r){ls.m(i,r);var l=ll;if(l&&i){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ul(i)}if(!Gn.has(_)&&(i=v({rel:"modulepreload",href:i},r),Gn.set(_,i),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ha(_)))return}u=l.createElement("link"),jt(u,"link",i),Dt(u),l.head.appendChild(u)}}}function MP(i,r,l){ls.S(i,r,l);var u=ll;if(u&&i){var g=Ci(u).hoistableStyles,_=al(i);r=r||"default";var S=g.get(_);if(!S){var R={loading:0,preload:null};if(S=u.querySelector(Ga(_)))R.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},l),(l=Gn.get(_))&&hm(i,l);var x=S=u.createElement("link");Dt(x),jt(x,"link",i),x._p=new Promise(function(H,Q){x.onload=H,x.onerror=Q}),x.addEventListener("load",function(){R.loading|=1}),x.addEventListener("error",function(){R.loading|=2}),R.loading|=4,yf(S,r,u)}S={type:"stylesheet",instance:S,count:1,state:R},g.set(_,S)}}}function bP(i,r){ls.X(i,r);var l=ll;if(l&&i){var u=Ci(l).hoistableScripts,g=ul(i),_=u.get(g);_||(_=l.querySelector(Ha(g)),_||(i=v({src:i,async:!0},r),(r=Gn.get(g))&&dm(i,r),_=l.createElement("script"),Dt(_),jt(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function DP(i,r){ls.M(i,r);var l=ll;if(l&&i){var u=Ci(l).hoistableScripts,g=ul(i),_=u.get(g);_||(_=l.querySelector(Ha(g)),_||(i=v({src:i,async:!0,type:"module"},r),(r=Gn.get(g))&&dm(i,r),_=l.createElement("script"),Dt(_),jt(_,"link",i),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function YA(i,r,l,u){var g=(g=Me.current)?gf(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=al(l.href),l=Ci(g).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=al(l.href);var _=Ci(g).hoistableStyles,S=_.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=g.querySelector(Ga(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Gn.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gn.set(i,l),_||NP(g,i,l,S.state))),r&&u===null)throw Error(s(528,""));return S}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ul(l),l=Ci(g).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function al(i){return'href="'+fn(i)+'"'}function Ga(i){return'link[rel="stylesheet"]['+i+"]"}function JA(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function NP(i,r,l,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),jt(r,"link",l),Dt(r),i.head.appendChild(r))}function ul(i){return'[src="'+fn(i)+'"]'}function Ha(i){return"script[async]"+i}function KA(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+fn(l.href)+'"]');if(u)return r.instance=u,Dt(u),u;var g=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Dt(u),jt(u,"style",g),yf(u,l.precedence,i),r.instance=u;case"stylesheet":g=al(l.href);var _=i.querySelector(Ga(g));if(_)return r.state.loading|=4,r.instance=_,Dt(_),_;u=JA(l),(g=Gn.get(g))&&hm(u,g),_=(i.ownerDocument||i).createElement("link"),Dt(_);var S=_;return S._p=new Promise(function(R,x){S.onload=R,S.onerror=x}),jt(_,"link",u),r.state.loading|=4,yf(_,l.precedence,i),r.instance=_;case"script":return _=ul(l.src),(g=i.querySelector(Ha(_)))?(r.instance=g,Dt(g),g):(u=l,(g=Gn.get(_))&&(u=v({},l),dm(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),Dt(g),jt(g,"link",u),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,yf(u,l.precedence,i));return r.instance}function yf(i,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,S=0;S<u.length;S++){var R=u[S];if(R.dataset.precedence===r)_=R;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function hm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function dm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var _f=null;function $A(i,r,l){if(_f===null){var u=new Map,g=_f=new Map;g.set(l,u)}else g=_f,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(i))return u;for(u.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var _=l[g];if(!(_[Ai]||_[bt]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(r)||"";S=i+S;var R=u.get(S);R?R.push(_):u.set(S,[_])}}return u}function QA(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function xP(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function XA(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function VP(i,r,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=al(u.href),_=r.querySelector(Ga(g));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Tf.bind(i),r.then(i,i)),l.state.loading|=4,l.instance=_,Dt(_);return}_=r.ownerDocument||r,u=JA(u),(g=Gn.get(g))&&hm(u,g),_=_.createElement("link"),Dt(_);var S=_;S._p=new Promise(function(R,x){S.onload=R,S.onerror=x}),jt(_,"link",u),l.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Tf.bind(i),r.addEventListener("load",l),r.addEventListener("error",l))}}var pm=0;function PP(i,r){return i.stylesheets&&i.count===0&&vf(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var u=setTimeout(function(){if(i.stylesheets&&vf(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&pm===0&&(pm=62500*pP());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&vf(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>pm?50:800)+r);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ef=null;function vf(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ef=new Map,r.forEach(kP,i),Ef=null,Tf.call(i))}function kP(i,r){if(!(r.state.loading&4)){var l=Ef.get(i);if(l)var u=l.get(null);else{l=new Map,Ef.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var S=g[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}g=r.instance,S=g.getAttribute("data-precedence"),_=l.get(S)||u,_===u&&l.set(null,g),l.set(S,g),this.count++,u=Tf.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var Fa={$$typeof:X,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function UP(i,r,l,u,g,_,S,R,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function ZA(i,r,l,u,g,_,S,R,x,H,Q,W){return i=new UP(i,r,l,S,x,H,Q,W,R),r=1,_===!0&&(r|=24),_=vn(3,null,null,r),i.current=_,_.stateNode=i,r=Kd(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:l,cache:r},Zd(_),i}function WA(i){return i?(i=Bo,i):Bo}function jA(i,r,l,u,g,_){g=WA(g),u.context===null?u.context=g:u.pendingContext=g,u=qs(r),u.payload={element:l},_=_===void 0?null:_,_!==null&&(u.callback=_),l=Os(i,u,r),l!==null&&(yn(l,i,r),Aa(l,i,r))}function eS(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function mm(i,r){eS(i,r),(i=i.alternate)&&eS(i,r)}function tS(i){if(i.tag===13||i.tag===31){var r=Vr(i,67108864);r!==null&&yn(r,i,67108864),mm(i,67108864)}}function nS(i){if(i.tag===13||i.tag===31){var r=In();r=vr(r);var l=Vr(i,r);l!==null&&yn(l,i,r),mm(i,r)}}var Af=!0;function LP(i,r,l,u){var g=$.T;$.T=null;var _=le.p;try{le.p=2,gm(i,r,l,u)}finally{le.p=_,$.T=g}}function qP(i,r,l,u){var g=$.T;$.T=null;var _=le.p;try{le.p=8,gm(i,r,l,u)}finally{le.p=_,$.T=g}}function gm(i,r,l,u){if(Af){var g=ym(u);if(g===null)nm(i,r,u,Sf,l),sS(i,u);else if(BP(g,i,r,l,u))u.stopPropagation();else if(sS(i,u),r&4&&-1<OP.indexOf(i)){for(;g!==null;){var _=Nn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=_i(_.pendingLanes);if(S!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var x=1<<31-Et(S);R.entanglements[1]|=x,S&=~x}Li(_),(Je&6)===0&&(rf=ln()+500,qa(0))}}break;case 31:case 13:R=Vr(_,2),R!==null&&yn(R,_,2),lf(),mm(_,2)}if(_=ym(u),_===null&&nm(i,r,u,Sf,l),_===g)break;g=_}g!==null&&u.stopPropagation()}else nm(i,r,u,null,l)}}function ym(i){return i=xn(i),_m(i)}var Sf=null;function _m(i){if(Sf=null,i=Si(i),i!==null){var r=a(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=c(r),i!==null)return i;i=null}else if(l===31){if(i=h(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Sf=i,null}function iS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yr()){case Kl:return 2;case $l:return 8;case Ss:case Cd:return 32;case ec:return 268435456;default:return 32}default:return 32}}var Tm=!1,Xs=null,Zs=null,Ws=null,Ya=new Map,Ja=new Map,js=[],OP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sS(i,r){switch(i){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Ya.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(r.pointerId)}}function Ka(i,r,l,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},r!==null&&(r=Nn(r),r!==null&&tS(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function BP(i,r,l,u,g){switch(r){case"focusin":return Xs=Ka(Xs,i,r,l,u,g),!0;case"dragenter":return Zs=Ka(Zs,i,r,l,u,g),!0;case"mouseover":return Ws=Ka(Ws,i,r,l,u,g),!0;case"pointerover":var _=g.pointerId;return Ya.set(_,Ka(Ya.get(_)||null,i,r,l,u,g)),!0;case"gotpointercapture":return _=g.pointerId,Ja.set(_,Ka(Ja.get(_)||null,i,r,l,u,g)),!0}return!1}function rS(i){var r=Si(i.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){i.blockedOn=r,Zn(i.priority,function(){nS(l)});return}}else if(r===31){if(r=h(l),r!==null){i.blockedOn=r,Zn(i.priority,function(){nS(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cf(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=ym(i.nativeEvent);if(l===null){l=i.nativeEvent;var u=new l.constructor(l.type,l);oa=u,l.target.dispatchEvent(u),oa=null}else return r=Nn(l),r!==null&&tS(r),i.blockedOn=l,!1;r.shift()}return!0}function oS(i,r,l){Cf(i)&&l.delete(r)}function zP(){Tm=!1,Xs!==null&&Cf(Xs)&&(Xs=null),Zs!==null&&Cf(Zs)&&(Zs=null),Ws!==null&&Cf(Ws)&&(Ws=null),Ya.forEach(oS),Ja.forEach(oS)}function Rf(i,r){i.blockedOn===r&&(i.blockedOn=null,Tm||(Tm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zP)))}var If=null;function lS(i){If!==i&&(If=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){If===i&&(If=null);for(var r=0;r<i.length;r+=3){var l=i[r],u=i[r+1],g=i[r+2];if(typeof u!="function"){if(_m(u||l)===null)continue;break}var _=Nn(l);_!==null&&(i.splice(r,3),r-=3,yp(_,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function cl(i){function r(x){return Rf(x,i)}Xs!==null&&Rf(Xs,i),Zs!==null&&Rf(Zs,i),Ws!==null&&Rf(Ws,i),Ya.forEach(r),Ja.forEach(r);for(var l=0;l<js.length;l++){var u=js[l];u.blockedOn===i&&(u.blockedOn=null)}for(;0<js.length&&(l=js[0],l.blockedOn===null);)rS(l),l.blockedOn===null&&js.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],_=l[u+1],S=g[Gt]||null;if(typeof _=="function")S||lS(l);else if(S){var R=null;if(_&&_.hasAttribute("formAction")){if(g=_,S=_[Gt]||null)R=S.formAction;else if(_m(g)!==null)continue}else R=S.action;typeof R=="function"?l[u+1]=R:(l.splice(u,3),u-=3),lS(l)}}}function aS(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function Em(i){this._internalRoot=i}wf.prototype.render=Em.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,u=In();jA(l,u,i,r,null,null)},wf.prototype.unmount=Em.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;jA(i.current,2,null,i,null,null),lf(),r[vi]=null}};function wf(i){this._internalRoot=i}wf.prototype.unstable_scheduleHydration=function(i){if(i){var r=oc();i={blockedOn:null,target:i,priority:r};for(var l=0;l<js.length&&r!==0&&r<js[l].priority;l++);js.splice(l,0,i),l===0&&rS(i)}};var uS=e.version;if(uS!=="19.2.0")throw Error(s(527,uS,"19.2.0"));le.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(r),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var GP={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{Qn=Mf.inject(GP),$t=Mf}catch{}}return hl.createRoot=function(i,r){if(!o(i))throw Error(s(299));var l=!1,u="",g=g0,_=y0,S=_0;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=ZA(i,1,!1,null,null,l,u,null,g,_,S,aS),i[vi]=r.current,tm(i),new Em(r)},hl.hydrateRoot=function(i,r,l){if(!o(i))throw Error(s(299));var u=!1,g="",_=g0,S=y0,R=_0,x=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(x=l.formState)),r=ZA(i,1,!0,r,l??null,u,g,x,_,S,R,aS),r.context=WA(null),l=r.current,u=In(),u=vr(u),g=qs(u),g.callback=null,Os(l,g,u),l=u,r.current.lanes=l,Tr(r,l),Li(r),i[vi]=r.current,tm(i),new wf(r)},hl.version="19.2.0",hl}var xm;function TS(){if(xm)return Nf.exports;xm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nf.exports=_S(),Nf.exports}var ES=TS();const vS=li(ES);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let AS,SS;function CS(){return{geminiUrl:AS,vertexUrl:SS}}function RS(n,e,t,s){var o,a;if(!(n!=null&&n.baseUrl)){const c=CS();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:t:(a=c.geminiUrl)!==null&&a!==void 0?a:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tr{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const y=n[h];if(Array.isArray(t))for(let p=0;p<y.length;p++){const T=y[p];m(T,e.slice(a+1),t[p])}else for(const p of y)m(p,e.slice(a+1),t)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const y=n[h];m(y[0],e.slice(a+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],o=n[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const c=n[a];return Array.isArray(c)?c.map(h=>f(h,e.slice(s+1),t)):t}else return t}else n=n[o]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function IS(n,e){for(const[t,s]of Object.entries(e)){const o=t.split("."),a=s.split("."),c=new Set;let h=-1;for(let y=0;y<o.length;y++)if(o[y]==="*"){h=y;break}if(h!==-1&&a.length>h)for(let y=h;y<a.length;y++){const p=a[y];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}kf(n,o,a,0,c)}}function kf(n,e,t,s,o){if(s>=e.length||typeof n!="object"||n===null)return;const a=e[s];if(a.endsWith("[]")){const c=a.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const y of h[c])kf(y,e,t,s+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!o.has(p)),y={};for(const p of h)y[p]=c[p];for(const[p,T]of Object.entries(y)){const v=[];for(const A of t.slice(s))A==="*"?v.push(p):v.push(A);m(c,v,T)}for(const p of h)delete c[p]}}else{const c=n;a in c&&kf(c[a],e,t,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uf(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wS(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&m(e,["_url","resourceName"],s),e}function MS(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const c=f(n,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],DS(c)),e}function bS(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const c=f(n,["response"]);return c!=null&&m(e,["response"],NS(c)),e}function DS(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>xS(c))),m(e,["generatedVideos"],a)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function NS(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>VS(c))),m(e,["generatedVideos"],a)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function xS(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],US(t)),e}function VS(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],LS(t)),e}function PS(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function kS(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function US(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Uf(s));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function LS(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Uf(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vm;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vm||(Vm={}));var Pm;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Pm||(Pm={}));var Hn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Hn||(Hn={}));var km;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(km||(km={}));var Um;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Um||(Um={}));var Lm;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Lm||(Lm={}));var qm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(qm||(qm={}));var Om;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Om||(Om={}));var Bm;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Bm||(Bm={}));var zm;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(zm||(zm={}));var Gm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(Gm||(Gm={}));var Hm;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Hm||(Hm={}));var Fm;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fm||(Fm={}));var Ym;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Ym||(Ym={}));var Jm;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Jm||(Jm={}));var $a;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})($a||($a={}));var Km;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Km||(Km={}));var Lf;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lf||(Lf={}));var $m;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})($m||($m={}));var Qm;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qm||(Qm={}));var Xm;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Xm||(Xm={}));var Zm;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Zm||(Zm={}));var Wm;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Wm||(Wm={}));var jm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(jm||(jm={}));var eg;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eg||(eg={}));var tg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(tg||(tg={}));var ng;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(ng||(ng={}));var ig;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ig||(ig={}));var sg;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(sg||(sg={}));var rg;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rg||(rg={}));var og;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(og||(og={}));var lg;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lg||(lg={}));var ag;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ag||(ag={}));var ug;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(ug||(ug={}));var cg;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(cg||(cg={}));var fg;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(fg||(fg={}));var hg;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(hg||(hg={}));var dg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(dg||(dg={}));var pg;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(pg||(pg={}));var mg;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(mg||(mg={}));var gg;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(gg||(gg={}));var yg;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yg||(yg={}));var _g;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_g||(_g={}));var Tg;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Tg||(Tg={}));var Eg;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Eg||(Eg={}));var vg;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(vg||(vg={}));var Ag;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ag||(Ag={}));var Sg;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Sg||(Sg={}));var Jr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Jr||(Jr={}));class qf{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class dl{get text(){var e,t,s,o,a,c,h,y;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",T=!1;const v=[];for(const A of(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[b,V]of Object.entries(A))b!=="text"&&b!=="thought"&&(V!==null||V!==void 0)&&v.push(b);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;T=!0,p+=A.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),T?p:void 0}get data(){var e,t,s,o,a,c,h,y;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const T=[];for(const v of(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[A,b]of Object.entries(v))A!=="inlineData"&&(b!==null||b!==void 0)&&T.push(A);v.inlineData&&typeof v.inlineData.data=="string"&&(p+=atob(v.inlineData.data))}return T.length>0&&console.warn(`there are non-data parts ${T} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,o,a,c,h,y;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(T=>T.functionCall).map(T=>T.functionCall).filter(T=>T!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,o,a,c,h,y,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const T=(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,o,a,c,h,y,p;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const T=(y=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((T==null?void 0:T.length)!==0)return(p=T==null?void 0:T[0])===null||p===void 0?void 0:p.output}}class Cg{}class Rg{}class qS{}class OS{}class BS{}class zS{}class Ig{}class wg{}class Mg{}class GS{}class Qa{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const s=new Qa;let o;const a=e;return t?o=bS(a):o=MS(a),Object.assign(s,o),s}}class bg{}class Dg{}class Ng{}class HS{}class FS{}class YS{}class xg{}class JS{get text(){var e,t,s;let o="",a=!1;const c=[];for(const h of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[y,p]of Object.entries(h))y!=="text"&&y!=="thought"&&p!==null&&c.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,o+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,s;let o="";const a=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[h,y]of Object.entries(c))h!=="inlineData"&&y!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class KS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Vg(n,e){const t=ze(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Pg(n){return Array.isArray(n)?n.map(e=>Xa(e)):[Xa(n)]}function Xa(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function kg(n){const e=Xa(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ug(n){const e=Xa(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Lg(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function qg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Lg(e)):[Lg(n)]}function Of(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Og(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Bg(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function tn(n){if(n==null)throw new Error("ContentUnion is required");return Of(n)?n:{role:"user",parts:qg(n)}}function Bf(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=tn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=tn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>tn(t)):[tn(e)]}function wn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Og(n)||Bg(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tn(n)]}const e=[],t=[],s=Of(n[0]);for(const o of n){const a=Of(o);if(a!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(Og(o)||Bg(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return s||e.push({role:"user",parts:qg(t)}),e}function $S(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Hn).includes(t[0].toUpperCase())?t[0].toUpperCase():Hn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Hn).includes(s.toUpperCase())?s.toUpperCase():Hn.TYPE_UNSPECIFIED})}}function Kr(n){const e={},t=["items"],s=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&$S(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Hn).includes(h.toUpperCase())?h.toUpperCase():Hn.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Kr(h);else if(s.includes(c)){const y=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}y.push(Kr(p))}e[c]=y}else if(o.includes(c)){const y={};for(const[p,T]of Object.entries(h))y[p]=Kr(T);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=h}return e}function zf(n){return Kr(n)}function Gf(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Hf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function $r(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Kr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Kr(e.response));return n}function Qr(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function QS(n,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Oi(n,e){if(typeof e!="string")throw new Error("name must be a string");return QS(n,e,"cachedContents")}function zg(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function us(n){return Uf(n)}function XS(n){return n!=null&&typeof n=="object"&&"name"in n}function ZS(n){return n!=null&&typeof n=="object"&&"video"in n}function WS(n){return n!=null&&typeof n=="object"&&"uri"in n}function Gg(n){var e;let t;if(XS(n)&&(t=n.name),!(WS(n)&&(t=n.uri,t===void 0))&&!(ZS(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Hg(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Fg(n){for(const e of["models","tunedModels","publisherModels"])if(jS(n,e))return n[e];return[]}function jS(n,e){return n!==null&&typeof n=="object"&&e in n}function eC(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function tC(n,e={}){const t=[],s=new Set;for(const o of n){const a=o.name;if(s.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);s.add(a);const c=eC(o,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function Yg(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function nC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Jg(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Xr(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Kg(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iC(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>PC(c))),m(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["inlinedEmbedContentResponses"],a)}return e}function sC(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&m(e,["gcsUri"],s);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function rC(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&m(e,["gcsDestination","outputUriPrefix"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Za(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["metadata","state"]);o!=null&&m(e,["state"],Kg(o));const a=f(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const c=f(n,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const h=f(n,["metadata","updateTime"]);h!=null&&m(e,["updateTime"],h);const y=f(n,["metadata","model"]);y!=null&&m(e,["model"],y);const p=f(n,["metadata","output"]);return p!=null&&m(e,["dest"],iC(Jg(p))),e}function Ff(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["state"]);o!=null&&m(e,["state"],Kg(o));const a=f(n,["error"]);a!=null&&m(e,["error"],a);const c=f(n,["createTime"]);c!=null&&m(e,["createTime"],c);const h=f(n,["startTime"]);h!=null&&m(e,["startTime"],h);const y=f(n,["endTime"]);y!=null&&m(e,["endTime"],y);const p=f(n,["updateTime"]);p!=null&&m(e,["updateTime"],p);const T=f(n,["model"]);T!=null&&m(e,["model"],T);const v=f(n,["inputConfig"]);v!=null&&m(e,["src"],oC(v));const A=f(n,["outputConfig"]);return A!=null&&m(e,["dest"],sC(Jg(A))),e}function oC(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&m(e,["gcsUri"],s);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function lC(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&m(t,["fileName"],s);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>VC(n,c))),m(t,["requests","requests"],a)}return t}function aC(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&m(e,["gcsSource","uris"],s);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function uC(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function cC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function fC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function hC(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],dC(s));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const c=f(n,["urlContextMetadata"]);c!=null&&m(e,["urlContextMetadata"],c);const h=f(n,["avgLogprobs"]);h!=null&&m(e,["avgLogprobs"],h);const y=f(n,["groundingMetadata"]);y!=null&&m(e,["groundingMetadata"],y);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const T=f(n,["logprobsResult"]);T!=null&&m(e,["logprobsResult"],T);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),m(e,["safetyRatings"],A)}return e}function dC(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function $g(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>zC(a))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function pC(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&m(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function mC(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],rC(nC(o))),t}function Qg(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],lC(n,Yg(n,o)));const a=f(e,["config"]);return a!=null&&pC(a,t),t}function gC(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],ze(n,s));const o=f(e,["src"]);o!=null&&m(t,["inputConfig"],aC(Yg(n,o)));const a=f(e,["config"]);return a!=null&&mC(a,t),t}function yC(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&m(e,["batch","displayName"],s),t}function _C(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],RC(n,o));const a=f(e,["config"]);return a!=null&&yC(a,t),t}function TC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function EC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function vC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function AC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function SC(n,e){const t={},s=f(e,["contents"]);if(s!=null){let a=Bf(n,s);Array.isArray(a)&&(a=a.map(c=>c)),m(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(m(t,["_self"],CC(o,t)),IS(t,{"requests[].*":"requests[].request.*"})),t}function CC(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function RC(n,e){const t={},s=f(e,["fileName"]);s!=null&&m(t,["file_name"],s);const o=f(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],SC(n,o)),t}function IC(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function wC(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],$g(tn(o)));const a=f(e,["temperature"]);a!=null&&m(s,["temperature"],a);const c=f(e,["topP"]);c!=null&&m(s,["topP"],c);const h=f(e,["topK"]);h!=null&&m(s,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&m(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&m(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&m(s,["responseLogprobs"],v);const A=f(e,["logprobs"]);A!=null&&m(s,["logprobs"],A);const b=f(e,["presencePenalty"]);b!=null&&m(s,["presencePenalty"],b);const V=f(e,["frequencyPenalty"]);V!=null&&m(s,["frequencyPenalty"],V);const B=f(e,["seed"]);B!=null&&m(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&m(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&m(s,["responseSchema"],zf(ee));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&m(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let q=X;Array.isArray(q)&&(q=q.map(N=>GC(N))),m(t,["safetySettings"],q)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let q=Qr(oe);Array.isArray(q)&&(q=q.map(N=>HC($r(N)))),m(t,["tools"],q)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&m(t,["toolConfig"],he),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&m(t,["cachedContent"],Oi(n,ae));const D=f(e,["responseModalities"]);D!=null&&m(s,["responseModalities"],D);const w=f(e,["mediaResolution"]);w!=null&&m(s,["mediaResolution"],w);const M=f(e,["speechConfig"]);if(M!=null&&m(s,["speechConfig"],Gf(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&m(s,["thinkingConfig"],P);const k=f(e,["imageConfig"]);return k!=null&&m(s,["imageConfig"],k),s}function MC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>hC(p))),m(e,["candidates"],y)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const c=f(n,["responseId"]);c!=null&&m(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&m(e,["usageMetadata"],h),e}function bC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function DC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Xr(n,s)),t}function NC(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function xC(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function VC(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["request","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let h=wn(o);Array.isArray(h)&&(h=h.map(y=>$g(y))),m(t,["request","contents"],h)}const a=f(e,["metadata"]);a!=null&&m(t,["metadata"],a);const c=f(e,["config"]);return c!=null&&m(t,["request","generationConfig"],wC(n,c,f(t,["request"],{}))),t}function PC(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],MC(t));const s=f(n,["error"]);return s!=null&&m(e,["error"],s),e}function kC(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function UC(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function LC(n){const e={},t=f(n,["config"]);return t!=null&&kC(t,e),e}function qC(n){const e={},t=f(n,["config"]);return t!=null&&UC(t,e),e}function OC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Za(c))),m(e,["batchJobs"],a)}return e}function BC(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Ff(c))),m(e,["batchJobs"],a)}return e}function zC(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],uC(o));const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],IC(a));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function GC(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&m(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function HC(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],xC(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["googleMaps"]);a!=null&&m(e,["googleMaps"],NC(a));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(nr||(nr={}));class pl{constructor(e,t,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FC extends tr{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new pl(nr.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Qg(this.apiClient,e),s=t._url,o=me("{model}:batchGenerateContent",s),h=t.batch.inputConfig.requests,y=h.requests,p=[];for(const T of y){const v=Object.assign({},T);if(v.systemInstruction){const A=v.systemInstruction;delete v.systemInstruction;const b=v.request;b.systemInstruction=A,v.request=b}p.push(v)}return h.requests=p,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?s.dest=`${a.slice(0,-6)}/dest`:s.dest=`${a}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=gC(this.apiClient,e);return h=me("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Ff(T))}else{const p=Qg(this.apiClient,e);return h=me("{model}:batchGenerateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>Za(T))}}async createEmbeddingsInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_C(this.apiClient,e);return a=me("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>Za(y))}}async get(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=DC(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Ff(T))}else{const p=bC(this.apiClient,e);return h=me("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>Za(T))}}async cancel(e){var t,s,o,a;let c="",h={};if(this.apiClient.isVertexAI()){const y=fC(this.apiClient,e);c=me("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=cC(this.apiClient,e);c=me("batches/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=qC(e);return h=me("batchPredictionJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=BC(T),A=new xg;return Object.assign(A,v),A})}else{const p=LC(e);return h=me("batches",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=OC(T),A=new xg;return Object.assign(A,v),A})}}async delete(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=EC(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>AC(T))}else{const p=TC(this.apiClient,e);return h=me("batches/{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>vC(T))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YC(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Xg(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>hR(a))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function JC(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=wn(c);Array.isArray(T)&&(T=T.map(v=>Xg(v))),m(e,["contents"],T)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&m(e,["systemInstruction"],Xg(tn(h)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(v=>dR(v))),m(e,["tools"],T)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&m(e,["toolConfig"],p),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function KC(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=wn(c);Array.isArray(v)&&(v=v.map(A=>A)),m(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&m(e,["systemInstruction"],tn(h));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(A=>pR(A))),m(e,["tools"],v)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&m(e,["toolConfig"],p);const T=f(n,["kmsKeyName"]);return e!==void 0&&T!=null&&m(e,["encryption_spec","kmsKeyName"],T),t}function $C(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],Vg(n,s));const o=f(e,["config"]);return o!=null&&JC(o,t),t}function QC(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["model"],Vg(n,s));const o=f(e,["config"]);return o!=null&&KC(o,t),t}function XC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Oi(n,s)),t}function ZC(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Oi(n,s)),t}function WC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function jC(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function eR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function tR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(n,["response"]);c!=null&&m(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&m(e,["responseJsonSchema"],h),e}function nR(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Oi(n,s)),t}function iR(n,e){const t={},s=f(e,["name"]);return s!=null&&m(t,["_url","name"],Oi(n,s)),t}function sR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function rR(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function oR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function lR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function aR(n){const e={},t=f(n,["config"]);return t!=null&&oR(t,e),e}function uR(n){const e={},t=f(n,["config"]);return t!=null&&lR(t,e),e}function cR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["cachedContents"],a)}return e}function fR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["cachedContents"],a)}return e}function hR(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],YC(o));const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],eR(a));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function dR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],rR(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["googleMaps"]);a!=null&&m(e,["googleMaps"],sR(a));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}function pR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(A=>tR(A))),m(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&m(e,["googleSearch"],o);const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const c=f(n,["enterpriseWebSearch"]);c!=null&&m(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&m(e,["urlContext"],y);const p=f(n,["computerUse"]);p!=null&&m(e,["computerUse"],p);const T=f(n,["codeExecution"]);return T!=null&&m(e,["codeExecution"],T),e}function mR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function gR(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function yR(n,e){const t={},s=f(e,["name"]);s!=null&&m(t,["_url","name"],Oi(n,s));const o=f(e,["config"]);return o!=null&&mR(o,t),t}function _R(n,e){const t={},s=f(e,["name"]);s!=null&&m(t,["_url","name"],Oi(n,s));const o=f(e,["config"]);return o!=null&&gR(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TR extends tr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pl(nr.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=QC(this.apiClient,e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=$C(this.apiClient,e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async get(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=iR(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=nR(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async delete(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=ZC(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=jC(T),A=new Dg;return Object.assign(A,v),A})}else{const p=XC(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=WC(T),A=new Dg;return Object.assign(A,v),A})}}async update(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=_R(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>T)}else{const p=yR(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>T)}}async listInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=uR(e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=fR(T),A=new Ng;return Object.assign(A,v),A})}else{const p=aR(e);return h=me("cachedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=cR(T),A=new Ng;return Object.assign(A,v),A})}}}function Zg(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(n){return this instanceof at?(this.v=n,this):new at(n)}function Zr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(b){return function(V){return Promise.resolve(V).then(b,v)}}function h(b,V){s[b]&&(o[b]=function(B){return new Promise(function(F,ee){a.push([b,B,F,ee])>1||y(b,B)})},V&&(o[b]=V(o[b])))}function y(b,V){try{p(s[b](V))}catch(B){A(a[0][3],B)}}function p(b){b.value instanceof at?Promise.resolve(b.value.v).then(T,v):A(a[0][2],b)}function T(b){y("next",b)}function v(b){y("throw",b)}function A(b,V){b(V),a.shift(),a.length&&y(a[0][0],a[0][1])}}function ml(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Zg=="function"?Zg(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(a){t[a]=n[a]&&function(c){return new Promise(function(h,y){c=n[a](c),o(h,y,c.done,c.value)})}}function o(a,c,h,y){Promise.resolve(y).then(function(p){a({value:p,done:h})},c)}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ER(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Wg(t)}function Wg(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vR(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jg(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const o=[];let a=!0;for(;s<t&&n[s].role==="model";)o.push(n[s]),a&&!Wg(n[s])&&(a=!1),s++;a?e.push(...o):e.pop()}return e}class AR{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new SR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class SR{constructor(e,t,s,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),vR(a)}async sendMessage(e){var t;await this.sendPromise;const s=tn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,c,h;const y=await o,p=(c=(a=y.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,T=y.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let A=[];T!=null&&(A=(h=T.slice(v))!==null&&h!==void 0?h:[]);const b=p?[p]:[];this.recordHistory(s,b,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const s=tn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,s)}getHistory(e=!1){const t=e?jg(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var s,o;return Zr(this,arguments,function*(){var c,h,y,p;const T=[];try{for(var v=!0,A=ml(e),b;b=yield at(A.next()),c=b.done,!c;v=!0){p=b.value,v=!1;const V=p;if(ER(V)){const B=(o=(s=V.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;B!==void 0&&T.push(B)}yield yield at(V)}}catch(V){h={error:V}}finally{try{!v&&!c&&(y=A.return)&&(yield at(y.call(A)))}finally{if(h)throw h.error}}this.recordHistory(t,T)})}recordHistory(e,t,s){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...jg(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wa extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Wa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CR(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function RR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function IR(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],Gg(t)),e}function wR(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function MR(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],Gg(t)),e}function bR(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function DR(n){const e={},t=f(n,["config"]);return t!=null&&bR(t,e),e}function NR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xR extends tr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new pl(nr.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=DR(e);return a=me("files",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=NR(y),T=new HS;return Object.assign(T,p),T})}}async createInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=CR(e);return a=me("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>{const p=RR(y),T=new FS;return Object.assign(T,p),T})}}async get(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MR(e);return a=me("files/{file}",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>y)}}async delete(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=IR(e);return a=me("files/{file}",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=wR(y),T=new YS;return Object.assign(T,p),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ja(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function VR(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>$R(a))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function PR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function kR(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(n,["response"]);c!=null&&m(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&m(e,["responseJsonSchema"],h),e}function UR(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const a=f(n,["enableAffectiveDialog"]);a!=null&&m(e,["enableAffectiveDialog"],a);const c=f(n,["frequencyPenalty"]);c!=null&&m(e,["frequencyPenalty"],c);const h=f(n,["logprobs"]);h!=null&&m(e,["logprobs"],h);const y=f(n,["maxOutputTokens"]);y!=null&&m(e,["maxOutputTokens"],y);const p=f(n,["mediaResolution"]);p!=null&&m(e,["mediaResolution"],p);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const v=f(n,["responseJsonSchema"]);v!=null&&m(e,["responseJsonSchema"],v);const A=f(n,["responseLogprobs"]);A!=null&&m(e,["responseLogprobs"],A);const b=f(n,["responseMimeType"]);b!=null&&m(e,["responseMimeType"],b);const V=f(n,["responseModalities"]);V!=null&&m(e,["responseModalities"],V);const B=f(n,["responseSchema"]);B!=null&&m(e,["responseSchema"],B);const F=f(n,["routingConfig"]);F!=null&&m(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&m(e,["seed"],ee);const ie=f(n,["speechConfig"]);ie!=null&&m(e,["speechConfig"],ey(ie));const X=f(n,["stopSequences"]);X!=null&&m(e,["stopSequences"],X);const oe=f(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const he=f(n,["thinkingConfig"]);he!=null&&m(e,["thinkingConfig"],he);const ae=f(n,["topK"]);ae!=null&&m(e,["topK"],ae);const D=f(n,["topP"]);return D!=null&&m(e,["topP"],D),e}function LR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function qR(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function OR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const c=f(n,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","speechConfig"],Hf(v));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","thinkingConfig"],A);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],b);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],VR(tn(V)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Qr(B);Array.isArray(ae)&&(ae=ae.map(D=>XR($r(D)))),m(e,["setup","tools"],ae)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&m(e,["setup","sessionResumption"],QR(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&m(e,["setup","inputAudioTranscription"],ee);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&m(e,["setup","realtimeInputConfig"],X);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&m(e,["setup","proactivity"],he),t}function BR(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],UR(s));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const c=f(n,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","speechConfig"],ey(Hf(v)));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","thinkingConfig"],A);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],b);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],tn(V));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Qr(B);Array.isArray(ae)&&(ae=ae.map(D=>ZR($r(D)))),m(e,["setup","tools"],ae)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&m(e,["setup","sessionResumption"],F);const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&m(e,["setup","inputAudioTranscription"],ee);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&m(e,["setup","realtimeInputConfig"],X);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&m(e,["setup","proactivity"],he),t}function zR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],OR(o,t)),t}function GR(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],BR(o,t)),t}function HR(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function FR(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["weightedPrompts"],s)}return e}function YR(n){const e={},t=f(n,["media"]);if(t!=null){let p=Pg(t);Array.isArray(p)&&(p=p.map(T=>ja(T))),m(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&m(e,["audio"],ja(Ug(s)));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],ja(kg(a)));const c=f(n,["text"]);c!=null&&m(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&m(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&m(e,["activityEnd"],y),e}function JR(n){const e={},t=f(n,["media"]);if(t!=null){let p=Pg(t);Array.isArray(p)&&(p=p.map(T=>T)),m(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&m(e,["audio"],Ug(s));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],kg(a));const c=f(n,["text"]);c!=null&&m(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&m(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&m(e,["activityEnd"],y),e}function KR(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&m(e,["serverContent"],s);const o=f(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const c=f(n,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],WR(c));const h=f(n,["goAway"]);h!=null&&m(e,["goAway"],h);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&m(e,["sessionResumptionUpdate"],y),e}function $R(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],ja(o));const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],PR(a));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function QR(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ey(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&m(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function XR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],qR(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["googleMaps"]);a!=null&&m(e,["googleMaps"],LR(a));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}function ZR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(A=>kR(A))),m(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&m(e,["googleSearch"],o);const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const c=f(n,["enterpriseWebSearch"]);c!=null&&m(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&m(e,["urlContext"],y);const p=f(n,["computerUse"]);p!=null&&m(e,["computerUse"],p);const T=f(n,["codeExecution"]);return T!=null&&m(e,["codeExecution"],T),e}function WR(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&m(e,["cachedContentTokenCount"],s);const o=f(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const c=f(n,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const h=f(n,["totalTokenCount"]);h!=null&&m(e,["totalTokenCount"],h);const y=f(n,["promptTokensDetails"]);if(y!=null){let b=y;Array.isArray(b)&&(b=b.map(V=>V)),m(e,["promptTokensDetails"],b)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(V=>V)),m(e,["cacheTokensDetails"],b)}const T=f(n,["candidatesTokensDetails"]);if(T!=null){let b=T;Array.isArray(b)&&(b=b.map(V=>V)),m(e,["responseTokensDetails"],b)}const v=f(n,["toolUsePromptTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(V=>V)),m(e,["toolUsePromptTokensDetails"],b)}const A=f(n,["trafficType"]);return A!=null&&m(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function eI(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],tI(s));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const c=f(n,["urlContextMetadata"]);c!=null&&m(e,["urlContextMetadata"],c);const h=f(n,["avgLogprobs"]);h!=null&&m(e,["avgLogprobs"],h);const y=f(n,["groundingMetadata"]);y!=null&&m(e,["groundingMetadata"],y);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const T=f(n,["logprobsResult"]);T!=null&&m(e,["logprobsResult"],T);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),m(e,["safetyRatings"],A)}return e}function tI(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function nI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let a=wn(o);Array.isArray(a)&&(a=a.map(c=>c)),m(t,["contents"],a)}return t}function iI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["tokensInfo"],o)}return e}function sI(n){const e={},t=f(n,["values"]);t!=null&&m(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&m(e,["statistics"],rI(s)),e}function rI(n){const e={},t=f(n,["truncated"]);t!=null&&m(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&m(e,["tokenCount"],s),e}function eu(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>cw(a))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function oI(n){const e={},t=f(n,["controlType"]);t!=null&&m(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&m(e,["computeControl"],s),e}function lI(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function aI(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],tn(s));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(h=>uy(h))),m(e,["tools"],c)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],ZI(a)),t}function uI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=wn(o);Array.isArray(c)&&(c=c.map(h=>eu(h))),m(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&lI(a),t}function cI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=wn(o);Array.isArray(c)&&(c=c.map(h=>h)),m(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&aI(a,t),t}function fI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&m(e,["totalTokens"],s);const o=f(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function hI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&m(e,["totalTokens"],s),e}function dI(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function pI(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function mI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function gI(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function yI(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&m(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const v=f(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&m(e,["parameters","includeSafetyAttributes"],v);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&m(e,["parameters","includeRaiReason"],A);const b=f(n,["language"]);e!==void 0&&b!=null&&m(e,["parameters","language"],b);const V=f(n,["outputMimeType"]);e!==void 0&&V!=null&&m(e,["parameters","outputOptions","mimeType"],V);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&m(e,["parameters","outputOptions","compressionQuality"],B);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&m(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&m(e,["labels"],ee);const ie=f(n,["editMode"]);e!==void 0&&ie!=null&&m(e,["parameters","editMode"],ie);const X=f(n,["baseSteps"]);return e!==void 0&&X!=null&&m(e,["parameters","editConfig","baseSteps"],X),t}function _I(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(y=>gw(y))),m(t,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&yI(c,t),t}function TI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>tu(a))),m(e,["generatedImages"],o)}return e}function EI(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function vI(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&m(e,["parameters","autoTruncate"],h),t}function AI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let h=Bf(n,o);Array.isArray(h)&&(h=h.map(y=>y)),m(t,["requests[]","content"],h)}const a=f(e,["config"]);a!=null&&EI(a,t);const c=f(e,["model"]);return c!==void 0&&m(t,["requests[]","model"],ze(n,c)),t}function SI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=Bf(n,o);Array.isArray(c)&&(c=c.map(h=>h)),m(t,["instances[]","content"],c)}const a=f(e,["config"]);return a!=null&&vI(a,t),t}function CI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function RI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>sI(c))),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function II(n){const e={},t=f(n,["endpoint"]);t!=null&&m(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&m(e,["deployedModelId"],s),e}function wI(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function MI(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const c=f(n,["response"]);c!=null&&m(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&m(e,["responseJsonSchema"],h),e}function bI(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],eu(tn(o)));const a=f(e,["temperature"]);a!=null&&m(s,["temperature"],a);const c=f(e,["topP"]);c!=null&&m(s,["topP"],c);const h=f(e,["topK"]);h!=null&&m(s,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&m(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&m(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&m(s,["responseLogprobs"],v);const A=f(e,["logprobs"]);A!=null&&m(s,["logprobs"],A);const b=f(e,["presencePenalty"]);b!=null&&m(s,["presencePenalty"],b);const V=f(e,["frequencyPenalty"]);V!=null&&m(s,["frequencyPenalty"],V);const B=f(e,["seed"]);B!=null&&m(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&m(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&m(s,["responseSchema"],zf(ee));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&m(s,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=f(e,["safetySettings"]);if(t!==void 0&&X!=null){let q=X;Array.isArray(q)&&(q=q.map(N=>yw(N))),m(t,["safetySettings"],q)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let q=Qr(oe);Array.isArray(q)&&(q=q.map(N=>Sw($r(N)))),m(t,["tools"],q)}const he=f(e,["toolConfig"]);if(t!==void 0&&he!=null&&m(t,["toolConfig"],he),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);t!==void 0&&ae!=null&&m(t,["cachedContent"],Oi(n,ae));const D=f(e,["responseModalities"]);D!=null&&m(s,["responseModalities"],D);const w=f(e,["mediaResolution"]);w!=null&&m(s,["mediaResolution"],w);const M=f(e,["speechConfig"]);if(M!=null&&m(s,["speechConfig"],Gf(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&m(s,["thinkingConfig"],P);const k=f(e,["imageConfig"]);return k!=null&&m(s,["imageConfig"],k),s}function DI(n,e,t){const s={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],tn(o));const a=f(e,["temperature"]);a!=null&&m(s,["temperature"],a);const c=f(e,["topP"]);c!=null&&m(s,["topP"],c);const h=f(e,["topK"]);h!=null&&m(s,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&m(s,["candidateCount"],y);const p=f(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const T=f(e,["stopSequences"]);T!=null&&m(s,["stopSequences"],T);const v=f(e,["responseLogprobs"]);v!=null&&m(s,["responseLogprobs"],v);const A=f(e,["logprobs"]);A!=null&&m(s,["logprobs"],A);const b=f(e,["presencePenalty"]);b!=null&&m(s,["presencePenalty"],b);const V=f(e,["frequencyPenalty"]);V!=null&&m(s,["frequencyPenalty"],V);const B=f(e,["seed"]);B!=null&&m(s,["seed"],B);const F=f(e,["responseMimeType"]);F!=null&&m(s,["responseMimeType"],F);const ee=f(e,["responseSchema"]);ee!=null&&m(s,["responseSchema"],zf(ee));const ie=f(e,["responseJsonSchema"]);ie!=null&&m(s,["responseJsonSchema"],ie);const X=f(e,["routingConfig"]);X!=null&&m(s,["routingConfig"],X);const oe=f(e,["modelSelectionConfig"]);oe!=null&&m(s,["modelConfig"],oe);const he=f(e,["safetySettings"]);if(t!==void 0&&he!=null){let $=he;Array.isArray($)&&($=$.map(le=>le)),m(t,["safetySettings"],$)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let $=Qr(ae);Array.isArray($)&&($=$.map(le=>uy($r(le)))),m(t,["tools"],$)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&m(t,["toolConfig"],D);const w=f(e,["labels"]);t!==void 0&&w!=null&&m(t,["labels"],w);const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&m(t,["cachedContent"],Oi(n,M));const P=f(e,["responseModalities"]);P!=null&&m(s,["responseModalities"],P);const k=f(e,["mediaResolution"]);k!=null&&m(s,["mediaResolution"],k);const q=f(e,["speechConfig"]);q!=null&&m(s,["speechConfig"],ay(Gf(q)));const N=f(e,["audioTimestamp"]);N!=null&&m(s,["audioTimestamp"],N);const st=f(e,["thinkingConfig"]);st!=null&&m(s,["thinkingConfig"],st);const gt=f(e,["imageConfig"]);return gt!=null&&m(s,["imageConfig"],gt),s}function ty(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=wn(o);Array.isArray(c)&&(c=c.map(h=>eu(h))),m(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],bI(n,a,t)),t}function ny(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["contents"]);if(o!=null){let c=wn(o);Array.isArray(c)&&(c=c.map(h=>h)),m(t,["contents"],c)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],DI(n,a,t)),t}function iy(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(p=>eI(p))),m(e,["candidates"],y)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const c=f(n,["responseId"]);c!=null&&m(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&m(e,["usageMetadata"],h),e}function sy(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["candidates"],p)}const o=f(n,["createTime"]);o!=null&&m(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const c=f(n,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const h=f(n,["responseId"]);h!=null&&m(e,["responseId"],h);const y=f(n,["usageMetadata"]);return y!=null&&m(e,["usageMetadata"],y),e}function NI(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&m(e,["parameters","includeSafetyAttributes"],y);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&m(e,["parameters","includeRaiReason"],p);const T=f(n,["language"]);e!==void 0&&T!=null&&m(e,["parameters","language"],T);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","mimeType"],v);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&m(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=f(n,["imageSize"]);if(e!==void 0&&b!=null&&m(e,["parameters","sampleImageSize"],b),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function xI(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&m(e,["parameters","seed"],y);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const v=f(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&m(e,["parameters","includeSafetyAttributes"],v);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&m(e,["parameters","includeRaiReason"],A);const b=f(n,["language"]);e!==void 0&&b!=null&&m(e,["parameters","language"],b);const V=f(n,["outputMimeType"]);e!==void 0&&V!=null&&m(e,["parameters","outputOptions","mimeType"],V);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&m(e,["parameters","outputOptions","compressionQuality"],B);const F=f(n,["addWatermark"]);e!==void 0&&F!=null&&m(e,["parameters","addWatermark"],F);const ee=f(n,["labels"]);e!==void 0&&ee!=null&&m(e,["labels"],ee);const ie=f(n,["imageSize"]);e!==void 0&&ie!=null&&m(e,["parameters","sampleImageSize"],ie);const X=f(n,["enhancePrompt"]);return e!==void 0&&X!=null&&m(e,["parameters","enhancePrompt"],X),t}function VI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&NI(a,t),t}function PI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&xI(a,t),t}function kI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>KI(c))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],oy(o)),e}function UI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>tu(c))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],ly(o)),e}function LI(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const c=f(n,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&m(e,["parameters","negativePrompt"],y);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&m(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(n,["lastFrame"]);e!==void 0&&T!=null&&m(e,["instances[0]","lastFrame"],nu(T));const v=f(n,["referenceImages"]);if(e!==void 0&&v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>Uw(b))),m(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function qI(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const h=f(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&m(e,["parameters","aspectRatio"],y);const p=f(n,["resolution"]);e!==void 0&&p!=null&&m(e,["parameters","resolution"],p);const T=f(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const v=f(n,["pubsubTopic"]);e!==void 0&&v!=null&&m(e,["parameters","pubsubTopic"],v);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&m(e,["parameters","negativePrompt"],A);const b=f(n,["enhancePrompt"]);e!==void 0&&b!=null&&m(e,["parameters","enhancePrompt"],b);const V=f(n,["generateAudio"]);e!==void 0&&V!=null&&m(e,["parameters","generateAudio"],V);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&m(e,["instances[0]","lastFrame"],Fn(B));const F=f(n,["referenceImages"]);if(e!==void 0&&F!=null){let X=F;Array.isArray(X)&&(X=X.map(oe=>Lw(oe))),m(e,["instances[0]","referenceImages"],X)}const ee=f(n,["mask"]);e!==void 0&&ee!=null&&m(e,["instances[0]","mask"],kw(ee));const ie=f(n,["compressionQuality"]);return e!==void 0&&ie!=null&&m(e,["parameters","compressionQuality"],ie),t}function OI(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const c=f(n,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],HI(c)),e}function BI(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["metadata"]);s!=null&&m(e,["metadata"],s);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const c=f(n,["response"]);return c!=null&&m(e,["response"],FI(c)),e}function zI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],nu(a));const c=f(e,["video"]);c!=null&&m(t,["instances[0]","video"],cy(c));const h=f(e,["source"]);h!=null&&YI(h,t);const y=f(e,["config"]);return y!=null&&LI(y,t),t}function GI(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],Fn(a));const c=f(e,["video"]);c!=null&&m(t,["instances[0]","video"],fy(c));const h=f(e,["source"]);h!=null&&JI(h,t);const y=f(e,["config"]);return y!=null&&qI(y,t),t}function HI(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>QI(c))),m(e,["generatedVideos"],a)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function FI(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(c=>XI(c))),m(e,["generatedVideos"],a)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function YI(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],nu(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],cy(a)),t}function JI(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Fn(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],fy(a)),t}function KI(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],nw(t));const s=f(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=f(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],oy(o)),e}function tu(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],ry(t));const s=f(n,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=f(n,["_self"]);o!=null&&m(e,["safetyAttributes"],ly(o));const a=f(n,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function $I(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["mask"],ry(t));const s=f(n,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["labels"],o)}return e}function QI(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],Vw(t)),e}function XI(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],Pw(t)),e}function ZI(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const s=f(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const o=f(n,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const a=f(n,["enableAffectiveDialog"]);a!=null&&m(e,["enableAffectiveDialog"],a);const c=f(n,["frequencyPenalty"]);c!=null&&m(e,["frequencyPenalty"],c);const h=f(n,["logprobs"]);h!=null&&m(e,["logprobs"],h);const y=f(n,["maxOutputTokens"]);y!=null&&m(e,["maxOutputTokens"],y);const p=f(n,["mediaResolution"]);p!=null&&m(e,["mediaResolution"],p);const T=f(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const v=f(n,["responseJsonSchema"]);v!=null&&m(e,["responseJsonSchema"],v);const A=f(n,["responseLogprobs"]);A!=null&&m(e,["responseLogprobs"],A);const b=f(n,["responseMimeType"]);b!=null&&m(e,["responseMimeType"],b);const V=f(n,["responseModalities"]);V!=null&&m(e,["responseModalities"],V);const B=f(n,["responseSchema"]);B!=null&&m(e,["responseSchema"],B);const F=f(n,["routingConfig"]);F!=null&&m(e,["routingConfig"],F);const ee=f(n,["seed"]);ee!=null&&m(e,["seed"],ee);const ie=f(n,["speechConfig"]);ie!=null&&m(e,["speechConfig"],ay(ie));const X=f(n,["stopSequences"]);X!=null&&m(e,["stopSequences"],X);const oe=f(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const he=f(n,["thinkingConfig"]);he!=null&&m(e,["thinkingConfig"],he);const ae=f(n,["topK"]);ae!=null&&m(e,["topK"],ae);const D=f(n,["topP"]);return D!=null&&m(e,["topP"],D),e}function WI(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function jI(n,e){const t={},s=f(e,["model"]);return s!=null&&m(t,["_url","name"],ze(n,s)),t}function ew(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function tw(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function nw(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],us(t));const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function ry(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["imageBytes"],us(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function nu(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],us(t));const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function Fn(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&m(e,["bytesBase64Encoded"],us(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function iw(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const c=f(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],Hg(n,h)),s}function sw(n,e,t){const s={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const c=f(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],Hg(n,h)),s}function rw(n,e){const t={},s=f(e,["config"]);return s!=null&&iw(n,s,t),t}function ow(n,e){const t={},s=f(e,["config"]);return s!=null&&sw(n,s,t),t}function lw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let a=Fg(o);Array.isArray(a)&&(a=a.map(c=>Yf(c))),m(e,["models"],a)}return e}function aw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["_self"]);if(o!=null){let a=Fg(o);Array.isArray(a)&&(a=a.map(c=>Jf(c))),m(e,["models"],a)}return e}function uw(n){const e={},t=f(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&m(e,["maskClasses"],s);const o=f(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function Yf(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["version"]);a!=null&&m(e,["version"],a);const c=f(n,["_self"]);c!=null&&m(e,["tunedModelInfo"],Cw(c));const h=f(n,["inputTokenLimit"]);h!=null&&m(e,["inputTokenLimit"],h);const y=f(n,["outputTokenLimit"]);y!=null&&m(e,["outputTokenLimit"],y);const p=f(n,["supportedGenerationMethods"]);return p!=null&&m(e,["supportedActions"],p),e}function Jf(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const s=f(n,["displayName"]);s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["versionId"]);a!=null&&m(e,["version"],a);const c=f(n,["deployedModels"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(A=>II(A))),m(e,["endpoints"],v)}const h=f(n,["labels"]);h!=null&&m(e,["labels"],h);const y=f(n,["_self"]);y!=null&&m(e,["tunedModelInfo"],Rw(y));const p=f(n,["defaultCheckpointId"]);p!=null&&m(e,["defaultCheckpointId"],p);const T=f(n,["checkpoints"]);if(T!=null){let v=T;Array.isArray(v)&&(v=v.map(A=>A)),m(e,["checkpoints"],v)}return e}function cw(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],jR(o));const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],wI(a));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function fw(n){const e={},t=f(n,["productImage"]);return t!=null&&m(e,["image"],Fn(t)),e}function hw(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","editConfig","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const c=f(n,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&m(e,["parameters","addWatermark"],p);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const v=f(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&m(e,["parameters","enhancePrompt"],A);const b=f(n,["labels"]);return e!==void 0&&b!=null&&m(e,["labels"],b),t}function dw(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["source"]);o!=null&&mw(o,t);const a=f(e,["config"]);return a!=null&&hw(a,t),t}function pw(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>tu(o))),m(e,["generatedImages"],s)}return e}function mw(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Fn(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>fw(h))),m(e,["instances[0]","productImages"],c)}return t}function gw(n){const e={},t=f(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],Fn(t));const s=f(n,["referenceId"]);s!=null&&m(e,["referenceId"],s);const o=f(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],uw(a));const c=f(n,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],oI(c));const h=f(n,["styleImageConfig"]);h!=null&&m(e,["styleImageConfig"],h);const y=f(n,["subjectImageConfig"]);return y!=null&&m(e,["subjectImageConfig"],y),e}function oy(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function ly(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function yw(n){const e={};if(f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=f(n,["category"]);t!=null&&m(e,["category"],t);const s=f(n,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function _w(n){const e={},t=f(n,["image"]);return t!=null&&m(e,["image"],Fn(t)),e}function Tw(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&m(e,["parameters","binaryColorThreshold"],h);const y=f(n,["labels"]);return e!==void 0&&y!=null&&m(e,["labels"],y),t}function Ew(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["source"]);o!=null&&Aw(o,t);const a=f(e,["config"]);return a!=null&&Tw(a,t),t}function vw(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>$I(o))),m(e,["generatedMasks"],s)}return e}function Aw(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Fn(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],_w(a)),t}function ay(n){const e={},t=f(n,["voiceConfig"]);if(t!=null&&m(e,["voiceConfig"],t),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=f(n,["languageCode"]);return s!=null&&m(e,["languageCode"],s),e}function Sw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],tw(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["googleMaps"]);a!=null&&m(e,["googleMaps"],ew(a));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}function uy(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(A=>MI(A))),m(e,["functionDeclarations"],v)}const s=f(n,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=f(n,["googleSearch"]);o!=null&&m(e,["googleSearch"],o);const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const c=f(n,["enterpriseWebSearch"]);c!=null&&m(e,["enterpriseWebSearch"],c);const h=f(n,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const y=f(n,["urlContext"]);y!=null&&m(e,["urlContext"],y);const p=f(n,["computerUse"]);p!=null&&m(e,["computerUse"],p);const T=f(n,["codeExecution"]);return T!=null&&m(e,["codeExecution"],T),e}function Cw(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function Rw(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&m(e,["createTime"],s);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function Iw(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function ww(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function Mw(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","name"],ze(n,s));const o=f(e,["config"]);return o!=null&&Iw(o,t),t}function bw(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&ww(o,t),t}function Dw(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=f(n,["includeRaiReason"]);e!==void 0&&o!=null&&m(e,["parameters","includeRaiReason"],o);const a=f(n,["outputMimeType"]);e!==void 0&&a!=null&&m(e,["parameters","outputOptions","mimeType"],a);const c=f(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&m(e,["parameters","outputOptions","compressionQuality"],c);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=f(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const p=f(n,["labels"]);e!==void 0&&p!=null&&m(e,["labels"],p);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const v=f(n,["mode"]);return e!==void 0&&v!=null&&m(e,["parameters","mode"],v),t}function Nw(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["_url","model"],ze(n,s));const o=f(e,["image"]);o!=null&&m(t,["instances[0]","image"],Fn(o));const a=f(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const c=f(e,["config"]);return c!=null&&Dw(c,t),t}function xw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>tu(a))),m(e,["generatedImages"],o)}return e}function Vw(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&m(e,["videoBytes"],us(s));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function Pw(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],us(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function kw(n){const e={},t=f(n,["image"]);t!=null&&m(e,["_self"],Fn(t));const s=f(n,["maskMode"]);return s!=null&&m(e,["maskMode"],s),e}function Uw(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],nu(t));const s=f(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function Lw(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],Fn(t));const s=f(n,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function cy(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&m(e,["encodedVideo"],us(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function fy(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&m(e,["bytesBase64Encoded"],us(s));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qw="Content-Type",Ow="X-Server-Timeout",Bw="User-Agent",Kf="x-goog-api-client",zw="google-genai-sdk/1.25.0",Gw="v1beta1",Hw="v1beta",hy=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Fw{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Gw,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Hw,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const o=[this.getRequestUrlInternal(t)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))o.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?s[o]=Object.assign(Object.assign({},s[o]),a):a!==void 0&&(s[o]=a);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s){if(t&&t.timeout||s){const o=new AbortController,a=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=a}return t&&t.extraBody!==null&&Yw(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await dy(o),new qf(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await dy(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return Zr(this,arguments,function*(){const o=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:y}=yield at(o.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=a.decode(y,{stream:!0});try{const v=JSON.parse(p);if("error"in v){const A=JSON.parse(JSON.stringify(v.error)),b=A.status,V=A.code,B=`got status: ${b}. ${JSON.stringify(v)}`;if(V>=400&&V<600)throw new Wa({message:B,status:V})}}catch(v){if(v.name==="ApiError")throw v}c+=p;let T=c.match(hy);for(;T;){const v=T[1];try{const A=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new qf(A)),c=c.slice(T[0].length),T=c.match(hy)}catch(A){throw new Error(`exception parsing stream chunk ${v}. ${A}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=zw+" "+this.clientOptions.userAgentExtra;return e[Bw]=t,e[Kf]=t,e[qw]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))t.append(s,o);e.timeout&&e.timeout>0&&t.append(Ow,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);o.sizeBytes=String(c.size);const h=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=h;const y=await this.fetchUploadUrl(o,t);return a.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var s;let o={};t!=null&&t.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},c=await this.request({path:me("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:o});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function dy(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(s);throw t>=400&&t<600?new Wa({message:o,status:t}):new Error(o)}}function Yw(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(a,c){const h=Object.assign({},a);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const p=c[y],T=h[y];p&&typeof p=="object"&&!Array.isArray(p)&&T&&typeof T=="object"&&!Array.isArray(T)?h[y]=s(T,p):(T&&p&&typeof T!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof T}, New type: ${typeof p}. Overwriting.`),h[y]=p)}return h}const o=s(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jw="mcp_used/unknown";let Kw=!1;function py(n){for(const e of n)if($w(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Kw}function my(n){var e;const t=(e=n[Kf])!==null&&e!==void 0?e:"";n[Kf]=(t+` ${Jw}`).trimStart()}function $w(n){return n!==null&&typeof n=="object"&&n instanceof $f}function Qw(n,e=100){return Zr(this,arguments,function*(){let s,o=0;for(;o<e;){const a=yield at(n.listTools({cursor:s}));for(const c of a.tools)yield yield at(c),o++;if(!a.nextCursor)break;s=a.nextCursor}})}class $f{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new $f(e,t)}async initialize(){var e,t,s,o;if(this.mcpTools.length>0)return;const a={},c=[];for(const T of this.mcpClients)try{for(var h=!0,y=(t=void 0,ml(Qw(T))),p;p=await y.next(),e=p.done,!e;h=!0){o=p.value,h=!1;const v=o;c.push(v);const A=v.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=T}}catch(v){t={error:v}}finally{try{!h&&!e&&(s=y.return)&&await s.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),tC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,a);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Xw(n,e,t){const s=new KS;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(s,o),e(s)}class Zw{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=e1(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const T=new Promise(X=>{p=X}),v=e.callbacks,A=function(){p({})},b=this.apiClient,V={onopen:A,onmessage:X=>{Xw(b,v.onmessage,X)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(X){},onclose:(s=v==null?void 0:v.onclose)!==null&&s!==void 0?s:function(X){}},B=this.webSocketFactory.create(y,jw(c),V);B.connect(),await T;const ie={setup:{model:ze(this.apiClient,e.model)}};return B.send(JSON.stringify(ie)),new Ww(B,this.apiClient)}}class Ww{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=FR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=HR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Jr.PLAY)}pause(){this.sendPlaybackControl(Jr.PAUSE)}stop(){this.sendPlaybackControl(Jr.STOP)}resetContext(){this.sendPlaybackControl(Jr.RESET_CONTEXT)}close(){this.conn.close()}}function jw(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function e1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function n1(n,e,t){const s=new JS;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const c=KR(a);Object.assign(s,c)}else Object.assign(s,a);e(s)}class i1{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new Zw(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,o,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let T;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&py(e.config.tools)&&my(v);const A=l1(v);if(this.apiClient.isVertexAI())T=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A);else{const M=this.apiClient.getApiKey();let P="BidiGenerateContent",k="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",k="access_token"),T=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${P}?${k}=${M}`}let b=()=>{};const V=new Promise(M=>{b=M}),B=e.callbacks,F=function(){var M;(M=B==null?void 0:B.onopen)===null||M===void 0||M.call(B),b({})},ee=this.apiClient,ie={onopen:F,onmessage:M=>{n1(ee,B.onmessage,M)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(M){},onclose:(s=B==null?void 0:B.onclose)!==null&&s!==void 0?s:function(M){}},X=this.webSocketFactory.create(T,o1(A),ie);X.connect(),await V;let oe=ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const M=this.apiClient.getProject(),P=this.apiClient.getLocation();oe=`projects/${M}/locations/${P}/`+oe}let he={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$a.AUDIO]}:e.config.responseModalities=[$a.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],D=[];for(const M of ae)if(this.isCallableTool(M)){const P=M;D.push(await P.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const w={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?he=GR(this.apiClient,w):he=zR(this.apiClient,w),delete he.config,X.send(JSON.stringify(he)),new r1(X,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const s1={turnComplete:!0};class r1{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=wn(t.turns),e.isVertexAI()||(s=s.map(o=>eu(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const a of s){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(t1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},s1),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:JR(e)}:t={realtimeInput:YR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function o1(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function l1(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gy=10;function yy(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Wr(c)){o=!0;break}if(!o)return!0;const a=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Wr(n){return"callTool"in n&&typeof n.callTool=="function"}function a1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Wr(o)))!==null&&s!==void 0?s:!1}function u1(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>!Wr(o)))!==null&&s!==void 0?s:!1}function _y(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c1 extends tr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,o,a,c,h;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!a1(t)||yy(t.config))return await this.generateContentInternal(y);if(u1(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,T;const v=wn(y.contents),A=(a=(o=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:gy;let b=0;for(;b<A&&(p=await this.generateContentInternal(y),!(!p.functionCalls||p.functionCalls.length===0));){const V=p.candidates[0].content,B=[];for(const F of(h=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Wr(F)){const ie=await F.callTool(p.functionCalls);B.push(...ie)}b++,T={role:"user",parts:B},y.contents=wn(y.contents),y.contents.push(V),y.contents.push(T),_y(y.config)&&(v.push(V),v.push(T))}return _y(y.config)&&(p.automaticFunctionCallingHistory=v),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),yy(t.config)){const s=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(s)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var o;let a;const c=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((o=y==null?void 0:y.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=y==null?void 0:y.safetyAttributes:c.push(y);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new pl(nr.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var s,o,a,c,h,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(a=t.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((y=(h=t.source)===null||h===void 0?void 0:h.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const c=await Promise.all(a.map(async y=>Wr(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&py(e.config.tools)){const y=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),my(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var t,s,o;const a=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Wr(c)){const h=c,y=await h.tool();for(const p of(o=y.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var t,s,o;const a=(o=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:gy;let c=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(p,T,v){var A,b;return Zr(this,arguments,function*(){for(var V,B,F,ee;h<a;){c&&(h++,c=!1);const he=yield at(p.processParamsMaybeAddMcpUsage(v)),ae=yield at(p.generateContentStreamInternal(he)),D=[],w=[];try{for(var ie=!0,X=(B=void 0,ml(ae)),oe;oe=yield at(X.next()),V=oe.done,!V;ie=!0){ee=oe.value,ie=!1;const M=ee;if(yield yield at(M),M.candidates&&(!((A=M.candidates[0])===null||A===void 0)&&A.content)){w.push(M.candidates[0].content);for(const P of(b=M.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(h<a&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(T.has(P.functionCall.name)){const k=yield at(T.get(P.functionCall.name).callTool([P.functionCall]));D.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${T.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(M){B={error:M}}finally{try{!ie&&!V&&(F=X.return)&&(yield at(F.call(X)))}finally{if(B)throw B.error}}if(D.length>0){c=!0;const M=new dl;M.candidates=[{content:{role:"user",parts:D}}],yield yield at(M);const P=[];P.push(...w),P.push({role:"user",parts:D});const k=wn(v.contents).concat(P);v.contents=k}else break}})})(this,y,e)}async generateContentInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=ny(this.apiClient,e);return h=me("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=sy(T),A=new dl;return Object.assign(A,v),A})}else{const p=ty(this.apiClient,e);return h=me("{model}:generateContent",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=iy(T),A=new dl;return Object.assign(A,v),A})}}async generateContentStreamInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=ny(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(v){return Zr(this,arguments,function*(){var A,b,V,B;try{for(var F=!0,ee=ml(v),ie;ie=yield at(ee.next()),A=ie.done,!A;F=!0){B=ie.value,F=!1;const X=B,oe=sy(yield at(X.json()));oe.sdkHttpResponse={headers:X.headers};const he=new dl;Object.assign(he,oe),yield yield at(he)}}catch(X){b={error:X}}finally{try{!F&&!A&&(V=ee.return)&&(yield at(V.call(ee)))}finally{if(b)throw b.error}}})})}else{const p=ty(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(v){return Zr(this,arguments,function*(){var A,b,V,B;try{for(var F=!0,ee=ml(v),ie;ie=yield at(ee.next()),A=ie.done,!A;F=!0){B=ie.value,F=!1;const X=B,oe=iy(yield at(X.json()));oe.sdkHttpResponse={headers:X.headers};const he=new dl;Object.assign(he,oe),yield yield at(he)}}catch(X){b={error:X}}finally{try{!F&&!A&&(V=ee.return)&&(yield at(V.call(ee)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=SI(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=RI(T),A=new Cg;return Object.assign(A,v),A})}else{const p=AI(this.apiClient,e);return h=me("{model}:batchEmbedContents",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=CI(T),A=new Cg;return Object.assign(A,v),A})}}async generateImagesInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=PI(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=UI(T),A=new Rg;return Object.assign(A,v),A})}else{const p=VI(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=kI(T),A=new Rg;return Object.assign(A,v),A})}}async editImageInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const h=_I(this.apiClient,e);return a=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=TI(y),T=new qS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const h=Nw(this.apiClient,e);return a=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=xw(y),T=new OS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const h=dw(this.apiClient,e);return a=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>{const p=pw(y),T=new BS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const h=Ew(this.apiClient,e);return a=me("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o.then(y=>{const p=vw(y),T=new zS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=jI(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Jf(T))}else{const p=WI(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>Yf(T))}}async listInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=ow(this.apiClient,e);return h=me("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=aw(T),A=new Ig;return Object.assign(A,v),A})}else{const p=rw(this.apiClient,e);return h=me("{models_url}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=lw(T),A=new Ig;return Object.assign(A,v),A})}}async update(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=bw(this.apiClient,e);return h=me("{model}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>Jf(T))}else{const p=Mw(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>Yf(T))}}async delete(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=pI(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=gI(T),A=new wg;return Object.assign(A,v),A})}else{const p=dI(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=mI(T),A=new wg;return Object.assign(A,v),A})}}async countTokens(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=cI(this.apiClient,e);return h=me("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=hI(T),A=new Mg;return Object.assign(A,v),A})}else{const p=uI(this.apiClient,e);return h=me("{model}:countTokens",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=fI(T),A=new Mg;return Object.assign(A,v),A})}}async computeTokens(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const h=nI(this.apiClient,e);return a=me("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>{const p=iI(y),T=new GS;return Object.assign(T,p),T})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=GI(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c.then(T=>{const v=BI(T),A=new Qa;return Object.assign(A,v),A})}else{const p=zI(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c.then(T=>{const v=OI(T),A=new Qa;return Object.assign(A,v),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f1 extends tr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:c,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=kS(e);return h=me("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json()),c}else{const p=PS(e);return h=me("{operationName}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const h=wS(e);return a=me("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["data"]);t!=null&&m(e,["data"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function d1(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>v1(a))),m(e,["parts"],o)}const s=f(n,["role"]);return s!=null&&m(e,["role"],s),e}function p1(n,e,t){const s={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const c=f(e,["uses"]);t!==void 0&&c!=null&&m(t,["uses"],c);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&m(t,["bidiGenerateContentSetup"],E1(n,h));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&m(t,["fieldMask"],y),s}function m1(n,e){const t={},s=f(e,["config"]);return s!=null&&m(t,["config"],p1(n,s,t)),t}function g1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function y1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function _1(n){const e={},t=f(n,["timeRangeFilter"]);if(t!=null&&m(e,["timeRangeFilter"],t),f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function T1(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const c=f(n,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const T=f(n,["seed"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","seed"],T);const v=f(n,["speechConfig"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","speechConfig"],Hf(v));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","thinkingConfig"],A);const b=f(n,["enableAffectiveDialog"]);e!==void 0&&b!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],b);const V=f(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],d1(tn(V)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ae=Qr(B);Array.isArray(ae)&&(ae=ae.map(D=>S1($r(D)))),m(e,["setup","tools"],ae)}const F=f(n,["sessionResumption"]);e!==void 0&&F!=null&&m(e,["setup","sessionResumption"],A1(F));const ee=f(n,["inputAudioTranscription"]);e!==void 0&&ee!=null&&m(e,["setup","inputAudioTranscription"],ee);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const X=f(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&m(e,["setup","realtimeInputConfig"],X);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const he=f(n,["proactivity"]);return e!==void 0&&he!=null&&m(e,["setup","proactivity"],he),t}function E1(n,e){const t={},s=f(e,["model"]);s!=null&&m(t,["setup","model"],ze(n,s));const o=f(e,["config"]);return o!=null&&m(t,["config"],T1(o,t)),t}function v1(n){const e={},t=f(n,["videoMetadata"]);t!=null&&m(e,["videoMetadata"],t);const s=f(n,["thought"]);s!=null&&m(e,["thought"],s);const o=f(n,["inlineData"]);o!=null&&m(e,["inlineData"],h1(o));const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],g1(a));const c=f(n,["thoughtSignature"]);c!=null&&m(e,["thoughtSignature"],c);const h=f(n,["functionCall"]);h!=null&&m(e,["functionCall"],h);const y=f(n,["codeExecutionResult"]);y!=null&&m(e,["codeExecutionResult"],y);const p=f(n,["executableCode"]);p!=null&&m(e,["executableCode"],p);const T=f(n,["functionResponse"]);T!=null&&m(e,["functionResponse"],T);const v=f(n,["text"]);return v!=null&&m(e,["text"],v),e}function A1(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function S1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(T=>T)),m(e,["functionDeclarations"],p)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearch"]);s!=null&&m(e,["googleSearch"],_1(s));const o=f(n,["googleSearchRetrieval"]);if(o!=null&&m(e,["googleSearchRetrieval"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["googleMaps"]);a!=null&&m(e,["googleMaps"],y1(a));const c=f(n,["urlContext"]);c!=null&&m(e,["urlContext"],c);const h=f(n,["computerUse"]);h!=null&&m(e,["computerUse"],h);const y=f(n,["codeExecution"]);return y!=null&&m(e,["codeExecution"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C1(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function R1(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const a=s.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=C1(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];o.length>0&&(h=o.map(p=>c.includes(p)?`generationConfig.${p}`:p));const y=[];a&&y.push(a),h.length>0&&y.push(...h),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class I1 extends tr{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=m1(this.apiClient,e);a=me("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const y=R1(h,e.config);return o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function M1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function b1(n,e){const t={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=f(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&m(e,["displayName"],s),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(n,["epochCount"]);e!==void 0&&o!=null&&m(e,["tuningTask","hyperparameters","epochCount"],o);const a=f(n,["learningRateMultiplier"]);if(a!=null&&m(t,["tuningTask","hyperparameters","learningRateMultiplier"],a),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=f(n,["batchSize"]);e!==void 0&&c!=null&&m(e,["tuningTask","hyperparameters","batchSize"],c);const h=f(n,["learningRate"]);if(e!==void 0&&h!=null&&m(e,["tuningTask","hyperparameters","learningRate"],h),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function D1(n,e){const t={},s=f(n,["validationDataset"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec"],Y1(s,t));const o=f(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&m(e,["tunedModelDisplayName"],o);const a=f(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const c=f(n,["epochCount"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const h=f(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const y=f(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const p=f(n,["adapterSize"]);if(e!==void 0&&p!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],p),f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);return e!==void 0&&T!=null&&m(e,["labels"],T),t}function N1(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&m(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&m(e,["tuningTask","trainingData"],G1(o));const a=f(n,["config"]);return a!=null&&b1(a,e),e}function x1(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const s=f(n,["preTunedModel"]);s!=null&&m(e,["preTunedModel"],s);const o=f(n,["trainingDataset"]);o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],H1(o,e));const a=f(n,["config"]);return a!=null&&D1(a,e),e}function V1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function P1(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function k1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function U1(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function L1(n){const e={},t=f(n,["config"]);return t!=null&&k1(t,e),e}function q1(n){const e={},t=f(n,["config"]);return t!=null&&U1(t,e),e}function O1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Ty(c))),m(e,["tuningJobs"],a)}return e}function B1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=f(n,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Qf(c))),m(e,["tuningJobs"],a)}return e}function z1(n){const e={},t=f(n,["name"]);t!=null&&m(e,["model"],t);const s=f(n,["name"]);return s!=null&&m(e,["endpoint"],s),e}function G1(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=f(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["examples","examples"],s)}return e}function H1(n,e){const t={},s=f(n,["gcsUri"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o),f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Ty(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["state"]);o!=null&&m(e,["state"],zg(o));const a=f(n,["createTime"]);a!=null&&m(e,["createTime"],a);const c=f(n,["tuningTask","startTime"]);c!=null&&m(e,["startTime"],c);const h=f(n,["tuningTask","completeTime"]);h!=null&&m(e,["endTime"],h);const y=f(n,["updateTime"]);y!=null&&m(e,["updateTime"],y);const p=f(n,["description"]);p!=null&&m(e,["description"],p);const T=f(n,["baseModel"]);T!=null&&m(e,["baseModel"],T);const v=f(n,["_self"]);v!=null&&m(e,["tunedModel"],z1(v));const A=f(n,["customBaseModel"]);A!=null&&m(e,["customBaseModel"],A);const b=f(n,["experiment"]);b!=null&&m(e,["experiment"],b);const V=f(n,["labels"]);V!=null&&m(e,["labels"],V);const B=f(n,["outputUri"]);B!=null&&m(e,["outputUri"],B);const F=f(n,["pipelineJob"]);F!=null&&m(e,["pipelineJob"],F);const ee=f(n,["serviceAccount"]);ee!=null&&m(e,["serviceAccount"],ee);const ie=f(n,["tunedModelDisplayName"]);ie!=null&&m(e,["tunedModelDisplayName"],ie);const X=f(n,["veoTuningSpec"]);return X!=null&&m(e,["veoTuningSpec"],X),e}function Qf(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["state"]);o!=null&&m(e,["state"],zg(o));const a=f(n,["createTime"]);a!=null&&m(e,["createTime"],a);const c=f(n,["startTime"]);c!=null&&m(e,["startTime"],c);const h=f(n,["endTime"]);h!=null&&m(e,["endTime"],h);const y=f(n,["updateTime"]);y!=null&&m(e,["updateTime"],y);const p=f(n,["error"]);p!=null&&m(e,["error"],p);const T=f(n,["description"]);T!=null&&m(e,["description"],T);const v=f(n,["baseModel"]);v!=null&&m(e,["baseModel"],v);const A=f(n,["tunedModel"]);A!=null&&m(e,["tunedModel"],A);const b=f(n,["preTunedModel"]);b!=null&&m(e,["preTunedModel"],b);const V=f(n,["supervisedTuningSpec"]);V!=null&&m(e,["supervisedTuningSpec"],V);const B=f(n,["tuningDataStats"]);B!=null&&m(e,["tuningDataStats"],B);const F=f(n,["encryptionSpec"]);F!=null&&m(e,["encryptionSpec"],F);const ee=f(n,["partnerModelTuningSpec"]);ee!=null&&m(e,["partnerModelTuningSpec"],ee);const ie=f(n,["customBaseModel"]);ie!=null&&m(e,["customBaseModel"],ie);const X=f(n,["experiment"]);X!=null&&m(e,["experiment"],X);const oe=f(n,["labels"]);oe!=null&&m(e,["labels"],oe);const he=f(n,["outputUri"]);he!=null&&m(e,["outputUri"],he);const ae=f(n,["pipelineJob"]);ae!=null&&m(e,["pipelineJob"],ae);const D=f(n,["serviceAccount"]);D!=null&&m(e,["serviceAccount"],D);const w=f(n,["tunedModelDisplayName"]);w!=null&&m(e,["tunedModelDisplayName"],w);const M=f(n,["veoTuningSpec"]);return M!=null&&m(e,["veoTuningSpec"],M),e}function F1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&m(e,["name"],s);const o=f(n,["metadata"]);o!=null&&m(e,["metadata"],o);const a=f(n,["done"]);a!=null&&m(e,["done"],a);const c=f(n,["error"]);return c!=null&&m(e,["error"],c),e}function Y1(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&m(t,["validationDatasetUri"],s);const o=f(n,["vertexDatasetResource"]);return e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J1 extends tr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new pl(nr.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:Lf.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=P1(e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>Qf(T))}else{const p=V1(e);return h=me("{name}",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>Ty(T))}}async listInternal(e){var t,s,o,a;let c,h="",y={};if(this.apiClient.isVertexAI()){const p=q1(e);return h=me("tuningJobs",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=B1(T),A=new bg;return Object.assign(A,v),A})}else{const p=L1(e);return h=me("tunedModels",p._url),y=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(T=>T.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:T.headers},A})),c.then(T=>{const v=O1(T),A=new bg;return Object.assign(A,v),A})}}async cancel(e){var t,s,o,a;let c="",h={};if(this.apiClient.isVertexAI()){const y=M1(e);c=me("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=w1(e);c=me("{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const h=x1(e);return a=me("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>Qf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let o,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=N1(e);return a=me("tunedModels",h._url),c=h._query,delete h._url,delete h._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(p=>{const T=p;return T.sdkHttpResponse={headers:y.headers},T})),o.then(y=>F1(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K1{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const $1=1024*1024*8,Q1=3,X1=1e3,Z1=2,Xf="x-goog-upload-status";async function W1(n,e,t){var s,o,a;let c=0,h=0,y=new qf(new Response),p="upload";for(c=n.size;h<c;){const v=Math.min($1,c-h),A=n.slice(h,h+v);h+v>=c&&(p+=", finalize");let b=0,V=X1;for(;b<Q1&&(y=await t.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(v)}}}),!(!((s=y==null?void 0:y.headers)===null||s===void 0)&&s[Xf]));)b++,await eM(V),V=V*Z1;if(h+=v,((o=y==null?void 0:y.headers)===null||o===void 0?void 0:o[Xf])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const T=await(y==null?void 0:y.json());if(((a=y==null?void 0:y.headers)===null||a===void 0?void 0:a[Xf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return T.file}async function j1(n){return{size:n.size,type:n.type}}function eM(n){return new Promise(e=>setTimeout(e,n))}class tM{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W1(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await j1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nM{create(e,t,s){return new iM(e,t,s)}}class iM{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ey="x-goog-api-key";class sM{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ey)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ey,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rM="gl-node/";class oM{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=RS(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new sM(this.apiKey);this.apiClient=new Fw({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:rM+"web",uploader:new tM,downloader:new K1}),this.models=new c1(this.apiClient),this.live=new i1(this.apiClient,o,new nM),this.batches=new FC(this.apiClient),this.chats=new AR(this.models,this.apiClient),this.caches=new TR(this.apiClient),this.files=new xR(this.apiClient),this.operations=new f1(this.apiClient),this.authTokens=new I1(this.apiClient),this.tunings=new J1(this.apiClient)}}const lM=()=>{};var vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},aM=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],h=n[t++],y=((o&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const a=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Sy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,h=c?n[o+1]:0,y=o+2<n.length,p=y?n[o+2]:0,T=a>>2,v=(a&3)<<4|h>>4;let A=(h&15)<<2|p>>6,b=p&63;y||(b=64,c||(A=64)),s.push(t[T],t[v],t[A],t[b])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ay(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const p=o<n.length?t[n.charAt(o)]:64;++o;const v=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||p==null||v==null)throw new uM;const A=a<<2|h>>4;if(s.push(A),p!==64){const b=h<<4&240|p>>2;if(s.push(b),v!==64){const V=p<<6&192|v;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cM=function(n){const e=Ay(n);return Sy.encodeByteArray(e,!0)},iu=function(n){return cM(n).replace(/\./g,"")},fM=function(n){try{return Sy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=()=>hM().__FIREBASE_DEFAULTS__,pM=()=>{if(typeof process>"u"||typeof vy>"u")return;const n=vy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&fM(n[1]);return e&&JSON.parse(e)},Zf=()=>{try{return lM()||dM()||pM()||mM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gM=n=>{var e,t;return(t=(e=Zf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},yM=n=>{const e=gM(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Cy=()=>{var n;return(n=Zf())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TM(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[iu(JSON.stringify(t)),iu(JSON.stringify(c)),""].join(".")}const gl={};function vM(){const n={prod:[],emulator:[]};for(const e of Object.keys(gl))gl[e]?n.emulator.push(e):n.prod.push(e);return n}function AM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ry=!1;function SM(n,e){if(typeof window>"u"||typeof document>"u"||!Wf(window.location.host)||gl[n]===e||gl[n]||Ry)return;gl[n]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",a=vM().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function h(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,b){A.setAttribute("width","24"),A.setAttribute("id",b),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ry=!0,c()},A}function T(A,b){A.setAttribute("id",b),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function v(){const A=AM(s),b=t("text"),V=document.getElementById(b)||document.createElement("span"),B=t("learnmore"),F=document.getElementById(B)||document.createElement("a"),ee=t("preprendIcon"),ie=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const X=A.element;h(X),T(F,B);const oe=p();y(ie,ee),X.append(ie,V,F,oe),document.body.appendChild(X)}a?(V.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RM(){var e;const n=(e=Zf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IM(){return!RM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wM(){try{return typeof indexedDB=="object"}catch{return!1}}function MM(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="FirebaseError";class jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=bM,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iy.prototype.create)}}class Iy{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?DM(a,s):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new jr(o,h,s)}}function DM(n,e){return n.replace(NM,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const NM=/\{\$([^}]+)}/g;function su(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const a=n[o],c=e[o];if(wy(a)&&wy(c)){if(!su(a,c))return!1}else if(a!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function wy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(n){return n&&n._delegate?n._delegate:n}class yl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new _M;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PM(e))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(e=ir){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ir){return this.instances.has(e)}getOptions(e=ir){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&e(a,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:VM(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ir){return this.component?this.component.multipleInstances?e:ir:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VM(n){return n===ir?void 0:n}function PM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const UM={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},LM=Le.INFO,qM={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},OM=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=qM[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=LM,this._logHandler=OM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const BM=(n,e)=>e.some(t=>n instanceof t);let by,Dy;function zM(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GM(){return Dy||(Dy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ny=new WeakMap,jf=new WeakMap,xy=new WeakMap,eh=new WeakMap,th=new WeakMap;function HM(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(cs(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Ny.set(t,n)}).catch(()=>{}),th.set(e,n),e}function FM(n){if(jf.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});jf.set(n,e)}let nh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function YM(n){nh=n(nh)}function JM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(ih(this),e,...t);return xy.set(s,e.sort?e.sort():[e]),cs(s)}:GM().includes(n)?function(...e){return n.apply(ih(this),e),cs(Ny.get(this))}:function(...e){return cs(n.apply(ih(this),e))}}function KM(n){return typeof n=="function"?JM(n):(n instanceof IDBTransaction&&FM(n),BM(n,zM())?new Proxy(n,nh):n)}function cs(n){if(n instanceof IDBRequest)return HM(n);if(eh.has(n))return eh.get(n);const e=KM(n);return e!==n&&(eh.set(n,e),th.set(e,n)),e}const ih=n=>th.get(n);function $M(n,e,{blocked:t,upgrade:s,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),h=cs(c);return s&&c.addEventListener("upgradeneeded",y=>{s(cs(c.result),y.oldVersion,y.newVersion,cs(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),h.then(y=>{a&&y.addEventListener("close",()=>a()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const QM=["get","getKey","getAll","getAllKeys","count"],XM=["put","add","delete","clear"],sh=new Map;function Vy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sh.get(e))return sh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=XM.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||QM.includes(t)))return;const a=async function(c,...h){const y=this.transaction(c,o?"readwrite":"readonly");let p=y.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),o&&y.done]))[0]};return sh.set(e,a),a}YM(n=>({...n,get:(e,t,s)=>Vy(e,t)||n.get(e,t,s),has:(e,t)=>!!Vy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WM(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function WM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rh="@firebase/app",Py="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new My("@firebase/app"),jM="@firebase/app-compat",eb="@firebase/analytics-compat",tb="@firebase/analytics",nb="@firebase/app-check-compat",ib="@firebase/app-check",sb="@firebase/auth",rb="@firebase/auth-compat",ob="@firebase/database",lb="@firebase/data-connect",ab="@firebase/database-compat",ub="@firebase/functions",cb="@firebase/functions-compat",fb="@firebase/installations",hb="@firebase/installations-compat",db="@firebase/messaging",pb="@firebase/messaging-compat",mb="@firebase/performance",gb="@firebase/performance-compat",yb="@firebase/remote-config",_b="@firebase/remote-config-compat",Tb="@firebase/storage",Eb="@firebase/storage-compat",vb="@firebase/firestore",Ab="@firebase/ai",Sb="@firebase/firestore-compat",Cb="firebase",Rb="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="[DEFAULT]",Ib={[rh]:"fire-core",[jM]:"fire-core-compat",[tb]:"fire-analytics",[eb]:"fire-analytics-compat",[ib]:"fire-app-check",[nb]:"fire-app-check-compat",[sb]:"fire-auth",[rb]:"fire-auth-compat",[ob]:"fire-rtdb",[lb]:"fire-data-connect",[ab]:"fire-rtdb-compat",[ub]:"fire-fn",[cb]:"fire-fn-compat",[fb]:"fire-iid",[hb]:"fire-iid-compat",[db]:"fire-fcm",[pb]:"fire-fcm-compat",[mb]:"fire-perf",[gb]:"fire-perf-compat",[yb]:"fire-rc",[_b]:"fire-rc-compat",[Tb]:"fire-gcs",[Eb]:"fire-gcs-compat",[vb]:"fire-fst",[Sb]:"fire-fst-compat",[Ab]:"fire-vertex","fire-js":"fire-js",[Cb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,wb=new Map,lh=new Map;function ky(n,e){try{n.container.addComponent(e)}catch(t){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ou(n){const e=n.name;if(lh.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;lh.set(e,n);for(const t of ru.values())ky(t,n);for(const t of wb.values())ky(t,n);return!0}function Mb(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bb(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new Iy("app","Firebase",Db);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=Rb;function Uy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:oh,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(t||(t=Cy()),!t)throw fs.create("no-options");const a=ru.get(o);if(a){if(su(t,a.options)&&su(s,a.config))return a;throw fs.create("duplicate-app",{appName:o})}const c=new kM(o);for(const y of lh.values())c.addComponent(y);const h=new Nb(t,s,c);return ru.set(o,h),h}function Vb(n=oh){const e=ru.get(n);if(!e&&n===oh&&Cy())return Uy();if(!e)throw fs.create("no-app",{appName:n});return e}function to(n,e,t){let s=Ib[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(c.join(" "));return}ou(new yl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="firebase-heartbeat-database",kb=1,_l="firebase-heartbeat-store";let ah=null;function Ly(){return ah||(ah=$M(Pb,kb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_l)}catch(t){console.warn(t)}}}}).catch(n=>{throw fs.create("idb-open",{originalErrorMessage:n.message})})),ah}async function Ub(n){try{const t=(await Ly()).transaction(_l),s=await t.objectStore(_l).get(Oy(n));return await t.done,s}catch(e){if(e instanceof jr)Bi.warn(e.message);else{const t=fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(t.message)}}}async function qy(n,e){try{const s=(await Ly()).transaction(_l,"readwrite");await s.objectStore(_l).put(e,Oy(n)),await s.done}catch(t){if(t instanceof jr)Bi.warn(t.message);else{const s=fs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bi.warn(s.message)}}}function Oy(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=1024,qb=30;class Ob{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zb(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=By();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>qb){const c=Gb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Bi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=By(),{heartbeatsToSend:s,unsentEntries:o}=Bb(this._heartbeatsCache.heartbeats),a=iu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Bi.warn(t),""}}}function By(){return new Date().toISOString().substring(0,10)}function Bb(n,e=Lb){const t=[];let s=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),zy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class zb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wM()?MM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ub(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return qy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return qy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zy(n){return iu(JSON.stringify({version:2,heartbeats:n})).length}function Gb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n){ou(new yl("platform-logger",e=>new ZM(e),"PRIVATE")),ou(new yl("heartbeat",e=>new Ob(e),"PRIVATE")),to(rh,Py,n),to(rh,Py,"esm2020"),to("fire-js","")}Hb("");var Fb="firebase",Yb="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */to(Fb,Yb,"app");var Gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,Hy;(function(){var n;/** @license

	 Copyright The Closure Library Authors.
	 SPDX-License-Identifier: Apache-2.0
	*/function e(D,w){function M(){}M.prototype=w.prototype,D.F=w.prototype,D.prototype=new M,D.prototype.constructor=D,D.D=function(P,k,q){for(var N=Array(arguments.length-2),st=2;st<arguments.length;st++)N[st-2]=arguments[st];return w.prototype[k].apply(P,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,w,M){M||(M=0);const P=Array(16);if(typeof w=="string")for(var k=0;k<16;++k)P[k]=w.charCodeAt(M++)|w.charCodeAt(M++)<<8|w.charCodeAt(M++)<<16|w.charCodeAt(M++)<<24;else for(k=0;k<16;++k)P[k]=w[M++]|w[M++]<<8|w[M++]<<16|w[M++]<<24;w=D.g[0],M=D.g[1],k=D.g[2];let q=D.g[3],N;N=w+(q^M&(k^q))+P[0]+3614090360&4294967295,w=M+(N<<7&4294967295|N>>>25),N=q+(k^w&(M^k))+P[1]+3905402710&4294967295,q=w+(N<<12&4294967295|N>>>20),N=k+(M^q&(w^M))+P[2]+606105819&4294967295,k=q+(N<<17&4294967295|N>>>15),N=M+(w^k&(q^w))+P[3]+3250441966&4294967295,M=k+(N<<22&4294967295|N>>>10),N=w+(q^M&(k^q))+P[4]+4118548399&4294967295,w=M+(N<<7&4294967295|N>>>25),N=q+(k^w&(M^k))+P[5]+1200080426&4294967295,q=w+(N<<12&4294967295|N>>>20),N=k+(M^q&(w^M))+P[6]+2821735955&4294967295,k=q+(N<<17&4294967295|N>>>15),N=M+(w^k&(q^w))+P[7]+4249261313&4294967295,M=k+(N<<22&4294967295|N>>>10),N=w+(q^M&(k^q))+P[8]+1770035416&4294967295,w=M+(N<<7&4294967295|N>>>25),N=q+(k^w&(M^k))+P[9]+2336552879&4294967295,q=w+(N<<12&4294967295|N>>>20),N=k+(M^q&(w^M))+P[10]+4294925233&4294967295,k=q+(N<<17&4294967295|N>>>15),N=M+(w^k&(q^w))+P[11]+2304563134&4294967295,M=k+(N<<22&4294967295|N>>>10),N=w+(q^M&(k^q))+P[12]+1804603682&4294967295,w=M+(N<<7&4294967295|N>>>25),N=q+(k^w&(M^k))+P[13]+4254626195&4294967295,q=w+(N<<12&4294967295|N>>>20),N=k+(M^q&(w^M))+P[14]+2792965006&4294967295,k=q+(N<<17&4294967295|N>>>15),N=M+(w^k&(q^w))+P[15]+1236535329&4294967295,M=k+(N<<22&4294967295|N>>>10),N=w+(k^q&(M^k))+P[1]+4129170786&4294967295,w=M+(N<<5&4294967295|N>>>27),N=q+(M^k&(w^M))+P[6]+3225465664&4294967295,q=w+(N<<9&4294967295|N>>>23),N=k+(w^M&(q^w))+P[11]+643717713&4294967295,k=q+(N<<14&4294967295|N>>>18),N=M+(q^w&(k^q))+P[0]+3921069994&4294967295,M=k+(N<<20&4294967295|N>>>12),N=w+(k^q&(M^k))+P[5]+3593408605&4294967295,w=M+(N<<5&4294967295|N>>>27),N=q+(M^k&(w^M))+P[10]+38016083&4294967295,q=w+(N<<9&4294967295|N>>>23),N=k+(w^M&(q^w))+P[15]+3634488961&4294967295,k=q+(N<<14&4294967295|N>>>18),N=M+(q^w&(k^q))+P[4]+3889429448&4294967295,M=k+(N<<20&4294967295|N>>>12),N=w+(k^q&(M^k))+P[9]+568446438&4294967295,w=M+(N<<5&4294967295|N>>>27),N=q+(M^k&(w^M))+P[14]+3275163606&4294967295,q=w+(N<<9&4294967295|N>>>23),N=k+(w^M&(q^w))+P[3]+4107603335&4294967295,k=q+(N<<14&4294967295|N>>>18),N=M+(q^w&(k^q))+P[8]+1163531501&4294967295,M=k+(N<<20&4294967295|N>>>12),N=w+(k^q&(M^k))+P[13]+2850285829&4294967295,w=M+(N<<5&4294967295|N>>>27),N=q+(M^k&(w^M))+P[2]+4243563512&4294967295,q=w+(N<<9&4294967295|N>>>23),N=k+(w^M&(q^w))+P[7]+1735328473&4294967295,k=q+(N<<14&4294967295|N>>>18),N=M+(q^w&(k^q))+P[12]+2368359562&4294967295,M=k+(N<<20&4294967295|N>>>12),N=w+(M^k^q)+P[5]+4294588738&4294967295,w=M+(N<<4&4294967295|N>>>28),N=q+(w^M^k)+P[8]+2272392833&4294967295,q=w+(N<<11&4294967295|N>>>21),N=k+(q^w^M)+P[11]+1839030562&4294967295,k=q+(N<<16&4294967295|N>>>16),N=M+(k^q^w)+P[14]+4259657740&4294967295,M=k+(N<<23&4294967295|N>>>9),N=w+(M^k^q)+P[1]+2763975236&4294967295,w=M+(N<<4&4294967295|N>>>28),N=q+(w^M^k)+P[4]+1272893353&4294967295,q=w+(N<<11&4294967295|N>>>21),N=k+(q^w^M)+P[7]+4139469664&4294967295,k=q+(N<<16&4294967295|N>>>16),N=M+(k^q^w)+P[10]+3200236656&4294967295,M=k+(N<<23&4294967295|N>>>9),N=w+(M^k^q)+P[13]+681279174&4294967295,w=M+(N<<4&4294967295|N>>>28),N=q+(w^M^k)+P[0]+3936430074&4294967295,q=w+(N<<11&4294967295|N>>>21),N=k+(q^w^M)+P[3]+3572445317&4294967295,k=q+(N<<16&4294967295|N>>>16),N=M+(k^q^w)+P[6]+76029189&4294967295,M=k+(N<<23&4294967295|N>>>9),N=w+(M^k^q)+P[9]+3654602809&4294967295,w=M+(N<<4&4294967295|N>>>28),N=q+(w^M^k)+P[12]+3873151461&4294967295,q=w+(N<<11&4294967295|N>>>21),N=k+(q^w^M)+P[15]+530742520&4294967295,k=q+(N<<16&4294967295|N>>>16),N=M+(k^q^w)+P[2]+3299628645&4294967295,M=k+(N<<23&4294967295|N>>>9),N=w+(k^(M|~q))+P[0]+4096336452&4294967295,w=M+(N<<6&4294967295|N>>>26),N=q+(M^(w|~k))+P[7]+1126891415&4294967295,q=w+(N<<10&4294967295|N>>>22),N=k+(w^(q|~M))+P[14]+2878612391&4294967295,k=q+(N<<15&4294967295|N>>>17),N=M+(q^(k|~w))+P[5]+4237533241&4294967295,M=k+(N<<21&4294967295|N>>>11),N=w+(k^(M|~q))+P[12]+1700485571&4294967295,w=M+(N<<6&4294967295|N>>>26),N=q+(M^(w|~k))+P[3]+2399980690&4294967295,q=w+(N<<10&4294967295|N>>>22),N=k+(w^(q|~M))+P[10]+4293915773&4294967295,k=q+(N<<15&4294967295|N>>>17),N=M+(q^(k|~w))+P[1]+2240044497&4294967295,M=k+(N<<21&4294967295|N>>>11),N=w+(k^(M|~q))+P[8]+1873313359&4294967295,w=M+(N<<6&4294967295|N>>>26),N=q+(M^(w|~k))+P[15]+4264355552&4294967295,q=w+(N<<10&4294967295|N>>>22),N=k+(w^(q|~M))+P[6]+2734768916&4294967295,k=q+(N<<15&4294967295|N>>>17),N=M+(q^(k|~w))+P[13]+1309151649&4294967295,M=k+(N<<21&4294967295|N>>>11),N=w+(k^(M|~q))+P[4]+4149444226&4294967295,w=M+(N<<6&4294967295|N>>>26),N=q+(M^(w|~k))+P[11]+3174756917&4294967295,q=w+(N<<10&4294967295|N>>>22),N=k+(w^(q|~M))+P[2]+718787259&4294967295,k=q+(N<<15&4294967295|N>>>17),N=M+(q^(k|~w))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+q&4294967295}s.prototype.v=function(D,w){w===void 0&&(w=D.length);const M=w-this.blockSize,P=this.C;let k=this.h,q=0;for(;q<w;){if(k==0)for(;q<=M;)o(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<w;)if(P[k++]=D.charCodeAt(q++),k==this.blockSize){o(this,P),k=0;break}}else for(;q<w;)if(P[k++]=D[q++],k==this.blockSize){o(this,P),k=0;break}}this.h=k,this.o+=w},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var M=D.length-8;M<D.length;++M)D[M]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,M=0;M<4;++M)for(let P=0;P<32;P+=8)D[w++]=this.g[M]>>>P&255;return D};function a(D,w){var M=h;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=w(D)}function c(D,w){this.h=w;const M=[];let P=!0;for(let k=D.length-1;k>=0;k--){const q=D[k]|0;P&&q==w||(M[k]=q,P=!1)}this.g=M}var h={};function y(D){return-128<=D&&D<128?a(D,function(w){return new c([w|0],w<0?-1:0)}):new c([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return v;if(D<0)return F(p(-D));const w=[];let M=1;for(let P=0;D>=M;P++)w[P]=D/M|0,M*=4294967296;return new c(w,0)}function T(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return F(T(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=p(Math.pow(w,8));let P=v;for(let q=0;q<D.length;q+=8){var k=Math.min(8,D.length-q);const N=parseInt(D.substring(q,q+k),w);k<8?(k=p(Math.pow(w,k)),P=P.j(k).add(p(N))):(P=P.j(M),P=P.add(p(N)))}return P}var v=y(0),A=y(1),b=y(16777216);n=c.prototype,n.m=function(){if(B(this))return-F(this).m();let D=0,w=1;for(let M=0;M<this.g.length;M++){const P=this.i(M);D+=(P>=0?P:4294967296+P)*w,w*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(V(this))return"0";if(B(this))return"-"+F(this).toString(D);const w=p(Math.pow(D,6));var M=this;let P="";for(;;){const k=oe(M,w).g;M=ee(M,k.j(w));let q=((M.g.length>0?M.g[0]:M.h)>>>0).toString(D);if(M=k,V(M))return q+P;for(;q.length<6;)q="0"+q;P=q+P}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function V(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function B(D){return D.h==-1}n.l=function(D){return D=ee(this,D),B(D)?-1:V(D)?0:1};function F(D){const w=D.g.length,M=[];for(let P=0;P<w;P++)M[P]=~D.g[P];return new c(M,~D.h).add(A)}n.abs=function(){return B(this)?F(this):this},n.add=function(D){const w=Math.max(this.g.length,D.g.length),M=[];let P=0;for(let k=0;k<=w;k++){let q=P+(this.i(k)&65535)+(D.i(k)&65535),N=(q>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);P=N>>>16,q&=65535,N&=65535,M[k]=N<<16|q}return new c(M,M[M.length-1]&-2147483648?-1:0)};function ee(D,w){return D.add(F(w))}n.j=function(D){if(V(this)||V(D))return v;if(B(this))return B(D)?F(this).j(F(D)):F(F(this).j(D));if(B(D))return F(this.j(F(D)));if(this.l(b)<0&&D.l(b)<0)return p(this.m()*D.m());const w=this.g.length+D.g.length,M=[];for(var P=0;P<2*w;P++)M[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<D.g.length;k++){const q=this.i(P)>>>16,N=this.i(P)&65535,st=D.i(k)>>>16,gt=D.i(k)&65535;M[2*P+2*k]+=N*gt,ie(M,2*P+2*k),M[2*P+2*k+1]+=q*gt,ie(M,2*P+2*k+1),M[2*P+2*k+1]+=N*st,ie(M,2*P+2*k+1),M[2*P+2*k+2]+=q*st,ie(M,2*P+2*k+2)}for(D=0;D<w;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=w;D<2*w;D++)M[D]=0;return new c(M,0)};function ie(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function X(D,w){this.g=D,this.h=w}function oe(D,w){if(V(w))throw Error("division by zero");if(V(D))return new X(v,v);if(B(D))return w=oe(F(D),w),new X(F(w.g),F(w.h));if(B(w))return w=oe(D,F(w)),new X(F(w.g),w.h);if(D.g.length>30){if(B(D)||B(w))throw Error("slowDivide_ only works with positive integers.");for(var M=A,P=w;P.l(D)<=0;)M=he(M),P=he(P);var k=ae(M,1),q=ae(P,1);for(P=ae(P,2),M=ae(M,2);!V(P);){var N=q.add(P);N.l(D)<=0&&(k=k.add(M),q=N),P=ae(P,1),M=ae(M,1)}return w=ee(D,k.j(w)),new X(k,w)}for(k=v;D.l(w)>=0;){for(M=Math.max(1,Math.floor(D.m()/w.m())),P=Math.ceil(Math.log(M)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),q=p(M),N=q.j(w);B(N)||N.l(D)>0;)M-=P,q=p(M),N=q.j(w);V(q)&&(q=A),k=k.add(q),D=ee(D,N)}return new X(k,D)}n.B=function(D){return oe(this,D).h},n.and=function(D){const w=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<w;P++)M[P]=this.i(P)&D.i(P);return new c(M,this.h&D.h)},n.or=function(D){const w=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<w;P++)M[P]=this.i(P)|D.i(P);return new c(M,this.h|D.h)},n.xor=function(D){const w=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<w;P++)M[P]=this.i(P)^D.i(P);return new c(M,this.h^D.h)};function he(D){const w=D.g.length+1,M=[];for(let P=0;P<w;P++)M[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(M,D.h)}function ae(D,w){const M=w>>5;w%=32;const P=D.g.length-M,k=[];for(let q=0;q<P;q++)k[q]=w>0?D.i(q+M)>>>w|D.i(q+M+1)<<32-w:D.i(q+M);return new c(k,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Hy=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=T,hs=c}).apply(typeof Gy<"u"?Gy:typeof self<"u"?self:typeof window<"u"?window:{});var lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fy,Tl,Yy,au,uh,Jy,Ky,$y;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof lu=="object"&&lu];for(var E=0;E<d.length;++E){var C=d[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var s=t(this);function o(d,E){if(E)e:{var C=s;d=d.split(".");for(var I=0;I<d.length-1;I++){var z=d[I];if(!(z in C))break e;C=C[z]}d=d[d.length-1],I=C[d],E=E(I),E!=I&&E!=null&&e(C,d,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(E){var C=[],I;for(I in E)Object.prototype.hasOwnProperty.call(E,I)&&C.push([I,E[I]]);return C}});/** @license

	 Copyright The Closure Library Authors.
	 SPDX-License-Identifier: Apache-2.0
	*/var a=a||{},c=this||self;function h(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function y(d,E,C){return d.call.apply(d.bind,arguments)}function p(d,E,C){return p=y,p.apply(null,arguments)}function T(d,E){var C=Array.prototype.slice.call(arguments,1);return function(){var I=C.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function v(d,E){function C(){}C.prototype=E.prototype,d.Z=E.prototype,d.prototype=new C,d.prototype.constructor=d,d.Ob=function(I,z,J){for(var re=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)re[Ie-2]=arguments[Ie];return E.prototype[z].apply(I,re)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function b(d){const E=d.length;if(E>0){const C=Array(E);for(let I=0;I<E;I++)C[I]=d[I];return C}return[]}function V(d,E){for(let I=1;I<arguments.length;I++){const z=arguments[I];var C=typeof z;if(C=C!="object"?C:z?Array.isArray(z)?"array":C:"null",C=="array"||C=="object"&&typeof z.length=="number"){C=d.length||0;const J=z.length||0;d.length=C+J;for(let re=0;re<J;re++)d[C+re]=z[re]}else d.push(z)}}class B{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function F(d){c.setTimeout(()=>{throw d},0)}function ee(){var d=D;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class ie{constructor(){this.h=this.g=null}add(E,C){const I=X.get();I.set(E,C),this.h?this.h.next=I:this.g=I,this.h=I}}var X=new B(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ae=!1,D=new ie,w=()=>{const d=Promise.resolve(void 0);he=()=>{d.then(M)}};function M(){for(var d;d=ee();){try{d.h.call(d.g)}catch(C){F(C)}var E=X;E.j(d),E.h<100&&(E.h++,d.next=E.g,E.g=d)}ae=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const C=()=>{};c.addEventListener("test",C,E),c.removeEventListener("test",C,E)}catch{}return d})();function N(d){return/^[\s\xa0]*$/.test(d)}function st(d,E){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,E)}v(st,k),st.prototype.init=function(d,E){const C=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget,E||(C=="mouseover"?E=d.fromElement:C=="mouseout"&&(E=d.toElement)),this.relatedTarget=E,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&st.Z.h.call(this)},st.prototype.h=function(){st.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),$=0;function le(d,E,C,I,z){this.listener=d,this.proxy=null,this.src=E,this.type=C,this.capture=!!I,this.ha=z,this.key=++$,this.da=this.fa=!1}function Te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Be(d,E,C){for(const I in d)E.call(C,d[I],I,d)}function Qe(d,E){for(const C in d)E.call(void 0,d[C],C,d)}function L(d){const E={};for(const C in d)E[C]=d[C];return E}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(d,E){let C,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(C in I)d[C]=I[C];for(let J=0;J<te.length;J++)C=te[J],Object.prototype.hasOwnProperty.call(I,C)&&(d[C]=I[C])}}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,E,C,I,z){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const re=Me(d,E,I,z);return re>-1?(E=d[re],C||(E.fa=!1)):(E=new le(E,this.src,J,!!I,z),E.fa=C,d.push(E)),E};function Ae(d,E){const C=E.type;if(C in d.g){var I=d.g[C],z=Array.prototype.indexOf.call(I,E,void 0),J;(J=z>=0)&&Array.prototype.splice.call(I,z,1),J&&(Te(E),d.g[C].length==0&&(delete d.g[C],d.h--))}}function Me(d,E,C,I){for(let z=0;z<d.length;++z){const J=d[z];if(!J.da&&J.listener==E&&J.capture==!!C&&J.ha==I)return z}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Lt={};function ht(d,E,C,I,z){if(Array.isArray(E)){for(let J=0;J<E.length;J++)ht(d,E[J],C,I,z);return null}return C=Jl(C),d&&d[gt]?d.J(E,C,h(I)?!!I.capture:!1,z):mr(d,E,C,!1,I,z)}function mr(d,E,C,I,z,J){if(!E)throw Error("Invalid event type");const re=h(z)?!!z.capture:!!z;let Ie=gr(d);if(Ie||(d[Oe]=Ie=new de(d)),C=Ie.add(E,C,I,re,J),C.proxy)return C;if(I=vo(),C.proxy=I,I.src=d,I.listener=C,d.addEventListener)q||(z=re),z===void 0&&(z=!1),d.addEventListener(E.toString(),I,z);else if(d.attachEvent)d.attachEvent(gi(E.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return C}function vo(){function d(C){return E.call(d.src,d.listener,C)}const E=Fl;return d}function Ao(d,E,C,I,z){if(Array.isArray(E))for(var J=0;J<E.length;J++)Ao(d,E[J],C,I,z);else I=h(I)?!!I.capture:!!I,C=Jl(C),d&&d[gt]?(d=d.i,J=String(E).toString(),J in d.g&&(E=d.g[J],C=Me(E,C,I,z),C>-1&&(Te(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete d.g[J],d.h--)))):d&&(d=gr(d))&&(E=d.g[E.toString()],d=-1,E&&(d=Me(E,C,I,z)),(C=d>-1?E[d]:null)&&So(C))}function So(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[gt])Ae(E.i,d);else{var C=d.type,I=d.proxy;E.removeEventListener?E.removeEventListener(C,I,d.capture):E.detachEvent?E.detachEvent(gi(C),I):E.addListener&&E.removeListener&&E.removeListener(I),(C=gr(E))?(Ae(C,d),C.h==0&&(C.src=null,E[Oe]=null)):Te(d)}}}function gi(d){return d in Lt?Lt[d]:Lt[d]="on"+d}function Fl(d,E){if(d.da)d=!0;else{E=new st(E,this);const C=d.listener,I=d.ha||d.src;d.fa&&So(d),d=C.call(I,E)}return d}function gr(d){return d=d[Oe],d instanceof de?d:null}var Yl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jl(d){return typeof d=="function"?d:(d[Yl]||(d[Yl]=function(E){return d.handleEvent(E)}),d[Yl])}function wt(){P.call(this),this.i=new de(this),this.M=this,this.G=null}v(wt,P),wt.prototype[gt]=!0,wt.prototype.removeEventListener=function(d,E,C,I){Ao(this,d,E,C,I)};function qt(d,E){var C,I=d.G;if(I)for(C=[];I;I=I.G)C.push(I);if(d=d.M,I=E.type||E,typeof E=="string")E=new k(E,d);else if(E instanceof k)E.target=E.target||d;else{var z=E;E=new k(I,d),ue(E,z)}z=!0;let J,re;if(C)for(re=C.length-1;re>=0;re--)J=E.g=C[re],z=As(J,I,!0,E)&&z;if(J=E.g=d,z=As(J,I,!0,E)&&z,z=As(J,I,!1,E)&&z,C)for(re=0;re<C.length;re++)J=E.g=C[re],z=As(J,I,!1,E)&&z}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var d=this.i;for(const E in d.g){const C=d.g[E];for(let I=0;I<C.length;I++)Te(C[I]);delete d.g[E],d.h--}}this.G=null},wt.prototype.J=function(d,E,C,I){return this.i.add(String(d),E,!1,C,I)},wt.prototype.K=function(d,E,C,I){return this.i.add(String(d),E,!0,C,I)};function As(d,E,C,I){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();let z=!0;for(let J=0;J<E.length;++J){const re=E[J];if(re&&!re.da&&re.capture==C){const Ie=re.listener,vt=re.ha||re.src;re.fa&&Ae(d.i,re),z=Ie.call(vt,I)!==!1&&z}}return z&&!I.defaultPrevented}function Sd(d,E){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(d,E||0)}function ju(d){d.g=Sd(()=>{d.g=null,d.i&&(d.i=!1,ju(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class ln extends P{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(d){P.call(this),this.h=d,this.g={}}v(yr,P);var Kl=[];function $l(d){Be(d.g,function(E,C){this.g.hasOwnProperty(C)&&So(E)},d),d.g={}}yr.prototype.N=function(){yr.Z.N.call(this),$l(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=c.JSON.stringify,Cd=c.JSON.parse,ec=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function tc(){}function nc(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){k.call(this,"d")}v($t,k);function Dn(){k.call(this,"c")}v(Dn,k);var Et={},ic=null;function Co(){return ic=ic||new wt}Et.Ia="serverreachability";function sc(d){k.call(this,Et.Ia,d)}v(sc,k);function yi(d){const E=Co();qt(E,new sc(E))}Et.STAT_EVENT="statevent";function _r(d,E){k.call(this,Et.STAT_EVENT,d),this.stat=E}v(_r,k);function Mt(d){const E=Co();qt(E,new _r(E,d))}Et.Ja="timingevent";function _i(d,E){k.call(this,Et.Ja,d),this.size=E}v(_i,k);function Ti(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},E)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function Rd(d,E,C,I,z,J){d.info(function(){if(d.g)if(J){var re="",Ie=J.split("&");for(let Ye=0;Ye<Ie.length;Ye++){var vt=Ie[Ye].split("=");if(vt.length>1){const dt=vt[0];vt=vt[1];const Pn=dt.split("_");re=Pn.length>=2&&Pn[1]=="type"?re+(dt+"="+vt+"&"):re+(dt+"=redacted&")}}}else re=null;else re=J;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+E+`
`+C+`
`+re})}function rc(d,E,C,I,z,J,re){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+E+`
`+C+`
`+J+" "+re})}function Ei(d,E,C,I){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+Id(d,C)+(I?" "+I:"")})}function Tr(d,E){d.info(function(){return"TIMEOUT: "+E})}Xn.prototype.info=function(){};function Id(d,E){if(!d.g)return E;if(!E)return null;try{const J=JSON.parse(E);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var C=J[d];if(!(C.length<2)){var I=C[1];if(Array.isArray(I)&&!(I.length<1)){var z=I[0];if(z!="noop"&&z!="stop"&&z!="close")for(let re=1;re<I.length;re++)I[re]=""}}}}return Ss(J)}catch{return E}}var Er={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ql={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xl;function vr(){}v(vr,tc),vr.prototype.g=function(){return new XMLHttpRequest},Xl=new vr;function Hi(d){return encodeURIComponent(String(d))}function oc(d){var E=1;d=d.split(":");const C=[];for(;E>0&&d.length;)C.push(d.shift()),E--;return d.length&&C.push(d.join(":")),C}function Zn(d,E,C,I){this.j=d,this.i=E,this.l=C,this.S=I||1,this.V=new yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}var bt={},Gt={};function vi(d,E,C){d.M=1,d.A=Ar(Nt(E)),d.u=C,d.R=!0,Ro(d,null)}function Ro(d,E){d.F=Date.now(),Ai(d),d.B=Nt(d.A);var C=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),bo(C.i,"t",I),d.C=0,C=d.j.L,d.h=new Wn,d.g=vc(d.j,C?E:null,!d.u),d.P>0&&(d.O=new ln(p(d.Y,d,d.g),d.P)),E=d.V,C=d.g,I=d.ba;var z="readystatechange";Array.isArray(z)||(z&&(Kl[0]=z.toString()),z=Kl);for(let J=0;J<z.length;J++){const re=ht(C,z[J],I||E.handleEvent,!1,E.h||E);if(!re)break;E.g[re.key]=re}E=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,E)):(d.v="GET",d.g.ea(d.B,d.v,null,E)),yi(),Rd(d.i,d.v,d.B,d.l,d.S,d.u)}Zn.prototype.ba=function(d){d=d.target;const E=this.O;E&&ti(d)==3?E.j():this.Y(d)},Zn.prototype.Y=function(d){try{if(d==this.g)e:{const Ie=ti(this.g),vt=this.g.ya(),Ye=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Ie!=4||vt==7||(vt==8||Ye<=0?yi(3):yi(2)),Si(this);var E=this.g.ca();this.X=E;var C=wd(this);if(this.o=E==200,rc(this.i,this.v,this.B,this.l,this.S,Ie,E),this.o){if(this.U&&!this.L){t:{if(this.g){var I,z=this.g;if((I=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var J=I;break t}}J=null}if(d=J)Ei(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,d);else{this.o=!1,this.m=3,Mt(12),_n(this),Nn(this);break e}}if(this.R){d=!0;let dt;for(;!this.K&&this.C<C.length;)if(dt=ac(this,C),dt==Gt){Ie==4&&(this.m=4,Mt(14),d=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==bt){this.m=4,Mt(15),Ei(this.i,this.l,C,"[Invalid Chunk]"),d=!1;break}else Ei(this.i,this.l,dt,null),Ci(this,dt);if(lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||C.length!=0||this.h.h||(this.m=1,Mt(16),d=!1),this.o=this.o&&d,!d)Ei(this.i,this.l,C,"[Invalid Chunked Response]"),_n(this),Nn(this);else if(C.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),fa(re),re.P=!0,Mt(11))}}else Ei(this.i,this.l,C,null),Ci(this,C);Ie==4&&_n(this),this.o&&!this.K&&(Ie==4?yc(this.j,this):(this.o=!1,Ai(this)))}else Yi(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),_n(this),Nn(this)}}}catch{}finally{}};function wd(d){if(!lc(d))return d.g.la();const E=Qt(d.g);if(E==="")return"";let C="";const I=E.length,z=ti(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return _n(d),Nn(d),"";d.h.i=new c.TextDecoder}for(let J=0;J<I;J++)d.h.h=!0,C+=d.h.i.decode(E[J],{stream:!(z&&J==I-1)});return E.length=0,d.h.g+=C,d.C=0,d.h.g}function lc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function ac(d,E){var C=d.C,I=E.indexOf(`
`,C);return I==-1?Gt:(C=Number(E.substring(C,I)),isNaN(C)?bt:(I+=1,I+C>E.length?Gt:(E=E.slice(I,I+C),d.C=I+C,E)))}Zn.prototype.cancel=function(){this.K=!0,_n(this)};function Ai(d){d.T=Date.now()+d.H,Io(d,d.H)}function Io(d,E){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ti(p(d.aa,d),E)}function Si(d){d.D&&(c.clearTimeout(d.D),d.D=null)}Zn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Tr(this.i,this.B),this.M!=2&&(yi(),Mt(17)),_n(this),this.m=2,Nn(this)):Io(this,this.T-d)};function Nn(d){d.j.I==0||d.K||yc(d.j,d)}function _n(d){Si(d);var E=d.O;E&&typeof E.dispose=="function"&&E.dispose(),d.O=null,$l(d.V),d.g&&(E=d.g,d.g=null,E.abort(),E.dispose())}function Ci(d,E){try{var C=d.j;if(C.I!=0&&(C.g==d||Ii(C.h,d))){if(!d.L&&Ii(C.h,d)&&C.I==3){try{var I=C.Ba.g.parse(E)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<d.F)Po(C),Ns(C);else break e;br(C),Mt(18)}}else C.xa=z[1],0<C.xa-C.K&&z[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ti(p(C.Va,C),6e3));Ri(C.h)<=1&&C.ta&&(C.ta=void 0)}else xi(C,11)}else if((d.L||C.g==d)&&Po(C),!N(E))for(z=C.Ba.g.parse(E),E=0;E<z.length;E++){let Ye=z[E];const dt=Ye[0];if(!(dt<=C.K))if(C.K=dt,Ye=Ye[1],C.I==2)if(Ye[0]=="c"){C.M=Ye[1],C.ba=Ye[2];const Pn=Ye[3];Pn!=null&&(C.ka=Pn,C.j.info("VER="+C.ka));const Vi=Ye[4];Vi!=null&&(C.za=Vi,C.j.info("SVER="+C.za));const ni=Ye[5];ni!=null&&typeof ni=="number"&&ni>0&&(I=1.5*ni,C.O=I,C.j.info("backChannelRequestTimeoutMs_="+I)),I=C;const ii=d.g;if(ii){const Dr=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var J=I.h;J.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(jl(J,J.h),J.h=null))}if(I.G){const ko=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ko&&(I.wa=ko,Xe(I.J,I.G,ko))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-d.F,C.j.info("Handshake RTT: "+C.T+"ms")),I=C;var re=d;if(I.na=Ec(I,I.L?I.ba:null,I.W),re.L){ea(I.h,re);var Ie=re,vt=I.O;vt&&(Ie.H=vt),Ie.D&&(Si(Ie),Ai(Ie)),I.g=re}else mc(I);C.i.length>0&&Ni(C)}else Ye[0]!="stop"&&Ye[0]!="close"||xi(C,7);else C.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?xi(C,7):ua(C):Ye[0]!="noop"&&C.l&&C.l.qa(Ye),C.A=0)}}yi(4)}catch{}}var Dt=class{constructor(d,E){this.g=d,this.map=E}};function Zl(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ri(d){return d.h?1:d.g?d.g.size:0}function Ii(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function jl(d,E){d.g?d.g.add(E):d.h=E}function ea(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}Zl.prototype.cancel=function(){if(this.i=ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ta(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const C of d.g.values())E=E.concat(C.G);return E}return b(d.i)}var uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wo(d,E){if(d){d=d.split("&");for(let C=0;C<d.length;C++){const I=d[C].indexOf("=");let z,J=null;I>=0?(z=d[C].substring(0,I),J=d[C].substring(I+1)):z=d[C],E(z,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Tn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;d instanceof Tn?(this.l=d.l,Ht(this,d.j),this.o=d.o,this.g=d.g,Cs(this,d.u),this.h=d.h,na(this,dc(d.i)),this.m=d.m):d&&(E=String(d).match(uc))?(this.l=!1,Ht(this,E[1]||"",!0),this.o=wi(E[2]||""),this.g=wi(E[3]||"",!0),Cs(this,E[4]),this.h=wi(E[5]||"",!0),na(this,E[6]||"",!0),this.m=wi(E[7]||"")):(this.l=!1,this.i=new Is(null,this.l))}Tn.prototype.toString=function(){const d=[];var E=this.j;E&&d.push(Sr(E,Mo,!0),":");var C=this.g;return(C||E=="file")&&(d.push("//"),(E=this.o)&&d.push(Sr(E,Mo,!0),"@"),d.push(Hi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&d.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&d.push("/"),d.push(Sr(C,C.charAt(0)=="/"?ia:cc,!0))),(C=this.i.toString())&&d.push("?",C),(C=this.m)&&d.push("#",Sr(C,fc)),d.join("")},Tn.prototype.resolve=function(d){const E=Nt(this);let C=!!d.j;C?Ht(E,d.j):C=!!d.o,C?E.o=d.o:C=!!d.g,C?E.g=d.g:C=d.u!=null;var I=d.h;if(C)Cs(E,d.u);else if(C=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var z=E.h.lastIndexOf("/");z!=-1&&(I=E.h.slice(0,z+1)+I)}if(z=I,z==".."||z==".")I="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){I=z.lastIndexOf("/",0)==0,z=z.split("/");const J=[];for(let re=0;re<z.length;){const Ie=z[re++];Ie=="."?I&&re==z.length&&J.push(""):Ie==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),I&&re==z.length&&J.push("")):(J.push(Ie),I=!0)}I=J.join("/")}else I=z}return C?E.h=I:C=d.i.toString()!=="",C?na(E,dc(d.i)):C=!!d.m,C&&(E.m=d.m),E};function Nt(d){return new Tn(d)}function Ht(d,E,C){d.j=C?wi(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function Cs(d,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);d.u=E}else d.u=null}function na(d,E,C){E instanceof Is?(d.i=E,Do(d.i,d.l)):(C||(E=Sr(E,Rs)),d.i=new Is(E,d.l))}function Xe(d,E,C){d.i.set(E,C)}function Ar(d){return Xe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function wi(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Sr(d,E,C){return typeof d=="string"?(d=encodeURI(d).replace(E,fn),C&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function fn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Mo=/[#\/\?@]/g,cc=/[#\?:]/g,ia=/[#\?]/g,Rs=/[#\?@]/g,fc=/#/g;function Is(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function hn(d){d.g||(d.g=new Map,d.h=0,d.i&&wo(d.i,function(E,C){d.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=Is.prototype,n.add=function(d,E){hn(this),this.i=null,d=ws(this,d);let C=this.g.get(d);return C||this.g.set(d,C=[]),C.push(E),this.h+=1,this};function hc(d,E){hn(d),E=ws(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function sa(d,E){return hn(d),E=ws(d,E),d.g.has(E)}n.forEach=function(d,E){hn(this),this.g.forEach(function(C,I){C.forEach(function(z){d.call(E,z,I,this)},this)},this)};function ra(d,E){hn(d);let C=[];if(typeof E=="string")sa(d,E)&&(C=C.concat(d.g.get(ws(d,E))));else for(d=Array.from(d.g.values()),E=0;E<d.length;E++)C=C.concat(d[E]);return C}n.set=function(d,E){return hn(this),this.i=null,d=ws(this,d),sa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},n.get=function(d,E){return d?(d=ra(this,d),d.length>0?String(d[0]):E):E};function bo(d,E,C){hc(d,E),C.length>0&&(d.i=null,d.g.set(ws(d,E),b(C)),d.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(let I=0;I<E.length;I++){var C=E[I];const z=Hi(C);C=ra(this,C);for(let J=0;J<C.length;J++){let re=z;C[J]!==""&&(re+="="+Hi(C[J])),d.push(re)}}return this.i=d.join("&")};function dc(d){const E=new Is;return E.i=d.i,d.g&&(E.g=new Map(d.g),E.h=d.h),E}function ws(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function Do(d,E){E&&!d.j&&(hn(d),d.i=null,d.g.forEach(function(C,I){const z=I.toLowerCase();I!=z&&(hc(this,I),bo(this,z,C))},d)),d.j=E}function jn(d,E){const C=new Xn;if(c.Image){const I=new Image;I.onload=T(xn,C,"TestLoadImage: loaded",!0,E,I),I.onerror=T(xn,C,"TestLoadImage: error",!1,E,I),I.onabort=T(xn,C,"TestLoadImage: abort",!1,E,I),I.ontimeout=T(xn,C,"TestLoadImage: timeout",!1,E,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else E(!1)}function oa(d,E){const C=new Xn,I=new AbortController,z=setTimeout(()=>{I.abort(),xn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:I.signal}).then(J=>{clearTimeout(z),J.ok?xn(C,"TestPingServer: ok",!0,E):xn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(z),xn(C,"TestPingServer: error",!1,E)})}function xn(d,E,C,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(C)}catch{}}function Ms(){this.g=new ec}function Mi(d){this.i=d.Sb||null,this.h=d.ab||!1}v(Mi,tc),Mi.prototype.g=function(){return new Cr(this.i,this.h)};function Cr(d,E){wt.call(this),this.H=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Cr,wt),n=Cr.prototype,n.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=E,this.readyState=1,ei(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(E.body=d),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bs(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;No(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function No(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?bs(this):ei(this),this.readyState==3&&No(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,bs(this))},n.Na=function(d){this.g&&(this.response=d,bs(this))},n.ga=function(){this.g&&bs(this)};function bs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ei(d)}n.setRequestHeader=function(d,E){this.A.append(d,E)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,d.push(C[0]+": "+C[1]),C=E.next();return d.join(`\r
`)};function ei(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Vn(d){let E="";return Be(d,function(C,I){E+=I,E+=":",E+=C,E+=`\r
`}),E}function Rr(d,E,C){e:{for(I in C){var I=!1;break e}I=!0}I||(C=Vn(C),typeof d=="string"?C!=null&&Hi(C):Xe(d,E,C))}function je(d){wt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(je,wt);var bi=/^https?$/i,la=["POST","PUT"];n=je.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,E,C,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xl.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch(J){Ir(this,J);return}if(d=C||"",C=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)C.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())C.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),z=c.FormData&&d instanceof c.FormData,!(Array.prototype.indexOf.call(la,E,void 0)>=0)||I||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,re]of C)this.g.setRequestHeader(J,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Ir(this,J)}};function Ir(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.o=5,aa(d),Fi(d)}function aa(d){d.A||(d.A=!0,qt(d,"complete"),qt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,qt(this,"complete"),qt(this,"abort"),Fi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fi(this,!0)),je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?wr(this):this.Xa())},n.Xa=function(){wr(this)};function wr(d){if(d.h&&typeof a<"u"){if(d.v&&ti(d)==4)setTimeout(d.Ca.bind(d),0);else if(qt(d,"readystatechange"),ti(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var I;if(I=J===0){let re=String(d.D).match(uc)[1]||null;!re&&c.self&&c.self.location&&(re=c.self.location.protocol.slice(0,-1)),I=!bi.test(re?re.toLowerCase():"")}C=I}if(C)qt(d,"complete"),qt(d,"success");else{d.o=6;try{var z=ti(d)>2?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.ca()+"]",aa(d)}}finally{Fi(d)}}}}function Fi(d,E){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const C=d.g;d.g=null,E||qt(d,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ti(d){return d.g?d.g.readyState:0}n.ca=function(){try{return ti(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),Cd(E)}};function Qt(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(d){const E={};d=(d.g&&ti(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(N(d[I]))continue;var C=oc(d[I]);const z=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=E[z]||[];E[z]=J,J.push(C)}Qe(E,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(d,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[d]||E}function Ds(d){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,d),this.Za=Di("retryDelaySeedMs",1e4,d),this.Ta=Di("forwardChannelMaxRetries",2,d),this.va=Di("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Zl(d&&d.concurrentRequestLimit),this.Ba=new Ms,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ds.prototype,n.ka=8,n.I=1,n.connect=function(d,E,C,I){Mt(0),this.W=d,this.H=E||{},C&&I!==void 0&&(this.H.OSID=C,this.H.OAID=I),this.F=this.X,this.J=Ec(this,null,this.W),Ni(this)};function ua(d){if(xo(d),d.I==3){var E=d.V++,C=Nt(d.J);if(Xe(C,"SID",d.M),Xe(C,"RID",E),Xe(C,"TYPE","terminate"),Mr(d,C),E=new Zn(d,d.j,E),E.M=2,E.A=Ar(Nt(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=E.A,C=!0),C||(E.g=vc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ai(E)}Tc(d)}function Ns(d){d.g&&(fa(d),d.g.cancel(),d.g=null)}function xo(d){Ns(d),d.v&&(c.clearTimeout(d.v),d.v=null),Po(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&c.clearTimeout(d.m),d.m=null)}function Ni(d){if(!Wl(d.h)&&!d.m){d.m=!0;var E=d.Ea;he||w(),ae||(he(),ae=!0),D.add(E,d),d.D=0}}function Vo(d,E){return Ri(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=E.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ti(p(d.Ea,d,E),_c(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const z=new Zn(this,this.j,d);let J=this.o;if(this.U&&(J?(J=L(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(z.J=J,J=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var I=this.i[C];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(E+=I,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=pc(this,z,E),C=Nt(this.J),Xe(C,"RID",d),Xe(C,"CVER",22),this.G&&Xe(C,"X-HTTP-Session-Id",this.G),Mr(this,C),J&&(this.R?E="headers="+Hi(Vn(J))+"&"+E:this.u&&Rr(C,this.u,J)),jl(this.h,z),this.Ra&&Xe(C,"TYPE","init"),this.S?(Xe(C,"$req",E),Xe(C,"SID","null"),z.U=!0,vi(z,C,null)):vi(z,C,E),this.I=2}}else this.I==3&&(d?ca(this,d):this.i.length==0||Wl(this.h)||ca(this))};function ca(d,E){var C;E?C=E.l:C=d.V++;const I=Nt(d.J);Xe(I,"SID",d.M),Xe(I,"RID",C),Xe(I,"AID",d.K),Mr(d,I),d.u&&d.o&&Rr(I,d.u,d.o),C=new Zn(d,d.j,C,d.D+1),d.u===null&&(C.J=d.o),E&&(d.i=E.G.concat(d.i)),E=pc(d,C,1e3),C.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),jl(d.h,C),vi(C,I,E)}function Mr(d,E){d.H&&Be(d.H,function(C,I){Xe(E,I,C)}),d.l&&Be({},function(C,I){Xe(E,I,C)})}function pc(d,E,C){C=Math.min(d.i.length,C);const I=d.l?p(d.l.Ka,d.l,d):null;e:{var z=d.i;let Ie=-1;for(;;){const vt=["count="+C];Ie==-1?C>0?(Ie=z[0].g,vt.push("ofs="+Ie)):Ie=0:vt.push("ofs="+Ie);let Ye=!0;for(let dt=0;dt<C;dt++){var J=z[dt].g;const Pn=z[dt].map;if(J-=Ie,J<0)Ie=Math.max(0,z[dt].g-100),Ye=!1;else try{J="req"+J+"_"||"";try{var re=Pn instanceof Map?Pn:Object.entries(Pn);for(const[Vi,ni]of re){let ii=ni;h(ni)&&(ii=Ss(ni)),vt.push(J+Vi+"="+encodeURIComponent(ii))}}catch(Vi){throw vt.push(J+"type="+encodeURIComponent("_badmap")),Vi}}catch{I&&I(Pn)}}if(Ye){re=vt.join("&");break e}}re=void 0}return d=d.i.splice(0,C),E.G=d,re}function mc(d){if(!d.g&&!d.v){d.Y=1;var E=d.Da;he||w(),ae||(he(),ae=!0),D.add(E,d),d.A=0}}function br(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ti(p(d.Da,d),_c(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ti(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),Ns(this),gc(this))};function fa(d){d.B!=null&&(c.clearTimeout(d.B),d.B=null)}function gc(d){d.g=new Zn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var E=Nt(d.na);Xe(E,"RID","rpc"),Xe(E,"SID",d.M),Xe(E,"AID",d.K),Xe(E,"CI",d.F?"0":"1"),!d.F&&d.ia&&Xe(E,"TO",d.ia),Xe(E,"TYPE","xmlhttp"),Mr(d,E),d.u&&d.o&&Rr(E,d.u,d.o),d.O&&(d.g.H=d.O);var C=d.g;d=d.ba,C.M=1,C.A=Ar(Nt(E)),C.u=null,C.R=!0,Ro(C,d)}n.Va=function(){this.C!=null&&(this.C=null,Ns(this),br(this),Mt(19))};function Po(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function yc(d,E){var C=null;if(d.g==E){Po(d),fa(d),d.g=null;var I=2}else if(Ii(d.h,E))C=E.G,ea(d.h,E),I=1;else return;if(d.I!=0){if(E.o)if(I==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var z=d.D;I=Co(),qt(I,new _i(I,C)),Ni(d)}else mc(d);else if(z=E.m,z==3||z==0&&E.X>0||!(I==1&&Vo(d,E)||I==2&&br(d)))switch(C&&C.length>0&&(E=d.h,E.i=E.i.concat(C)),z){case 1:xi(d,5);break;case 4:xi(d,10);break;case 3:xi(d,6);break;default:xi(d,2)}}}function _c(d,E){let C=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(C*=2),C*E}function xi(d,E){if(d.j.info("Error code "+E),E==2){var C=p(d.bb,d),I=d.Ua;const z=!I;I=new Tn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ht(I,"https"),Ar(I),z?jn(I.toString(),C):oa(I.toString(),C)}else Mt(2);d.I=0,d.l&&d.l.pa(E),Tc(d),xo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Tc(d){if(d.I=0,d.ja=[],d.l){const E=ta(d.h);(E.length!=0||d.i.length!=0)&&(V(d.ja,E),V(d.ja,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.oa()}}function Ec(d,E,C){var I=C instanceof Tn?Nt(C):new Tn(C);if(I.g!="")E&&(I.g=E+"."+I.g),Cs(I,I.u);else{var z=c.location;I=z.protocol,E=E?E+"."+z.hostname:z.hostname,z=+z.port;const J=new Tn(null);I&&Ht(J,I),E&&(J.g=E),z&&Cs(J,z),C&&(J.h=C),I=J}return C=d.G,E=d.wa,C&&E&&Xe(I,C,E),Xe(I,"VER",d.ka),Mr(d,I),I}function vc(d,E,C){if(E&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Aa&&!d.ma?new je(new Mi({ab:C})):new je(d.ma),E.Fa(d.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ac(){}n=Ac.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function xs(){}xs.prototype.g=function(d,E){return new an(d,E)};function an(d,E){wt.call(this),this.g=new Ds(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(d?d["X-WebChannel-Client-Profile"]=E.sa:d={"X-WebChannel-Client-Profile":E.sa}),this.g.U=d,(d=E&&E.Qb)&&!N(d)&&(this.g.u=d),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!N(E)&&(this.g.G=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new Ji(this)}v(an,wt),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){ua(this.g)},an.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var C={};C.__data__=d,d=C}else this.v&&(C={},C.__data__=Ss(d),d=C);E.i.push(new Dt(E.Ya++,d)),E.I==3&&Ni(E)},an.prototype.N=function(){this.g.l=null,delete this.j,ua(this.g),delete this.g,an.Z.N.call(this)};function Sc(d){$t.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const C in E){d=C;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}v(Sc,$t);function Cc(){Dn.call(this),this.status=1}v(Cc,Dn);function Ji(d){this.g=d}v(Ji,Ac),Ji.prototype.ra=function(){qt(this.g,"a")},Ji.prototype.qa=function(d){qt(this.g,new Sc(d))},Ji.prototype.pa=function(d){qt(this.g,new Cc)},Ji.prototype.oa=function(){qt(this.g,"b")},xs.prototype.createWebChannel=xs.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,$y=function(){return new xs},Ky=function(){return Co()},Jy=Et,uh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,au=Er,Ql.COMPLETE="complete",Yy=Ql,nc.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Tl=nc,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,Fy=je}).apply(typeof lu<"u"?lu:typeof self<"u"?self:typeof window<"u"?window:{});const Qy="@firebase/firestore",Xy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new My("@firebase/firestore");function io(){return sr.logLevel}function fe(n,...e){if(sr.logLevel<=Le.DEBUG){const t=e.map(ch);sr.debug(`Firestore (${no}): ${n}`,...t)}}function zi(n,...e){if(sr.logLevel<=Le.ERROR){const t=e.map(ch);sr.error(`Firestore (${no}): ${n}`,...t)}}function so(n,...e){if(sr.logLevel<=Le.WARN){const t=e.map(ch);sr.warn(`Firestore (${no}): ${n}`,...t)}}function ch(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Zy(n,s,t)}function Zy(n,e,t){let s=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw zi(s),new Error(s)}function Ke(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||Zy(e,o,s)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class Kb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $b{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let a=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ds,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const y=a;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},h=y=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>h(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?h(y):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ds)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new Wy(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class Qb{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xb{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Qb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bb(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>s(a)))};const o=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=Wb(40);for(let a=0;a<o.length;++a)s.length<20&&o[a]<t&&(s+=e.charAt(o[a]%62))}return s}}function xe(n,e){return n<e?-1:n>e?1:0}function hh(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),a=e.charAt(s);if(o!==a)return dh(o)===dh(a)?xe(o,a):dh(o)?1:-1}return xe(n.length,e.length)}const jb=55296,eD=57343;function dh(n){const e=n.charCodeAt(0);return e>=jb&&e<=eD}function ro(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="__name__";class ai{constructor(e,t,s){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ve(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ai?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const a=ai.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return xe(e.length,t.length)}static compareSegments(e,t){const s=ai.isNumericId(e),o=ai.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ai.extractNumericId(e).compare(ai.extractNumericId(t)):hh(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class ot extends ai{construct(e,t,s){return new ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(j.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const tD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends ai{construct(e,t,s){return new Yt(e,t,s)}static isValidIdentifier(e){return tD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e_}static keyField(){return new Yt([e_])}static fromServerFormat(e){const t=[];let s="",o=0;const a=()=>{if(s.length===0)throw new ce(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ce(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(s+=h,o++):(a(),o++)}if(a(),c)throw new ce(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(ot.fromString(e))}static fromName(e){return new ye(ot.fromString(e).popFirst(5))}static empty(){return new ye(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n,e,t){if(!t)throw new ce(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nD(n,e,t,s){if(e===!0&&s===!0)throw new ce(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function n_(n){if(!ye.isDocumentKey(n))throw new ce(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function i_(n){if(ye.isDocumentKey(n))throw new ce(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function s_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function uu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve(12329,{type:typeof n})}function El(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uu(n);throw new ce(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n,e){const t={typeString:n};return e&&(t.value=e),t}function vl(n,e){if(!s_(n))throw new ce(j.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,a="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${s}' field to equal '${a.value}'`;break}}if(t)throw new ce(j.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=-62135596800,o_=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*o_);return new ut(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<r_)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/o_}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vl(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Ct("string",ut._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new ut(0,0))}static max(){return new Se(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=-1;function iD(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new ut(t+1,0):new ut(t,s));return new ps(o,ye.empty(),e)}function sD(n){return new ps(n.readTime,n.key,Al)}class ps{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ps(Se.min(),ye.empty(),Al)}static max(){return new ps(Se.max(),ye.empty(),Al)}}function rD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(n){if(n.code!==j.FAILED_PRECONDITION||n.message!==oD)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,s)=>{t(e)}))}static reject(e){return new ne(((t,s)=>{s(e)}))}static waitFor(e){return new ne(((t,s)=>{let o=0,a=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++a,c&&a===o&&t()}),(y=>s(y)))})),c=!0,a===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next((o=>o?ne.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,a)=>{s.push(t.call(this,o,a))})),this.waitFor(s)}static mapArray(e,t){return new ne(((s,o)=>{const a=e.length,c=new Array(a);let h=0;for(let y=0;y<a;y++){const p=y;t(e[p]).next((T=>{c[p]=T,++h,h===a&&s(c)}),(T=>o(T)))}}))}static doWhile(e,t){return new ne(((s,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):s()};a()}))}}function aD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=-1;function fu(n){return n==null}function hu(n){return n===0&&1/n==-1/0}function uD(n){return typeof n=="number"&&Number.isInteger(n)&&!hu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="";function cD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=a_(e)),e=fD(n.get(t),e);return a_(e)}function fD(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case l_:t+="";break;default:t+=a}}return t}function a_(n){return n+l_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function c_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?s(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,s,o,a){this.key=e,this.value=t,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=a??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,a){return new Jt(e??this.key,t??this.value,s??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const a=s(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,s),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1,Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,s,o,a){return this}insert(e,t,s){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new f_(this.data.getIterator())}getIteratorFrom(e){return new f_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class f_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Ut(Yt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new h_("Invalid base64 string: "+a):a}})(e);return new Kt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a})(e);return new Kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const hD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=hD.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gs(n){return typeof n=="string"?Kt.fromBase64String(n):Kt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="server_timestamp",p_="__type__",m_="__previous_value__",g_="__local_write_time__";function mh(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[p_])==null?void 0:s.stringValue)===d_}function pu(n){const e=n.mapValue.fields[m_];return mh(e)?pu(e):e}function Sl(n){const e=ms(n.mapValue.fields[g_].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,t,s,o,a,c,h,y,p,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=T}}const mu="(default)";class Cl{constructor(e,t){this.projectId=e,this.database=t||mu}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===mu}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="__type__",pD="__max__",gu={mapValue:{}},__="__vector__",yu="value";function ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mh(n)?4:gD(n)?9007199254740991:mD(n)?10:11:ve(28295,{value:n})}function ui(n,e){if(n===e)return!0;const t=ys(n);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=ms(o.timestampValue),h=ms(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return gs(o.bytesValue).isEqual(gs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Tt(o.geoPointValue.latitude)===Tt(a.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Tt(o.integerValue)===Tt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=Tt(o.doubleValue),h=Tt(a.doubleValue);return c===h?hu(c)===hu(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return ro(n.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return(function(o,a){const c=o.mapValue.fields||{},h=a.mapValue.fields||{};if(u_(c)!==u_(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(h[y]===void 0||!ui(c[y],h[y])))return!1;return!0})(n,e);default:return ve(52216,{left:n})}}function Rl(n,e){return(n.values||[]).find((t=>ui(t,e)))!==void 0}function ao(n,e){if(n===e)return 0;const t=ys(n),s=ys(e);if(t!==s)return xe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const h=Tt(a.integerValue||a.doubleValue),y=Tt(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1})(n,e);case 3:return T_(n.timestampValue,e.timestampValue);case 4:return T_(Sl(n),Sl(e));case 5:return hh(n.stringValue,e.stringValue);case 6:return(function(a,c){const h=gs(a),y=gs(c);return h.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const h=a.split("/"),y=c.split("/");for(let p=0;p<h.length&&p<y.length;p++){const T=xe(h[p],y[p]);if(T!==0)return T}return xe(h.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const h=xe(Tt(a.latitude),Tt(c.latitude));return h!==0?h:xe(Tt(a.longitude),Tt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return E_(n.arrayValue,e.arrayValue);case 10:return(function(a,c){var A,b,V,B;const h=a.fields||{},y=c.fields||{},p=(A=h[yu])==null?void 0:A.arrayValue,T=(b=y[yu])==null?void 0:b.arrayValue,v=xe(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((B=T==null?void 0:T.values)==null?void 0:B.length)||0);return v!==0?v:E_(p,T)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===gu.mapValue&&c===gu.mapValue)return 0;if(a===gu.mapValue)return 1;if(c===gu.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),p=c.fields||{},T=Object.keys(p);y.sort(),T.sort();for(let v=0;v<y.length&&v<T.length;++v){const A=hh(y[v],T[v]);if(A!==0)return A;const b=ao(h[y[v]],p[T[v]]);if(b!==0)return b}return xe(y.length,T.length)})(n.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function T_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return xe(n,e);const t=ms(n),s=ms(e),o=xe(t.seconds,s.seconds);return o!==0?o:xe(t.nanos,s.nanos)}function E_(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const a=ao(t[o],s[o]);if(a)return a}return xe(t.length,s.length)}function uo(n){return gh(n)}function gh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ms(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const a of t.values||[])o?o=!1:s+=",",s+=gh(a);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of s)a?a=!1:o+=",",o+=`${c}:${gh(t.fields[c])}`;return o+"}"})(n.mapValue):ve(61005,{value:n})}function _u(n){switch(ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pu(n);return e?16+_u(e):16;case 5:return 2*n.stringValue.length;case 6:return gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,a)=>o+_u(a)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return rr(s.fields,((a,c)=>{o+=a.length+_u(c)})),o})(n.mapValue);default:throw ve(13486,{value:n})}}function v_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yh(n){return!!n&&"integerValue"in n}function _h(n){return!!n&&"arrayValue"in n}function A_(n){return!!n&&"nullValue"in n}function S_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tu(n){return!!n&&"mapValue"in n}function mD(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[y_])==null?void 0:s.stringValue)===__}function Il(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return rr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Il(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return{...n}}function gD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Tu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=Yt.emptyPath(),s={},o=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,s,o),s={},o=[],t=h.popLast()}c?s[h.lastSegment()]=Il(c):o.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,s,o)}delete(e){const t=this.field(e.popLast());Tu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Tu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){rr(t,((o,a)=>e[o]=a));for(const o of s)delete e[o]}clone(){return new Mn(Il(this.value))}}function C_(n){const e=[];return rr(n.fields,((t,s)=>{const o=new Yt([t]);if(Tu(s)){const a=C_(s.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,s,o,a,c,h){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new sn(e,0,Se.min(),Se.min(),Se.min(),Mn.empty(),0)}static newFoundDocument(e,t,s,o){return new sn(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Se.min(),Se.min(),Mn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Se.min(),Se.min(),Mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t){this.position=e,this.inclusive=t}}function R_(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?s=ye.comparator(ye.fromName(c.referenceValue),t.key):s=ao(c,t.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function I_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ui(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,t="asc"){this.field=e,this.dir=t}}function yD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{}class Rt extends w_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new TD(e,t,s):t==="array-contains"?new AD(e,s):t==="in"?new SD(e,s):t==="not-in"?new CD(e,s):t==="array-contains-any"?new RD(e,s):new Rt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ED(e,s):new vD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ao(t,this.value)):t!==null&&ys(this.value)===ys(t)&&this.matchesComparison(ao(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends w_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Jn(e,t)}matches(e){return M_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function M_(n){return n.op==="and"}function b_(n){return _D(n)&&M_(n)}function _D(n){for(const e of n.filters)if(e instanceof Jn)return!1;return!0}function Th(n){if(n instanceof Rt)return n.field.canonicalString()+n.op.toString()+uo(n.value);if(b_(n))return n.filters.map((e=>Th(e))).join(",");{const e=n.filters.map((t=>Th(t))).join(",");return`${n.op}(${e})`}}function D_(n,e){return n instanceof Rt?(function(s,o){return o instanceof Rt&&s.op===o.op&&s.field.isEqual(o.field)&&ui(s.value,o.value)})(n,e):n instanceof Jn?(function(s,o){return o instanceof Jn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((a,c,h)=>a&&D_(c,o.filters[h])),!0):!1})(n,e):void ve(19439)}function N_(n){return n instanceof Rt?(function(t){return`${t.field.canonicalString()} ${t.op} ${uo(t.value)}`})(n):n instanceof Jn?(function(t){return t.op.toString()+" {"+t.getFilters().map(N_).join(" ,")+"}"})(n):"Filter"}class TD extends Rt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class ED extends Rt{constructor(e,t){super(e,"in",t),this.keys=x_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vD extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=x_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function x_(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ye.fromName(s.referenceValue)))}class AD extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _h(t)&&Rl(t.arrayValue,this.value)}}class SD extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rl(this.value.arrayValue,t)}}class CD extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rl(this.value.arrayValue,t)}}class RD extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_h(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Rl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t=null,s=[],o=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=a,this.startAt=c,this.endAt=h,this.Te=null}}function V_(n,e=null,t=[],s=[],o=null,a=null,c=null){return new ID(n,e,t,s,o,a,c)}function Eh(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Th(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(a){return a.field.canonicalString()+a.dir})(s))).join(","),fu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>uo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>uo(s))).join(",")),e.Te=t}return e.Te}function vh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!D_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!I_(n.startAt,e.startAt)&&I_(n.endAt,e.endAt)}function Ah(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t=null,s=[],o=[],a=null,c="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wD(n,e,t,s,o,a,c,h){return new co(n,e,t,s,o,a,c,h)}function P_(n){return new co(n)}function k_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function U_(n){return n.collectionGroup!==null}function Ml(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ut(Yt.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new wl(a,s))})),t.has(Yt.keyField().canonicalString())||e.Ie.push(new wl(Yt.keyField(),s))}return e.Ie}function ci(n){const e=Re(n);return e.Ee||(e.Ee=MD(e,Ml(n))),e.Ee}function MD(n,e){if(n.limitType==="F")return V_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new wl(o.field,a)}));const t=n.endAt?new Eu(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Eu(n.startAt.position,n.startAt.inclusive):null;return V_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Sh(n,e){const t=n.filters.concat([e]);return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ch(n,e,t){return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vu(n,e){return vh(ci(n),ci(e))&&n.limitType===e.limitType}function L_(n){return`${Eh(ci(n))}|lt:${n.limitType}`}function fo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>N_(o))).join(", ")}]`),fu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>uo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>uo(o))).join(",")),`Target(${s})`})(ci(n))}; limitType=${n.limitType})`}function Au(n,e){return e.isFoundDocument()&&(function(s,o){const a=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ye.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)})(n,e)&&(function(s,o){for(const a of Ml(s))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const a of s.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,h,y){const p=R_(c,h,y);return c.inclusive?p<=0:p<0})(s.startAt,Ml(s),o)||s.endAt&&!(function(c,h,y){const p=R_(c,h,y);return c.inclusive?p>=0:p>0})(s.endAt,Ml(s),o))})(n,e)}function bD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function q_(n){return(e,t)=>{let s=!1;for(const o of Ml(n)){const a=DD(o,e,t);if(a!==0)return a;s=s||o.field.isKeyField()}return 0}}function DD(n,e,t){const s=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(a,c,h){const y=c.data.field(a),p=h.data.field(a);return y!==null&&p!==null?ao(y,p):ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,a]of s)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){rr(this.inner,((t,s)=>{for(const[o,a]of s)e(o,a)}))}isEmpty(){return c_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new mt(ye.comparator);function Gi(){return ND}const O_=new mt(ye.comparator);function bl(...n){let e=O_;for(const t of n)e=e.insert(t.key,t);return e}function B_(n){let e=O_;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function lr(){return Dl()}function z_(){return Dl()}function Dl(){return new or((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xD=new mt(ye.comparator),VD=new Ut(ye.comparator);function Ve(...n){let e=VD;for(const t of n)e=e.add(t);return e}const PD=new Ut(xe);function kD(){return PD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function G_(n){return{integerValue:""+n}}function UD(n,e){return uD(e)?G_(e):Rh(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this._=void 0}}function LD(n,e,t){return n instanceof Cu?(function(o,a){const c={fields:{[p_]:{stringValue:d_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&mh(a)&&(a=pu(a)),a&&(c.fields[m_]=a),{mapValue:c}})(t,e):n instanceof Nl?F_(n,e):n instanceof xl?Y_(n,e):(function(o,a){const c=H_(o,a),h=J_(c)+J_(o.Ae);return yh(c)&&yh(o.Ae)?G_(h):Rh(o.serializer,h)})(n,e)}function qD(n,e,t){return n instanceof Nl?F_(n,e):n instanceof xl?Y_(n,e):t}function H_(n,e){return n instanceof Ru?(function(s){return yh(s)||(function(a){return!!a&&"doubleValue"in a})(s)})(e)?e:{integerValue:0}:null}class Cu extends Su{}class Nl extends Su{constructor(e){super(),this.elements=e}}function F_(n,e){const t=K_(e);for(const s of n.elements)t.some((o=>ui(o,s)))||t.push(s);return{arrayValue:{values:t}}}class xl extends Su{constructor(e){super(),this.elements=e}}function Y_(n,e){let t=K_(e);for(const s of n.elements)t=t.filter((o=>!ui(o,s)));return{arrayValue:{values:t}}}class Ru extends Su{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function J_(n){return Tt(n.integerValue||n.doubleValue)}function K_(n){return _h(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function OD(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Nl&&o instanceof Nl||s instanceof xl&&o instanceof xl?ro(s.elements,o.elements,ui):s instanceof Ru&&o instanceof Ru?ui(s.Ae,o.Ae):s instanceof Cu&&o instanceof Cu})(n.transform,e.transform)}class BD{constructor(e,t){this.version=e,this.transformResults=t}}class fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wu{}function $_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ih(n.key,fi.none()):new Pl(n.key,n.data,fi.none());{const t=n.data,s=Mn.empty();let o=new Ut(Yt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?s.delete(a):s.set(a,c),o=o.add(a)}return new ar(n.key,s,new Yn(o.toArray()),fi.none())}}function zD(n,e,t){n instanceof Pl?(function(o,a,c){const h=o.value.clone(),y=Z_(o.fieldTransforms,a,c.transformResults);h.setAll(y),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof ar?(function(o,a,c){if(!Iu(o.precondition,a))return void a.convertToUnknownDocument(c.version);const h=Z_(o.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(X_(o)),y.setAll(h),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Vl(n,e,t,s){return n instanceof Pl?(function(a,c,h,y){if(!Iu(a.precondition,c))return h;const p=a.value.clone(),T=W_(a.fieldTransforms,y,c);return p.setAll(T),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof ar?(function(a,c,h,y){if(!Iu(a.precondition,c))return h;const p=W_(a.fieldTransforms,y,c),T=c.data;return T.setAll(X_(a)),T.setAll(p),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,s):(function(a,c,h){return Iu(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function GD(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),a=H_(s.transform,o||null);a!=null&&(t===null&&(t=Mn.empty()),t.set(s.field,a))}return t||null}function Q_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ro(s,o,((a,c)=>OD(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pl extends wu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ar extends wu{constructor(e,t,s,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function X_(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Z_(n,e,t){const s=new Map;Ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,h=e.data.field(a.field);s.set(a.field,qD(c,h,t[o]))}return s}function W_(n,e,t){const s=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);s.set(o.field,LD(a,c,e))}return s}class Ih extends wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HD extends wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&zD(a,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Vl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Vl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=z_();return this.mutations.forEach((o=>{const a=e.get(o.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(o.key)?null:h;const y=$_(c,h);y!==null&&s.set(o.key,y),c.isValidDocument()||c.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,((t,s)=>Q_(t,s)))&&ro(this.baseMutations,e.baseMutations,((t,s)=>Q_(t,s)))}}class wh{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return xD})();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,s[c].version);return new wh(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,qe;function KD(n){switch(n){case j.OK:return ve(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ve(15467,{code:n})}}function j_(n){if(n===void 0)return zi("GRPC error has no .code"),j.UNKNOWN;switch(n){case It.OK:return j.OK;case It.CANCELLED:return j.CANCELLED;case It.UNKNOWN:return j.UNKNOWN;case It.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case It.INTERNAL:return j.INTERNAL;case It.UNAVAILABLE:return j.UNAVAILABLE;case It.UNAUTHENTICATED:return j.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case It.NOT_FOUND:return j.NOT_FOUND;case It.ALREADY_EXISTS:return j.ALREADY_EXISTS;case It.PERMISSION_DENIED:return j.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case It.ABORTED:return j.ABORTED;case It.OUT_OF_RANGE:return j.OUT_OF_RANGE;case It.UNIMPLEMENTED:return j.UNIMPLEMENTED;case It.DATA_LOSS:return j.DATA_LOSS;default:return ve(39323,{code:n})}}(qe=It||(It={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=new hs([4294967295,4294967295],0);function eT(n){const e=$D().encode(n),t=new Hy;return t.update(e),new Uint8Array(t.digest())}function tT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hs([t,s],0),new hs([o,a],0)]}class Mh{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new kl(`Invalid padding: ${t}`);if(s<0)throw new kl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new kl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(hs.fromNumber(s)));return o.compare(QD)===1&&(o=new hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eT(e),[s,o]=tT(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(s,o,a);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Mh(a,o,t);return s.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=eT(e),[s,o]=tT(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(s,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t,s,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ul.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Mu(Se.min(),o,new mt(xe),Gi(),Ve())}}class Ul{constructor(e,t,s,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ul(s,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class nT{constructor(e,t){this.targetId=e,this.Ce=t}}class iT{constructor(e,t,s=Kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class sT{constructor(){this.ve=0,this.Fe=rT(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),s=Ve();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ve(38017,{changeType:a})}})),new Ul(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=rT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gi(),this.Je=Du(),this.He=Du(),this.Ye=new mt(xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Ah(a))if(s===0){const c=new ye(a.path);this.et(t,c,sn.newNoDocument(c,Se.min()))}else Ke(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const h=this.ut(e),y=h?this.ct(h,e,c):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=t;let c,h;try{c=gs(s).toUint8Array()}catch(y){if(y instanceof h_)return so("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{h=new Mh(c,o,a)}catch(y){return so(y instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((a=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const h=this.ot(c);if(h){if(a.current&&Ah(h.target)){const y=new ye(h.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,sn.newNoDocument(y,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let s=Ve();this.He.forEach(((a,c)=>{let h=!0;c.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const o=new Mu(e,t,this.Ye,this.je,s);return this.je=Gi(),this.Je=Du(),this.He=Du(),this.Ye=new mt(xe),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ut(xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ut(xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Du(){return new mt(ye.comparator)}function rT(){return new mt(ye.comparator)}const ZD={asc:"ASCENDING",desc:"DESCENDING"},WD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jD={and:"AND",or:"OR"};class eN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bh(n,e){return n.useProto3Json||fu(e)?e:{value:e}}function Nu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tN(n,e){return Nu(n,e.toTimestamp())}function hi(n){return Ke(!!n,49232),Se.fromTimestamp((function(t){const s=ms(t);return new ut(s.seconds,s.nanos)})(n))}function Dh(n,e){return Nh(n,e).canonicalString()}function Nh(n,e){const t=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lT(n){const e=ot.fromString(n);return Ke(dT(e),10190,{key:e.toString()}),e}function xh(n,e){return Dh(n.databaseId,e.path)}function Vh(n,e){const t=lT(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(uT(t))}function aT(n,e){return Dh(n.databaseId,e)}function nN(n){const e=lT(n);return e.length===4?ot.emptyPath():uT(e)}function Ph(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uT(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function cT(n,e,t){return{name:xh(n,e),fields:t.value.mapValue.fields}}function iN(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ve(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(p,T){return p.useProto3Json?(Ke(T===void 0||typeof T=="string",58123),Kt.fromBase64String(T||"")):(Ke(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Kt.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(p){const T=p.code===void 0?j.UNKNOWN:j_(p.code);return new ce(T,p.message||"")})(c);t=new iT(s,o,a,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Vh(n,s.document.name),a=hi(s.document.updateTime),c=s.document.createTime?hi(s.document.createTime):Se.min(),h=new Mn({mapValue:{fields:s.document.fields}}),y=sn.newFoundDocument(o,a,c,h),p=s.targetIds||[],T=s.removedTargetIds||[];t=new bu(p,T,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Vh(n,s.document),a=s.readTime?hi(s.readTime):Se.min(),c=sn.newNoDocument(o,a),h=s.removedTargetIds||[];t=new bu([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Vh(n,s.document),a=s.removedTargetIds||[];t=new bu([],a,o,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:a}=s,c=new JD(o,a),h=s.targetId;t=new nT(h,c)}}return t}function sN(n,e){let t;if(e instanceof Pl)t={update:cT(n,e.key,e.value)};else if(e instanceof Ih)t={delete:xh(n,e.key)};else if(e instanceof ar)t={update:cT(n,e.key,e.data),updateMask:dN(e.fieldMask)};else{if(!(e instanceof HD))return ve(16599,{Vt:e.type});t={verify:xh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(a,c){const h=c.transform;if(h instanceof Cu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Nl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof xl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ru)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw ve(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:tN(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ve(27497)})(n,e.precondition)),t}function rN(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(o,a){let c=o.updateTime?hi(o.updateTime):hi(a);return c.isEqual(Se.min())&&(c=hi(a)),new BD(c,o.transformResults||[])})(t,e)))):[]}function oN(n,e){return{documents:[aT(n,e.path)]}}function lN(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=aT(n,o);const a=(function(p){if(p.length!==0)return hT(Jn.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(p){if(p.length!==0)return p.map((T=>(function(A){return{field:ho(A.field),direction:cN(A.dir)}})(T)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=bh(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function aN(n){let e=nN(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=(function(v){const A=fT(v);return A instanceof Jn&&b_(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((A=>(function(V){return new wl(po(V.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(A)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let A;return A=typeof v=="object"?v.value:v,fu(A)?null:A})(t.limit));let y=null;t.startAt&&(y=(function(v){const A=!!v.before,b=v.values||[];return new Eu(b,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const A=!v.before,b=v.values||[];return new Eu(b,A)})(t.endAt)),wD(e,o,c,a,h,"F",y,p)}function uN(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=po(t.unaryFilter.field);return Rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=po(t.unaryFilter.field);return Rt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=po(t.unaryFilter.field);return Rt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=po(t.unaryFilter.field);return Rt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Rt.create(po(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Jn.create(t.compositeFilter.filters.map((s=>fT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(n):ve(30097,{filter:n})}function cN(n){return ZD[n]}function fN(n){return WD[n]}function hN(n){return jD[n]}function ho(n){return{fieldPath:n.canonicalString()}}function po(n){return Yt.fromServerFormat(n.fieldPath)}function hT(n){return n instanceof Rt?(function(t){if(t.op==="=="){if(S_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(A_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(S_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(A_(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:fN(t.op),value:t.value}}})(n):n instanceof Jn?(function(t){const s=t.getFilters().map((o=>hT(o)));return s.length===1?s[0]:{compositeFilter:{op:hN(t.op),filters:s}}})(n):ve(54877,{filter:n})}function dN(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function dT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,s,o,a=Se.min(),c=Se.min(),h=Kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=y}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.yt=e}}function mN(n){const e=aN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ch(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.Cn=new yN}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ps.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class yN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ut(ot.comparator),a=!o.has(s);return this.index[t]=o.add(s),a}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ut(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mT=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(mT,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new mo(0)}static cr(){return new mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="LruGarbageCollector",_N=1048576;function yT([n,e],[t,s]){const o=xe(n,t);return o===0?xe(e,s):o}class TN{constructor(e){this.Ir=e,this.buffer=new Ut(yT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();yT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(gT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lo(t)?fe(gT,"Ignoring IndexedDB error during garbage collection: ",t):await oo(t)}await this.Vr(3e5)}))}}class vN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(cu.ce);const s=new TN(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(pT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,a,c,h,y,p;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,c=Date.now(),this.nthSequenceNumber(e,o)))).next((v=>(s=v,h=Date.now(),this.removeTargets(e,s,t)))).next((v=>(a=v,y=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(p=Date.now(),io()<=Le.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${a} targets in `+(y-h)+`ms
	Removed ${v} documents in `+(p-y)+`ms
Total Duration: ${p-T}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:v}))))}}function AN(n,e){return new vN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.changes=new or((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Vl(s.mutation,o,Yn.empty(),ut.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ve()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ve()){const o=lr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((a=>{let c=bl();return a.forEach(((h,y)=>{c=c.insert(h,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=lr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ve())))}populateOverlays(e,t,s){const o=[];return s.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,s,o){let a=Gi();const c=Dl(),h=(function(){return Dl()})();return t.forEach(((y,p)=>{const T=s.get(p.key);o.has(p.key)&&(T===void 0||T.mutation instanceof ar)?a=a.insert(p.key,p):T!==void 0?(c.set(p.key,T.mutation.getFieldMask()),Vl(T.mutation,p,T.mutation.getFieldMask(),ut.now())):c.set(p.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,a).next((y=>(y.forEach(((p,T)=>c.set(p,T))),t.forEach(((p,T)=>h.set(p,new CN(T,c.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=Dl();let o=new mt(((c,h)=>c-h)),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let T=s.get(y)||Yn.empty();T=h.applyToLocalView(p,T),s.set(y,T);const v=(o.get(h.batchId)||Ve()).add(y);o=o.insert(h.batchId,v)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),p=y.key,T=y.value,v=z_();T.forEach((A=>{if(!a.has(A)){const b=$_(t.get(A),s.get(A));b!==null&&v.set(A,b),a=a.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return ne.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):U_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-a.size):ne.resolve(lr());let h=Al,y=a;return c.next((p=>ne.forEach(p,((T,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),a.get(T)?ne.resolve():this.remoteDocumentCache.getEntry(e,T).next((A=>{y=y.insert(T,A)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,y,p,Ve()))).next((T=>({batchId:h,changes:B_(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let o=bl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const a=t.collectionGroup;let c=bl();return this.indexManager.getCollectionParents(e,a).next((h=>ne.forEach(h,(y=>{const p=(function(v,A){return new co(A,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,y.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((T=>{T.forEach(((v,A)=>{c=c.insert(v,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a,o)))).next((c=>{a.forEach(((y,p)=>{const T=p.getKey();c.get(T)===null&&(c=c.insert(T,sn.newInvalidDocument(T)))}));let h=bl();return c.forEach(((y,p)=>{const T=a.get(y);T!==void 0&&Vl(T.mutation,p,Yn.empty(),ut.now()),Au(t,p)&&(h=h.insert(y,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:hi(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:mN(o.bundledQuery),readTime:hi(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.overlays=new mt(ye.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=lr();return ne.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&s.set(o,a)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,a)=>{this.St(e,t,a)})),ne.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const o=lr(),a=t.length+1,c=new ye(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const y=h.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&y.largestBatchId>s&&o.set(y.getKey(),y)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let a=new mt(((p,T)=>p-T));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let T=a.get(p.largestBatchId);T===null&&(T=lr(),a=a.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const h=lr(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,T)=>h.set(p,T))),!(h.size()>=o)););return ne.resolve(h)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new YD(t,s));let a=this.qr.get(t);a===void 0&&(a=Ve(),this.qr.set(t,a)),this.qr.set(t,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.Qr=new Ut(Bt.$r),this.Ur=new Ut(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Bt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Bt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new ot([])),s=new Bt(t,e),o=new Bt(t,e+1),a=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new ot([])),s=new Bt(t,e),o=new Bt(t,e+1);let a=Ve();return this.Ur.forEachInRange([s,o],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Bt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||xe(e.Yr,t.Yr)}static Kr(e,t){return xe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Bt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new FD(a,t,s,o);this.mutationQueue.push(c);for(const h of o)this.Zr=this.Zr.add(new Bt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ne.resolve(c)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),a=o<0?0:o;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?ph:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Bt(t,0),o=new Bt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([s,o],(c=>{const h=this.Xr(c.Yr);a.push(h)})),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ut(xe);return t.forEach((o=>{const a=new Bt(o,0),c=new Bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(h=>{s=s.add(h.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let a=s;ye.isDocumentKey(a)||(a=a.child(""));const c=new Bt(new ye(a),0);let h=new Ut(xe);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(h=h.add(y.Yr)),!0)}),c),ne.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,(o=>{const a=new Bt(o.key,t.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Bt(t,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.ri=e,this.docs=(function(){return new mt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),a=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let s=Gi();return t.forEach((o=>{const a=this.docs.get(o);s=s.insert(o,a?a.document.mutableCopy():sn.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let a=Gi();const c=t.path,h=new ye(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:p,value:{document:T}}=y.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||rD(sD(T),s)<=0||(o.has(T.key)||Au(t,T))&&(a=a.insert(T.key,T.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,s,o){ve(9500)}ii(e,t){return ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new NN(this)}getSize(e){return ne.resolve(this.size)}}class NN extends SN{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.persistence=e,this.si=new or((t=>Eh(t)),vh),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new kh,this.targetCount=0,this.ai=mo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let o=0;const a=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),ne.waitFor(a).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((c=>{a.push(o.markPotentiallyOrphaned(e,c))})),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,t){this.ui={},this.overlays={},this.ci=new cu(0),this.li=!1,this.li=!0,this.hi=new MN,this.referenceDelegate=e(this),this.Pi=new xN(this),this.indexManager=new gN,this.remoteDocumentCache=(function(o){return new DN(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new pN(t),this.Ii=new IN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new bN(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const o=new VN(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class VN extends lD{constructor(e){super(),this.currentSequenceNumber=e}}class Uh{constructor(e){this.persistence=e,this.Ri=new kh,this.Vi=null}static mi(e){return new Uh(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=ye.fromPath(s);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xu{constructor(e,t){this.persistence=e,this.pi=new or((s=>cD(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=AN(this,t)}static mi(e,t){return new xu(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((a=>a?ne.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((h=>{h||(s++,a.removeEntry(c,Se.min()))})))).next((()=>a.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_u(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ve(),o=Ve();for(const a of t.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Lh(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return IM()?8:aD(CM())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,o,s).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new PN;return this.Ss(e,t,c).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>a.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(io()<=Le.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(io()<=Le.DEBUG&&fe("QueryEngine","Query:",fo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(io()<=Le.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(t))):ne.resolve())}ys(e,t){if(k_(t))return ne.resolve(null);let s=ci(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ch(t,null,"F"),s=ci(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((a=>{const c=Ve(...a);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,s).next((y=>{const p=this.Ds(t,h);return this.Cs(t,p,c,y.readTime)?this.ys(e,Ch(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,s,o){return k_(t)||o.isEqual(Se.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,s,o)?ne.resolve(null):(io()<=Le.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(t)),this.vs(e,c,t,iD(o,Al)).next((h=>h)))}))}Ds(e,t){let s=new Ut(q_(e));return t.forEach(((o,a)=>{Au(e,a)&&(s=s.add(a))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,s){return io()<=Le.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",fo(t)),this.ps.getDocumentsMatchingQuery(e,t,ps.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="LocalStore",UN=3e8;class LN{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new mt(xe),this.xs=new or((a=>Eh(a)),vh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function qN(n,e,t,s){return new LN(n,e,t,s)}async function TT(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((a=>{const c=[],h=[];let y=Ve();for(const p of o){c.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}for(const p of a){h.push(p.batchId);for(const T of p.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(s,y).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:h})))}))}))}function ON(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,y,p,T){const v=p.batch,A=v.keys();let b=ne.resolve();return A.forEach((V=>{b=b.next((()=>T.getEntry(y,V))).next((B=>{const F=p.docVersions.get(V);Ke(F!==null,48541),B.version.compareTo(F)<0&&(v.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),T.addEntry(B)))}))})),b.next((()=>h.mutationQueue.removeMutationBatch(y,v)))})(t,s,e,a).next((()=>a.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let y=Ve();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(y=y.add(h.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function ET(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function BN(n,e){const t=Re(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const h=[];e.targetChanges.forEach(((T,v)=>{const A=o.get(v);if(!A)return;h.push(t.Pi.removeMatchingKeys(a,T.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(a,T.addedDocuments,v))));let b=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Kt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):T.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(T.resumeToken,s)),o=o.insert(v,b),(function(B,F,ee){return B.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=UN?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(A,b,T)&&h.push(t.Pi.updateTargetData(a,b))}));let y=Gi(),p=Ve();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))})),h.push(zN(a,c,e.documentUpdates).next((T=>{y=T.ks,p=T.qs}))),!s.isEqual(Se.min())){const T=t.Pi.getLastRemoteSnapshotVersion(a).next((v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,s)));h.push(T)}return ne.waitFor(h).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,y,p))).next((()=>y))})).then((a=>(t.Ms=o,a)))}function zN(n,e,t){let s=Ve(),o=Ve();return t.forEach((a=>s=s.add(a))),e.getEntries(n,s).next((a=>{let c=Gi();return t.forEach(((h,y)=>{const p=a.get(h);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(h)),y.isNoDocument()&&y.version.isEqual(Se.min())?(e.removeEntry(h,y.readTime),c=c.insert(h,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),c=c.insert(h,y)):fe(qh,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",y.version)})),{ks:c,qs:o}}))}function GN(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ph),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function HN(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((a=>a?(o=a,ne.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new _s(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Oh(n,e,t){const s=Re(n),o=s.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",a,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!lo(c))throw c;fe(qh,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function vT(n,e,t){const s=Re(n);let o=Se.min(),a=Ve();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,p,T){const v=Re(y),A=v.xs.get(T);return A!==void 0?ne.resolve(v.Ms.get(A)):v.Pi.getTargetData(p,T)})(s,c,ci(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,h.targetId).next((y=>{a=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?a:Ve()))).next((h=>(FN(s,bD(e),h),{documents:h,Qs:a})))))}function FN(n,e,t){let s=n.Os.get(e)||Se.min();t.forEach(((o,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)})),n.Os.set(e,s)}class AT{constructor(){this.activeTargetIds=kD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YN{constructor(){this.Mo=new AT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new AT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="ConnectivityMonitor";class CT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(ST,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(ST,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu=null;function Bh(){return Vu===null?Vu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vu++,"0x"+Vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RestConnection",KN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $N{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===mu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,a){const c=Bh(),h=this.zo(e,t.toUriEncodedString());fe(zh,`Sending RPC '${e}' ${c}:`,h,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,a);const{host:p}=new URL(h),T=Wf(p);return this.Jo(e,h,y,s,T).then((v=>(fe(zh,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw so(zh,`RPC '${e}' ${c} failed with error: `,v,"url: ",h,"request:",s),v}))}Ho(e,t,s,o,a,c){return this.Go(e,t,s,o,a)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+no})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),s&&s.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const s=KN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class XN extends $N{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,a){const c=Bh();return new Promise(((h,y)=>{const p=new Fy;p.setWithCredentials(!0),p.listenOnce(Yy.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case au.NO_ERROR:const v=p.getResponseJson();fe(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),h(v);break;case au.TIMEOUT:fe(rn,`RPC '${e}' ${c} timed out`),y(new ce(j.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:const A=p.getStatus();if(fe(rn,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const V=b==null?void 0:b.error;if(V&&V.status&&V.message){const B=(function(ee){const ie=ee.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(ie)>=0?ie:j.UNKNOWN})(V.status);y(new ce(B,V.message))}else y(new ce(j.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new ce(j.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{fe(rn,`RPC '${e}' ${c} completed.`)}}));const T=JSON.stringify(o);fe(rn,`RPC '${e}' ${c} sending request:`,o),p.send(t,"POST",T,s,15)}))}T_(e,t,s){const o=Bh(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=$y(),h=Ky(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const T=a.join("");fe(rn,`Creating RPC '${e}' stream ${o}: ${T}`,y);const v=c.createWebChannel(T,y);this.I_(v);let A=!1,b=!1;const V=new QN({Yo:F=>{b?fe(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(A||(fe(rn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),A=!0),fe(rn,`RPC '${e}' stream ${o} sending:`,F),v.send(F))},Zo:()=>v.close()}),B=(F,ee,ie)=>{F.listen(ee,(X=>{try{ie(X)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return B(v,Tl.EventType.OPEN,(()=>{b||(fe(rn,`RPC '${e}' stream ${o} transport opened.`),V.o_())})),B(v,Tl.EventType.CLOSE,(()=>{b||(b=!0,fe(rn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(v))})),B(v,Tl.EventType.ERROR,(F=>{b||(b=!0,so(rn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),V.a_(new ce(j.UNAVAILABLE,"The operation could not be completed")))})),B(v,Tl.EventType.MESSAGE,(F=>{var ee;if(!b){const ie=F.data[0];Ke(!!ie,16349);const X=ie,oe=(X==null?void 0:X.error)||((ee=X[0])==null?void 0:ee.error);if(oe){fe(rn,`RPC '${e}' stream ${o} received error:`,oe);const he=oe.status;let ae=(function(M){const P=It[M];if(P!==void 0)return j_(P)})(he),D=oe.message;ae===void 0&&(ae=j.INTERNAL,D="Unknown error status: "+he+" with message "+oe.message),b=!0,V.a_(new ce(ae,D)),v.close()}else fe(rn,`RPC '${e}' stream ${o} received:`,ie),V.u_(ie)}})),B(h,Jy.STAT_EVENT,(F=>{F.stat===uh.PROXY?fe(rn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===uh.NOPROXY&&fe(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){return new eN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,t,s=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="PersistentStream";class wT{constructor(e,t,s,o,a,c,h,y){this.Mi=e,this.S_=s,this.b_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(zi(t.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce(j.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(IT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(IT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ZN extends wT{constructor(e,t,s,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=iN(this.serializer,e),s=(function(a){if(!("targetChange"in a))return Se.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?hi(c.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Ph(this.serializer),t.addTarget=(function(a,c){let h;const y=c.target;if(h=Ah(y)?{documents:oN(a,y)}:{query:lN(a,y).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=oT(a,c.resumeToken);const p=bh(a,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(Se.min())>0){h.readTime=Nu(a,c.snapshotVersion.toTimestamp());const p=bh(a,c.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const s=uN(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Ph(this.serializer),t.removeTarget=e,this.q_(t)}}class WN extends wT{constructor(e,t,s,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=rN(e.writeResults,e.commitTime),s=hi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Ph(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>sN(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{}class ex extends jN{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Nh(t,s),o,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(j.UNKNOWN,a.toString())}))}Ho(e,t,s,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Nh(t,s),o,c,h,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(j.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zi(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="RemoteStore";class nx{constructor(e,t,s,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{cr(this)&&(fe(ur,"Restarting streams for network reachability change."),await(async function(y){const p=Re(y);p.Ea.add(4),await Ll(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ku(p)})(this))}))})),this.Ra=new tx(s,o)}}async function ku(n){if(cr(n))for(const e of n.da)await e(!0)}async function Ll(n){for(const e of n.da)await e(!1)}function MT(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jh(t)?Yh(t):go(t).O_()&&Fh(t,e))}function Hh(n,e){const t=Re(n),s=go(t);t.Ia.delete(e),s.O_()&&bT(t,e),t.Ia.size===0&&(s.O_()?s.L_():cr(t)&&t.Ra.set("Unknown"))}function Fh(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}go(n).Y_(e)}function bT(n,e){n.Va.Ue(e),go(n).Z_(e)}function Yh(n){n.Va=new XD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),go(n).start(),n.Ra.ua()}function Jh(n){return cr(n)&&!go(n).x_()&&n.Ia.size>0}function cr(n){return Re(n).Ea.size===0}function DT(n){n.Va=void 0}async function ix(n){n.Ra.set("Online")}async function sx(n){n.Ia.forEach(((e,t)=>{Fh(n,e)}))}async function rx(n,e){DT(n),Jh(n)?(n.Ra.ha(e),Yh(n)):n.Ra.set("Unknown")}async function ox(n,e,t){if(n.Ra.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await(async function(o,a){const c=a.cause;for(const h of a.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ia.delete(h),o.Va.removeTarget(h))})(n,e)}catch(s){fe(ur,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Uu(n,s)}else if(e instanceof bu?n.Va.Ze(e):e instanceof nT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const s=await ET(n.localStore);t.compareTo(s)>=0&&await(function(a,c){const h=a.Va.Tt(c);return h.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const T=a.Ia.get(p);T&&a.Ia.set(p,T.withResumeToken(y.resumeToken,c))}})),h.targetMismatches.forEach(((y,p)=>{const T=a.Ia.get(y);if(!T)return;a.Ia.set(y,T.withResumeToken(Kt.EMPTY_BYTE_STRING,T.snapshotVersion)),bT(a,y);const v=new _s(T.target,y,p,T.sequenceNumber);Fh(a,v)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){fe(ur,"Failed to raise snapshot:",s),await Uu(n,s)}}async function Uu(n,e,t){if(!lo(e))throw e;n.Ea.add(1),await Ll(n),n.Ra.set("Offline"),t||(t=()=>ET(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(ur,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ku(n)}))}function NT(n,e){return e().catch((t=>Uu(n,t,e)))}async function Lu(n){const e=Re(n),t=Ts(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ph;for(;lx(e);)try{const o=await GN(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,ax(e,o)}catch(o){await Uu(e,o)}xT(e)&&VT(e)}function lx(n){return cr(n)&&n.Ta.length<10}function ax(n,e){n.Ta.push(e);const t=Ts(n);t.O_()&&t.X_&&t.ea(e.mutations)}function xT(n){return cr(n)&&!Ts(n).x_()&&n.Ta.length>0}function VT(n){Ts(n).start()}async function ux(n){Ts(n).ra()}async function cx(n){const e=Ts(n);for(const t of n.Ta)e.ea(t.mutations)}async function fx(n,e,t){const s=n.Ta.shift(),o=wh.from(s,e,t);await NT(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Lu(n)}async function hx(n,e){e&&Ts(n).X_&&await(async function(s,o){if((function(c){return KD(c)&&c!==j.ABORTED})(o.code)){const a=s.Ta.shift();Ts(s).B_(),await NT(s,(()=>s.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Lu(s)}})(n,e),xT(n)&&VT(n)}async function PT(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),fe(ur,"RemoteStore received new credentials");const s=cr(t);t.Ea.add(3),await Ll(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ku(t)}async function dx(n,e){const t=Re(n);e?(t.Ea.delete(2),await ku(t)):e||(t.Ea.add(2),await Ll(t),t.Ra.set("Unknown"))}function go(n){return n.ma||(n.ma=(function(t,s,o){const a=Re(t);return a.sa(),new ZN(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:ix.bind(null,n),t_:sx.bind(null,n),r_:rx.bind(null,n),H_:ox.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Jh(n)?Yh(n):n.Ra.set("Unknown")):(await n.ma.stop(),DT(n))}))),n.ma}function Ts(n){return n.fa||(n.fa=(function(t,s,o){const a=Re(t);return a.sa(),new WN(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:ux.bind(null,n),r_:hx.bind(null,n),ta:cx.bind(null,n),na:fx.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Lu(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(ur,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,s,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=a,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,a){const c=Date.now()+s,h=new Kh(e,t,c,o,a);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $h(n,e){if(zi("AsyncQueue",`${e}: ${n}`),lo(n))return new ce(j.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=bl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new yo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.ga=new mt(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class _o{constructor(e,t,s,o,a,c,h,y,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,o,a){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new _o(e,t,yo.emptySet(t),c,s,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class mx{constructor(){this.queries=UT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),a=o.queries;o.queries=UT(),a.forEach(((c,h)=>{for(const y of h.Sa)y.onError(s)}))})(this,new ce(j.ABORTED,"Firestore shutting down"))}}function UT(){return new or((n=>L_(n)),vu)}async function gx(n,e){const t=Re(n);let s=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(s=2):(a=new px,s=e.Da()?0:1);try{switch(s){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=$h(c,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Qh(t)}async function yx(n,e){const t=Re(n),s=e.query;let o=3;const a=t.queries.get(s);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function _x(n,e){const t=Re(n);let s=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const h of c.Sa)h.Fa(o)&&(s=!0);c.wa=o}}s&&Qh(t)}function Tx(n,e,t){const s=Re(n),o=s.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);s.queries.delete(e)}function Qh(n){n.Ca.forEach((e=>{e.next()}))}var Xh,LT;(LT=Xh||(Xh={})).Ma="default",LT.Cache="cache";class Ex{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new _o(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.key=e}}class OT{constructor(e){this.key=e}}class vx{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=q_(e),this.tu=new yo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new kT,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,v)=>{const A=o.get(T),b=Au(this.query,v)?v:null,V=!!A&&this.mutatedKeys.has(A.key),B=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let F=!1;A&&b?A.data.isEqual(b.data)?V!==B&&(s.track({type:3,doc:b}),F=!0):this.su(A,b)||(s.track({type:2,doc:b}),F=!0,(y&&this.eu(b,y)>0||p&&this.eu(b,p)<0)&&(h=!0)):!A&&b?(s.track({type:0,doc:b}),F=!0):A&&!b&&(s.track({type:1,doc:A}),F=!0,(y||p)&&(h=!0)),F&&(b?(c=c.add(b),a=B?a.add(T):a.delete(T)):(c=c.delete(T),a=a.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),a=a.delete(T.key),s.track({type:1,doc:T})}return{tu:c,iu:s,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((T,v)=>(function(b,V){const B=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:F})}};return B(b)-B(V)})(T.type,v.type)||this.eu(T.doc,v.doc))),this.ou(s),o=o??!1;const h=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,c.length!==0||p?{snapshot:new _o(this.query,e.tu,a,c,e.mutatedKeys,y===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new OT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new qT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zh="SyncEngine";class Ax{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Sx{constructor(e){this.key=e,this.hu=!1}}class Cx{constructor(e,t,s,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new or((h=>L_(h)),vu),this.Iu=new Map,this.Eu=new Set,this.du=new mt(ye.comparator),this.Au=new Map,this.Ru=new kh,this.Vu={},this.mu=new Map,this.fu=mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Rx(n,e,t=!0){const s=KT(n);let o;const a=s.Tu.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await BT(s,e,t,!0),o}async function Ix(n,e){const t=KT(n);await BT(t,e,!0,!1)}async function BT(n,e,t,s){const o=await HN(n.localStore,ci(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let h;return s&&(h=await wx(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&MT(n.remoteStore,o),h}async function wx(n,e,t,s,o){n.pu=(v,A,b)=>(async function(B,F,ee,ie){let X=F.view.ru(ee);X.Cs&&(X=await vT(B.localStore,F.query,!1).then((({documents:D})=>F.view.ru(D,X))));const oe=ie&&ie.targetChanges.get(F.targetId),he=ie&&ie.targetMismatches.get(F.targetId)!=null,ae=F.view.applyChanges(X,B.isPrimaryClient,oe,he);return JT(B,F.targetId,ae.au),ae.snapshot})(n,v,A,b);const a=await vT(n.localStore,e,!0),c=new vx(e,a.Qs),h=c.ru(a.documents),y=Ul.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),p=c.applyChanges(h,n.isPrimaryClient,y);JT(n,t,p.au);const T=new Ax(e,t,c);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function Mx(n,e,t){const s=Re(n),o=s.Tu.get(e),a=s.Iu.get(o.targetId);if(a.length>1)return s.Iu.set(o.targetId,a.filter((c=>!vu(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Oh(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Hh(s.remoteStore,o.targetId),Wh(s,o.targetId)})).catch(oo)):(Wh(s,o.targetId),await Oh(s.localStore,o.targetId,!0))}async function bx(n,e){const t=Re(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Hh(t.remoteStore,s.targetId))}async function Dx(n,e,t){const s=Lx(n);try{const o=await(function(c,h){const y=Re(c),p=ut.now(),T=h.reduce(((b,V)=>b.add(V.key)),Ve());let v,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let V=Gi(),B=Ve();return y.Ns.getEntries(b,T).next((F=>{V=F,V.forEach(((ee,ie)=>{ie.isValidDocument()||(B=B.add(ee))}))})).next((()=>y.localDocuments.getOverlayedDocuments(b,V))).next((F=>{v=F;const ee=[];for(const ie of h){const X=GD(ie,v.get(ie.key).overlayedDocument);X!=null&&ee.push(new ar(ie.key,X,C_(X.value.mapValue),fi.exists(!0)))}return y.mutationQueue.addMutationBatch(b,p,ee,h)})).next((F=>{A=F;const ee=F.applyToLocalDocumentSet(v,B);return y.documentOverlayCache.saveOverlays(b,F.batchId,ee)}))})).then((()=>({batchId:A.batchId,changes:B_(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,h,y){let p=c.Vu[c.currentUser.toKey()];p||(p=new mt(xe)),p=p.insert(h,y),c.Vu[c.currentUser.toKey()]=p})(s,o.batchId,t),await ql(s,o.changes),await Lu(s.remoteStore)}catch(o){const a=$h(o,"Failed to persist write");t.reject(a)}}async function zT(n,e){const t=Re(n);try{const s=await BN(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const c=t.Au.get(a);c&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Ke(c.hu,14607):o.removedDocuments.size>0&&(Ke(c.hu,42227),c.hu=!1))})),await ql(t,s,e)}catch(s){await oo(s)}}function GT(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((a,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const y=Re(c);y.onlineState=h;let p=!1;y.queries.forEach(((T,v)=>{for(const A of v.Sa)A.va(h)&&(p=!0)})),p&&Qh(y)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Nx(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),a=o&&o.key;if(a){let c=new mt(ye.comparator);c=c.insert(a,sn.newNoDocument(a,Se.min()));const h=Ve().add(a),y=new Mu(Se.min(),new Map,new mt(xe),c,h);await zT(s,y),s.du=s.du.remove(a),s.Au.delete(e),jh(s)}else await Oh(s.localStore,e,!1).then((()=>Wh(s,e,t))).catch(oo)}async function xx(n,e){const t=Re(n),s=e.batch.batchId;try{const o=await ON(t.localStore,e);FT(t,s,null),HT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ql(t,o)}catch(o){await oo(o)}}async function Vx(n,e,t){const s=Re(n);try{const o=await(function(c,h){const y=Re(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let T;return y.mutationQueue.lookupMutationBatch(p,h).next((v=>(Ke(v!==null,37113),T=v.keys(),y.mutationQueue.removeMutationBatch(p,v)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,T,h))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T))).next((()=>y.localDocuments.getDocuments(p,T)))}))})(s.localStore,e);FT(s,e,t),HT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ql(s,o)}catch(o){await oo(o)}}function HT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function FT(n,e,t){const s=Re(n);let o=s.Vu[s.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Wh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||YT(n,s)}))}function YT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Hh(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),jh(n))}function JT(n,e,t){for(const s of t)s instanceof qT?(n.Ru.addReference(s.key,e),Px(n,s)):s instanceof OT?(fe(Zh,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||YT(n,s.key)):ve(19791,{wu:s})}function Px(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(fe(Zh,"New document in limbo: "+t),n.Eu.add(s),jh(n))}function jh(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(ot.fromString(e)),s=n.fu.next();n.Au.set(s,new Sx(t)),n.du=n.du.insert(t,s),MT(n.remoteStore,new _s(ci(P_(t.path)),s,"TargetPurposeLimboResolution",cu.ce))}}async function ql(n,e,t){const s=Re(n),o=[],a=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,y)=>{c.push(s.pu(y,e,t).then((p=>{var T;if((p||t)&&s.isPrimaryClient){const v=p?!p.fromCache:(T=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:T.current;s.sharedClientState.updateQueryState(y.targetId,v?"current":"not-current")}if(p){o.push(p);const v=Lh.As(y.targetId,p);a.push(v)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(y,p){const T=Re(y);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>ne.forEach(p,(A=>ne.forEach(A.Es,(b=>T.persistence.referenceDelegate.addReference(v,A.targetId,b))).next((()=>ne.forEach(A.ds,(b=>T.persistence.referenceDelegate.removeReference(v,A.targetId,b)))))))))}catch(v){if(!lo(v))throw v;fe(qh,"Failed to update sequence numbers: "+v)}for(const v of p){const A=v.targetId;if(!v.fromCache){const b=T.Ms.get(A),V=b.snapshotVersion,B=b.withLastLimboFreeSnapshotVersion(V);T.Ms=T.Ms.insert(A,B)}}})(s.localStore,a))}async function kx(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){fe(Zh,"User change. New user:",e.toKey());const s=await TT(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((h=>{h.forEach((y=>{y.reject(new ce(j.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ql(t,s.Ls)}}function Ux(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return Ve().add(s.key);{let o=Ve();const a=t.Iu.get(e);if(!a)return o;for(const c of a){const h=t.Tu.get(c);o=o.unionWith(h.view.nu)}return o}}function KT(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ux.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nx.bind(null,e),e.Pu.H_=_x.bind(null,e.eventManager),e.Pu.yu=Tx.bind(null,e.eventManager),e}function Lx(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vx.bind(null,e),e}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qN(this.persistence,new kN,e.initialUser,this.serializer)}Cu(e){return new _T(Uh.mi,this.serializer)}Du(e){return new YN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class qx extends qu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof xu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new EN(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new _T((s=>xu.mi(s,t)),this.serializer)}}class ed{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>GT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=kx.bind(null,this.syncEngine),await dx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mx})()}createDatastore(e){const t=Pu(e.databaseInfo.databaseId),s=(function(a){return new XN(a)})(e.databaseInfo);return(function(a,c,h,y){return new ex(a,c,h,y)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,a,c,h){return new nx(s,o,a,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>GT(this.syncEngine,t,0)),(function(){return CT.v()?new CT:new JN})())}createSyncEngine(e,t){return(function(o,a,c,h,y,p,T){const v=new Cx(o,a,c,h,y,p);return T&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Re(o);fe(ur,"RemoteStore shutting down."),a.Ea.add(5),await Ll(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ed.provider={build:()=>new ed};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class Bx{constructor(e,t,s,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,(async c=>{fe(Es,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(fe(Es,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=$h(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function td(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Es,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await TT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function $T(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zx(n);fe(Es,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>PT(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>PT(e.remoteStore,o))),n._onlineComponents=e}async function zx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Es,"Using user provided OfflineComponentProvider");try{await td(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===j.FAILED_PRECONDITION||o.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;so("Error using user provided cache. Falling back to memory cache: "+t),await td(n,new qu)}}else fe(Es,"Using default OfflineComponentProvider"),await td(n,new qx(void 0));return n._offlineComponents}async function QT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Es,"Using user provided OnlineComponentProvider"),await $T(n,n._uninitializedComponentsProvider._online)):(fe(Es,"Using default OnlineComponentProvider"),await $T(n,new ed))),n._onlineComponents}function Gx(n){return QT(n).then((e=>e.syncEngine))}async function Hx(n){const e=await QT(n),t=e.eventManager;return t.onListen=Rx.bind(null,e.syncEngine),t.onUnlisten=Mx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ix.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bx.bind(null,e.syncEngine),t}function Fx(n,e,t={}){const s=new ds;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,h,y,p){const T=new Ox({next:A=>{T.Nu(),c.enqueueAndForget((()=>yx(a,v))),A.fromCache&&y.source==="server"?p.reject(new ce(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),v=new Ex(h,T,{includeMetadataChanges:!0,qa:!0});return gx(a,v)})(await Hx(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firestore.googleapis.com",jT=!0;class eE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WT,this.ssl=jT}else this.host=e.host,this.ssl=e.ssl??jT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_N)throw new ce(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Jb;switch(s.type){case"firstParty":return new Xb(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ZT.get(t);s&&(fe("ComponentProvider","Removing Datastore"),ZT.delete(t),s.terminate())})(this),Promise.resolve()}}function Yx(n,e,t,s={}){var p;n=El(n,Ou);const o=Wf(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;o&&(TM(`https://${h}`),SM("Firestore",!0)),a.host!==WT&&a.host!==h&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...a,host:h,ssl:o,emulatorOptions:s};if(!su(y,c)&&(n._setSettings(y),s.mockUserToken)){let T,v;if(typeof s.mockUserToken=="string")T=s.mockUserToken,v=nn.MOCK_USER;else{T=EM(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ce(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(A)}n._authCredentials=new Kb(new Wy(T,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new fr(this.firestore,e,this._query)}}class zt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(vl(t,zt._jsonSchema))return new zt(e,s||null,new ye(ot.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Ct("string",zt._jsonSchemaVersion),referencePath:Ct("string")};class vs extends fr{constructor(e,t,s){super(e,t,P_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new ye(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function Jx(n,e,...t){if(n=eo(n),t_("collection","path",e),n instanceof Ou){const s=ot.fromString(e,...t);return i_(s),new vs(n,null,s)}{if(!(n instanceof zt||n instanceof vs))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return i_(s),new vs(n.firestore,null,s)}}function tE(n,e,...t){if(n=eo(n),arguments.length===1&&(e=fh.newId()),t_("doc","path",e),n instanceof Ou){const s=ot.fromString(e,...t);return n_(s),new zt(n,null,new ye(s))}{if(!(n instanceof zt||n instanceof vs))throw new ce(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return n_(s),new zt(n.firestore,n instanceof vs?n.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="AsyncQueue";class iE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RT(this,"async_queue_retry"),this._c=()=>{const s=Gh();s&&fe(nE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Gh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Gh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ds;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;fe(nE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,zi("INTERNAL UNHANDLED ERROR: ",sE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Kh.createAndSchedule(this,e,t,s,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&ve(47125,{Pc:sE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Bu extends Ou{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new iE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iE(e),this._firestoreClient=void 0,await e}}}function Kx(n,e){const t=typeof n=="object"?n:Vb(),s=typeof n=="string"?n:mu,o=Mb(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const a=yM("firestore");a&&Yx(o,...a)}return o}function rE(n){if(n._terminated)throw new ce(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$x(n),n._firestoreClient}function $x(n){var s,o,a;const e=n._freezeSettings(),t=(function(h,y,p,T){return new dD(h,y,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,XT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Bx(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const y=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bn(Kt.fromBase64String(e))}catch(t){throw new ce(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bn(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vl(e,bn._jsonSchema))return bn.fromBase64String(e.bytes)}}bn._jsonSchemaVersion="firestore/bytes/1.0",bn._jsonSchema={type:Ct("string",bn._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(vl(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Ct("string",di._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vl(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pi(e.vectorValues);throw new ce(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:Ct("string",pi._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=/^__.*__$/;class Xx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}function lE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:n})}}class id{constructor(e,t,s,o,a,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new id({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lE(this.Ac)&&Qx.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Zx{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Pu(e)}Cc(e,t,s,o=!1){return new id({Ac:e,methodName:t,Dc:s,path:Yt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aE(n){const e=n._freezeSettings(),t=Pu(n._databaseId);return new Zx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wx(n,e,t,s,o,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);fE("Data must be an object, but it was:",c,s);const h=uE(s,c);let y,p;if(a.merge)y=new Yn(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const T=[];for(const v of a.mergeFields){const A=e2(e,v,t);if(!c.contains(A))throw new ce(j.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);n2(T,A)||T.push(A)}y=new Yn(T),p=c.fieldTransforms.filter((v=>y.covers(v.field)))}else y=null,p=c.fieldTransforms;return new Xx(new Mn(h),y,p)}function jx(n,e,t,s=!1){return sd(t,n.Cc(s?4:3,e))}function sd(n,e){if(cE(n=eo(n)))return fE("Unsupported field value:",e,n),uE(n,e);if(n instanceof oE)return(function(s,o){if(!lE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const a=[];let c=0;for(const h of s){let y=sd(h,o.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}})(n,e)}return(function(s,o){if((s=eo(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return UD(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=ut.fromDate(s);return{timestampValue:Nu(o.serializer,a)}}if(s instanceof ut){const a=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nu(o.serializer,a)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bn)return{bytesValue:oT(o.serializer,s._byteString)};if(s instanceof zt){const a=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(a))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dh(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof pi)return(function(c,h){return{mapValue:{fields:{[y_]:{stringValue:__},[yu]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return Rh(h.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${uu(s)}`)})(n,e)}function uE(n,e){const t={};return c_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rr(n,((s,o)=>{const a=sd(o,e.mc(s));a!=null&&(t[s]=a)})),{mapValue:{fields:t}}}function cE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof di||n instanceof bn||n instanceof zt||n instanceof oE||n instanceof pi)}function fE(n,e,t){if(!cE(t)||!s_(t)){const s=uu(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function e2(n,e,t){if((e=eo(e))instanceof nd)return e._internalPath;if(typeof e=="string")return hE(n,e);throw zu("Field path arguments must be of type string or ",n,!1,void 0,t)}const t2=new RegExp("[~\\*/\\[\\]]");function hE(n,e,t){if(e.search(t2)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nd(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zu(n,e,t,s,o){const a=s&&!s.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(a||c)&&(y+=" (found",a&&(y+=` in field ${s}`),c&&(y+=` in document ${o}`),y+=")"),new ce(j.INVALID_ARGUMENT,h+n+y)}function n2(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,t,s,o,a){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class i2 extends dE{data(){return super.data()}}function rd(n,e){return typeof e=="string"?hE(n,e):e instanceof nd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class od{}class pE extends od{}function mE(n,e,...t){let s=[];e instanceof od&&s.push(e),s=s.concat(t),(function(a){const c=a.filter((y=>y instanceof ad)).length,h=a.filter((y=>y instanceof ld)).length;if(c>1||c>0&&h>0)throw new ce(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class ld extends pE{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ld(e,t,s)}_apply(e){const t=this._parse(e);return TE(e._query,t),new fr(e.firestore,e.converter,Sh(e._query,t))}_parse(e){const t=aE(e.firestore);return(function(a,c,h,y,p,T,v){let A;if(p.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ce(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){_E(v,T);const V=[];for(const B of v)V.push(yE(y,a,B));A={arrayValue:{values:V}}}else A=yE(y,a,v)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||_E(v,T),A=jx(h,c,v,T==="in"||T==="not-in");return Rt.create(p,T,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ad extends od{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ad(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let c=o;const h=a.getFlattenedFilters();for(const y of h)TE(c,y),c=Sh(c,y)})(e._query,t),new fr(e.firestore,e.converter,Sh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ud extends pE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ud(e,t)}_apply(e){const t=(function(o,a,c){if(o.startAt!==null)throw new ce(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wl(a,c)})(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,(function(o,a){const c=o.explicitOrderBy.concat([a]);return new co(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function gE(n,e="asc"){const t=e,s=rd("orderBy",n);return ud._create(s,t)}function yE(n,e,t){if(typeof(t=eo(t))=="string"){if(t==="")throw new ce(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U_(e)&&t.indexOf("/")!==-1)throw new ce(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ot.fromString(t));if(!ye.isDocumentKey(s))throw new ce(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return v_(n,new ye(s))}if(t instanceof zt)return v_(n,t._key);throw new ce(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uu(t)}.`)}function _E(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TE(n,e){const t=(function(o,a){for(const c of o)for(const h of c.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class r2{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return rr(e,((o,a)=>{s[o]=this.convertValue(a,t)})),s}convertVectorValue(e){var s,o,a;const t=(a=(o=(s=e.fields)==null?void 0:s[yu].arrayValue)==null?void 0:o.values)==null?void 0:a.map((c=>Tt(c.doubleValue)));return new pi(t)}convertGeoPoint(e){return new di(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=pu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){const t=ms(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ot.fromString(e);Ke(dT(s),9688,{name:e});const o=new Cl(s.get(1),s.get(3)),a=new ye(s.popFirst(5));return o.isEqual(t)||zi(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Gu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class To extends dE{constructor(e,t,s,o,a,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(rd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=To._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:Ct("string",To._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class Hu extends To{data(e={}){return super.data(e)}}class Eo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Gu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Hu(this._firestore,this._userDataWriter,s.key,s,new Gu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const y=new Hu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Gu(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const y=new Hu(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Gu(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,T=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),T=c.indexOf(h.doc.key)),{type:l2(h.type),doc:y,oldIndex:p,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),s.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:n})}}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:Ct("string",Eo._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class a2 extends r2{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function EE(n){n=El(n,fr);const e=El(n.firestore,Bu),t=rE(e),s=new a2(e);return s2(n._query),Fx(t,n._query).then((o=>new Eo(e,s,n,o)))}function u2(n){return vE(El(n.firestore,Bu),[new Ih(n._key,fi.none())])}function c2(n,e){const t=El(n.firestore,Bu),s=tE(n),o=o2(n.converter,e);return vE(t,[Wx(aE(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,fi.exists(!1))]).then((()=>s))}function vE(n,e){return(function(s,o){const a=new ds;return s.asyncQueue.enqueueAndForget((async()=>Dx(await Gx(s),o,a))),a.promise})(rE(n),e)}(function(e,t=!0){(function(o){no=o})(xb),ou(new yl("firestore",((s,{instanceIdentifier:o,options:a})=>{const c=s.getProvider("app").getImmediate(),h=new Bu(new $b(s.getProvider("auth-internal")),new Zb(c,s.getProvider("app-check-internal")),(function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ce(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(p.options.projectId,T)})(c,o),c);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),to(Qy,Xy,e),to(Qy,Xy,"esm2020")})();const AE={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyD0yavRTchwhwA97F6lr_9BYkLoXMksLSw",VITE_FIREBASE_APP_ID:"1:360675539401:web:12fa60fc2e4e8ac7a0d018",VITE_FIREBASE_AUTH_DOMAIN:"help-bot-55e76.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"360675539401",VITE_FIREBASE_PROJECT_ID:"help-bot-55e76",VITE_FIREBASE_STORAGE_BUCKET:"help-bot-55e76.firebasestorage.app",VITE_GEMINI_API_KEY:"AIzaSyCQjq9iI6AKP5VYaJ-iQOkQlWGQgh5lbmI"};var SE={};const f2=typeof{url:qi&&qi.tagName.toUpperCase()==="SCRIPT"&&qi.src||new URL("chatbot.js",document.baseURI).href}<"u"&&AE?AE:typeof process<"u"&&SE?SE:{};function hr(...n){for(const e of n){const t=f2[e];if(typeof t=="string"&&t.length>0)return t}}const CE=()=>{var t;const n=hr("VITE_GEMINI_API_KEY","REACT_APP_GEMINI_API_KEY","API_KEY"),e=(t=window.HELP_CHAT_CONFIG)==null?void 0:t.GEMINI_API_KEY;return n||e||null},RE=()=>{var s;const e={...{apiKey:hr("VITE_FIREBASE_API_KEY","REACT_APP_FIREBASE_API_KEY","FIREBASE_API_KEY"),authDomain:hr("VITE_FIREBASE_AUTH_DOMAIN","REACT_APP_FIREBASE_AUTH_DOMAIN","FIREBASE_AUTH_DOMAIN"),projectId:hr("VITE_FIREBASE_PROJECT_ID","REACT_APP_FIREBASE_PROJECT_ID","FIREBASE_PROJECT_ID"),storageBucket:hr("VITE_FIREBASE_STORAGE_BUCKET","REACT_APP_FIREBASE_STORAGE_BUCKET","FIREBASE_STORAGE_BUCKET"),messagingSenderId:hr("VITE_FIREBASE_MESSAGING_SENDER_ID","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","FIREBASE_MESSAGING_SENDER_ID"),appId:hr("VITE_FIREBASE_APP_ID","REACT_APP_FIREBASE_APP_ID","FIREBASE_APP_ID")},...((s=window.HELP_CHAT_CONFIG)==null?void 0:s.FIREBASE)??{}},t=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];for(const o of t){const a=e[o];if(!a||typeof a!="string"||a.length===0)return null}return e},h2=()=>!!CE()&&!!RE();let cd=null,fd=null;const d2=()=>{if(cd)return;const n=RE();if(!n)throw new Error("Firebase config is not set. Please check your environment variables.");cd=Uy(n),fd=Kx(cd)},IE=()=>(fd||d2(),fd),hd=()=>Jx(IE(),"knowledgeBase"),p2=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=t,s.readAsText(n)}),m2=async n=>{const e=hd();for(const t of n){const s=await p2(t);await c2(e,{fileName:t.name,content:s,uploadedAt:new Date})}},g2=async()=>{const n=hd(),e=mE(n,gE("fileName")),t=await EE(e);return t.empty?null:t.docs.map(o=>{const a=o.data();return`--- START OF FILE: ${a.fileName} ---

${a.content}

--- END OF FILE: ${a.fileName} ---`}).join(`

`)},y2=async()=>{const n=hd(),e=mE(n,gE("fileName"));return(await EE(e)).docs.map(s=>{const o=s.data();return{id:s.id,fileName:o.fileName}})},_2=async n=>{const e=tE(IE(),"knowledgeBase",n);await u2(e)};let Fu=null;const T2=()=>{if(Fu)return Fu;const n=CE();if(!n)throw new Error("Gemini API Key is not set. Please check your environment variables.");return Fu=new oM({apiKey:n}),Fu},E2=async n=>{try{const e=await g2();if(!e)return{error:"죄송합니다, 아직 지식 베이스가 준비되지 않았어요. 관리자가 관련 정보를 업로드해야 합니다."};const t="gemini-2.5-flash",s=T2(),o=`당신은 '생활백서봇'이며, 사용자를 돕는 것을 좋아하는 친절한 안내원입니다.

**가장 중요한 목표:** 사용자의 질문에 대해 주어진 "지식 베이스" 내용만을 사용하여 답변해야 합니다.

**매우 중요:** 당신의 전체 출력은 아래 스키마를 엄격하게 따르는 단일 JSON 객체여야 합니다. 절대로 JSON 형식을 벗어나거나, 불필요한 설명을 추가하지 마세요.

\`\`\`json
{
  "answer": "지식 베이스에만 기반한 핵심 답변. 이 부분은 반드시 마크다운 형식을 사용하고, 끝에 출처를 포함해야 합니다.",
  "closing": "추가 질문을 유도하는 짧고 친절한 마무리 인사."
}
\`\`\`

**각 필드별 콘텐츠 규칙:**

1.  **\`answer\` 필드 (핵심 답변):**
    *   **어조:** 항상 친구에게 말하듯 친절하고, 대화하며, 존중하는 어조('해요체')를 사용하세요.
    *   **정보 제한:** **오직** "지식 베이스"에 있는 정보만 사용하세요. 절대로 외부 지식을 사용하거나 답변을 지어내면 안 됩니다.
    *   **마크다운 서식 규칙 (매우 중요):**
        *   **목록:** 목록 항목을 나열할 때는, 각 항목이 **별도의 줄에 표시**되어야 합니다. 각 항목은 \`* \` (별표와 공백)으로 시작해야 합니다.
        *   **줄바꿈:** 목록 앞과 뒤에는 항상 빈 줄(\`\\n\`)을 넣어 단락과 구분해주세요.
        *   **올바른 예시:** "주요 절차는 다음과 같습니다.\\n\\n* 첫 번째 단계: 서류 제출\\n* 두 번째 단계: 서류 검토\\n* 세 번째 단계: 최종 승인"
        *   **잘못된 예시:** "주요 절차는 다음과 같습니다. * 첫 번째 단계 * 두 번째 단계"
        *   **굵은 글씨:** 중요한 키워드는 \`**굵은 글씨**\`로 강조해주세요.
    *   **출처 표기 규칙 (매우 중요):**
        *   답변의 맨 마지막 줄에는 **반드시** 출처를 한 줄로 표기해야 합니다.
        *   출처의 파일명에서는 **반드시** \`.md\` 확장자를 **제거**해야 합니다.
        *   **형식:** \\n\`(출처: [파일명], [섹션 제목] 섹션)\`
        *   **올바른 예시:** \\n\`(출처: 서울아레나 위임전결규정, 2.5. 법인카드 정산 섹션)\`
        *   **잘못된 예시:** \`(출처: 서울아레나 위임전결규정.md, 2.5. 법인카드 정산 섹션)\`
    *   **모르는 질문:** 만약 질문에 대한 정보가 지식 베이스에 없다면, 이 필드에는 **정확히 다음 문장만** 포함해야 합니다: "죄송하지만, 그 내용에 대해서는 제가 아는 정보가 없네요."

2.  **\`closing\` 필드 (마무리 인사):**
    *   대화를 마무리하고 추가 질문을 유도하는 짧은 문장이어야 합니다.
    *   **모르는 질문에 답했을 경우:** "다른 질문이 있으시면 언제든지 말씀해주세요!" 와 같이 자연스럽게 연결되는 문장을 사용하세요.
    *   **일반적인 경우 예시:** "더 궁금한 점이 있으시면 언제든지 다시 물어봐 주세요!", "도움이 되셨나요? 다른 질문도 편하게 해주세요."

당신의 응답은 반드시 이 두 가지 명확한 부분으로 나뉘어 JSON 구조 안에 담겨야 합니다. 절대로 내용을 합치지 마세요.`,a=`
---
지식 베이스:
${e}
---
사용자 질문: "${n}"`,c=await s.models.generateContent({model:t,contents:a,config:{systemInstruction:o,temperature:.2,topP:.8,topK:10,responseMimeType:"application/json",responseSchema:{type:Hn.OBJECT,properties:{answer:{type:Hn.STRING,description:"지식 베이스를 기반으로 한 핵심 답변. 마크다운 형식을 사용하고, 반드시 출처를 포함해야 합니다."},closing:{type:Hn.STRING,description:'답변을 마무리하며 추가 질문을 유도하는 짧은 인사말. (예: "더 궁금한 점이 있으시면 언제든지 다시 물어봐 주세요!")'}},required:["answer","closing"]}}});try{const h=c.text.trim();return JSON.parse(h)}catch(h){return console.error("Failed to parse JSON response:",c.text,h),{error:"죄송합니다. 답변의 형식이 올바르지 않아 표시할 수 없어요."}}}catch(e){return console.error("Error generating content with Gemini:",e),{error:"죄송합니다. 답변을 생성하는 중 오류가 발생했어요. 잠시 후 다시 시도해주세요."}}},v2=()=>{const[n,e]=lt.useState([{id:"init",text:"안녕하세요. 사내규정 관련 궁금한 점은 뭐든 말씀해주세요.",sender:"bot"}]),[t,s]=lt.useState(""),[o,a]=lt.useState(!1),c=y=>{s(y.target.value)},h=lt.useCallback(async y=>{if(y.preventDefault(),!t.trim()||o)return;const p={id:Date.now().toString(),text:t,sender:"user"};e(A=>[...A,p]);const T=t;s(""),a(!0);const v={id:`${Date.now()}-thinking`,text:"잠시만요, 관련 정보를 찾아보고 알려드릴게요. 🤔",sender:"bot"};e(A=>[...A,v]);try{const A=await E2(T);if(e(F=>F.filter(ee=>ee.id!==v.id)),"error"in A){const F={id:`${Date.now()}-error`,text:A.error,sender:"bot"};e(ee=>[...ee,F]);return}const{answer:b,closing:V}=A,B={id:`${Date.now()}-answer`,text:b,sender:"bot"};e(F=>[...F,B]),setTimeout(()=>{const F={id:`${Date.now()}-closing`,text:V,sender:"bot"};e(ee=>[...ee,F])},800)}catch(A){console.error("Error in chat submission process:",A),e(V=>V.filter(B=>B.id!==v.id));const b={id:`${Date.now()}-error-critical`,text:"죄송합니다. 알 수 없는 오류가 발생했어요.",sender:"bot"};e(V=>[...V,b])}finally{a(!1)}},[t,o]);return{messages:n,userInput:t,isLoading:o,handleInputChange:c,handleSubmit:h}},A2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),S2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),C2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:se.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),R2=()=>se.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),I2=()=>se.jsx("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:se.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4 4-4-4h3v-3h2v3z"})}),w2=()=>se.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:se.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});function dd(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var dr=dd();function wE(n){dr=n}var Ol={exec:()=>null};function Fe(n,e=""){let t=typeof n=="string"?n:n.source,s={replace:(o,a)=>{let c=typeof a=="string"?a:a.source;return c=c.replace(on.caret,"$1"),t=t.replace(o,c),s},getRegex:()=>new RegExp(t,e)};return s}var on={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},M2=/^(?:[ \t]*(?:\n|$))+/,b2=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,D2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Bl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,N2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,pd=/(?:[*+-]|\d{1,9}[.)])/,ME=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,bE=Fe(ME).replace(/bull/g,pd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),x2=Fe(ME).replace(/bull/g,pd).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),md=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,V2=/^[^\n]+/,gd=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,P2=Fe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",gd).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),k2=Fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,pd).getRegex(),Yu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yd=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,U2=Fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",yd).replace("tag",Yu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),DE=Fe(md).replace("hr",Bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yu).getRegex(),L2=Fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",DE).getRegex(),_d={blockquote:L2,code:b2,def:P2,fences:D2,heading:N2,hr:Bl,html:U2,lheading:bE,list:k2,newline:M2,paragraph:DE,table:Ol,text:V2},NE=Fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yu).getRegex(),q2={..._d,lheading:x2,table:NE,paragraph:Fe(md).replace("hr",Bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",NE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yu).getRegex()},O2={..._d,html:Fe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",yd).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ol,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Fe(md).replace("hr",Bl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",bE).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},B2=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,z2=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,xE=/^( {2,}|\\)\n(?!\s*$)/,G2=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ju=/[\p{P}\p{S}]/u,Td=/[\s\p{P}\p{S}]/u,VE=/[^\s\p{P}\p{S}]/u,H2=Fe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Td).getRegex(),PE=/(?!~)[\p{P}\p{S}]/u,F2=/(?!~)[\s\p{P}\p{S}]/u,Y2=/(?:[^\s\p{P}\p{S}]|~)/u,J2=/\[(?:[^\[\]`]|`[^`]*?`)*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,kE=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,K2=Fe(kE,"u").replace(/punct/g,Ju).getRegex(),$2=Fe(kE,"u").replace(/punct/g,PE).getRegex(),UE="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Q2=Fe(UE,"gu").replace(/notPunctSpace/g,VE).replace(/punctSpace/g,Td).replace(/punct/g,Ju).getRegex(),X2=Fe(UE,"gu").replace(/notPunctSpace/g,Y2).replace(/punctSpace/g,F2).replace(/punct/g,PE).getRegex(),Z2=Fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,VE).replace(/punctSpace/g,Td).replace(/punct/g,Ju).getRegex(),W2=Fe(/\\(punct)/,"gu").replace(/punct/g,Ju).getRegex(),j2=Fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),eV=Fe(yd).replace("(?:-->|$)","-->").getRegex(),tV=Fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",eV).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ku=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,nV=Fe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ku).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),LE=Fe(/^!?\[(label)\]\[(ref)\]/).replace("label",Ku).replace("ref",gd).getRegex(),qE=Fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",gd).getRegex(),iV=Fe("reflink|nolink(?!\\()","g").replace("reflink",LE).replace("nolink",qE).getRegex(),OE=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Ed={_backpedal:Ol,anyPunctuation:W2,autolink:j2,blockSkip:J2,br:xE,code:z2,del:Ol,emStrongLDelim:K2,emStrongRDelimAst:Q2,emStrongRDelimUnd:Z2,escape:B2,link:nV,nolink:qE,punctuation:H2,reflink:LE,reflinkSearch:iV,tag:tV,text:G2,url:Ol},sV={...Ed,link:Fe(/^!?\[(label)\]\((.*?)\)/).replace("label",Ku).getRegex(),reflink:Fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ku).getRegex()},vd={...Ed,emStrongRDelimAst:X2,emStrongLDelim:$2,url:Fe(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",OE).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Fe(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",OE).getRegex()},rV={...vd,br:Fe(xE).replace("{2,}","*").getRegex(),text:Fe(vd.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},$u={normal:_d,gfm:q2,pedantic:O2},zl={normal:Ed,gfm:vd,breaks:rV,pedantic:sV},oV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},BE=n=>oV[n];function mi(n,e){if(e){if(on.escapeTest.test(n))return n.replace(on.escapeReplace,BE)}else if(on.escapeTestNoEncode.test(n))return n.replace(on.escapeReplaceNoEncode,BE);return n}function zE(n){try{n=encodeURI(n).replace(on.percentDecode,"%")}catch{return null}return n}function GE(n,e){var a;let t=n.replace(on.findPipe,(c,h,y)=>{let p=!1,T=h;for(;--T>=0&&y[T]==="\\";)p=!p;return p?"|":" |"}),s=t.split(on.splitPipe),o=0;if(s[0].trim()||s.shift(),s.length>0&&!((a=s.at(-1))!=null&&a.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;o<s.length;o++)s[o]=s[o].trim().replace(on.slashPipe,"|");return s}function Gl(n,e,t){let s=n.length;if(s===0)return"";let o=0;for(;o<s&&n.charAt(s-o-1)===e;)o++;return n.slice(0,s-o)}function lV(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function HE(n,e,t,s,o){let a=e.href,c=e.title||null,h=n[1].replace(o.other.outputLinkReplace,"$1");s.state.inLink=!0;let y={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:a,title:c,text:h,tokens:s.inlineTokens(h)};return s.state.inLink=!1,y}function aV(n,e,t){let s=n.match(t.other.indentCodeCompensation);if(s===null)return e;let o=s[1];return e.split(`
`).map(a=>{let c=a.match(t.other.beginningSpace);if(c===null)return a;let[h]=c;return h.length>=o.length?a.slice(o.length):a}).join(`
`)}var Qu=class{constructor(n){it(this,"options");it(this,"rules");it(this,"lexer");this.options=n||dr}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Gl(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],s=aV(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=Gl(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:Gl(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=Gl(e[0],`
`).split(`
`),s="",o="",a=[];for(;t.length>0;){let c=!1,h=[],y;for(y=0;y<t.length;y++)if(this.rules.other.blockquoteStart.test(t[y]))h.push(t[y]),c=!0;else if(!c)h.push(t[y]);else break;t=t.slice(y);let p=h.join(`
`),T=p.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${p}`:p,o=o?`${o}
${T}`:T;let v=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(T,a,!0),this.lexer.state.top=v,t.length===0)break;let A=a.at(-1);if((A==null?void 0:A.type)==="code")break;if((A==null?void 0:A.type)==="blockquote"){let b=A,V=b.raw+`
`+t.join(`
`),B=this.blockquote(V);a[a.length-1]=B,s=s.substring(0,s.length-b.raw.length)+B.raw,o=o.substring(0,o.length-b.text.length)+B.text;break}else if((A==null?void 0:A.type)==="list"){let b=A,V=b.raw+`
`+t.join(`
`),B=this.list(V);a[a.length-1]=B,s=s.substring(0,s.length-A.raw.length)+B.raw,o=o.substring(0,o.length-b.raw.length)+B.raw,t=V.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:a,text:o}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),s=t.length>1,o={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let a=this.rules.other.listItemRegex(t),c=!1;for(;n;){let y=!1,p="",T="";if(!(e=a.exec(n))||this.rules.block.hr.test(n))break;p=e[0],n=n.substring(p.length);let v=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,ee=>" ".repeat(3*ee.length)),A=n.split(`
`,1)[0],b=!v.trim(),V=0;if(this.options.pedantic?(V=2,T=v.trimStart()):b?V=e[1].length+1:(V=e[2].search(this.rules.other.nonSpaceChar),V=V>4?1:V,T=v.slice(V),V+=e[1].length),b&&this.rules.other.blankLine.test(A)&&(p+=A+`
`,n=n.substring(A.length+1),y=!0),!y){let ee=this.rules.other.nextBulletRegex(V),ie=this.rules.other.hrRegex(V),X=this.rules.other.fencesBeginRegex(V),oe=this.rules.other.headingBeginRegex(V),he=this.rules.other.htmlBeginRegex(V);for(;n;){let ae=n.split(`
`,1)[0],D;if(A=ae,this.options.pedantic?(A=A.replace(this.rules.other.listReplaceNesting,"  "),D=A):D=A.replace(this.rules.other.tabCharGlobal,"    "),X.test(A)||oe.test(A)||he.test(A)||ee.test(A)||ie.test(A))break;if(D.search(this.rules.other.nonSpaceChar)>=V||!A.trim())T+=`
`+D.slice(V);else{if(b||v.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||X.test(v)||oe.test(v)||ie.test(v))break;T+=`
`+A}!b&&!A.trim()&&(b=!0),p+=ae+`
`,n=n.substring(ae.length+1),v=D.slice(V)}}o.loose||(c?o.loose=!0:this.rules.other.doubleBlankLine.test(p)&&(c=!0));let B=null,F;this.options.gfm&&(B=this.rules.other.listIsTask.exec(T),B&&(F=B[0]!=="[ ] ",T=T.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:p,task:!!B,checked:F,loose:!1,text:T,tokens:[]}),o.raw+=p}let h=o.items.at(-1);if(h)h.raw=h.raw.trimEnd(),h.text=h.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let y=0;y<o.items.length;y++)if(this.lexer.state.top=!1,o.items[y].tokens=this.lexer.blockTokens(o.items[y].text,[]),!o.loose){let p=o.items[y].tokens.filter(v=>v.type==="space"),T=p.length>0&&p.some(v=>this.rules.other.anyLine.test(v.raw));o.loose=T}if(o.loose)for(let y=0;y<o.items.length;y++)o.items[y].loose=!0;return o}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:o}}}table(n){var c;let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=GE(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let h of s)this.rules.other.tableAlignRight.test(h)?a.align.push("right"):this.rules.other.tableAlignCenter.test(h)?a.align.push("center"):this.rules.other.tableAlignLeft.test(h)?a.align.push("left"):a.align.push(null);for(let h=0;h<t.length;h++)a.header.push({text:t[h],tokens:this.lexer.inline(t[h]),header:!0,align:a.align[h]});for(let h of o)a.rows.push(GE(h,a.header.length).map((y,p)=>({text:y,tokens:this.lexer.inline(y),header:!1,align:a.align[p]})));return a}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let a=Gl(t.slice(0,-1),"\\");if((t.length-a.length)%2===0)return}else{let a=lV(e[2],"()");if(a===-2)return;if(a>-1){let c=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,c).trim(),e[3]=""}}let s=e[2],o="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(s);a&&(s=a[1],o=a[3])}else o=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),HE(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=e[s.toLowerCase()];if(!o){let a=t[0].charAt(0);return{type:"text",raw:a,text:a}}return HE(t,o,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(n);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let o=[...s[0]].length-1,a,c,h=o,y=0,p=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,e=e.slice(-1*n.length+o);(s=p.exec(e))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(c=[...a].length,s[3]||s[4]){h+=c;continue}else if((s[5]||s[6])&&o%3&&!((o+c)%3)){y+=c;continue}if(h-=c,h>0)continue;c=Math.min(c,c+h+y);let T=[...s[0]][0].length,v=n.slice(0,o+s.index+T+c);if(Math.min(o,c)%2){let b=v.slice(1,-1);return{type:"em",raw:v,text:b,tokens:this.lexer.inlineTokens(b)}}let A=v.slice(2,-2);return{type:"strong",raw:v,text:A,tokens:this.lexer.inlineTokens(A)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),o=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&o&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(n){var t;let e;if(e=this.rules.inline.url.exec(n)){let s,o;if(e[2]==="@")s=e[0],o="mailto:"+s;else{let a;do a=e[0],e[0]=((t=this.rules.inline._backpedal.exec(e[0]))==null?void 0:t[0])??"";while(a!==e[0]);s=e[0],e[1]==="www."?o="http://"+e[0]:o=e[0]}return{type:"link",raw:e[0],text:s,href:o,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Kn=class vm{constructor(e){it(this,"tokens");it(this,"options");it(this,"state");it(this,"tokenizer");it(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||dr,this.options.tokenizer=this.options.tokenizer||new Qu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:on,block:$u.normal,inline:zl.normal};this.options.pedantic?(t.block=$u.pedantic,t.inline=zl.pedantic):this.options.gfm&&(t.block=$u.gfm,this.options.breaks?t.inline=zl.breaks:t.inline=zl.gfm),this.tokenizer.rules=t}static get rules(){return{block:$u,inline:zl}}static lex(e,t){return new vm(t).lex(e)}static lexInline(e,t){return new vm(t).inlineTokens(e)}lex(e){e=e.replace(on.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var o,a,c;for(this.options.pedantic&&(e=e.replace(on.tabCharGlobal,"    ").replace(on.spaceLine,""));e;){let h;if((a=(o=this.options.extensions)==null?void 0:o.block)!=null&&a.some(p=>(h=p.call({lexer:this},e,t))?(e=e.substring(h.raw.length),t.push(h),!0):!1))continue;if(h=this.tokenizer.space(e)){e=e.substring(h.raw.length);let p=t.at(-1);h.raw.length===1&&p!==void 0?p.raw+=`
`:t.push(h);continue}if(h=this.tokenizer.code(e)){e=e.substring(h.raw.length);let p=t.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.text,this.inlineQueue.at(-1).src=p.text):t.push(h);continue}if(h=this.tokenizer.fences(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.heading(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.hr(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.blockquote(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.list(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.html(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.def(e)){e=e.substring(h.raw.length);let p=t.at(-1);(p==null?void 0:p.type)==="paragraph"||(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.raw,this.inlineQueue.at(-1).src=p.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title},t.push(h));continue}if(h=this.tokenizer.table(e)){e=e.substring(h.raw.length),t.push(h);continue}if(h=this.tokenizer.lheading(e)){e=e.substring(h.raw.length),t.push(h);continue}let y=e;if((c=this.options.extensions)!=null&&c.startBlock){let p=1/0,T=e.slice(1),v;this.options.extensions.startBlock.forEach(A=>{v=A.call({lexer:this},T),typeof v=="number"&&v>=0&&(p=Math.min(p,v))}),p<1/0&&p>=0&&(y=e.substring(0,p+1))}if(this.state.top&&(h=this.tokenizer.paragraph(y))){let p=t.at(-1);s&&(p==null?void 0:p.type)==="paragraph"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):t.push(h),s=y.length!==e.length,e=e.substring(h.raw.length);continue}if(h=this.tokenizer.text(e)){e=e.substring(h.raw.length);let p=t.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=(p.raw.endsWith(`
`)?"":`
`)+h.raw,p.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=p.text):t.push(h);continue}if(e){let p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var h,y,p,T,v;let s=e,o=null;if(this.tokens.links){let A=Object.keys(this.tokens.links);if(A.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)A.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,o.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(o=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=((y=(h=this.options.hooks)==null?void 0:h.emStrongMask)==null?void 0:y.call({lexer:this},s))??s;let a=!1,c="";for(;e;){a||(c=""),a=!1;let A;if((T=(p=this.options.extensions)==null?void 0:p.inline)!=null&&T.some(V=>(A=V.call({lexer:this},e,t))?(e=e.substring(A.raw.length),t.push(A),!0):!1))continue;if(A=this.tokenizer.escape(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.tag(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.link(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(A.raw.length);let V=t.at(-1);A.type==="text"&&(V==null?void 0:V.type)==="text"?(V.raw+=A.raw,V.text+=A.text):t.push(A);continue}if(A=this.tokenizer.emStrong(e,s,c)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.codespan(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.br(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.del(e)){e=e.substring(A.raw.length),t.push(A);continue}if(A=this.tokenizer.autolink(e)){e=e.substring(A.raw.length),t.push(A);continue}if(!this.state.inLink&&(A=this.tokenizer.url(e))){e=e.substring(A.raw.length),t.push(A);continue}let b=e;if((v=this.options.extensions)!=null&&v.startInline){let V=1/0,B=e.slice(1),F;this.options.extensions.startInline.forEach(ee=>{F=ee.call({lexer:this},B),typeof F=="number"&&F>=0&&(V=Math.min(V,F))}),V<1/0&&V>=0&&(b=e.substring(0,V+1))}if(A=this.tokenizer.inlineText(b)){e=e.substring(A.raw.length),A.raw.slice(-1)!=="_"&&(c=A.raw.slice(-1)),a=!0;let V=t.at(-1);(V==null?void 0:V.type)==="text"?(V.raw+=A.raw,V.text+=A.text):t.push(A);continue}if(e){let V="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(V);break}else throw new Error(V)}}return t}},Xu=class{constructor(n){it(this,"options");it(this,"parser");this.options=n||dr}space(n){return""}code({text:n,lang:e,escaped:t}){var a;let s=(a=(e||"").match(on.notSpaceStart))==null?void 0:a[0],o=n.replace(on.endingNewline,"")+`
`;return s?'<pre><code class="language-'+mi(s)+'">'+(t?o:mi(o,!0))+`</code></pre>
`:"<pre><code>"+(t?o:mi(o,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,s="";for(let c=0;c<n.items.length;c++){let h=n.items[c];s+=this.listitem(h)}let o=e?"ol":"ul",a=e&&t!==1?' start="'+t+'"':"";return"<"+o+a+`>
`+s+"</"+o+`>
`}listitem(n){var t;let e="";if(n.task){let s=this.checkbox({checked:!!n.checked});n.loose?((t=n.tokens[0])==null?void 0:t.type)==="paragraph"?(n.tokens[0].text=s+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=s+" "+mi(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):e+=s+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let o=0;o<n.header.length;o++)t+=this.tablecell(n.header[o]);e+=this.tablerow({text:t});let s="";for(let o=0;o<n.rows.length;o++){let a=n.rows[o];t="";for(let c=0;c<a.length;c++)t+=this.tablecell(a[c]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${mi(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let s=this.parser.parseInline(t),o=zE(n);if(o===null)return s;n=o;let a='<a href="'+n+'"';return e&&(a+=' title="'+mi(e)+'"'),a+=">"+s+"</a>",a}image({href:n,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let o=zE(n);if(o===null)return mi(t);n=o;let a=`<img src="${n}" alt="${t}"`;return e&&(a+=` title="${mi(e)}"`),a+=">",a}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:mi(n.text)}},Ad=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},$n=class Am{constructor(e){it(this,"options");it(this,"renderer");it(this,"textRenderer");this.options=e||dr,this.options.renderer=this.options.renderer||new Xu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ad}static parse(e,t){return new Am(t).parse(e)}static parseInline(e,t){return new Am(t).parseInline(e)}parse(e,t=!0){var o,a;let s="";for(let c=0;c<e.length;c++){let h=e[c];if((a=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&a[h.type]){let p=h,T=this.options.extensions.renderers[p.type].call({parser:this},p);if(T!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(p.type)){s+=T||"";continue}}let y=h;switch(y.type){case"space":{s+=this.renderer.space(y);continue}case"hr":{s+=this.renderer.hr(y);continue}case"heading":{s+=this.renderer.heading(y);continue}case"code":{s+=this.renderer.code(y);continue}case"table":{s+=this.renderer.table(y);continue}case"blockquote":{s+=this.renderer.blockquote(y);continue}case"list":{s+=this.renderer.list(y);continue}case"html":{s+=this.renderer.html(y);continue}case"def":{s+=this.renderer.def(y);continue}case"paragraph":{s+=this.renderer.paragraph(y);continue}case"text":{let p=y,T=this.renderer.text(p);for(;c+1<e.length&&e[c+1].type==="text";)p=e[++c],T+=`
`+this.renderer.text(p);t?s+=this.renderer.paragraph({type:"paragraph",raw:T,text:T,tokens:[{type:"text",raw:T,text:T,escaped:!0}]}):s+=T;continue}default:{let p='Token with "'+y.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return s}parseInline(e,t=this.renderer){var o,a;let s="";for(let c=0;c<e.length;c++){let h=e[c];if((a=(o=this.options.extensions)==null?void 0:o.renderers)!=null&&a[h.type]){let p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(h.type)){s+=p||"";continue}}let y=h;switch(y.type){case"escape":{s+=t.text(y);break}case"html":{s+=t.html(y);break}case"link":{s+=t.link(y);break}case"image":{s+=t.image(y);break}case"strong":{s+=t.strong(y);break}case"em":{s+=t.em(y);break}case"codespan":{s+=t.codespan(y);break}case"br":{s+=t.br(y);break}case"del":{s+=t.del(y);break}case"text":{s+=t.text(y);break}default:{let p='Token with "'+y.type+'" type was not found.';if(this.options.silent)return console.error(p),"";throw new Error(p)}}}return s}},Hl=(Wu=class{constructor(n){it(this,"options");it(this,"block");this.options=n||dr}preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?Kn.lex:Kn.lexInline}provideParser(){return this.block?$n.parse:$n.parseInline}},it(Wu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),it(Wu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Wu),uV=class{constructor(...n){it(this,"defaults",dd());it(this,"options",this.setOptions);it(this,"parse",this.parseMarkdown(!0));it(this,"parseInline",this.parseMarkdown(!1));it(this,"Parser",$n);it(this,"Renderer",Xu);it(this,"TextRenderer",Ad);it(this,"Lexer",Kn);it(this,"Tokenizer",Qu);it(this,"Hooks",Hl);this.use(...n)}walkTokens(n,e){var s,o;let t=[];for(let a of n)switch(t=t.concat(e.call(this,a)),a.type){case"table":{let c=a;for(let h of c.header)t=t.concat(this.walkTokens(h.tokens,e));for(let h of c.rows)for(let y of h)t=t.concat(this.walkTokens(y.tokens,e));break}case"list":{let c=a;t=t.concat(this.walkTokens(c.items,e));break}default:{let c=a;(o=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&o[c.type]?this.defaults.extensions.childTokens[c.type].forEach(h=>{let y=c[h].flat(1/0);t=t.concat(this.walkTokens(y,e))}):c.tokens&&(t=t.concat(this.walkTokens(c.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let a=e.renderers[o.name];a?e.renderers[o.name]=function(...c){let h=o.renderer.apply(this,c);return h===!1&&(h=a.apply(this,c)),h}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=e[o.level];a?a.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),s.extensions=e),t.renderer){let o=this.defaults.renderer||new Xu(this.defaults);for(let a in t.renderer){if(!(a in o))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let c=a,h=t.renderer[c],y=o[c];o[c]=(...p)=>{let T=h.apply(o,p);return T===!1&&(T=y.apply(o,p)),T||""}}s.renderer=o}if(t.tokenizer){let o=this.defaults.tokenizer||new Qu(this.defaults);for(let a in t.tokenizer){if(!(a in o))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let c=a,h=t.tokenizer[c],y=o[c];o[c]=(...p)=>{let T=h.apply(o,p);return T===!1&&(T=y.apply(o,p)),T}}s.tokenizer=o}if(t.hooks){let o=this.defaults.hooks||new Hl;for(let a in t.hooks){if(!(a in o))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let c=a,h=t.hooks[c],y=o[c];Hl.passThroughHooks.has(a)?o[c]=p=>{if(this.defaults.async&&Hl.passThroughHooksRespectAsync.has(a))return(async()=>{let v=await h.call(o,p);return y.call(o,v)})();let T=h.call(o,p);return y.call(o,T)}:o[c]=(...p)=>{if(this.defaults.async)return(async()=>{let v=await h.apply(o,p);return v===!1&&(v=await y.apply(o,p)),v})();let T=h.apply(o,p);return T===!1&&(T=y.apply(o,p)),T}}s.hooks=o}if(t.walkTokens){let o=this.defaults.walkTokens,a=t.walkTokens;s.walkTokens=function(c){let h=[];return h.push(a.call(this,c)),o&&(h=h.concat(o.call(this,c))),h}}this.defaults={...this.defaults,...s}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,e){return Kn.lex(n,e??this.defaults)}parser(n,e){return $n.parse(n,e??this.defaults)}parseMarkdown(n){return(e,t)=>{let s={...t},o={...this.defaults,...s},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=n),o.async)return(async()=>{let c=o.hooks?await o.hooks.preprocess(e):e,h=await(o.hooks?await o.hooks.provideLexer():n?Kn.lex:Kn.lexInline)(c,o),y=o.hooks?await o.hooks.processAllTokens(h):h;o.walkTokens&&await Promise.all(this.walkTokens(y,o.walkTokens));let p=await(o.hooks?await o.hooks.provideParser():n?$n.parse:$n.parseInline)(y,o);return o.hooks?await o.hooks.postprocess(p):p})().catch(a);try{o.hooks&&(e=o.hooks.preprocess(e));let c=(o.hooks?o.hooks.provideLexer():n?Kn.lex:Kn.lexInline)(e,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let h=(o.hooks?o.hooks.provideParser():n?$n.parse:$n.parseInline)(c,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(c){return a(c)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let s="<p>An error occurred:</p><pre>"+mi(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},pr=new uV;function $e(n,e){return pr.parse(n,e)}$e.options=$e.setOptions=function(n){return pr.setOptions(n),$e.defaults=pr.defaults,wE($e.defaults),$e},$e.getDefaults=dd,$e.defaults=dr,$e.use=function(...n){return pr.use(...n),$e.defaults=pr.defaults,wE($e.defaults),$e},$e.walkTokens=function(n,e){return pr.walkTokens(n,e)},$e.parseInline=pr.parseInline,$e.Parser=$n,$e.parser=$n.parse,$e.Renderer=Xu,$e.TextRenderer=Ad,$e.Lexer=Kn,$e.lexer=Kn.lex,$e.Tokenizer=Qu,$e.Hooks=Hl,$e.parse=$e,$e.options,$e.setOptions,$e.use,$e.walkTokens,$e.parseInline,$n.parse,Kn.lex;const Zu=()=>se.jsx("div",{className:"inline-block h-5 w-5 animate-spin rounded-full border-2 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:se.jsx("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})}),cV=()=>{const{messages:n,userInput:e,isLoading:t,handleInputChange:s,handleSubmit:o}=v2(),a=lt.useRef(null),c=lt.useRef(null),h=()=>{var y;(y=a.current)==null||y.scrollIntoView({behavior:"smooth"})};return lt.useEffect(()=>{var y;(y=c.current)==null||y.focus()},[]),lt.useEffect(()=>{h()},[n,t]),se.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[se.jsxs("div",{className:"flex-1 p-3 overflow-y-auto space-y-4",children:[n.map(y=>se.jsx("div",{className:`flex ${y.sender==="user"?"justify-end":"justify-start"}`,children:se.jsx("div",{className:`max-w-[80%] px-3 py-2 rounded-2xl ${y.sender==="user"?"bg-primary text-black rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:y.sender==="user"?se.jsx("p",{className:"text-sm break-words",children:y.text}):se.jsx("div",{className:"text-sm break-words bot-message",dangerouslySetInnerHTML:{__html:$e.parse(y.text)}})})},y.id)),t&&se.jsx("div",{className:"flex justify-start",children:se.jsx("div",{className:"max-w-[80%] px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 rounded-bl-none",children:se.jsx(Zu,{})})}),se.jsx("div",{ref:a})]}),se.jsx("div",{className:"p-3 border-t border-gray-200 bg-white",children:se.jsxs("form",{onSubmit:o,className:"flex items-center space-x-2",children:[se.jsx("input",{ref:c,type:"text",value:e,onChange:s,placeholder:"Ask a question...",className:"flex-1 w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary transition text-sm",disabled:t}),se.jsx("button",{type:"submit",disabled:t||e.trim()==="",className:"bg-primary text-black p-3 rounded-full hover:bg-primary-dark disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Send message",children:se.jsx(C2,{})})]})})]})},fV=({onAuthSuccess:n})=>{const[e,t]=lt.useState(""),[s,o]=lt.useState(!1),[a,c]=lt.useState(""),[h,y]=lt.useState([]),[p,T]=lt.useState(!1),[v,A]=lt.useState(""),[b,V]=lt.useState([]),[B,F]=lt.useState(!0),[ee,ie]=lt.useState(null),X=lt.useCallback(async()=>{F(!0);try{const w=await y2();V(w)}catch(w){console.error("Failed to fetch knowledge files:",w),A("기존 파일을 불러오지 못했습니다.")}finally{F(!1)}},[]);lt.useEffect(()=>{s&&X()},[s,X]);const oe=w=>{w.preventDefault(),e==="adminarena"?(o(!0),c("")):c("비밀번호가 올바르지 않습니다.")},he=w=>{if(w.target.files){const M=Array.from(w.target.files),P=M.filter(k=>k.type==="text/markdown"||k.name.endsWith(".md"));P.length!==M.length?A("마크다운(.md)이 아닌 파일은 제외되었습니다."):A(""),y(P)}},ae=lt.useCallback(async()=>{if(h.length===0){A("먼저 파일을 선택해주세요.");return}T(!0),A(`파일 ${h.length}개를 업로드 중입니다...`);try{await m2(h),A("지식 베이스가 성공적으로 업데이트되었습니다!"),y([]),await X()}catch(w){console.error("Upload failed:",w),A("업로드에 실패했습니다. 콘솔을 확인해주세요.")}finally{T(!1)}},[h,X]),D=lt.useCallback(async w=>{if(window.confirm(`'${w.fileName}' 파일을 정말 삭제하시겠습니까?`)){ie(w.id);try{await _2(w.id),A(`'${w.fileName}' 파일이 삭제되었습니다.`),V(M=>M.filter(P=>P.id!==w.id))}catch(M){console.error("Delete failed:",M),A(`'${w.fileName}' 파일 삭제에 실패했습니다.`)}finally{ie(null)}}},[]);return s?se.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[se.jsxs("div",{className:"p-4 space-y-4",children:[se.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"지식 베이스 업데이트"}),se.jsx("div",{children:se.jsxs("label",{htmlFor:"file-upload",className:"w-full flex flex-col items-center px-4 py-6 bg-white text-primary-dark rounded-lg shadow-md tracking-wide uppercase border border-primary cursor-pointer hover:bg-primary hover:text-black",children:[se.jsx(I2,{}),se.jsx("span",{className:"mt-2 text-base leading-normal",children:h.length>0?`${h.length}개 파일 선택됨`:".md 파일 선택"}),se.jsx("input",{id:"file-upload",type:"file",accept:".md,text/markdown",className:"hidden",onChange:he,multiple:!0})]})}),se.jsx("button",{onClick:ae,disabled:h.length===0||p,className:"w-full bg-primary text-black font-bold py-2 px-4 rounded-lg hover:bg-primary-dark transition duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:p?se.jsx(Zu,{}):`파일 ${h.length}개 업로드`}),v&&se.jsx("p",{className:"text-gray-600 text-sm text-center",children:v})]}),se.jsxs("div",{className:"flex-1 p-4 border-t border-gray-200 overflow-y-auto",children:[se.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"업로드된 파일"}),B?se.jsx("div",{className:"flex justify-center",children:se.jsx(Zu,{})}):b.length>0?se.jsx("ul",{className:"space-y-2",children:b.map(w=>se.jsxs("li",{className:"flex items-center justify-between bg-white p-2 rounded-lg shadow-sm",children:[se.jsx("span",{className:"text-gray-800 truncate pr-2",children:w.fileName}),se.jsx("button",{onClick:()=>D(w),disabled:ee===w.id,className:"text-red-500 hover:text-red-700 disabled:text-gray-400 p-1 rounded-full",children:ee===w.id?se.jsx(Zu,{}):se.jsx(w2,{})})]},w.id))}):se.jsx("p",{className:"text-gray-500 text-center",children:"업로드된 지식 파일이 없습니다."})]})]}):se.jsx("div",{className:"p-6 h-full flex flex-col items-center justify-center bg-gray-50",children:se.jsxs("form",{onSubmit:oe,className:"w-full max-w-sm",children:[se.jsx("h3",{className:"text-xl font-semibold mb-4 text-center text-gray-800",children:"관리자 로그인"}),se.jsx("p",{className:"text-center text-gray-500 mb-6",children:"지식 베이스를 관리하려면 비밀번호를 입력하세요."}),se.jsx("div",{className:"mb-4",children:se.jsx("input",{type:"password",value:e,onChange:w=>t(w.target.value),placeholder:"비밀번호",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})}),se.jsx("button",{type:"submit",className:"w-full bg-primary text-black font-bold py-2 px-4 rounded-lg hover:bg-primary-dark transition duration-300",children:"로그인"}),a&&se.jsx("p",{className:"text-red-500 text-sm mt-4 text-center",children:a})]})})},hV=()=>{const[n,e]=lt.useState(!1),[t,s]=lt.useState("chat"),o=()=>{e(!n),n&&s("chat")};lt.useEffect(()=>{const h=y=>{y.key==="Escape"&&(e(!1),s("chat"))};return n&&window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[n]);const a=t==="chat"?"생활백서봇":"관리자 페이지",c=n?"animate-slide-in-up":"animate-slide-out-down";return se.jsxs(se.Fragment,{children:[se.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:se.jsx("button",{onClick:o,className:`bg-primary text-black rounded-full p-4 shadow-lg hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 transition-transform transform hover:scale-110 ${n?"opacity-0 scale-0":"opacity-100 scale-100"}`,style:{animationFillMode:"forwards"},"aria-label":n?"Close chat":"Open chat",children:se.jsx(A2,{})})}),n&&se.jsxs("div",{className:`fixed bottom-5 right-5 z-40 w-[90vw] max-w-md h-[70vh] max-h-[600px] flex flex-col bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden ${c}`,children:[se.jsxs("header",{className:"flex items-center justify-between p-3 bg-primary text-black rounded-t-2xl shadow-md",children:[se.jsx("h2",{className:"text-sm font-semibold",children:a}),se.jsxs("div",{className:"flex items-center space-x-2",children:[se.jsx("button",{onClick:()=>s(t==="chat"?"adminLogin":"chat"),className:"p-1 rounded-full hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Toggle Admin Panel",title:"Admin Panel",children:se.jsx(R2,{})}),se.jsx("button",{onClick:o,className:"p-1 rounded-full hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Close",children:se.jsx(S2,{})})]})]}),se.jsxs("div",{className:"flex-1 min-h-0",children:[t==="chat"&&se.jsx(cV,{}),t==="adminLogin"&&se.jsx(fV,{onAuthSuccess:()=>s("chat")})]})]})]})};function dV(){return h2()?se.jsxs("div",{className:"font-sans",children:[se.jsx("div",{className:"w-full h-screen bg-gray-100 flex items-center justify-center text-gray-700",children:se.jsxs("div",{className:"text-center",children:[se.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Your Website Content"}),se.jsx("p",{className:"text-lg",children:"The AI Chatbot will appear in the bottom right corner."}),se.jsx("p",{className:"text-sm mt-4 text-gray-500",children:"(테스트 설정이 완료되었습니다. 챗봇과 대화해보세요!)"})]})}),se.jsx(hV,{})]}):se.jsx("div",{className:"w-full h-screen bg-red-50 flex items-center justify-center font-sans p-4",children:se.jsxs("div",{className:"w-full max-w-2xl bg-white p-8 rounded-xl shadow-lg border border-red-200",children:[se.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-red-800 mb-2",children:"Configuration Error"}),se.jsx("p",{className:"text-gray-600 mb-6",children:"Application is not configured correctly. Please make sure you have set up your environment variables."})]})})}(function(){if(window.__CHATBOT_WIDGET_MOUNTED__)return;window.__CHATBOT_WIDGET_MOUNTED__=!0;let e=document.getElementById("chatbot-root");e||(e=document.createElement("div"),e.id="chatbot-root",document.body.appendChild(e)),vS.createRoot(e).render(se.jsx(dS.StrictMode,{children:se.jsx(dV,{})}))})()})();
